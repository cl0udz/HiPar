"main";let db;_866‍.w("../../lib/mongo",[["db",["db"],function(v){db=v}]]);let parse;_866‍.w("../../lib/parse",[["default",["parse"],function(v){parse=v}]]);


class AppSettingsService {
	constructor() {}

	getSettings(appKey) {
		return db
			.collection('appSettings')
			.findOne({ key: appKey }, { _id: 0, key: 0 });
	}

	updateSettings(appKey, data) {
		if (Object.keys(data).length === 0) {
			return new Error('Required fields are missing');
		}

		delete data.key;

		return db
			.collection('appSettings')
			.updateOne(
				{ key: appKey },
				{
					$set: data
				},
				{ upsert: true }
			)
			.then(res => this.getSettings(appKey));
	}
}

_866‍.d(new AppSettingsService());
