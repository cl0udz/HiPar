'use strict';

function buildLogicalOperator(operator, values) {
  if (!values.length) return '';
  var result = values.join(' ' + operator + ' ');
  if (values.length > 1) result = '(' + result + ')';
  return result;
}

module.exports = function (dialect) {
  dialect.operators.logical.add('$and', {
    fn: function fn(values) {
      return buildLogicalOperator('and', values);
    }
  });
  dialect.operators.logical.add('$or', {
    fn: function fn(values) {
      return buildLogicalOperator('or', values);
    }
  });
  dialect.operators.logical.add('$not', {
    fn: function fn(values) {
      return 'not ' + buildLogicalOperator('and', values);
    }
  });
  dialect.operators.logical.add('$nor', {
    fn: function fn(values) {
      return 'not ' + buildLogicalOperator('or', values);
    }
  });
};