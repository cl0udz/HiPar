"use strict"; // Import.

var assert = require('assert');

var JsonRecords = require('../app'); // Constants.


var TEST_FILE_PATH = './tests/temp/main.json';
/**
 * Check adding.
 */

describe('Check adding.', function () {
  it('Should contain 1 object with property "w" that equals 9.', function () {
    var jr = initTestRecords();
    jr.add({
      q: 9
    });
    var records = jr.get(function (v) {
      return v.q === 9;
    });
    assert.equal(records.length, 1);
  });
});
/**
 * Check removing.
 */

describe('Check removing.', function () {
  it('Should not contain objects with property "a" that equals 1.', function () {
    var jr = initTestRecords();
    jr.remove(function (v) {
      return v.a === 1;
    });
    var records = jr.get(function (v) {
      return v.a === 1;
    });
    assert.equal(records.length, 0);
  });
});
/**
 * Check updating.
 */

describe('Check updating.', function () {
  it('Should contain 2 objects with property "c" that equals 8.', function () {
    var jr = initTestRecords();
    jr.update(function (v) {
      return v.a === 1;
    }, {
      c: 8
    });
    var records = jr.get(function (v) {
      return v.c === 8;
    });
    assert.equal(records.length, 2);
  });
});
/**
 * Init test records.
 * @return {JsonRecords}
 */

function initTestRecords() {
  var jr = new JsonRecords(TEST_FILE_PATH);
  jr.remove();
  jr.add({
    a: 1,
    b: 2,
    c: 3
  });
  jr.add({
    a: 1,
    b: 2,
    c: 3
  });
  jr.add({
    a: 4,
    b: 5,
    c: 6
  });
  return jr;
}