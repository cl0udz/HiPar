"use strict";

var _jquery = _interopRequireDefault(require("jquery"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

(0, _jquery["default"])(document).ready(function () {
  (0, _jquery["default"])('#database').popover({
    content: 'Database names cannot be empty, must have fewer than 64 characters and must not contain /. "$*<>:|?',
    placement: 'left'
  });
  var $deleteButton = (0, _jquery["default"])('.deleteButton');
  $deleteButton.tooltip({
    title: 'Warning! Are you sure you want to delete this database? All collections and documents will be deleted.'
  });
  $deleteButton.on('click', function onDeleteClick(event) {
    $deleteButton.tooltip('hide');
    event.preventDefault();
    var $target = (0, _jquery["default"])(this);
    var parentForm = $target.parent();
    var dbName = $target.attr('database-name');
    (0, _jquery["default"])('#confirmation-input').attr('shouldbe', dbName);
    (0, _jquery["default"])('#modal-database-name').text(dbName);
    (0, _jquery["default"])('#confirm-deletion').modal({
      backdrop: 'static',
      keyboard: false
    }).one('shown.bs.modal', function () {
      (0, _jquery["default"])('#confirmation-input').focus();
    }).one('click', '#delete', function () {
      var input = (0, _jquery["default"])('#confirmation-input');

      if (input.val().toLowerCase() === input.attr('shouldbe').toLowerCase()) {
        parentForm.trigger('submit');
      }
    });
  });
});