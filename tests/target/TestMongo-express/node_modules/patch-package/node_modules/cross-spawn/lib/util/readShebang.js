'use strict';

require("core-js/modules/es.array.fill");

require("core-js/modules/es.date.to-string");

require("core-js/modules/es.object.to-string");

require("core-js/modules/es.regexp.to-string");

require("core-js/modules/es.array.fill");

require("core-js/modules/es.date.to-string");

require("core-js/modules/es.object.to-string");

require("core-js/modules/es.regexp.to-string");

var fs = require('fs');

var shebangCommand = require('shebang-command');

function readShebang(command) {
  // Read the first 150 bytes from the file
  var size = 150;
  var buffer;

  if (Buffer.alloc) {
    // Node.js v4.5+ / v5.10+
    buffer = Buffer.alloc(size);
  } else {
    // Old Node.js API
    buffer = new Buffer(size);
    buffer.fill(0); // zero-fill
  }

  var fd;

  try {
    fd = fs.openSync(command, 'r');
    fs.readSync(fd, buffer, 0, size, 0);
    fs.closeSync(fd);
  } catch (e) {}
  /* Empty */
  // Attempt to extract shebang (null is returned if not a shebang)


  return shebangCommand(buffer.toString());
}

module.exports = readShebang;