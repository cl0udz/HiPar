'use strict';

var t = require('tap');

var test = t.test;

var FindMyWay = require('../');

test('Nested static parametric route, url with parameter common prefix > 1', function (t) {
  t.plan(1);
  var findMyWay = FindMyWay({
    defaultRoute: function defaultRoute(req, res) {
      t.fail('Should not be defaultRoute');
    }
  });
  findMyWay.on('GET', '/api/foo/b2', function (req, res) {
    res.end('{"message":"hello world"}');
  });
  findMyWay.on('GET', '/api/foo/bar/qux', function (req, res) {
    res.end('{"message":"hello world"}');
  });
  findMyWay.on('GET', '/api/foo/:id/bar', function (req, res) {
    res.end('{"message":"hello world"}');
  });
  findMyWay.on('GET', '/foo', function (req, res) {
    res.end('{"message":"hello world"}');
  });
  t.deepEqual(findMyWay.find('GET', '/api/foo/b-123/bar').params, {
    id: 'b-123'
  });
});