'use strict';

var Ajv = require('ajv');

var fs = require('fs');

var path = require('path');

var pack = require('ajv-pack');

var ajv = new Ajv({
  sourceCode: true // this option is required by ajv-pack

});
var validate = ajv.compile(require('ajv/lib/refs/json-schema-draft-07.json'));
var moduleCode = `// This file is autogenerated by ${path.basename(__filename)}, do not edit

function nop () { return true }

${pack(ajv, validate).replace(/root\.refVal\[0\]/gm, 'nop')}
`;
fs.writeFileSync(path.join(__dirname, 'schema-validator.js'), moduleCode);