'use strict';

var test = require('tap').test;

var build = require('..');

test('object with required field', function (t) {
  t.plan(3);
  var schema = {
    title: 'object with required field',
    type: 'object',
    properties: {
      str: {
        type: 'string'
      },
      num: {
        type: 'integer'
      }
    },
    required: ['str']
  };
  var stringify = build(schema);

  try {
    stringify({
      str: 'string'
    });
    t.pass();
  } catch (e) {
    t.fail();
  }

  try {
    stringify({
      num: 42
    });
    t.fail();
  } catch (e) {
    t.is(e.message, 'str is required!');
    t.pass();
  }
});
test('required numbers', function (t) {
  t.plan(3);
  var schema = {
    title: 'object with required field',
    type: 'object',
    properties: {
      str: {
        type: 'string'
      },
      num: {
        type: 'integer'
      }
    },
    required: ['num']
  };
  var stringify = build(schema);

  try {
    stringify({
      num: 42
    });
    t.pass();
  } catch (e) {
    t.fail();
  }

  try {
    stringify({
      num: 'aaa'
    });
    t.fail();
  } catch (e) {
    t.is(e.message, 'num is required!');
    t.pass();
  }
});