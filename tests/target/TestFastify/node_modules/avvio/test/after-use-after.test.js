'use strict';

var t = require('tap');

var boot = require('..');

var app = {};
boot(app);
t.plan(6);
app.use(function (f, opts, cb) {
  cb();
}).after(function () {
  t.pass('this is just called');
  app.use(function (f, opts, cb) {
    t.pass('this is just called');
    cb();
  });
}).after(function () {
  t.pass('this is just called');
  app.use(function (f, opts, cb) {
    t.pass('this is just called');
    cb();
  });
}).after(function (err, cb) {
  t.pass('this is just called');
  cb(err);
});
app.ready().then(function () {
  t.pass('ready');
})["catch"](function () {
  t.fail('this should not be called');
});