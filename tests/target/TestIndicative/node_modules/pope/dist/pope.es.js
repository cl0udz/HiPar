"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pope = pope;
exports.prop = prop;

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function isObj(r) {
  return null !== r && "object" == _typeof(r);
}

function prop(r, e) {
  if (!isObj(r) || "string" != typeof e) return r;

  for (var n = e.split("."), i = 0; i < n.length; i++) {
    var o = n[i];
    if (null === (r = r.hasOwnProperty(o) ? r[o] : null)) break;
  }

  return r;
}

function pope(r, e, n) {
  n = n || {
    skipUndefined: !1,
    throwOnUndefined: !1
  };

  for (var i, o = /{{2}(.+?)}{2}/g, p = r; null !== (i = o.exec(r));) {
    var t = i[1].trim();

    if (t) {
      var f = prop(e, t);
      if (void 0 !== f && null !== f) p = p.replace(i[0], f);else {
        if (n.throwOnUndefined) {
          var l = new Error("Missing value for " + i[0]);
          throw l.key = t, l.code = "E_MISSING_KEY", l;
        }

        n.skipUndefined || (p = p.replace(i[0], ""));
      }
    }
  }

  return p;
}