{
  "version": 3,
  "sources": [
    "node_modules/browser-pack-flat/_prelude",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/derby/lib/documentListeners.js",
    "node_modules/derby-templates/lib/templates.js",
    "node_modules/derby-templates/lib/options.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/serialize-object/index.js",
    "node_modules/events/events.js",
    "node_modules/uuid/rng-browser.js",
    "node_modules/uuid/uuid.js",
    "node_modules/racer/lib/Model/Model.js",
    "node_modules/fast-deep-equal/index.js",
    "node_modules/process/browser.js",
    "node_modules/racer/lib/util.js",
    "node_modules/racer/lib/Model/unbundle.js",
    "node_modules/racer/lib/Model/events.js",
    "node_modules/racer/lib/Model/paths.js",
    "node_modules/racer/lib/Model/Doc.js",
    "node_modules/racer/lib/Model/LocalDoc.js",
    "node_modules/racer/lib/Model/collections.js",
    "node_modules/racer/lib/Model/mutators.js",
    "node_modules/arraydiff/index.js",
    "node_modules/racer/lib/Model/setDiff.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/sharedb/lib/emitter.js",
    "node_modules/sharedb/lib/logger/logger.js",
    "node_modules/sharedb/lib/logger/index.js",
    "node_modules/sharedb/lib/error.js",
    "node_modules/ot-json0/lib/bootstrapTransform.js",
    "node_modules/ot-json0/lib/text0.js",
    "node_modules/ot-json0/lib/json0.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/ot-json0/lib/index.js",
    "node_modules/sharedb/lib/types.js",
    "node_modules/sharedb/lib/client/doc.js",
    "node_modules/sharedb/lib/client/query.js",
    "node_modules/sharedb/lib/snapshot.js",
    "node_modules/sharedb/lib/client/snapshot-request/snapshot-request.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/sharedb/lib/util.js",
    "node_modules/sharedb/lib/client/snapshot-request/snapshot-version-request.js",
    "node_modules/sharedb/lib/client/snapshot-request/snapshot-timestamp-request.js",
    "node_modules/sharedb/lib/client/connection.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/sharedb/lib/client/index.js",
    "node_modules/racer/lib/Model/RemoteDoc.js",
    "node_modules/racer/lib/Model/connection.js",
    "node_modules/racer/lib/Model/Query.js",
    "node_modules/racer/lib/Model/CollectionCounter.js",
    "node_modules/racer/lib/Model/subscriptions.js",
    "node_modules/racer/lib/Model/contexts.js",
    "node_modules/racer/lib/Model/defaultFns.js",
    "node_modules/racer/lib/Model/fn.js",
    "node_modules/racer/lib/Model/filter.js",
    "node_modules/racer/lib/Model/refList.js",
    "node_modules/racer/lib/Model/ref.js",
    "node_modules/racer/lib/Model/index.js",
    "node_modules/racer/lib/Racer.js",
    "node_modules/racer/lib/index.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/browserchannel/dist/bcsocket-uncompressed.js",
    "node_modules/racer-highway/lib/browser/socket.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/racer-highway/lib/browser/index.js",
    "node_modules/path-browserify/index.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/tracks/vendor/express/utils.js",
    "node_modules/tracks/vendor/express/router/route.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/qs/lib/utils.js",
    "node_modules/qs/lib/formats.js",
    "node_modules/qs/lib/stringify.js",
    "node_modules/qs/lib/parse.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/qs/lib/index.js",
    "node_modules/punycode/punycode.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/url/util.js",
    "node_modules/querystring-es3/decode.js",
    "node_modules/querystring-es3/encode.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/querystring-es3/index.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/url/url.js",
    "node_modules/tracks/lib/router.js",
    "node_modules/tracks/lib/History.js",
    "node_modules/tracks/lib/browser.js",
    "node_modules/derby-templates/lib/contexts.js",
    "node_modules/derby-templates/lib/operatorFns.js",
    "node_modules/saddle/index.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/derby-templates/lib/util.js",
    "node_modules/derby-templates/lib/expressions.js",
    "node_modules/derby-templates/index.js",
    "node_modules/derby/lib/Dom.js",
    "node_modules/derby/lib/Controller.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/derby/lib/components.js",
    "node_modules/derby/lib/eventmodel.js",
    "/home/wupco/hp/HiPar/tests/target/TestDerbyJs/node_modules/derby/lib/textDiff.js",
    "node_modules/derby/lib/Page.js",
    "node_modules/derby/lib/_views.js",
    "node_modules/derby/lib/App.js",
    "node_modules/derby/lib/Derby.js",
    "node_modules/derby",
    "node_modules/browser-pack-flat/_postlude",
    "hello/index.js"
  ],
  "names": [
    "require",
    "exposedRequire",
    "e",
    "r",
    "m",
    "hasOwnProperty",
    "createModuleFactory",
    "t",
    "exports",
    "parent",
    "_$documentListeners_18",
    "module",
    "inputSupportsSelection",
    "input",
    "type",
    "inputIsNumberValue",
    "multiple",
    "add",
    "doc",
    "addEventListener",
    "documentInput",
    "documentChange",
    "parseFloat",
    "window",
    "navigator",
    "appVersion",
    "split",
    "document",
    "activeElement",
    "target",
    "createElement",
    "value",
    "valueAsNumber",
    "oldInputValue",
    "inputValue",
    "apply",
    "this",
    "arguments",
    "tagName",
    "setInputValue",
    "setBoundProperty",
    "setOptionBindings",
    "node",
    "firstChild",
    "nextSibling",
    "hasChildNodes",
    "property",
    "binding",
    "$bindAttributes",
    "isUnbound",
    "template",
    "expression",
    "set",
    "context",
    "pass",
    "$event",
    "segments",
    "pathSegments",
    "model",
    "controller",
    "_$textDiff_20",
    "onTextInput",
    "textDiffBinding",
    "serializeObject",
    "_$serializeObject_64",
    "DependencyOptions",
    "_$options_8",
    "concat",
    "_$util_10",
    "hasKeys",
    "traverseAndCreate",
    "concatArrayDependencies",
    "dependencies",
    "expressions",
    "options",
    "i",
    "length",
    "concatDependencies",
    "expressionDependencies",
    "getDependencies",
    "key",
    "_$saddle_63",
    "Marker",
    "View",
    "ViewInstance",
    "DynamicViewInstance",
    "ViewParent",
    "ContextClosure",
    "Views",
    "MarkupHook",
    "ElementOn",
    "ComponentOn",
    "AsProperty",
    "AsObject",
    "AsObjectComponent",
    "AsArray",
    "AsArrayComponent",
    "emptyTemplate",
    "Template",
    "prototype",
    "unbound",
    "Binding",
    "resolve",
    "shouldIgnoreTemplate",
    "content",
    "Doctype",
    "Text",
    "DynamicText",
    "Comment",
    "DynamicComment",
    "Html",
    "DynamicHtml",
    "Element",
    "concatMapDependencies",
    "attributes",
    "DynamicElement",
    "Block",
    "meta",
    "blockType",
    "blockContext",
    "child",
    "ConditionalBlock",
    "condition",
    "getCondition",
    "end",
    "concatSubArrayDependencies",
    "contents",
    "EachBlock",
    "items",
    "get",
    "itemContext",
    "eachChild",
    "elseContent",
    "Attribute",
    "DynamicAttribute",
    "markerHooks",
    "emit",
    "$component",
    "markerNode",
    "data",
    "call",
    "ViewAttributesMap",
    "source",
    "len",
    "ViewArraysMap",
    "item",
    "views",
    "name",
    "nameSegments",
    "lastSegment",
    "pop",
    "namespace",
    "join",
    "registeredName",
    "attributesMap",
    "arraysMap",
    "arrays",
    "unminified",
    "string",
    "literal",
    "componentFactory",
    "fromSerialized",
    "hooks",
    "initHooks",
    "view",
    "nameExpression",
    "ViewsMap",
    "nameMap",
    "tagMap",
    "elementMap",
    "keyExpression",
    "Object",
    "create",
    "constructor",
    "serialize",
    "instance",
    "_isComponent",
    "extend",
    "_initComponent",
    "init",
    "_queueCreate",
    "viewContext",
    "queue",
    "unescaped",
    "parse",
    "getFragment",
    "fragment",
    "appendTo",
    "attachTo",
    "componentChild",
    "_parse",
    "marker",
    "unshift",
    "Error",
    "_find",
    "viewChild",
    "contextView",
    "getView",
    "find",
    "message",
    "findErrorMessage",
    "nameDependencies",
    "viewDependencies",
    "parentContext",
    "forViewParent",
    "closureContext",
    "closureChild",
    "equals",
    "other",
    "map",
    "match",
    "segmentsDepth",
    "testSegments",
    "slice",
    "splice",
    "register",
    "mapName",
    "replace",
    "tag",
    "element",
    "deserialize",
    "setTemplate",
    "forServer",
    "server",
    "minify",
    "serverOnly",
    "push",
    "args",
    "names",
    "keys",
    "elementOn",
    "$destroyListeners",
    "event",
    "modelData",
    "$element",
    "out",
    "component",
    "on",
    "Array",
    "object",
    "addListeners",
    "addDestroyListener",
    "listener",
    "array",
    "comparePosition",
    "index",
    "indexOf",
    "compareDocumentPosition",
    "templates",
    "_$templates_9",
    "setIgnoreTemplate",
    "ignoreTemplate",
    "serializeArgs",
    "serializeValue",
    "formatString",
    "isArray",
    "objectCreate",
    "objectCreatePolyfill",
    "objectKeys",
    "objectKeysPolyfill",
    "bind",
    "Function",
    "functionBindPolyfill",
    "EventEmitter",
    "_events",
    "_eventsCount",
    "_maxListeners",
    "undefined",
    "_$EventEmitter_21",
    "defaultMaxListeners",
    "hasDefineProperty",
    "o",
    "defineProperty",
    "x",
    "err",
    "$getMaxListeners",
    "that",
    "emitNone",
    "handler",
    "isFn",
    "self",
    "listeners",
    "arrayClone",
    "emitOne",
    "arg1",
    "emitTwo",
    "arg2",
    "emitThree",
    "arg3",
    "emitMany",
    "_addListener",
    "prepend",
    "events",
    "existing",
    "TypeError",
    "newListener",
    "warned",
    "w",
    "String",
    "emitter",
    "count",
    "console",
    "warn",
    "onceWrapper",
    "fired",
    "removeListener",
    "wrapFn",
    "_onceWrap",
    "state",
    "wrapped",
    "_listeners",
    "unwrap",
    "evlistener",
    "unwrapListeners",
    "listenerCount",
    "spliceOne",
    "list",
    "k",
    "n",
    "arr",
    "copy",
    "ret",
    "proto",
    "F",
    "obj",
    "fn",
    "enumerable",
    "arg",
    "setMaxListeners",
    "isNaN",
    "getMaxListeners",
    "er",
    "doError",
    "error",
    "addListener",
    "prependListener",
    "once",
    "prependOnceListener",
    "position",
    "originalListener",
    "shift",
    "removeAllListeners",
    "rawListeners",
    "eventNames",
    "Reflect",
    "ownKeys",
    "rng",
    "crypto",
    "global",
    "msCrypto",
    "getRandomValues",
    "_rnds8",
    "Uint8Array",
    "_rnds",
    "Math",
    "random",
    "_$rng_86",
    "_byteToHex",
    "_hexToByte",
    "toString",
    "substr",
    "s",
    "buf",
    "offset",
    "ii",
    "toLowerCase",
    "oct",
    "unparse",
    "bth",
    "_seedBytes",
    "_nodeId",
    "_clockseq",
    "_lastMSecs",
    "_lastNSecs",
    "v1",
    "b",
    "clockseq",
    "msecs",
    "Date",
    "getTime",
    "nsecs",
    "dt",
    "tl",
    "tmh",
    "v4",
    "rnds",
    "uuid",
    "_$uuid_87",
    "Model",
    "INITS",
    "_$Model_43",
    "root",
    "inits",
    "debug",
    "ChildModel",
    "_context",
    "_at",
    "_pass",
    "_silent",
    "_eventContext",
    "_preventCompose",
    "id",
    "_child",
    "keyList",
    "hasProp",
    "_$equal_22",
    "equal",
    "a",
    "arrA",
    "arrB",
    "dateA",
    "dateB",
    "regexpA",
    "RegExp",
    "regexpB",
    "process",
    "_$browser_28",
    "cachedSetTimeout",
    "cachedClearTimeout",
    "defaultSetTimout",
    "defaultClearTimeout",
    "runTimeout",
    "fun",
    "setTimeout",
    "runClearTimeout",
    "clearTimeout",
    "draining",
    "currentQueue",
    "queueIndex",
    "cleanUpNextTick",
    "drainQueue",
    "timeout",
    "run",
    "Item",
    "noop",
    "nextTick",
    "title",
    "browser",
    "env",
    "argv",
    "version",
    "versions",
    "off",
    "cwd",
    "chdir",
    "dir",
    "umask",
    "isServer",
    "AsyncGroup",
    "cb",
    "isDone",
    "copyObject",
    "equalsNaN",
    "isArrayIndex",
    "segment",
    "test",
    "mayImpact",
    "min",
    "_$util_62",
    "asyncGroup",
    "group",
    "castSegments",
    "contains",
    "deepCopy",
    "deepEqual",
    "lookup",
    "mergeInto",
    "to",
    "from",
    "mayImpactAny",
    "segmentsList",
    "serverRequire",
    "serverUse",
    "plugin",
    "use",
    "plugins",
    "_plugins",
    "unbundle",
    "collectionName",
    "connection",
    "startBulk",
    "_initQueries",
    "queries",
    "collections",
    "collection",
    "getOrCreateDoc",
    "contextId",
    "contexts",
    "contextData",
    "contextModel",
    "fetchedDocs",
    "fetchDoc",
    "_fetchedDocs",
    "increment",
    "subscribedDocs",
    "subscribeDoc",
    "createdDocs",
    "createDoc",
    "endBulk",
    "refs",
    "ref",
    "refLists",
    "refList",
    "fns",
    "start",
    "filters",
    "_filters",
    "__EventEmitter_50",
    "patternContained",
    "pattern",
    "listenerSegments",
    "patternSegments",
    "Passed",
    "previous",
    "eventListener",
    "eventType",
    "arg4",
    "subpattern",
    "isPath",
    "useEventObjects",
    "path",
    "modelEventListener",
    "modelEventListenerLegacy",
    "eventContext",
    "testFn",
    "testPatternFn",
    "modelListener",
    "eventArgs",
    "captures",
    "eventFactory",
    "getEventFactory",
    "ChangeEvent",
    "InsertEvent",
    "RemoveEvent",
    "MoveEvent",
    "LoadEvent",
    "UnloadEvent",
    "concreteEventFactory",
    "passed",
    "values",
    "removed",
    "howMany",
    "previousDocument",
    "endingRest",
    "stripRestWildcard",
    "patternLen",
    "patternSegment",
    "remainder",
    "lastIndex",
    "exec",
    "MUTATOR_EVENTS",
    "change",
    "insert",
    "remove",
    "move",
    "load",
    "unload",
    "_defaultCallback",
    "_emitError",
    "_mutatorEventQueue",
    "wrapCallback",
    "JSON",
    "stringify",
    "stringifyErr",
    "_emit",
    "queued",
    "_on",
    "g",
    "_removeAllListeners",
    "invert",
    "silent",
    "removeContextListeners",
    "createScoped",
    "scoped",
    "_$paths_55",
    "mixin",
    "_splitPath",
    "subpath",
    "scope",
    "at",
    "levels",
    "max",
    "leaf",
    "lastIndexOf",
    "_$Doc_41",
    "Doc",
    "collectionData",
    "_errorMessage",
    "description",
    "_$LocalDoc_42",
    "LocalDoc",
    "_updateCollectionData",
    "nodeCreateArray",
    "_apply",
    "del",
    "byNumber",
    "_validatedApply",
    "_arrayApply",
    "stringInsert",
    "stringRemove",
    "_createImplied",
    "nextKey",
    "validate",
    "CollectionMap",
    "ModelData",
    "DocMap",
    "CollectionData",
    "Collection",
    "docs",
    "noKeys",
    "getCollection",
    "getDoc",
    "_get",
    "getCopy",
    "_getCopy",
    "getDeepCopy",
    "_getDeepCopy",
    "getOrCreateCollection",
    "_getDocConstructor",
    "destroy",
    "silentModel",
    "_removeAllRefs",
    "_stopAll",
    "_removeAllFilters",
    "_del",
    "_mutate",
    "docSegments",
    "shareDoc",
    "oldPreventCompose",
    "preventCompose",
    "_set",
    "_dereference",
    "fnCb",
    "setNull",
    "_setNull",
    "setEach",
    "_setEach",
    "_create",
    "createNull",
    "_createNull",
    "_add",
    "_increment",
    "_push",
    "_unshift",
    "_insert",
    "inserted",
    "_pop",
    "_shift",
    "_remove",
    "_move",
    "moved",
    "text",
    "_stringInsert",
    "$stringInsert",
    "_stringRemove",
    "$stringRemove",
    "subtypeSubmit",
    "subtype",
    "subtypeOp",
    "_subtypeSubmit",
    "$subtype",
    "op",
    "_$arrayDiff_2",
    "arrayDiff",
    "InsertDiff",
    "RemoveDiff",
    "MoveDiff",
    "strictEqual",
    "before",
    "after",
    "equalFn",
    "beforeLength",
    "afterLength",
    "moves",
    "beforeMarked",
    "afterMarked",
    "beforeIndex",
    "beforeItem",
    "afterIndex",
    "removes",
    "inserts",
    "j",
    "insertsLength",
    "removesLength",
    "movesLength",
    "earlier",
    "outputMoves",
    "later",
    "toJSON",
    "diffDeep",
    "diff",
    "itemSegments",
    "_applyArrayDiff",
    "_setDiff",
    "setDiff",
    "setDiffDeep",
    "_setDiffDeep",
    "finished",
    "setArrayDiff",
    "_setArrayDiff",
    "setArrayDiffDeep",
    "_setArrayDiffDeep",
    "_equalFn",
    "__EventEmitter_72",
    "Constructor",
    "_$emitter_72",
    "SUPPORTED_METHODS",
    "Logger",
    "defaultMethods",
    "forEach",
    "method",
    "setMethods",
    "_$Logger_75",
    "overrides",
    "logger",
    "_$logger_74",
    "ShareDBError",
    "code",
    "captureStackTrace",
    "stack",
    "CODES",
    "ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",
    "ERR_APPLY_SNAPSHOT_NOT_PROVIDED",
    "ERR_CLIENT_ID_BADLY_FORMED",
    "ERR_CONNECTION_STATE_TRANSITION_INVALID",
    "ERR_DATABASE_ADAPTER_NOT_FOUND",
    "ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",
    "ERR_DATABASE_METHOD_NOT_IMPLEMENTED",
    "ERR_DEFAULT_TYPE_MISMATCH",
    "ERR_DOC_MISSING_VERSION",
    "ERR_DOC_ALREADY_CREATED",
    "ERR_DOC_DOES_NOT_EXIST",
    "ERR_DOC_TYPE_NOT_RECOGNIZED",
    "ERR_DOC_WAS_DELETED",
    "ERR_INFLIGHT_OP_MISSING",
    "ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",
    "ERR_MAX_SUBMIT_RETRIES_EXCEEDED",
    "ERR_MESSAGE_BADLY_FORMED",
    "ERR_MILESTONE_ARGUMENT_INVALID",
    "ERR_OP_ALREADY_SUBMITTED",
    "ERR_OP_NOT_ALLOWED_IN_PROJECTION",
    "ERR_OP_SUBMIT_REJECTED",
    "ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",
    "ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",
    "ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",
    "ERR_OT_OP_BADLY_FORMED",
    "ERR_OT_OP_NOT_PROVIDED",
    "ERR_PROTOCOL_VERSION_NOT_SUPPORTED",
    "ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",
    "ERR_SNAPSHOT_READ_SILENT_REJECTION",
    "ERR_SNAPSHOT_READS_REJECTED",
    "ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",
    "ERR_TYPE_CANNOT_BE_PROJECTED",
    "ERR_UNKNOWN_ERROR",
    "_$ShareDBError_73",
    "_$bootstrapTransform_23",
    "bootstrapTransform",
    "transformComponent",
    "checkValidOp",
    "append",
    "transformX",
    "leftOp",
    "rightOp",
    "left",
    "right",
    "destRight",
    "newRightOp",
    "rightComponent",
    "newLeftOp",
    "nextC",
    "pair",
    "l",
    "transform",
    "otherOp",
    "_$text0_26",
    "uri",
    "initial",
    "strInject",
    "s1",
    "pos",
    "s2",
    "checkValidComponent",
    "c",
    "p",
    "d",
    "snapshot",
    "deleted",
    "_append",
    "newOp",
    "last",
    "compose",
    "op1",
    "op2",
    "normalize",
    "transformPosition",
    "insertAfter",
    "transformCursor",
    "side",
    "_tc",
    "dest",
    "otherC",
    "newC",
    "intersectStart",
    "intersectEnd",
    "invertComponent",
    "reverse",
    "__isArray_25",
    "isObject",
    "clone",
    "json",
    "subtypes",
    "convertFromText",
    "si",
    "sd",
    "convertToText",
    "registerSubtype",
    "c_",
    "oi",
    "od",
    "li",
    "ld",
    "na",
    "lm",
    "op_",
    "iop",
    "checkList",
    "elem",
    "checkObj",
    "container",
    "shatter",
    "results",
    "incrementalApply",
    "_yield",
    "smallOp",
    "pathMatches",
    "p1",
    "p2",
    "ignoreLast",
    "commonLengthForOps",
    "alen",
    "blen",
    "canOpAffectPath",
    "common",
    "common2",
    "cplength",
    "otherCplength",
    "oc",
    "commonOperand",
    "res",
    "otherFrom",
    "otherTo",
    "_$json_25",
    "_$lib_24",
    "_$types_77",
    "defaultType",
    "ERROR_CODE",
    "inflightFetch",
    "inflightSubscribe",
    "inflightUnsubscribe",
    "pendingFetch",
    "subscribed",
    "wantSubscribe",
    "inflightOp",
    "pendingOps",
    "applyStack",
    "pushActionCallback",
    "inflight",
    "isDuplicate",
    "callback",
    "lastCallback",
    "client",
    "result",
    "clientOp",
    "serverOp",
    "callEach",
    "callbacks",
    "called",
    "_$Doc_66",
    "whenNothingPending",
    "unsubscribe",
    "_destroyDoc",
    "_setType",
    "newType",
    "ingestSnapshot",
    "v",
    "hasWritePending",
    "fetch",
    "hasPending",
    "_emitNothingPending",
    "_emitResponseError",
    "_handleFetch",
    "_handleSubscribe",
    "_handleUnsubscribe",
    "_handleOp",
    "_rollback",
    "src",
    "seq",
    "_opAcknowledged",
    "transformErr",
    "_hardRollback",
    "_otApply",
    "_onConnectionStateChanged",
    "canSend",
    "flush",
    "_resubscribe",
    "subscribe",
    "sendFetch",
    "sendSubscribe",
    "sendUnsubscribe",
    "paused",
    "_sendOp",
    "stackLength",
    "componentOp",
    "_popApplyStack",
    "createDeserialized",
    "oldData",
    "sentAt",
    "now",
    "retries",
    "sendOp",
    "_submit",
    "_pushOp",
    "composed",
    "_tryCompose",
    "ops",
    "submitOp",
    "pause",
    "resume",
    "_clearInflightOp",
    "allOpsHadCallbacks",
    "Query",
    "action",
    "query",
    "extra",
    "ready",
    "sent",
    "_$Query_68",
    "send",
    "q",
    "_destroyQuery",
    "_handleResponse",
    "_finishResponse",
    "wait",
    "finish",
    "_ingestSnapshots",
    "snapshots",
    "_handleError",
    "_handleDiff",
    "newDocs",
    "_handleExtra",
    "_$Snapshot_76",
    "Snapshot",
    "_$SnapshotRequest_69",
    "SnapshotRequest",
    "requestId",
    "_message",
    "metadata",
    "doNothing",
    "_$util_78",
    "isInteger",
    "Number",
    "isFinite",
    "floor",
    "isValidVersion",
    "isValidTimestamp",
    "timestamp",
    "_$SnapshotVersionRequest_71",
    "SnapshotVersionRequest",
    "_$SnapshotTimestampRequest_70",
    "SnapshotTimestampRequest",
    "ts",
    "connectionState",
    "socket",
    "readyState",
    "Connection",
    "nextQueryId",
    "nextSnapshotRequestId",
    "_snapshotRequests",
    "agent",
    "bindToSocket",
    "wrapErrorData",
    "errorData",
    "fullMessage",
    "_$Connection_65",
    "close",
    "onmessage",
    "onopen",
    "onerror",
    "onclose",
    "newState",
    "_setState",
    "info",
    "request",
    "handleMessage",
    "reason",
    "protocol",
    "_handleBulkMessage",
    "_handleSnapshotFetch",
    "getExisting",
    "dataForId",
    "_reset",
    "bulk",
    "actions",
    "_sendBulk",
    "f",
    "u",
    "versionId",
    "ids",
    "versionsCount",
    "_sendAction",
    "_addDoc",
    "_createQuery",
    "createFetchQuery",
    "createSubscribeQuery",
    "_firstDoc",
    "_firstQuery",
    "_firstSnapshotRequest",
    "_nothingPendingRetry",
    "snapshotRequest",
    "fetchSnapshot",
    "fetchSnapshotByTimestamp",
    "_$client_67",
    "types",
    "_$RemoteDoc_45",
    "RemoteDoc",
    "$remote",
    "debugMutations",
    "remoteMutations",
    "_initShareDoc",
    "createInsertOp",
    "ListInsertOp",
    "ImpliedOp",
    "ObjectReplaceOp",
    "ObjectInsertOp",
    "ObjectDeleteOp",
    "ListReplaceOp",
    "ListRemoveOp",
    "ListMoveOp",
    "StringInsertOp",
    "StringRemoveOp",
    "IncrementOp",
    "SubtypeOp",
    "defined",
    "disableSubmit",
    "isLocal",
    "_onOp",
    "log",
    "allowCompose",
    "createConnection",
    "bundle",
    "_createSocket",
    "_finishCreateConnection",
    "connect",
    "open",
    "disconnect",
    "reconnect",
    "getAgent",
    "_isLocal",
    "firstCharcter",
    "charAt",
    "Queries",
    "$query",
    "hash",
    "queryHash",
    "idsSegments",
    "extraSegments",
    "_pendingSubscribeCallbacks",
    "subscribeCount",
    "fetchCount",
    "created",
    "shareQuery",
    "idMap",
    "resultsIds",
    "_$Query_44",
    "_queries",
    "db",
    "_getOrCreateQuery",
    "QueryConstructor",
    "sanitizeQuery",
    "counts",
    "_setExtra",
    "resultIndex",
    "_addMapIds",
    "countIndex",
    "fetched",
    "setContext",
    "fetchQuery",
    "getIds",
    "_maybeUnloadDocs",
    "_setResults",
    "subscribeQuery",
    "_getShareResults",
    "fetchOnly",
    "_shareFetchedSubscribe",
    "_shareSubscribe",
    "_subscribeCb",
    "_flushSubscribeCallbacks",
    "shareDocs",
    "_removeMapIds",
    "unloadDelay",
    "_diffMapIds",
    "addedIds",
    "removedIds",
    "newMap",
    "_setResultIds",
    "_maybeUnloadDoc",
    "pendingCallback",
    "unfetch",
    "unfetchQuery",
    "finishUnfetchQuery",
    "unsubscribeQuery",
    "finishUnsubscribeQuery",
    "unsubscribeQueryCallback",
    "getExtra",
    "idsPath",
    "refIds",
    "refExtra",
    "relPath",
    "extraPath",
    "_contexts",
    "subscribedQueries",
    "fetchedQueries",
    "serialized",
    "_$CollectionCounter_40",
    "CollectionCounter",
    "reset",
    "decrement",
    "_subscribedDocs",
    "_forSubscribable",
    "argumentsObject",
    "docMethod",
    "unfetchDoc",
    "finishUnfetchDoc",
    "unsubscribeDoc",
    "finishUnsubscribeDoc",
    "unsubscribeDocCallback",
    "_hasDocReferences",
    "Contexts",
    "FetchedQueries",
    "SubscribedQueries",
    "Context",
    "mapIncrement",
    "mapDecrement",
    "getOrCreateContext",
    "unloadAll",
    "defaultFns",
    "_$defaultFns_49",
    "DefaultFns",
    "FnPair",
    "getReverse",
    "setReverse",
    "0",
    "asc",
    "desc",
    "NamedFns",
    "parseStartArguments",
    "hasPath",
    "inputs",
    "inputPaths",
    "FromMap",
    "Fns",
    "_namedFns",
    "fromMap",
    "Fn",
    "$fn",
    "getFn",
    "setFn",
    "fromSegments",
    "inputsSegments",
    "copyInput",
    "copyOutput",
    "mode",
    "async",
    "eventPending",
    "_fns",
    "onInput",
    "onOutput",
    "evaluate",
    "parsed",
    "stop",
    "_stop",
    "fromPath",
    "stopAll",
    "_onInput",
    "_setValue",
    "parseFilterArguments",
    "Filters",
    "Filter",
    "filterFn",
    "sortFn",
    "$filter",
    "filterName",
    "sortName",
    "skip",
    "limit",
    "filter",
    "sort",
    "update",
    "removeAllFilters",
    "_slice",
    "begin",
    "getInputs",
    "callFilter",
    "_removeRef",
    "_refLists",
    "$refList",
    "onMutation",
    "patchFromEvent",
    "fromLength",
    "segmentsLength",
    "toSegments",
    "toSegmentsByItem",
    "updateIdForValue",
    "setNewToValues",
    "deleteRemoved",
    "itemById",
    "idByItem",
    "outSegments",
    "patchToEvent",
    "toLength",
    "indices",
    "indicesByItem",
    "removeIndex",
    "indicesLen",
    "remaining",
    "dereferenced",
    "newIndices",
    "oldIndices",
    "equivalentArrays",
    "patchIdsEvent",
    "idsLength",
    "idByIndex",
    "RefList",
    "__FromMap_57",
    "RefLists",
    "toPath",
    "dereference",
    "addIndexListeners",
    "onIndexChange",
    "patch",
    "_refs",
    "updateIndices",
    "patched",
    "refIndex",
    "refChange",
    "parentSegments",
    "refLoad",
    "refUnload",
    "refInsert",
    "refRemove",
    "refMove",
    "__addListener_56",
    "toMap",
    "numRefs",
    "setterModel",
    "noopDereference",
    "parentToMap",
    "Ref",
    "$ref",
    "parentTos",
    "parentTo",
    "__FromMap_56",
    "ToMap",
    "Refs",
    "listMapAdd",
    "listMapRemove",
    "_canRefTo",
    "removeRef",
    "removeAllRefs",
    "_removeMapRefs",
    "forArrayMutator",
    "ignore",
    "doAgain",
    "_$Model_53",
    "__EventEmitter_61",
    "Racer",
    "_$Racer_61",
    "util",
    "createModel",
    "_$lib_racer",
    "aa",
    "ba",
    "ca",
    "da",
    "propertyIsEnumerable",
    "ea",
    "fa",
    "ga",
    "ha",
    "ia",
    "ja",
    "pa",
    "Hc",
    "h",
    "ka",
    "la",
    "ma",
    "oa",
    "qa",
    "ra",
    "ua",
    "va",
    "wa",
    "ya",
    "sa",
    "abs",
    "ta",
    "xa",
    "userAgent",
    "za",
    "product",
    "Aa",
    "y",
    "Ba",
    "z",
    "Da",
    "Ca",
    "documentMode",
    "Ea",
    "Fa",
    "opera",
    "Ga",
    "Ha",
    "Ia",
    "Ja",
    "A",
    "K",
    "parseInt",
    "La",
    "Ma",
    "compatMode",
    "Na",
    "Oa",
    "Pa",
    "Qa",
    "Ra",
    "Sa",
    "location",
    "href",
    "decodeURIComponent",
    "hostname",
    "Ta",
    "Ua",
    "Va",
    "Wa",
    "B",
    "Xa",
    "Ya",
    "Za",
    "$a",
    "ab",
    "bb",
    "O",
    "N",
    "C",
    "eb",
    "D",
    "E",
    "fb",
    "gb",
    "hb",
    "ib",
    "I",
    "jb",
    "R",
    "kb",
    "ub",
    "lb",
    "qb",
    "G",
    "rb",
    "sb",
    "H",
    "tb",
    "encodeURI",
    "vb",
    "charCodeAt",
    "mb",
    "encodeURIComponent",
    "nb",
    "ob",
    "pb",
    "substring",
    "J",
    "wb",
    "eval",
    "xb",
    "yb",
    "zb",
    "Ab",
    "Bb",
    "Cb",
    "\"",
    "\\",
    "/",
    "\b",
    "\f",
    "\n",
    "\r",
    "\t",
    "\u000b",
    "Db",
    "Eb",
    "Fb",
    "callee",
    "caller",
    "Gb",
    "Hb",
    "Ib",
    "Jb",
    "L",
    "rc",
    "Kb",
    "qc",
    "$b",
    "Lb",
    "Mb",
    "Nb",
    "Ob",
    "Pb",
    "Qb",
    "getParent",
    "mc",
    "timeStamp",
    "markTimeline",
    "msWriteProfilerMark",
    "lineNumber",
    "fileName",
    "Ic",
    "filename",
    "sourceURL",
    "$googDebugFname",
    "Ka",
    "Z",
    "Rb",
    "Sb",
    "Tb",
    "M",
    "Ub",
    "Vb",
    "Wb",
    "Xb",
    "Yb",
    "P",
    "Zb",
    "ac",
    "bc",
    "cc",
    "dc",
    "capture",
    "ec",
    "gc",
    "fc",
    "hc",
    "ic",
    "Q",
    "currentTarget",
    "jc",
    "kc",
    "relatedTarget",
    "charCode",
    "keyCode",
    "button",
    "screenY",
    "screenX",
    "clientY",
    "clientX",
    "offsetY",
    "offsetX",
    "metaKey",
    "shiftKey",
    "altKey",
    "ctrlKey",
    "srcElement",
    "nodeName",
    "fromElement",
    "toElement",
    "layerX",
    "layerY",
    "pageX",
    "pageY",
    "defaultPrevented",
    "preventDefault",
    "returnValue",
    "lc",
    "nc",
    "pc",
    "attachEvent",
    "sc",
    "tc",
    "uc",
    "W",
    "removeEventListener",
    "detachEvent",
    "vc",
    "wc",
    "Boolean",
    "parentNode",
    "xc",
    "handleEvent",
    "yc",
    "zc",
    "Gc",
    "dispatchEvent",
    "enabled",
    "setInterval",
    "Ac",
    "Fc",
    "Bc",
    "Cc",
    "Dc",
    "Ec",
    "ActiveXObject",
    "XMLHttpRequest",
    "headers",
    "T",
    "Jc",
    "Kc",
    "Lc",
    "Oc",
    "ontimeout",
    "Mc",
    "abort",
    "Pc",
    "Qc",
    "Rc",
    "Sc",
    "S",
    "statusText",
    "Nc",
    "onreadystatechange",
    "status",
    "Tc",
    "responseText",
    "Uc",
    "Vc",
    "toUpperCase",
    "FormData",
    "setRequestHeader",
    "responseType",
    "withCredentials",
    "isActive",
    "Wc",
    "Xc",
    "Yc",
    "U",
    "Y",
    "Zc",
    "$c",
    "X",
    "$",
    "ad",
    "bd",
    "dd",
    "ed",
    "fd",
    "gd",
    "hd",
    "jd",
    "nd",
    "qd",
    "V",
    "pd",
    "rd",
    "write",
    "parentWindow",
    "rpcClose",
    "body",
    "appendChild",
    "innerHTML",
    "td",
    "md",
    "ud",
    "vd",
    "onload",
    "onabort",
    "Image",
    "wd",
    "yd",
    "Ad",
    "zd",
    "Bd",
    "Cd",
    "Ed",
    "Fd",
    "Gd",
    "kd",
    "cancel",
    "xd",
    "correctHostPrefix",
    "Dd",
    "Hd",
    "Id",
    "Jd",
    "size",
    "Kd",
    "Yd",
    "Md",
    "Pd",
    "Qd",
    "Sd",
    "Rd",
    "Nd",
    "round",
    "getAdditionalParams",
    "badMapError",
    "Td",
    "Ud",
    "Vd",
    "Ld",
    "okToMakeRequest",
    "getNetworkTestImageUri",
    "Wd",
    "channelError",
    "Od",
    "channelClosed",
    "port",
    "Xd",
    "OSID",
    "OAID",
    "channelHandleMultipleArrays",
    "channelOpened",
    "channelHandleArray",
    "4",
    "6",
    "7",
    "8",
    "2",
    "9",
    "5",
    "10",
    "11",
    "cd",
    "reconnectTime",
    "extraHeaders",
    "extraParams",
    "affinity",
    "affinityParam",
    "CLOSED",
    "prev",
    "OPEN",
    "CONNECTING",
    "crossDomainXhr",
    "failFast",
    "sendMap",
    "_S",
    "canSendWhileConnecting",
    "canSendJSON",
    "CLOSING",
    "_$bcsocketUncompressed_3",
    "BCSocket",
    "_$Socket_39",
    "Socket",
    "_options",
    "_messageQueue",
    "_connectedOnce",
    "_attemptNum",
    "_url",
    "getWebSocketURL",
    "supportWebSockets",
    "browserChannelOnly",
    "_createWebSocket",
    "_createBrowserChannel",
    "getRandom",
    "WebSocket",
    "srvPort",
    "srvSecurePort",
    "srvHost",
    "srvProtocol",
    "base",
    "_type",
    "_socket",
    "_syncState",
    "_ws_onmessage",
    "_ws_onopen",
    "_ws_onclose",
    "_bc_onmessage",
    "_bc_onopen",
    "_bc_onclose",
    "_flushQueue",
    "wasClean",
    "_getTimeout",
    "maxTimeout",
    "timeoutIncrement",
    "_send",
    "CLIENT_OPTIONS",
    "_$pathBrowserify_27",
    "basename",
    "ext",
    "matchedSlash",
    "paramsEqual",
    "some",
    "acceptParams",
    "str",
    "parts",
    "quality",
    "params",
    "originalIndex",
    "pms",
    "_$utils_83",
    "pathRegexp",
    "sensitive",
    "strict",
    "_",
    "slash",
    "format",
    "optional",
    "star",
    "_$Route_82",
    "Route",
    "regexp",
    "val",
    "has",
    "__isArray_34",
    "hexTable",
    "compactQueue",
    "prop",
    "compacted",
    "arrayToObject",
    "plainObjects",
    "merge",
    "allowPrototypes",
    "mergeTarget",
    "targetItem",
    "reduce",
    "acc",
    "assign",
    "decode",
    "decoder",
    "charset",
    "strWithoutPlus",
    "unescape",
    "encode",
    "defaultEncoder",
    "Symbol",
    "escape",
    "$0",
    "compact",
    "isRegExp",
    "isBuffer",
    "combine",
    "_$utils_34",
    "percentTwenties",
    "Format",
    "RFC1738",
    "RFC3986",
    "_$formats_30",
    "default",
    "formatters",
    "__has_33",
    "arrayPrefixGenerators",
    "brackets",
    "prefix",
    "comma",
    "repeat",
    "__isArray_33",
    "pushToArray",
    "valueOrArray",
    "toISO",
    "toISOString",
    "defaultFormat",
    "defaults",
    "addQueryPrefix",
    "allowDots",
    "charsetSentinel",
    "delimiter",
    "encoder",
    "encodeValuesOnly",
    "formatter",
    "serializeDate",
    "date",
    "skipNulls",
    "strictNullHandling",
    "isNonNullishPrimitive",
    "generateArrayPrefix",
    "objKeys",
    "normalizeStringifyOptions",
    "opts",
    "_$stringify_33",
    "arrayFormat",
    "joined",
    "__has_32",
    "__isArray_32",
    "__defaults_32",
    "arrayLimit",
    "depth",
    "ignoreQueryPrefix",
    "interpretNumericEntities",
    "parameterLimit",
    "parseArrays",
    "numberStr",
    "fromCharCode",
    "isoSentinel",
    "parseValues",
    "cleanStr",
    "Infinity",
    "skipIndex",
    "part",
    "bracketEqualsPos",
    "parseObject",
    "chain",
    "cleanRoot",
    "parseKeys",
    "givenKey",
    "normalizeParseOptions",
    "_$parse_32",
    "tempObj",
    "newObj",
    "_$lib_31",
    "freeExports",
    "_$punycode_29",
    "nodeType",
    "freeModule",
    "freeGlobal",
    "punycode",
    "maxInt",
    "tMin",
    "tMax",
    "skew",
    "damp",
    "initialBias",
    "initialN",
    "regexPunycode",
    "regexNonASCII",
    "regexSeparators",
    "errors",
    "overflow",
    "not-basic",
    "invalid-input",
    "baseMinusTMin",
    "stringFromCharCode",
    "RangeError",
    "mapDomain",
    "ucs2decode",
    "output",
    "counter",
    "ucs2encode",
    "digitToBasic",
    "digit",
    "flag",
    "adapt",
    "delta",
    "numPoints",
    "firstTime",
    "basic",
    "oldi",
    "baseMinusT",
    "codePoint",
    "inputLength",
    "bias",
    "handledCPCount",
    "basicLength",
    "currentValue",
    "handledCPCountPlusOne",
    "qMinusT",
    "ucs2",
    "toASCII",
    "toUnicode",
    "define",
    "amd",
    "_$util_85",
    "isString",
    "isNull",
    "isNullOrUndefined",
    "_$decode_35",
    "qs",
    "sep",
    "eq",
    "maxKeys",
    "kstr",
    "vstr",
    "idx",
    "__isArray_35",
    "xs",
    "stringifyPrimitive",
    "_$encode_36",
    "__objectKeys_36",
    "ks",
    "__isArray_36",
    "_$querystringEs3_37",
    "Url",
    "slashes",
    "auth",
    "host",
    "search",
    "pathname",
    "_$url_84",
    "urlParse",
    "urlResolve",
    "protocolPattern",
    "portPattern",
    "simplePathPattern",
    "delims",
    "unwise",
    "autoEscape",
    "nonHostChars",
    "hostEndingChars",
    "hostnameMaxLen",
    "hostnamePartPattern",
    "hostnamePartStart",
    "unsafeProtocol",
    "javascript",
    "javascript:",
    "hostlessProtocol",
    "slashedProtocol",
    "http",
    "https",
    "ftp",
    "gopher",
    "file",
    "http:",
    "https:",
    "ftp:",
    "gopher:",
    "file:",
    "url",
    "parseQueryString",
    "slashesDenoteHost",
    "urlFormat",
    "relative",
    "urlResolveObject",
    "resolveObject",
    "queryIndex",
    "splitter",
    "uSplit",
    "rest",
    "trim",
    "simplePath",
    "lowerProto",
    "atSign",
    "hostEnd",
    "hec",
    "parseHost",
    "ipv6Hostname",
    "hostparts",
    "newpart",
    "validParts",
    "notHost",
    "bit",
    "ae",
    "esc",
    "qm",
    "rel",
    "tkeys",
    "tk",
    "tkey",
    "rkeys",
    "rk",
    "rkey",
    "isSourceAbs",
    "isRelAbs",
    "mustEndAbs",
    "removeAllDots",
    "srcPath",
    "psychotic",
    "authInHost",
    "hasTrailingSlash",
    "up",
    "isAbsolute",
    "_$router_81",
    "render",
    "isTransitional",
    "mapRoute",
    "queryString",
    "history",
    "req",
    "RenderReq",
    "app",
    "page",
    "routes",
    "routeTransitional",
    "routeQueue",
    "setUrl",
    "setPrevious",
    "transitional",
    "noNavigate",
    "form",
    "setAttribute",
    "submit",
    "previousPath",
    "next",
    "routeParams",
    "onMatch",
    "done",
    "route",
    "onRoute",
    "parseUrl",
    "resolveUrl",
    "currentPath",
    "replaceState",
    "$render",
    "$method",
    "_$History_79",
    "History",
    "pushState",
    "routePath",
    "renderOptions",
    "el",
    "elements",
    "override",
    "link",
    "_tracksLink",
    "which",
    "hasAttribute",
    "hashIndex",
    "enctype",
    "getElementById",
    "getElementsByName",
    "scrollIntoView",
    "_update",
    "refresh",
    "back",
    "forward",
    "go",
    "historyMethod",
    "relativeUrl",
    "createPage",
    "redirect",
    "__router_80",
    "_$browser_80",
    "setup",
    "fromRoute",
    "toRoute",
    "__noop_5",
    "ContextMeta",
    "addBinding",
    "removeBinding",
    "removeNode",
    "addItemContext",
    "removeItemContext",
    "idNamespace",
    "idCount",
    "pending",
    "pauseCount",
    "__Context_5",
    "alias",
    "as",
    "keyAlias",
    "keyAs",
    "closure",
    "_id",
    "_$contexts_5",
    "itemFor",
    "forRelative",
    "forAlias",
    "forAttribute",
    "attribute",
    "inherit",
    "unpause",
    "!U",
    "-U",
    "+U",
    "~U",
    "typeofU",
    "||",
    "&&",
    "|",
    "^",
    "&",
    "==",
    "!=",
    "===",
    "!==",
    "<",
    ">",
    "<=",
    ">=",
    "instanceof",
    "in",
    "<<",
    ">>",
    ">>>",
    "+",
    "-",
    "*",
    "%",
    "?",
    "consequent",
    "alternate",
    ",",
    "1",
    "BOOLEAN_PROPERTIES",
    "checked",
    "disabled",
    "readonly",
    "selected",
    "INTEGER_PROPERTIES",
    "colspan",
    "maxlength",
    "rowspan",
    "tabindex",
    "STRING_PROPERTIES",
    "cellpadding",
    "cellspacing",
    "class",
    "contenteditable",
    "for",
    "frameborder",
    "usemap",
    "UPDATE_PROPERTIES",
    "CREATE_PROPERTIES",
    "VOID_ELEMENTS",
    "area",
    "br",
    "col",
    "embed",
    "hr",
    "img",
    "keygen",
    "menuitem",
    "param",
    "track",
    "wbr",
    "NAMESPACE_URIS",
    "svg",
    "xlink",
    "xmlns",
    "publicId",
    "systemId",
    "escaped",
    "escapeHtml",
    "attachText",
    "newNode",
    "createTextNode",
    "addNodeBinding",
    "nextNode",
    "splitData",
    "normalizeLineBreaks",
    "attachError",
    "insertBefore",
    "attachComment",
    "createComment",
    "NodeBinding",
    "emitHooks",
    "ending",
    "createHtmlFragment",
    "html",
    "range",
    "createRange",
    "selectNodeContents",
    "createContextualFragment",
    "div",
    "extractContents",
    "attachHtml",
    "childNodes",
    "ns",
    "elementNs",
    "getUnescapedValue",
    "selfClosing",
    "notClosed",
    "endTag",
    "getEndTag",
    "startClose",
    "getStartClose",
    "lowerTagName",
    "unescapedContent",
    "bindContentToValue",
    "getAttributeValue",
    "propertyName",
    "getAttribute",
    "beginning",
    "indexStartNode",
    "$bindItemStart",
    "updateRange",
    "setNodeBounds",
    "RangeBinding",
    "setNodeProperty",
    "appendContent",
    "attachContent",
    "contentHtml",
    "replaceRange",
    "innerOnly",
    "replaceChild",
    "emitRemoved",
    "removeChild",
    "emitRemovedBinding",
    "AttributeBindingsMap",
    "AttributeBinding",
    "__noop_63",
    "escapeAttribute",
    "equalConditions",
    "cloneNode",
    "deleteData",
    "createDocumentFragment",
    "publicText",
    "systemText",
    "_blockUpdate",
    "getBound",
    "propertyValue",
    "setAttributeNS",
    "removeAttributeNS",
    "removeAttribute",
    "getTagName",
    "tagItems",
    "startTag",
    "createElementNS",
    "_bindContent",
    "NaN",
    "truthy",
    "appendItemTo",
    "lastChild",
    "attachItemTo",
    "oldPrevious",
    "previousSibling",
    "windowsLength",
    "unixLength",
    "newLines",
    "defaultValue",
    "$try",
    "proxyNode",
    "$bindProxy",
    "templateTruthy",
    "renderValue",
    "renderTemplate",
    "hasTemplateProperty",
    "renderArrayProperties",
    "renderArray",
    "renderObjectProperties",
    "renderObject",
    "ExpressionMeta",
    "isEnd",
    "bindType",
    "valueType",
    "Expression",
    "LiteralExpression",
    "PathExpression",
    "RelativePathExpression",
    "AliasPathExpression",
    "AttributePathExpression",
    "BracketsExpression",
    "inside",
    "afterSegments",
    "DeferRenderExpression",
    "ArrayExpression",
    "ObjectExpression",
    "properties",
    "FnExpression",
    "NewExpression",
    "OperatorExpression",
    "_$operatorFns_7",
    "SequenceExpression",
    "ViewParentExpression",
    "ScopedModelExpression",
    "appendDependency",
    "swapLastDependency",
    "_$expressions_6",
    "_resolvePatch",
    "_lookupAndContextifyValue",
    "_scope",
    "relativeContext",
    "aliasContext",
    "attributeContext",
    "inner",
    "itemDependencies",
    "propertyDependencies",
    "extraInputs",
    "_lookupParent",
    "_applyFn",
    "_getInputs",
    "thisArg",
    "argDependencies",
    "jLen",
    "_$derbyTemplates_4",
    "operatorFns",
    "_$Dom_14",
    "Dom",
    "DomListener",
    "useCapture",
    "DestroyListener",
    "_initListeners",
    "dom",
    "_listenerIndex",
    "domListener",
    "wrappedListener",
    "__EventEmitter_12",
    "_$Controller_12",
    "Controller",
    "$controller",
    "emitCancellable",
    "cancelled",
    "emitDelayable",
    "delayed",
    "__templates_17",
    "Component",
    "_components",
    "isDestroyed",
    "ComponentAttribute",
    "ComponentAttributeBinding",
    "setModelAttributes",
    "setModelAttribute",
    "createFactory",
    "singleton",
    "SingletonComponentFactory",
    "ComponentFactory",
    "emitInitHooks",
    "ComponentModelData",
    "__noop_17",
    "isBasePrototype",
    "getRootPrototype",
    "getPrototypeOf",
    "_$components_17",
    "extendComponent",
    "components",
    "_eventModel",
    "$components",
    "throttle",
    "delayArg",
    "delay",
    "boundCallback",
    "nextArgs",
    "queueCall",
    "debounce",
    "debounceAsync",
    "applyArguments",
    "running",
    "viewName",
    "setNullAttribute",
    "DataConstructor",
    "isSingleton",
    "_extendComponent",
    "setPrototypeOf",
    "rootPrototype",
    "__expressions_19",
    "_$EventModel_19",
    "EventModel",
    "nextId",
    "ModelRef",
    "outside",
    "refChild",
    "RefOutMap",
    "RefChildrenMap",
    "BindingsMap",
    "ItemContextsMap",
    "EventModelsMap",
    "arrayByReference",
    "refOut",
    "refChildren",
    "bindings",
    "itemContexts",
    "__hasKeys_19",
    "childSetWildcard",
    "newItem",
    "arrayLookup",
    "segmentsBefore",
    "segmentsInside",
    "eventModel",
    "isEmpty",
    "dependancies",
    "_addItemContext",
    "_removeItemContext",
    "_addBinding",
    "eventModels",
    "_each",
    "localUpdate",
    "_updateChildItemContexts",
    "_updateArray",
    "_updateObject",
    "first",
    "mutate",
    "wildcardSegments",
    "onStringInsert",
    "replaceText",
    "cursor",
    "onStringRemove",
    "newText",
    "selectionStart",
    "selectionEnd",
    "scrollTop",
    "__expressions_15",
    "__templates_15",
    "__DependencyOptions_15",
    "documentListeners",
    "_$Page_15",
    "Page",
    "_createContext",
    "_removeModelListeners",
    "_addListeners",
    "useLegacyListeners",
    "useLegacy",
    "addDependencies",
    "BindingWrapper",
    "updateDependencies",
    "$bodyClass",
    "classNames",
    "className",
    "$preventDefault",
    "$stopPropagation",
    "stopPropagation",
    "_setRenderParams",
    "_setRenderPrefix",
    "titleFragment",
    "bodyFragment",
    "titleElement",
    "getElementsByTagName",
    "attach",
    "titleView",
    "bodyView",
    "contextMeta",
    "_addModelListeners",
    "_addContextListeners",
    "_addModelListenersLegacy",
    "changeListener",
    "loadListener",
    "unloadListener",
    "insertListener",
    "moveListener",
    "patchTextBinding",
    "bindingWrappers",
    "destroyListeners",
    "__nextId_15",
    "ignoreTemplateDependency",
    "equalDependencies",
    "lenA",
    "itemA",
    "itemB",
    "lenItemA",
    "lenItemB",
    "textInputUpdate",
    "textUpdate",
    "dependencyOptions",
    "dependency",
    "_$_views_16",
    "derbyTemplates",
    "__EventEmitter_11",
    "__templates_11",
    "_$App_11",
    "App",
    "derby",
    "scriptHash",
    "bundledAt",
    "createAppPage",
    "tracksRoutes",
    "_pendingComponentMap",
    "_init",
    "AppPage",
    "_waitForAttach",
    "_cancelAttach",
    "_contentReady",
    "_finishInit",
    "script",
    "_getScript",
    "isProduction",
    "nodeEnv",
    "_autoRefresh",
    "isReady",
    "onDOMContentLoaded",
    "onDOMReady",
    "toplevel",
    "frameElement",
    "documentElement",
    "doScroll",
    "doScrollCheck",
    "querySelector",
    "loadViews",
    "loadStyles",
    "addViews",
    "isDependency",
    "viewIs",
    "viewFilename",
    "viewSource",
    "viewProp",
    "is",
    "currentView",
    "_handleMessage",
    "styleElement",
    "css",
    "_$Derby_13",
    "Derby",
    "createApp",
    "__Derby_derby",
    "_$derby_derby",
    "_$hello_1",
    "__filename",
    "__dirname"
  ],
  "mappings": "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",
  "sourcesContent": [
    "require = (function (require) {\nvar exposedRequire = function exposedRequire(e,r){return exposedRequire.m.hasOwnProperty(e)?exposedRequire.m[e]:\"function\"!=typeof require||r?\"function\"==typeof exposedRequire.r?exposedRequire.r(e,1):void 0:require(e,1)};\nexposedRequire.m = {};\nexposedRequire.r = require;var createModuleFactory = function createModuleFactory(t){var e;return function(r){return e||t(e={exports:{},parent:r},e.exports),e.exports}};\n",
    "var textDiff = require('./textDiff');\n\nexports.add = addDocumentListeners;\nexports.inputSupportsSelection = inputSupportsSelection;\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#do-not-apply\n// TODO: Date types support\nfunction inputSupportsSelection(input) {\n  var type = input.type;\n  return (\n    type === 'text' ||\n    type === 'textarea' ||\n    type === 'search' ||\n    type === 'url' ||\n    type === 'tel' ||\n    type === 'password'\n  );\n}\nfunction inputIsNumberValue(input) {\n  var type = input.type;\n  return (type === 'number' || (type === 'range' && !input.multiple));\n}\nvar inputValue = function(input) {\n  return inputIsNumberValue(input) ? input.valueAsNumber : input.value;\n};\n\nfunction addDocumentListeners(doc) {\n  doc.addEventListener('input', documentInput, true);\n  doc.addEventListener('change', documentChange, true);\n\n  // Listen to more events for versions of IE with buggy input event implementations\n  if (parseFloat(window.navigator.appVersion.split('MSIE ')[1]) <= 9) {\n    // We're listening on selectionchange because there's no other event emitted when\n    // the user clicks 'delete' from a context menu when right clicking on selected text.\n    // So although this event fires overly aggressively, it's the only real way\n    // to ensure that we can detect all changes to the input value in IE <= 9\n    doc.addEventListener('selectionchange', function(e){\n      if (document.activeElement) {\n        documentInput({target: document.activeElement}); // selectionchange evts don't have the e.target we need\n      }\n    }, true);\n  }\n\n  // For some reason valueAsNumber returns NaN for number inputs in IE\n  // until a new IE version that handles this is released, parse input.value as a fallback\n  var input = document.createElement('input');\n  input.type = 'number';\n  input.value = '7';\n  if (input.valueAsNumber !== input.valueAsNumber) {\n    var oldInputValue = inputValue;\n    inputValue = function(input) {\n      if (input.type === 'number') {\n        return inputIsNumberValue(input) ? parseFloat(input.value) : input.value;\n      } else {\n        return oldInputValue.apply(this, arguments);\n      }\n    };\n  }\n}\n\nfunction documentInput(e) {\n  var target = e.target;\n\n  if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n    setInputValue(e, target);\n  }\n}\n\nfunction documentChange(e) {\n  var target = e.target;\n\n  if (target.tagName === 'INPUT') {\n    setBoundProperty(target, 'checked');\n    setInputValue(e, target);\n\n  } else if (target.tagName === 'SELECT') {\n    setOptionBindings(target);\n\n  } else if (target.tagName === 'TEXTAREA') {\n    setInputValue(e, target);\n  }\n}\n\nfunction setBoundProperty(node, property) {\n  var binding = node.$bindAttributes && node.$bindAttributes[property];\n  if (!binding || binding.isUnbound()) return;\n\n  var value = node[property];\n  binding.template.expression.set(binding.context, value);\n}\n\nfunction setInputValue(e, target) {\n  var binding = target.$bindAttributes && target.$bindAttributes.value;\n  if (!binding || binding.isUnbound()) return;\n\n  if (inputSupportsSelection(target)) {\n    var pass = {$event: e};\n    textDiffBinding(binding, target.value, pass);\n  } else {\n    var value = inputValue(target);\n    binding.template.expression.set(binding.context, value);\n  }\n}\n\nfunction textDiffBinding(binding, value, pass) {\n  var expression = binding.template.expression;\n  var segments = expression.pathSegments(binding.context);\n  if (segments) {\n    var model = binding.context.controller.model.pass(pass);\n    textDiff.onTextInput(model, segments, value);\n  } else if (expression.set) {\n    expression.set(binding.context, value);\n  }\n}\n\nfunction setOptionBindings(parent) {\n  for (var node = parent.firstChild; node; node = node.nextSibling) {\n    if (node.tagName === 'OPTION') {\n      setBoundProperty(node, 'selected');\n    } else if (node.hasChildNodes()) {\n      setOptionBindings(node);\n    }\n  }\n}\n",
    "var saddle = require('saddle');\nvar serializeObject = require('serialize-object');\nvar DependencyOptions = require('./options').DependencyOptions;\nvar util = require('./util');\nvar concat = util.concat;\nvar hasKeys = util.hasKeys;\nvar traverseAndCreate = util.traverseAndCreate;\n\n(function() {\n  for (var key in saddle) {\n    exports[key] = saddle[key];\n  }\n})();\n\nexports.Marker = Marker;\nexports.View = View;\nexports.ViewInstance = ViewInstance;\nexports.DynamicViewInstance = DynamicViewInstance;\nexports.ViewParent = ViewParent;\nexports.ContextClosure = ContextClosure;\n\nexports.Views = Views;\n\nexports.MarkupHook = MarkupHook;\nexports.ElementOn = ElementOn;\nexports.ComponentOn = ComponentOn;\nexports.AsProperty = AsProperty;\nexports.AsObject = AsObject;\nexports.AsObjectComponent = AsObjectComponent;\nexports.AsArray = AsArray;\nexports.AsArrayComponent = AsArrayComponent;\n\nexports.emptyTemplate = new saddle.Template([]);\n\n// Add ::isUnbound to Template && Binding\nsaddle.Template.prototype.isUnbound = function(context) {\n  return context.unbound;\n};\nsaddle.Binding.prototype.isUnbound = function() {\n  return this.template.expression.isUnbound(this.context);\n};\n\n// Add Template::resolve\nsaddle.Template.prototype.resolve = function() {};\n\n// The Template::dependencies method is specific to how Derby bindings work,\n// so extend all of the Saddle Template types here\nsaddle.Template.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  return concatArrayDependencies(null, this.content, context, options);\n};\nsaddle.Doctype.prototype.dependencies = function() {};\nsaddle.Text.prototype.dependencies = function() {};\nsaddle.DynamicText.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  return getDependencies(this.expression, context, options);\n};\nsaddle.Comment.prototype.dependencies = function() {};\nsaddle.DynamicComment.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  return getDependencies(this.expression, context, options);\n};\nsaddle.Html.prototype.dependencies = function() {};\nsaddle.DynamicHtml.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  return getDependencies(this.expression, context, options);\n};\nsaddle.Element.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var dependencies = concatMapDependencies(null, this.attributes, context, options);\n  if (!this.content) return dependencies;\n  return concatArrayDependencies(dependencies, this.content, context, options);\n};\nsaddle.DynamicElement.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var dependencies = saddle.Element.prototype.dependencies(context, options);\n  return concatDependencies(dependencies, this.tagName, context, options);\n};\nsaddle.Block.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var dependencies = (this.expression.meta && this.expression.meta.blockType === 'on') ?\n    getDependencies(this.expression, context, options) : null;\n  var blockContext = context.child(this.expression);\n  return concatArrayDependencies(dependencies, this.content, blockContext, options);\n};\nsaddle.ConditionalBlock.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var condition = this.getCondition(context);\n  if (condition == null) {\n    return getDependencies(this.expressions[0], context, options);\n  }\n  var dependencies = concatSubArrayDependencies(null, this.expressions, context, options, condition);\n  var expression = this.expressions[condition];\n  var content = this.contents[condition];\n  var blockContext = context.child(expression);\n  return concatArrayDependencies(dependencies, content, blockContext, options);\n};\nsaddle.EachBlock.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var dependencies = getDependencies(this.expression, context, options);\n  var items = this.expression.get(context);\n  if (items && items.length) {\n    for (var i = 0; i < items.length; i++) {\n      var itemContext = context.eachChild(this.expression, i);\n      dependencies = concatArrayDependencies(dependencies, this.content, itemContext, options);\n    }\n  } else if (this.elseContent) {\n    dependencies = concatArrayDependencies(dependencies, this.elseContent, context, options);\n  }\n  return dependencies;\n};\nsaddle.Attribute.prototype.dependencies = function() {};\nsaddle.DynamicAttribute.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  return getDependencies(this.expression, context, options);\n};\n\nfunction concatSubArrayDependencies(dependencies, expressions, context, options, end) {\n  for (var i = 0; i <= end; i++) {\n    dependencies = concatDependencies(dependencies, expressions[i], context, options);\n  }\n  return dependencies;\n}\nfunction concatArrayDependencies(dependencies, expressions, context, options) {\n  for (var i = 0; i < expressions.length; i++) {\n    dependencies = concatDependencies(dependencies, expressions[i], context, options);\n  }\n  return dependencies;\n}\nfunction concatMapDependencies(dependencies, expressions, context, options) {\n  for (var key in expressions) {\n    dependencies = concatDependencies(dependencies, expressions[key], context, options);\n  }\n  return dependencies;\n}\nfunction concatDependencies(dependencies, expression, context, options) {\n  var expressionDependencies = getDependencies(expression, context, options);\n  return concat(dependencies, expressionDependencies);\n}\nfunction getDependencies(expression, context, options) {\n  return expression.dependencies(context, options);\n}\n\nvar markerHooks = [{\n  emit: function(context, node) {\n    node.$component = context.controller;\n    context.controller.markerNode = node;\n  }\n}];\nfunction Marker(data) {\n  saddle.Comment.call(this, data, markerHooks);\n}\nMarker.prototype = Object.create(saddle.Comment.prototype);\nMarker.prototype.constructor = Marker;\nMarker.prototype.type = 'Marker';\nMarker.prototype.serialize = function() {\n  return serializeObject.instance(this, this.data);\n};\nMarker.prototype.get = function() {\n  return '';\n};\n\nfunction ViewAttributesMap(source) {\n  var items = source.split(/\\s+/);\n  for (var i = 0, len = items.length; i < len; i++) {\n    this[items[i]] = true;\n  }\n}\nfunction ViewArraysMap(source) {\n  var items = source.split(/\\s+/);\n  for (var i = 0, len = items.length; i < len; i++) {\n    var item = items[i].split('/');\n    this[item[0]] = item[1] || item[0];\n  }\n}\nfunction View(views, name, source, options) {\n  this.views = views;\n  this.name = name;\n  this.source = source;\n  this.options = options;\n\n  var nameSegments = (this.name || '').split(':');\n  var lastSegment = nameSegments.pop();\n  this.namespace = nameSegments.join(':');\n  this.registeredName = (lastSegment === 'index') ? this.namespace : this.name;\n\n  this.attributesMap = options && options.attributes &&\n    new ViewAttributesMap(options.attributes);\n  this.arraysMap = options && options.arrays &&\n    new ViewArraysMap(options.arrays);\n  // The empty string is considered true for easier HTML attribute parsing\n  this.unminified = options && (options.unminified || options.unminified === '');\n  this.string = options && (options.string || options.string === '');\n  this.literal = options && (options.literal || options.literal === '');\n  this.template = null;\n  this.componentFactory = null;\n  this.fromSerialized = false;\n}\nView.prototype = Object.create(saddle.Template.prototype);\nView.prototype.constructor = View;\nView.prototype.type = 'View';\nView.prototype.serialize = function() {\n  return null;\n};\nView.prototype._isComponent = function(context) {\n  if (!this.componentFactory) return false;\n  if (context.attributes && context.attributes.extend) return false;\n  return true;\n};\nView.prototype._initComponent = function(context) {\n  return (this._isComponent(context)) ?\n    this.componentFactory.init(context) : context;\n};\nView.prototype._queueCreate = function(context, viewContext) {\n  if (this._isComponent(context)) {\n    var componentFactory = this.componentFactory;\n    context.queue(function queuedCreate() {\n      componentFactory.create(viewContext);\n    });\n\n    if (!context.hooks) return;\n    context.queue(function queuedComponentHooks() {\n      // Kick off hooks if view instance specified `on` or `as` attributes\n      for (var i = 0, len = context.hooks.length; i < len; i++) {\n        context.hooks[i].emit(context, viewContext.controller);\n      }\n    });\n  }\n};\nView.prototype.get = function(context, unescaped) {\n  var viewContext = this._initComponent(context);\n  var template = this.template || this.parse();\n  return template.get(viewContext, unescaped);\n};\nView.prototype.getFragment = function(context, binding) {\n  var viewContext = this._initComponent(context);\n  var template = this.template || this.parse();\n  var fragment = template.getFragment(viewContext, binding);\n  this._queueCreate(context, viewContext);\n  return fragment;\n};\nView.prototype.appendTo = function(parent, context) {\n  var viewContext = this._initComponent(context);\n  var template = this.template || this.parse();\n  template.appendTo(parent, viewContext);\n  this._queueCreate(context, viewContext);\n};\nView.prototype.attachTo = function(parent, node, context) {\n  var viewContext = this._initComponent(context);\n  var template = this.template || this.parse();\n  var node = template.attachTo(parent, node, viewContext);\n  this._queueCreate(context, viewContext);\n  return node;\n};\nView.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var template = this.template || this.parse();\n  // We can't figure out relative path dependencies within a component without\n  // rendering it, because each component instance's scope is dynamically set\n  // based on its unique `id` property. To represent this, set the context\n  // controller to `null`.\n  //\n  // Under normal rendering conditions, contexts should always have reference\n  // to a controller. Expression::get() methods use the reference to\n  // `context.controller.model.data` to lookup values, and paths are resolved\n  // based on `context.controller.model._scope`.\n  //\n  // To handle this, Expression methods guard against a null controller by not\n  // returning any dependencies for model paths. In addition, they return\n  // `undefined` from get, which affect dependencies computed for\n  // ConditionalBlock and EachBlock, as their dependencies will differ based\n  // on the value of model data.\n  //\n  // TODO: This likely under-estimates the true dependencies within a\n  // template. However, to provide a more complete view of dependencies, we'd\n  // need information we only have at render time, namely, the scope and data\n  // within the component model. This may indicate that Derby should use a\n  // more Functional Reactive Programming (FRP)-like approach of having\n  // dependencies be returned from getFragment and attach methods along with\n  // DOM nodes rather than computing dependencies separately from rendering.\n  var viewContext = (this._isComponent(context)) ?\n    context.componentChild(null) : context;\n  return template.dependencies(viewContext, options);\n};\nView.prototype.parse = function() {\n  this._parse();\n  if (this.componentFactory) {\n    var marker = new Marker(this.name);\n    this.template.content.unshift(marker);\n  }\n  return this.template;\n};\n// View.prototype._parse is defined in parsing.js, so that it doesn't have to\n// be included in the client if templates are all parsed server-side\nView.prototype._parse = function() {\n  throw new Error('View parsing not available');\n};\n\nfunction ViewInstance(name, attributes, hooks, initHooks) {\n  this.name = name;\n  this.attributes = attributes;\n  this.hooks = hooks;\n  this.initHooks = initHooks;\n  this.view = null;\n}\nViewInstance.prototype = Object.create(saddle.Template.prototype);\nViewInstance.prototype.constructor = ViewInstance;\nViewInstance.prototype.type = 'ViewInstance';\nViewInstance.prototype.serialize = function() {\n  return serializeObject.instance(this, this.name, this.attributes, this.hooks, this.initHooks);\n};\nViewInstance.prototype.get = function(context, unescaped) {\n  var view = this._find(context);\n  var viewContext = context.viewChild(view, this.attributes, this.hooks, this.initHooks);\n  return view.get(viewContext, unescaped);\n};\nViewInstance.prototype.getFragment = function(context, binding) {\n  var view = this._find(context);\n  var viewContext = context.viewChild(view, this.attributes, this.hooks, this.initHooks);\n  return view.getFragment(viewContext, binding);\n};\nViewInstance.prototype.appendTo = function(parent, context) {\n  var view = this._find(context);\n  var viewContext = context.viewChild(view, this.attributes, this.hooks, this.initHooks);\n  view.appendTo(parent, viewContext);\n};\nViewInstance.prototype.attachTo = function(parent, node, context) {\n  var view = this._find(context);\n  var viewContext = context.viewChild(view, this.attributes, this.hooks, this.initHooks);\n  return view.attachTo(parent, node, viewContext);\n};\nViewInstance.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var view = this._find(context);\n  var viewContext = context.viewChild(view, this.attributes, this.hooks, this.initHooks);\n  return view.dependencies(viewContext, options);\n};\nViewInstance.prototype._find = function(context) {\n  if (this.view) return this.view;\n  var contextView = context.getView();\n  var namespace = contextView && contextView.namespace;\n  this.view = context.meta.views.find(this.name, namespace);\n  if (!this.view) {\n    var message = context.meta.views.findErrorMessage(this.name, contextView);\n    throw new Error(message);\n  }\n  return this.view;\n};\n\nfunction DynamicViewInstance(nameExpression, attributes, hooks, initHooks) {\n  this.nameExpression = nameExpression;\n  this.attributes = attributes;\n  this.hooks = hooks;\n  this.initHooks = initHooks;\n}\nDynamicViewInstance.prototype = Object.create(ViewInstance.prototype);\nDynamicViewInstance.prototype.constructor = DynamicViewInstance;\nDynamicViewInstance.prototype.type = 'DynamicViewInstance';\nDynamicViewInstance.prototype.serialize = function() {\n  return serializeObject.instance(this, this.nameExpression, this.attributes, this.hooks, this.initHooks);\n};\nDynamicViewInstance.prototype._find = function(context) {\n  var name = this.nameExpression.get(context);\n  var contextView = context.getView();\n  var namespace = contextView && contextView.namespace;\n  var view = name && context.meta.views.find(name, namespace);\n  return view || exports.emptyTemplate;\n};\nDynamicViewInstance.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var nameDependencies = this.nameExpression.dependencies(context);\n  var viewDependencies = ViewInstance.prototype.dependencies.call(this, context, options);\n  return concat(nameDependencies, viewDependencies);\n};\n\n// Without a ContextClosure, ViewParent will return the nearest context that\n// is the parent of a view instance. When a context with a `closure` property\n// is encountered first, ViewParent will find the specific referenced context,\n// even if it is further up the context hierarchy.\nfunction ViewParent(template) {\n  this.template = template;\n}\nViewParent.prototype = Object.create(saddle.Template.prototype);\nViewParent.prototype.constructor = ViewParent;\nViewParent.prototype.type = 'ViewParent';\nViewParent.prototype.serialize = function() {\n  return serializeObject.instance(this, this.template);\n};\nViewParent.prototype.get = function(context, unescaped) {\n  var parentContext = context.forViewParent();\n  return this.template.get(parentContext, unescaped);\n};\nViewParent.prototype.getFragment = function(context, binding) {\n  var parentContext = context.forViewParent();\n  return this.template.getFragment(parentContext, binding);\n};\nViewParent.prototype.appendTo = function(parent, context) {\n  var parentContext = context.forViewParent();\n  this.template.appendTo(parent, parentContext);\n};\nViewParent.prototype.attachTo = function(parent, node, context) {\n  var parentContext = context.forViewParent();\n  return this.template.attachTo(parent, node, parentContext);\n};\nViewParent.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this, options)) return;\n  var parentContext = context.forViewParent();\n  return this.template.dependencies(parentContext, options);\n};\n\n// At render time, this template creates a context child and sets its\n// `closure` property to a fixed reference. It is used in combination with\n// ViewParent in order to control which context is returned.\n//\n// Instances of this template cannot be serialized. It is intended for use\n// dynamically during rendering only.\nfunction ContextClosure(template, context) {\n  this.template = template;\n  this.context = context;\n}\nContextClosure.prototype = Object.create(saddle.Template.prototype);\nContextClosure.prototype.constructor = ContextClosure;\nContextClosure.prototype.serialize = function() {\n  throw new Error('ContextClosure cannot be serialized');\n};\nContextClosure.prototype.get = function(context, unescaped) {\n  var closureContext = context.closureChild(this.context);\n  return this.template.get(closureContext, unescaped);\n};\nContextClosure.prototype.getFragment = function(context, binding) {\n  var closureContext = context.closureChild(this.context);\n  return this.template.getFragment(closureContext, binding);\n};\nContextClosure.prototype.appendTo = function(parent, context) {\n  var closureContext = context.closureChild(this.context);\n  this.template.appendTo(parent, closureContext);\n};\nContextClosure.prototype.attachTo = function(parent, node, context) {\n  var closureContext = context.closureChild(this.context);\n  return this.template.attachTo(parent, node, closureContext);\n};\nContextClosure.prototype.dependencies = function(context, options) {\n  if (DependencyOptions.shouldIgnoreTemplate(this.template, options)) return;\n  var closureContext = context.closureChild(this.context);\n  return this.template.dependencies(closureContext, options);\n};\nContextClosure.prototype.equals = function(other) {\n  return (other instanceof ContextClosure) &&\n    (this.context === other.context) &&\n    (this.template.equals(other.template));\n};\n\nfunction ViewsMap() {}\nfunction Views() {\n  this.nameMap = new ViewsMap();\n  this.tagMap = new ViewsMap();\n  // TODO: elementMap is deprecated and should be removed with Derby 0.6.0\n  this.elementMap = this.tagMap;\n}\nViews.prototype.find = function(name, namespace) {\n  var map = this.nameMap;\n\n  // Exact match lookup\n  var exactName = (namespace) ? namespace + ':' + name : name;\n  var match = map[exactName];\n  if (match) return match;\n\n  // Relative lookup\n  var segments = name.split(':');\n  var segmentsDepth = segments.length;\n  if (namespace) segments = namespace.split(':').concat(segments);\n  // Iterate through segments, leaving the `segmentsDepth` segments and\n  // removing the second to `segmentsDepth` segment to traverse up the\n  // namespaces. Decrease `segmentsDepth` if not found and repeat again.\n  while (segmentsDepth > 0) {\n    var testSegments = segments.slice();\n    while (testSegments.length > segmentsDepth) {\n      testSegments.splice(-1 - segmentsDepth, 1);\n      var testName = testSegments.join(':');\n      var match = map[testName];\n      if (match) return match;\n    }\n    segmentsDepth--;\n  }\n};\nViews.prototype.register = function(name, source, options) {\n  var mapName = name.replace(/:index$/, '');\n  var view = this.nameMap[mapName];\n  if (view) {\n    // Recreate the view if it already exists. We re-apply the constructor\n    // instead of creating a new view object so that references to object\n    // can be cached after finding the first time\n    var componentFactory = view.componentFactory;\n    View.call(view, this, name, source, options);\n    view.componentFactory = componentFactory;\n  } else {\n    view = new View(this, name, source, options);\n  }\n  this.nameMap[mapName] = view;\n  // TODO: element is deprecated and should be removed with Derby 0.6.0\n  var tagName = options && (options.tag || options.element);\n  if (tagName) this.tagMap[tagName] = view;\n  return view;\n};\nViews.prototype.deserialize = function(items) {\n  for (var i = 0; i < items.length; i++) {\n    var item = items[i];\n    var setTemplate = item[0];\n    var name = item[1];\n    var source = item[2];\n    var options = item[3];\n    var view = this.register(name, source, options);\n    view.parse = setTemplate;\n    view.fromSerialized = true;\n  }\n};\nViews.prototype.serialize = function(options) {\n  var forServer = options && options.server;\n  var minify = options && options.minify;\n  var items = [];\n  for (var name in this.nameMap) {\n    var view = this.nameMap[name];\n    var template = view.template || view.parse();\n    if (!forServer && view.options) {\n      // Do not serialize views with the `serverOnly` option, except when\n      // serializing for a server script\n      if (view.options.serverOnly) continue;\n      // For views with the `server` option, serialize them with a blank\n      // template body. This allows them to be used from other views on the\n      // browser, but they will output nothing on the browser\n      if (view.options.server) template = exports.emptyTemplate;\n    }\n    // Serializing views as a function allows them to be constructed lazily upon\n    // first use. This can improve initial load times of the application when\n    // there are many views\n    items.push(\n      '[function(){return this.template=' +\n        template.serialize() + '},' +\n        serializeObject.args([\n          view.name,\n          (minify) ? null : view.source,\n          (hasKeys(view.options)) ? view.options : null\n        ]) +\n      ']'\n    );\n  }\n  return 'function(derbyTemplates, views){' +\n    'var expressions = derbyTemplates.expressions,' +\n    'templates = derbyTemplates.templates;' +\n    'views.deserialize([' + items.join(',') + '])}';\n};\nViews.prototype.findErrorMessage = function(name, contextView) {\n  var names = Object.keys(this.nameMap);\n  var message = 'Cannot find view \"' + name + '\" in' +\n    [''].concat(names).join('\\n  ') + '\\n';\n  if (contextView) {\n    message += '\\nWithin template \"' + contextView.name + '\":\\n' + contextView.source;\n  }\n  return message;\n};\n\n\nfunction MarkupHook() {}\nMarkupHook.prototype.module = saddle.Template.prototype.module;\n\nfunction ElementOn(name, expression) {\n  this.name = name;\n  this.expression = expression;\n}\nElementOn.prototype = Object.create(MarkupHook.prototype);\nElementOn.prototype.constructor = ElementOn;\nElementOn.prototype.type = 'ElementOn';\nElementOn.prototype.serialize = function() {\n  return serializeObject.instance(this, this.name, this.expression);\n};\nElementOn.prototype.emit = function(context, element) {\n  var elementOn = this;\n  if (this.name === 'create') {\n    this.apply(context, element);\n\n  } else if (this.name === 'destroy') {\n    var destroyListeners = element.$destroyListeners || (element.$destroyListeners = []);\n    destroyListeners.push(function elementOnDestroy() {\n      elementOn.apply(context, element);\n    });\n\n  } else {\n    element.addEventListener(this.name, function elementOnListener(event) {\n      return elementOn.apply(context, element, event);\n    }, false);\n  }\n};\nElementOn.prototype.apply = function(context, element, event) {\n  var modelData = context.controller.model.data;\n  modelData.$event = event;\n  modelData.$element = element;\n  var out = this.expression.apply(context);\n  delete modelData.$event;\n  delete modelData.$element;\n  return out;\n};\n\nfunction ComponentOn(name, expression) {\n  this.name = name;\n  this.expression = expression;\n}\nComponentOn.prototype = Object.create(MarkupHook.prototype);\nComponentOn.prototype.constructor = ComponentOn;\nComponentOn.prototype.type = 'ComponentOn';\nComponentOn.prototype.serialize = function() {\n  return serializeObject.instance(this, this.name, this.expression);\n};\nComponentOn.prototype.emit = function(context, component) {\n  var expression = this.expression;\n  component.on(this.name, function componentOnListener() {\n    var args = arguments.length && Array.prototype.slice.call(arguments);\n    return expression.apply(context, args);\n  });\n};\n\nfunction AsProperty(segments) {\n  this.segments = segments;\n  this.lastSegment = segments.pop();\n}\nAsProperty.prototype = Object.create(MarkupHook.prototype);\nAsProperty.prototype.constructor = AsProperty;\nAsProperty.prototype.type = 'AsProperty';\nAsProperty.prototype.serialize = function() {\n  var segments = this.segments.concat(this.lastSegment);\n  return serializeObject.instance(this, segments);\n};\nAsProperty.prototype.emit = function(context, target) {\n  var node = traverseAndCreate(context.controller, this.segments);\n  node[this.lastSegment] = target;\n};\n\nfunction AsObject(segments, keyExpression) {\n  AsProperty.call(this, segments);\n  this.keyExpression = keyExpression;\n}\nAsObject.prototype = Object.create(AsProperty.prototype);\nAsObject.prototype.constructor = AsObject;\nAsObject.prototype.type = 'AsObject';\nAsObject.prototype.serialize = function() {\n  var segments = this.segments.concat(this.lastSegment);\n  return serializeObject.instance(this, segments, this.keyExpression);\n};\nAsObject.prototype.emit = function(context, target) {\n  var node = traverseAndCreate(context.controller, this.segments);\n  var object = node[this.lastSegment] || (node[this.lastSegment] = {});\n  var key = this.keyExpression.get(context);\n  object[key] = target;\n  this.addListeners(target, object, key);\n};\nAsObject.prototype.addListeners = function(target, object, key) {\n  this.addDestroyListener(target, function asObjectDestroy() {\n    delete object[key];\n  });\n};\nAsObject.prototype.addDestroyListener = function(target, listener) {\n  var listeners = target.$destroyListeners || (target.$destroyListeners = []);\n  listeners.push(listener);\n};\n\nfunction AsObjectComponent(segments, keyExpression) {\n  AsObject.call(this, segments, keyExpression);\n}\nAsObjectComponent.prototype = Object.create(AsObject.prototype);\nAsObjectComponent.prototype.constructor = AsObjectComponent;\nAsObjectComponent.prototype.type = 'AsObjectComponent';\nAsObjectComponent.prototype.addDestroyListener = function(target, listener) {\n  target.on('destroy', listener);\n};\n\nfunction AsArray(segments) {\n  AsProperty.call(this, segments);\n}\nAsArray.prototype = Object.create(AsProperty.prototype);\nAsArray.prototype.constructor = AsArray;\nAsArray.prototype.type = 'AsArray';\nAsArray.prototype.emit = function(context, target) {\n  var node = traverseAndCreate(context.controller, this.segments);\n  var array = node[this.lastSegment] || (node[this.lastSegment] = []);\n\n  // Iterate backwards, since rendering will usually append\n  for (var i = array.length; i--;) {\n    var item = array[i];\n    // Don't add an item if already in the array\n    if (item === target) return;\n    var mask = this.comparePosition(target, item);\n    // If the emitted target is after the current item in the document,\n    // insert it next in the array\n    // Node.DOCUMENT_POSITION_FOLLOWING = 4\n    if (mask & 4) {\n      array.splice(i + 1, 0, target);\n      this.addListeners(target, array);\n      return;\n    }\n  }\n  // Add to the beginning if before all items\n  array.unshift(target);\n  this.addListeners(target, array);\n};\nAsArray.prototype.addListeners = function(target, array) {\n  this.addDestroyListener(target, function asArrayDestroy() {\n    var index = array.indexOf(target);\n    if (index !== -1) array.splice(index, 1);\n  });\n};\nAsArray.prototype.comparePosition = function(target, item) {\n  return item.compareDocumentPosition(target);\n};\nAsArray.prototype.addDestroyListener = AsObject.prototype.addDestroyListener;\n\nfunction AsArrayComponent(segments) {\n  AsArray.call(this, segments);\n}\nAsArrayComponent.prototype = Object.create(AsArray.prototype);\nAsArrayComponent.prototype.constructor = AsArrayComponent;\nAsArrayComponent.prototype.type = 'AsArrayComponent';\nAsArrayComponent.prototype.comparePosition = function(target, item) {\n  return item.markerNode.compareDocumentPosition(target.markerNode);\n};\nAsArrayComponent.prototype.addDestroyListener = AsObjectComponent.prototype.addDestroyListener;\n",
    "var templates = require('./templates');\n\nexports.DependencyOptions = DependencyOptions;\n\nfunction DependencyOptions(options) {\n  this.setIgnoreTemplate(options && options.ignoreTemplate);\n}\nDependencyOptions.shouldIgnoreTemplate = function(template, options) {\n  return (options) ? options.ignoreTemplate === template : false;\n};\nDependencyOptions.prototype.setIgnoreTemplate = function(template) {\n  while (template instanceof templates.ContextClosure) {\n    template = template.template;\n  }\n  this.ignoreTemplate = template;\n};\n",
    "exports.instance = serializeInstance;\nexports.args = serializeArgs;\nexports.value = serializeValue;\n\nfunction serializeInstance(instance) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  return 'new ' + instance.module + '.' + instance.type +\n    '(' + serializeArgs(args) + ')';\n}\n\nfunction serializeArgs(args) {\n  // Map each argument into its string representation\n  var items = [];\n  for (var i = args.length; i--;) {\n    var item = serializeValue(args[i]);\n    items.unshift(item);\n  }\n  // Remove trailing null values, assuming they are optional\n  for (var i = items.length; i--;) {\n    var item = items[i];\n    if (item !== 'void 0' && item !== 'null') break;\n    items.pop();\n  }\n  return items.join(', ');\n}\n\nfunction serializeValue(input) {\n  if (input && input.serialize) {\n    return input.serialize();\n\n  } else if (typeof input === 'undefined') {\n    return 'void 0';\n\n  } else if (input === null) {\n    return 'null';\n\n  } else if (typeof input === 'string') {\n    return formatString(input);\n\n  } else if (typeof input === 'number' || typeof input === 'boolean') {\n    return input + '';\n\n  } else if (Array.isArray(input)) {\n    var items = [];\n    for (var i = 0; i < input.length; i++) {\n      var value = serializeValue(input[i]);\n      items.push(value);\n    }\n    return '[' + items.join(', ') + ']';\n\n  } else if (typeof input === 'object') {\n    var items = [];\n    for (var key in input) {\n      var value = serializeValue(input[key]);\n      items.push(formatString(key) + ': ' + value);\n    }\n    return '{' + items.join(', ') + '}';\n  }\n}\nfunction formatString(value) {\n  var escaped = value.replace(/['\\r\\n\\\\]/g, function(match) {\n    return (match === '\\'') ? '\\\\\\'' :\n      (match === '\\r') ? '\\\\r' :\n      (match === '\\n') ? '\\\\n' :\n      (match === '\\\\') ? '\\\\\\\\' :\n      '';\n  });\n  return '\\'' + escaped + '\\'';\n}\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar objectCreate = Object.create || objectCreatePolyfill\nvar objectKeys = Object.keys || objectKeysPolyfill\nvar bind = Function.prototype.bind || functionBindPolyfill\n\nfunction EventEmitter() {\n  if (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\n    this._events = objectCreate(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nvar hasDefineProperty;\ntry {\n  var o = {};\n  if (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\n  hasDefineProperty = o.x === 0;\n} catch (err) { hasDefineProperty = false }\nif (hasDefineProperty) {\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n    enumerable: true,\n    get: function() {\n      return defaultMaxListeners;\n    },\n    set: function(arg) {\n      // check whether the input is a positive number (whose value is zero or\n      // greater and not a NaN).\n      if (typeof arg !== 'number' || arg < 0 || arg !== arg)\n        throw new TypeError('\"defaultMaxListeners\" must be a positive number');\n      defaultMaxListeners = arg;\n    }\n  });\n} else {\n  EventEmitter.defaultMaxListeners = defaultMaxListeners;\n}\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    if (arguments.length > 1)\n      er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Unhandled \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n      // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n      // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = objectCreate(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n          listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n          prepend ? [listener, existing] : [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n            existing.length + ' \"' + String(type) + '\" listeners ' +\n            'added. Use emitter.setMaxListeners() to ' +\n            'increase limit.');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        if (typeof console === 'object' && console.warn) {\n          console.warn('%s: %s', w.name, w.message);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    switch (arguments.length) {\n      case 0:\n        return this.listener.call(this.target);\n      case 1:\n        return this.listener.call(this.target, arguments[0]);\n      case 2:\n        return this.listener.call(this.target, arguments[0], arguments[1]);\n      case 3:\n        return this.listener.call(this.target, arguments[0], arguments[1],\n            arguments[2]);\n      default:\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i)\n          args[i] = arguments[i];\n        this.listener.apply(this.target, args);\n    }\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = bind.call(onceWrapper, state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = objectCreate(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else\n          spliceOne(list, position);\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = objectCreate(null);\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = objectCreate(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = objectKeys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = objectCreate(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (!events)\n    return [];\n\n  var evlistener = events[type];\n  if (!evlistener)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction objectCreatePolyfill(proto) {\n  var F = function() {};\n  F.prototype = proto;\n  return new F;\n}\nfunction objectKeysPolyfill(obj) {\n  var keys = [];\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) {\n    keys.push(k);\n  }\n  return k;\n}\nfunction functionBindPolyfill(context) {\n  var fn = this;\n  return function () {\n    return fn.apply(context, arguments);\n  };\n}\n",
    "\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n",
    "//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n",
    "var uuid = require('uuid');\n\nModel.INITS = [];\n\nmodule.exports = Model;\n\nfunction Model(options) {\n  this.root = this;\n\n  var inits = Model.INITS;\n  if (!options) options = {};\n  this.debug = options.debug || {};\n  for (var i = 0; i < inits.length; i++) {\n    inits[i](this, options);\n  }\n}\n\nModel.prototype.id = function() {\n  return uuid.v4();\n};\n\nModel.prototype._child = function() {\n  return new ChildModel(this);\n};\n\nModel.ChildModel = ChildModel;\n\nfunction ChildModel(model) {\n  // Shared properties should be accessed via the root. This makes inheritance\n  // cheap and easily extensible\n  this.root = model.root;\n\n  // EventEmitter methods access these properties directly, so they must be\n  // inherited manually instead of via the root\n  this._events = model._events;\n  this._maxListeners = model._maxListeners;\n\n  // Properties specific to a child instance\n  this._context = model._context;\n  this._at = model._at;\n  this._pass = model._pass;\n  this._silent = model._silent;\n  this._eventContext = model._eventContext;\n  this._preventCompose = model._preventCompose;\n}\nChildModel.prototype = new Model();\n",
    "'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n",
    "// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n",
    "var deepEqual = require('fast-deep-equal');\n\nvar isServer = process.title !== 'browser';\nexports.isServer = isServer;\n\nexports.asyncGroup = asyncGroup;\nexports.castSegments = castSegments;\nexports.contains = contains;\nexports.copy = copy;\nexports.copyObject = copyObject;\nexports.deepCopy = deepCopy;\nexports.deepEqual = deepEqual;\nexports.equal = equal;\nexports.equalsNaN = equalsNaN;\nexports.isArrayIndex = isArrayIndex;\nexports.lookup = lookup;\nexports.mergeInto = mergeInto;\nexports.mayImpact = mayImpact;\nexports.mayImpactAny = mayImpactAny;\nexports.serverRequire = serverRequire;\nexports.serverUse = serverUse;\nexports.use = use;\n\nfunction asyncGroup(cb) {\n  var group = new AsyncGroup(cb);\n  return function asyncGroupAdd() {\n    return group.add();\n  };\n}\n\n/**\n * @constructor\n * @param {Function} cb(err)\n */\nfunction AsyncGroup(cb) {\n  this.cb = cb;\n  this.isDone = false;\n  this.count = 0;\n}\nAsyncGroup.prototype.add = function() {\n  this.count++;\n  var self = this;\n  return function(err) {\n    self.count--;\n    if (self.isDone) return;\n    if (err) {\n      self.isDone = true;\n      self.cb(err);\n      return;\n    }\n    if (self.count > 0) return;\n    self.isDone = true;\n    self.cb();\n  };\n};\n\n/**\n * @param {Array<string | number>} segments\n * @return {Array<string | number>}\n */\nfunction castSegments(segments) {\n  // Cast number path segments from strings to numbers\n  for (var i = segments.length; i--;) {\n    var segment = segments[i];\n    if (typeof segment === 'string' && isArrayIndex(segment)) {\n      segments[i] = +segment;\n    }\n  }\n  return segments;\n}\n\nfunction contains(segments, testSegments) {\n  for (var i = 0; i < segments.length; i++) {\n    if (segments[i] !== testSegments[i]) return false;\n  }\n  return true;\n}\n\nfunction copy(value) {\n  if (value instanceof Date) return new Date(value);\n  if (typeof value === 'object') {\n    if (value === null) return null;\n    if (Array.isArray(value)) return value.slice();\n    return copyObject(value);\n  }\n  return value;\n}\n\nfunction copyObject(object) {\n  var out = new object.constructor();\n  for (var key in object) {\n    if (object.hasOwnProperty(key)) {\n      out[key] = object[key];\n    }\n  }\n  return out;\n}\n\nfunction deepCopy(value) {\n  if (value instanceof Date) return new Date(value);\n  if (typeof value === 'object') {\n    if (value === null) return null;\n    if (Array.isArray(value)) {\n      var array = [];\n      for (var i = value.length; i--;) {\n        array[i] = deepCopy(value[i]);\n      }\n      return array;\n    }\n    var object = new value.constructor();\n    for (var key in value) {\n      if (value.hasOwnProperty(key)) {\n        object[key] = deepCopy(value[key]);\n      }\n    }\n    return object;\n  }\n  return value;\n}\n\nfunction equal(a, b) {\n  return (a === b) || (equalsNaN(a) && equalsNaN(b));\n}\n\nfunction equalsNaN(x) {\n  // eslint-disable-next-line no-self-compare\n  return x !== x;\n}\n\nfunction isArrayIndex(segment) {\n  return (/^[0-9]+$/).test(segment);\n}\n\nfunction lookup(segments, value) {\n  if (!segments) return value;\n\n  for (var i = 0, len = segments.length; i < len; i++) {\n    if (value == null) return value;\n    value = value[segments[i]];\n  }\n  return value;\n}\n\nfunction mayImpactAny(segmentsList, testSegments) {\n  for (var i = 0, len = segmentsList.length; i < len; i++) {\n    if (mayImpact(segmentsList[i], testSegments)) return true;\n  }\n  return false;\n}\n\nfunction mayImpact(segments, testSegments) {\n  var len = Math.min(segments.length, testSegments.length);\n  for (var i = 0; i < len; i++) {\n    if (segments[i] !== testSegments[i]) return false;\n  }\n  return true;\n}\n\nfunction mergeInto(to, from) {\n  for (var key in from) {\n    to[key] = from[key];\n  }\n  return to;\n}\n\nfunction serverRequire(module, id) {\n  if (!isServer) return;\n  return module.require(id);\n}\n\nfunction serverUse(module, id, options) {\n  if (!isServer) return this;\n  var plugin = module.require(id);\n  return this.use(plugin, options);\n}\n\nfunction use(plugin, options) {\n  // Don't include a plugin more than once\n  var plugins = this._plugins || (this._plugins = []);\n  if (plugins.indexOf(plugin) === -1) {\n    plugins.push(plugin);\n    plugin(this, options);\n  }\n  return this;\n}\n",
    "var Model = require('./Model');\n\nModel.prototype.unbundle = function(data) {\n  if (this.connection) this.connection.startBulk();\n\n  // Re-create and subscribe queries; re-create documents associated with queries\n  this._initQueries(data.queries);\n\n  // Re-create other documents\n  for (var collectionName in data.collections) {\n    var collection = data.collections[collectionName];\n    for (var id in collection) {\n      this.getOrCreateDoc(collectionName, id, collection[id]);\n    }\n  }\n\n  for (var contextId in data.contexts) {\n    var contextData = data.contexts[contextId];\n    var contextModel = this.context(contextId);\n    // Re-init fetchedDocs counts\n    for (var collectionName in contextData.fetchedDocs) {\n      var collection = contextData.fetchedDocs[collectionName];\n      for (var id in collection) {\n        var count = collection[id];\n        while (count--) {\n          contextModel._context.fetchDoc(collectionName, id);\n          this._fetchedDocs.increment(collectionName, id);\n        }\n      }\n    }\n    // Subscribe to document subscriptions\n    for (var collectionName in contextData.subscribedDocs) {\n      var collection = contextData.subscribedDocs[collectionName];\n      for (var id in collection) {\n        var count = collection[id];\n        while (count--) {\n          contextModel.subscribeDoc(collectionName, id);\n        }\n      }\n    }\n    // Re-init createdDocs counts\n    for (var collectionName in contextData.createdDocs) {\n      var collection = contextData.createdDocs[collectionName];\n      for (var id in collection) {\n        // Count value doesn't matter for tracking creates\n        contextModel._context.createDoc(collectionName, id);\n      }\n    }\n  }\n\n  if (this.connection) this.connection.endBulk();\n\n  // Re-create refs\n  for (var i = 0; i < data.refs.length; i++) {\n    var item = data.refs[i];\n    this.ref(item[0], item[1]);\n  }\n  // Re-create refLists\n  for (var i = 0; i < data.refLists.length; i++) {\n    var item = data.refLists[i];\n    this.refList(item[0], item[1], item[2], item[3]);\n  }\n  // Re-create fns\n  for (var i = 0; i < data.fns.length; i++) {\n    var item = data.fns[i];\n    this.start.apply(this, item);\n  }\n  // Re-create filters\n  for (var i = 0; i < data.filters.length; i++) {\n    var item = data.filters[i];\n    var filter = this._filters.add(item[1], item[2], item[3], item[4], item[5]);\n    filter.ref(item[0]);\n  }\n};\n",
    "// @ts-check\n\nvar EventEmitter = require('events').EventEmitter;\nvar util = require('../util');\n/** @type any */\nvar Model = require('./Model');\n\n// These events are re-emitted as 'all' events, and they are queued up and\n// emitted in sequence, so that events generated by other events are not\n// seen in a different order by later listeners\nModel.MUTATOR_EVENTS = {\n  change: true,\n  insert: true,\n  remove: true,\n  move: true,\n  load: true,\n  unload: true\n};\n\nModel.INITS.push(function(model) {\n  EventEmitter.call(this);\n\n  // Set max listeners to unlimited\n  model.setMaxListeners(0);\n\n  // Used in async methods to emit an error event if a callback is not supplied.\n  // This will throw if there is no handler for model.on('error')\n  model.root._defaultCallback = defaultCallback;\n  function defaultCallback(err) {\n    if (err) model._emitError(err);\n  }\n\n  model.root._mutatorEventQueue = null;\n  model.root._pass = new Passed({}, {});\n  model.root._silent = null;\n  model.root._eventContext = null;\n});\n\nutil.mergeInto(Model.prototype, EventEmitter.prototype);\n\nModel.prototype.wrapCallback = function(cb) {\n  if (!cb) return this.root._defaultCallback;\n  var model = this;\n  return function wrappedCallback() {\n    try {\n      return cb.apply(this, arguments);\n    } catch (err) {\n      model._emitError(err);\n    }\n  };\n};\n\nModel.prototype._emitError = function(err, context) {\n  var message = (err.message) ? err.message :\n    (typeof err === 'string') ? err :\n      'Unknown model error';\n  if (context) {\n    message += ' ' + context;\n  }\n  if (err.data) {\n    try {\n      message += ' ' + JSON.stringify(err.data);\n    } catch (stringifyErr) {}\n  }\n  if (err instanceof Error) {\n    err.message = message;\n  } else {\n    err = new Error(message);\n  }\n  this.emit('error', err);\n};\n\n// EventEmitter.prototype.on, EventEmitter.prototype.addListener, and\n// EventEmitter.prototype.once return `this`. The Model equivalents return\n// the listener instead, since it is made internally for method subscriptions\n// and may need to be passed to removeListener.\n\nModel.prototype._emit = EventEmitter.prototype.emit;\nModel.prototype.emit = function(type) {\n  if (type === 'error') {\n    return this._emit.apply(this, arguments);\n  }\n  if (Model.MUTATOR_EVENTS[type]) {\n    if (this._silent) return this;\n    // `segments` is almost definitely an array of strings.\n    //\n    // A search for `.emit(` shows that `segments` is generated from either\n    // `Model#_splitPath` or `Model#_dereference`, both of which return an array\n    // of strings.\n    var segments = arguments[1];\n    var eventArgs = arguments[2];\n    this._emit(type + 'Immediate', segments, eventArgs);\n    if (this.root._mutatorEventQueue) {\n      this.root._mutatorEventQueue.push([type, segments, eventArgs]);\n      return this;\n    }\n    this.root._mutatorEventQueue = [];\n    this._emit(type, segments, eventArgs);\n    this._emit('all', segments, [type].concat(eventArgs));\n    while (this.root._mutatorEventQueue.length) {\n      var queued = this.root._mutatorEventQueue.shift();\n      type = queued[0];\n      segments = queued[1];\n      eventArgs = queued[2];\n      this._emit(type, segments, eventArgs);\n      this._emit('all', segments, [type].concat(eventArgs));\n    }\n    this.root._mutatorEventQueue = null;\n    return this;\n  }\n  return this._emit.apply(this, arguments);\n};\n\nModel.prototype._on = EventEmitter.prototype.on;\nModel.prototype.addListener =\nModel.prototype.on = function(type, pattern, options, cb) {\n  var listener = eventListener(this, type, pattern, options, cb);\n  this._on(type, listener);\n  return listener;\n};\n\nModel.prototype.once = function(type, pattern, options, cb) {\n  var listener = eventListener(this, type, pattern, options, cb);\n  function g() {\n    var matches = listener.apply(null, arguments);\n    if (matches) this.removeListener(type, g);\n  }\n  this._on(type, g);\n  return g;\n};\n\n/**\n * @typedef {Object} ModelOnOptions\n * @property {boolean} [useEventObjects] - If true, the listener is called with\n *   `cb(event: ___Event, captures: string[])`, instead of the legacy var-args\n *   style `cb(captures..., [eventType], eventArgs..., passed)`.\n */\n\nModel.prototype._removeAllListeners = EventEmitter.prototype.removeAllListeners;\nModel.prototype.removeAllListeners = function(type, subpattern) {\n  // If a pattern is specified without an event type, remove all model event\n  // listeners under that pattern for all events\n  if (!type) {\n    for (var key in this._events) {\n      this.removeAllListeners(key, subpattern);\n    }\n    return this;\n  }\n\n  var pattern = this.path(subpattern);\n  // If no pattern is specified, remove all listeners like normal\n  if (!pattern) {\n    if (arguments.length === 0) {\n      return this._removeAllListeners();\n    }\n    return this._removeAllListeners(type);\n  }\n\n  // Remove all listeners for an event under a pattern\n  var listeners = this.listeners(type);\n  var segments = pattern.split('.');\n  // Make sure to iterate in reverse, since the array might be\n  // mutated as listeners are removed\n  for (var i = listeners.length; i--;) {\n    var listener = listeners[i];\n    if (patternContained(pattern, segments, listener)) {\n      this.removeListener(type, listener);\n    }\n  }\n  return this;\n};\n\nfunction patternContained(pattern, segments, listener) {\n  var listenerSegments = listener.patternSegments;\n  if (!listenerSegments) return false;\n  if (pattern === listener.pattern || pattern === '**') return true;\n  var len = segments.length;\n  if (len > listenerSegments.length) return false;\n  for (var i = 0; i < len; i++) {\n    if (segments[i] !== listenerSegments[i]) return false;\n  }\n  return true;\n}\n\nModel.prototype.pass = function(object, invert) {\n  var model = this._child();\n  model._pass = (invert) ?\n    new Passed(object, this._pass) :\n    new Passed(this._pass, object);\n  return model;\n};\n\nfunction Passed(previous, value) {\n  for (var key in previous) {\n    this[key] = previous[key];\n  }\n  for (var key in value) {\n    this[key] = value[key];\n  }\n}\n\n/**\n * The returned Model will or won't trigger event handlers when the model emits\n * events, depending on `value`\n * @param {Boolean|Null} value defaults to true\n * @return {Model}\n */\nModel.prototype.silent = function(value) {\n  var model = this._child();\n  model._silent = (value == null) ? true : value;\n  return model;\n};\n\nModel.prototype.eventContext = function(value) {\n  var model = this._child();\n  model._eventContext = value;\n  return model;\n};\n\nModel.prototype.removeContextListeners = function(value) {\n  if (arguments.length === 0) {\n    value = this._eventContext;\n  }\n  // Remove all events created within a given context\n  for (var type in this._events) {\n    var listeners = this.listeners(type);\n    // Make sure to iterate in reverse, since the array might be\n    // mutated as listeners are removed\n    for (var i = listeners.length; i--;) {\n      var listener = listeners[i];\n      if (listener.eventContext === value) {\n        this.removeListener(type, listener);\n      }\n    }\n  }\n  return this;\n};\n\n/**\n * @param {Model} model\n * @param {string} eventType\n */\nfunction eventListener(model, eventType, arg2, arg3, arg4) {\n  var subpattern, options, cb;\n  if (arg4) {\n    // on(eventType, path, options, cb)\n    subpattern = arg2;\n    options = arg3;\n    cb = arg4;\n  } else if (arg3) {\n    // on(eventType, path, cb)\n    // on(eventType, options, cb)\n    cb = arg3;\n    if (model.isPath(arg2)) {\n      subpattern = arg2;\n    } else {\n      options = arg2;\n    }\n  } else { // if (arg2)\n    // on(eventType, cb)\n    cb = arg2;\n  }\n  if (options) {\n    if (options.useEventObjects) {\n      var useEventObjects = true;\n    }\n  }\n\n  if (subpattern) {\n    // For signatures with pattern:\n    // model.on('change', 'example.subpath.**', callback)\n    // model.at('example').on('change', 'subpath', callback)\n    var pattern = model.path(subpattern);\n    return (useEventObjects) ?\n      modelEventListener(eventType, pattern, cb, model._eventContext) :\n      modelEventListenerLegacy(pattern, cb, model._eventContext);\n  }\n  // For signature without explicit pattern:\n  // model.at('example').on('change', callback)\n  /** @type string */\n  var path = model.path();\n  if (path) {\n    return (useEventObjects) ?\n      modelEventListener(eventType, path, cb, model._eventContext) :\n      modelEventListenerLegacy(path, cb, model._eventContext);\n  }\n  // For signature:\n  // model.on('normalEvent', callback)\n  return cb;\n}\n\n/**\n * Legacy version of `modelEventListener` that calls `cb` with var-args\n * `(captures..., [eventType], args..., passed)` instead of new-style\n * `___Event` objects.\n *\n * @param {string} pattern\n * @param {Function} cb\n * @param {*} eventContext\n * @return {ModelListenerFn & ModelListenerProps}\n */\nfunction modelEventListenerLegacy(pattern, cb, eventContext) {\n  var patternSegments = util.castSegments(pattern.split('.'));\n  var testFn = testPatternFn(pattern, patternSegments);\n\n  /** @type ModelListenerFn */\n  function modelListener(segments, eventArgs) {\n    var captures = testFn(segments);\n    if (!captures) return;\n\n    var args = (captures.length) ? captures.concat(eventArgs) : eventArgs;\n    cb.apply(null, args);\n    return true;\n  }\n\n  // Used in Model#removeAllListeners\n  modelListener.pattern = pattern;\n  modelListener.patternSegments = patternSegments;\n  modelListener.eventContext = eventContext;\n\n  return modelListener;\n}\n\n/**\n * Returns a function that can be passed to `EventEmitter#on`, with some\n * additional properties used for `Model#removeAllListeners`.\n *\n * When the function is called, it checks if the event matches `patternArg`, and\n * if there's a match, it calls `cb`.\n *\n * @param {string} eventType\n * @param {string} pattern\n * @param {Function} cb\n * @param {*} eventContext\n * @return {ModelListenerFn & ModelListenerProps}\n */\nfunction modelEventListener(eventType, pattern, cb, eventContext) {\n  var patternSegments = util.castSegments(pattern.split('.'));\n  var testFn = testPatternFn(pattern, patternSegments);\n\n  var eventFactory = getEventFactory(eventType);\n  /** @type ModelListenerFn */\n  function modelListener(segments, eventArgs) {\n    var captures = testFn(segments);\n    if (!captures) return;\n\n    var event = eventFactory(eventArgs);\n    cb(event, captures);\n    return true;\n  }\n\n  // Used in Model#removeAllListeners\n  modelListener.pattern = pattern;\n  modelListener.patternSegments = patternSegments;\n  modelListener.eventContext = eventContext;\n\n  return modelListener;\n}\n\n/** @typedef { (segments: string[], eventArgs: any[]) => (boolean | undefined) } ModelListenerFn */\n/** @typedef { {pattern: string, patternSegments: Array<string | number>, eventContext: any} } ModelListenerProps */\n\n/**\n * Returns a factory function that creates an `___Event` object based on an\n * old-style `eventArgs` array.\n *\n * @param {string} eventType\n * @return {(eventArgs: any[]) => ChangeEvent | InsertEvent | RemoveEvent | MoveEvent | LoadEvent | UnloadEvent}\n */\nfunction getEventFactory(eventType) {\n  switch (eventType) {\n    case 'change':\n      return function(eventArgs) {\n        return new ChangeEvent(eventArgs);\n      };\n    case 'insert':\n      return function(eventArgs) {\n        return new InsertEvent(eventArgs);\n      };\n    case 'remove':\n      return function(eventArgs) {\n        return new RemoveEvent(eventArgs);\n      };\n    case 'move':\n      return function(eventArgs) {\n        return new MoveEvent(eventArgs);\n      };\n    case 'load':\n      return function(eventArgs) {\n        return new LoadEvent(eventArgs);\n      };\n    case 'unload':\n      return function(eventArgs) {\n        return new UnloadEvent(eventArgs);\n      };\n    case 'all':\n      return function(eventArgs) {\n        var concreteEventType = eventArgs[0]; // 'change', 'insert', etc.\n        var concreteEventFactory = getEventFactory(concreteEventType);\n        return concreteEventFactory(eventArgs.slice(1));\n      };\n    default: throw new Error('Unknown event: ' + eventType);\n  }\n}\n\n// These constructors accept the `eventArgs` array format that Racer uses\n// internally when calling `Model#emit`.\n//\n// Eventually, Racer should switch to passing these events around directly,\n// but that will require updating all the places that parse the `eventArgs`\n// array format, to extract things like `passed`.\n\nfunction ChangeEvent(eventArgs) {\n  this.value = eventArgs[0];\n  this.previous = eventArgs[1];\n  this.passed = eventArgs[2];\n}\nChangeEvent.prototype.type = 'change';\n\nfunction InsertEvent(eventArgs) {\n  this.index = eventArgs[0];\n  this.values = eventArgs[1];\n  this.passed = eventArgs[2];\n}\nInsertEvent.prototype.type = 'insert';\n\nfunction RemoveEvent(eventArgs) {\n  this.index = eventArgs[0];\n  this.removed = eventArgs[1];\n  this.passed = eventArgs[2];\n}\nRemoveEvent.prototype.type = 'remove';\n\nfunction MoveEvent(eventArgs) {\n  this.from = eventArgs[0];\n  this.to = eventArgs[1];\n  this.howMany = eventArgs[2];\n  this.passed = eventArgs[3];\n}\nMoveEvent.prototype.type = 'move';\n\nfunction LoadEvent(eventArgs) {\n  this.document = eventArgs[0];\n  this.passed = eventArgs[1];\n}\nLoadEvent.prototype.type = 'load';\n\nfunction UnloadEvent(eventArgs) {\n  this.previousDocument = eventArgs[0];\n  this.passed = eventArgs[1];\n}\nUnloadEvent.prototype.type = 'unload';\n\n/**\n * Returns a function that tests an array of event segments against the\n * `patternSegments`. (`pattern` only matters if it's exactly `'**'`.)\n *\n * @param {string?} pattern\n * @param {Array<string | number>} patternSegments\n * @return {(segments: string[]) => (string[] | undefined)} A function to test\n *   an array of event segments. If the event segments match, an array of 0 or\n *   more segments captured by `'*'` / `'**'` is returned, one per wildcard. If\n *   the event segments don't match, `undefined` is returned.\n */\nfunction testPatternFn(pattern, patternSegments) {\n  if (pattern === '**') {\n    return function testPattern(segments) {\n      return [segments.join('.')];\n    };\n  }\n\n  var endingRest = stripRestWildcard(patternSegments);\n\n  return function testPattern(segments) {\n    // Any pattern with more segments does not match\n    var patternLen = patternSegments.length;\n    if (patternLen > segments.length) return;\n\n    // A pattern with the same number of segments matches if each\n    // of the segments are wildcards or equal. A shorter pattern matches\n    // if it ends in a rest wildcard and each of the corresponding\n    // segments are wildcards or equal.\n    if (patternLen === segments.length || endingRest) {\n      /** @type string[] */\n      var captures = [];\n      for (var i = 0; i < patternLen; i++) {\n        var patternSegment = patternSegments[i];\n        var segment = segments[i];\n        if (patternSegment === '*' || patternSegment === '**') {\n          captures.push(segment);\n          continue;\n        }\n        if (patternSegment !== segment) return;\n      }\n      if (endingRest) {\n        var remainder = segments.slice(i).join('.');\n        captures.push(remainder);\n      }\n      return captures;\n    }\n  };\n}\n\n/**\n * @param {Array<string | number>} segments\n */\nfunction stripRestWildcard(segments) {\n  // ['example', '**'] -> ['example']; return true\n  var lastIndex = segments.length - 1;\n  var lastSegment = segments[lastIndex];\n  if (lastSegment === '**') {\n    segments.pop();\n    return true;\n  }\n  // ['example', 'subpath**'] -> ['example', 'subpath']; return true\n  if (typeof lastSegment !== 'string') return false;\n  var match = /^([^\\*]+)\\*\\*$/.exec(lastSegment);\n  if (!match) return false;\n  segments[lastIndex] = match[1];\n  return true;\n}\n",
    "var Model = require('./Model');\n\nexports.mixin = {};\n\nModel.prototype._splitPath = function(subpath) {\n  var path = this.path(subpath);\n  return (path && path.split('.')) || [];\n};\n\n/**\n * Returns the path equivalent to the path of the current scoped model plus\n * (optionally) a suffix subpath\n *\n * @optional @param {String} subpath\n * @return {String} absolute path\n * @api public\n */\nModel.prototype.path = function(subpath) {\n  if (subpath == null || subpath === '') return (this._at) ? this._at : '';\n  if (typeof subpath === 'string' || typeof subpath === 'number') {\n    return (this._at) ? this._at + '.' + subpath : '' + subpath;\n  }\n  if (typeof subpath.path === 'function') return subpath.path();\n};\n\nModel.prototype.isPath = function(subpath) {\n  return this.path(subpath) != null;\n};\n\nModel.prototype.scope = function(path) {\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      path = path + '.' + arguments[i];\n    }\n  }\n  return createScoped(this, path);\n};\n\n/**\n * Create a model object scoped to a particular path.\n * Example:\n *     var user = model.at('users.1');\n *     user.set('username', 'brian');\n *     user.on('push', 'todos', function(todo) {\n *       // ...\n *     });\n *\n *  @param {String} segment\n *  @return {Model} a scoped model\n *  @api public\n */\nModel.prototype.at = function(subpath) {\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      subpath = subpath + '.' + arguments[i];\n    }\n  }\n  var path = this.path(subpath);\n  return createScoped(this, path);\n};\n\nfunction createScoped(model, path) {\n  var scoped = model._child();\n  scoped._at = path;\n  return scoped;\n}\n\n/**\n * Returns a model scope that is a number of levels above the current scoped\n * path. Number of levels defaults to 1, so this method called without\n * arguments returns the model scope's parent model scope.\n *\n * @optional @param {Number} levels\n * @return {Model} a scoped model\n */\nModel.prototype.parent = function(levels) {\n  if (levels == null) levels = 1;\n  var segments = this._splitPath();\n  var len = Math.max(0, segments.length - levels);\n  var path = segments.slice(0, len).join('.');\n  return this.scope(path);\n};\n\n/**\n * Returns the last property segment of the current model scope path\n *\n * @optional @param {String} path\n * @return {String}\n */\nModel.prototype.leaf = function(path) {\n  if (!path) path = this.path();\n  var i = path.lastIndexOf('.');\n  return path.slice(i + 1);\n};\n",
    "module.exports = Doc;\n\nfunction Doc(model, collectionName, id) {\n  this.collectionName = collectionName;\n  this.id = id;\n  this.collectionData = model && model.data[collectionName];\n}\n\nDoc.prototype.path = function(segments) {\n  var path = this.collectionName + '.' + this.id;\n  if (segments && segments.length) path += '.' + segments.join('.');\n  return path;\n};\n\nDoc.prototype._errorMessage = function(description, segments, value) {\n  return description + ' at ' + this.path(segments) + ': ' +\n    JSON.stringify(value, null, 2);\n};\n",
    "var Doc = require('./Doc');\nvar util = require('../util');\n\nmodule.exports = LocalDoc;\n\nfunction LocalDoc(model, collectionName, id, data) {\n  Doc.call(this, model, collectionName, id);\n  this.data = data;\n  this._updateCollectionData();\n}\n\nLocalDoc.prototype = new Doc();\n\nLocalDoc.prototype._updateCollectionData = function() {\n  this.collectionData[this.id] = this.data;\n};\n\nLocalDoc.prototype.create = function(value, cb) {\n  if (this.data !== undefined) {\n    var message = this._errorMessage('create on local document with data', null, this.data);\n    var err = new Error(message);\n    return cb(err);\n  }\n  this.data = value;\n  this._updateCollectionData();\n  cb();\n};\n\nLocalDoc.prototype.set = function(segments, value, cb) {\n  function set(node, key) {\n    var previous = node[key];\n    node[key] = value;\n    return previous;\n  }\n  return this._apply(segments, set, cb);\n};\n\nLocalDoc.prototype.del = function(segments, cb) {\n  // Don't do anything if the value is already undefined, since\n  // apply creates objects as it traverses, and the del method\n  // should not create anything\n  var previous = this.get(segments);\n  if (previous === undefined) {\n    cb();\n    return;\n  }\n  function del(node, key) {\n    delete node[key];\n    return previous;\n  }\n  return this._apply(segments, del, cb);\n};\n\nLocalDoc.prototype.increment = function(segments, byNumber, cb) {\n  var self = this;\n  function validate(value) {\n    if (typeof value === 'number' || value == null) return;\n    return new TypeError(self._errorMessage(\n      'increment on non-number', segments, value\n    ));\n  }\n  function increment(node, key) {\n    var value = (node[key] || 0) + byNumber;\n    node[key] = value;\n    return value;\n  }\n  return this._validatedApply(segments, validate, increment, cb);\n};\n\nLocalDoc.prototype.push = function(segments, value, cb) {\n  function push(arr) {\n    return arr.push(value);\n  }\n  return this._arrayApply(segments, push, cb);\n};\n\nLocalDoc.prototype.unshift = function(segments, value, cb) {\n  function unshift(arr) {\n    return arr.unshift(value);\n  }\n  return this._arrayApply(segments, unshift, cb);\n};\n\nLocalDoc.prototype.insert = function(segments, index, values, cb) {\n  function insert(arr) {\n    arr.splice.apply(arr, [index, 0].concat(values));\n    return arr.length;\n  }\n  return this._arrayApply(segments, insert, cb);\n};\n\nLocalDoc.prototype.pop = function(segments, cb) {\n  function pop(arr) {\n    return arr.pop();\n  }\n  return this._arrayApply(segments, pop, cb);\n};\n\nLocalDoc.prototype.shift = function(segments, cb) {\n  function shift(arr) {\n    return arr.shift();\n  }\n  return this._arrayApply(segments, shift, cb);\n};\n\nLocalDoc.prototype.remove = function(segments, index, howMany, cb) {\n  function remove(arr) {\n    return arr.splice(index, howMany);\n  }\n  return this._arrayApply(segments, remove, cb);\n};\n\nLocalDoc.prototype.move = function(segments, from, to, howMany, cb) {\n  function move(arr) {\n    // Remove from old location\n    var values = arr.splice(from, howMany);\n    // Insert in new location\n    arr.splice.apply(arr, [to, 0].concat(values));\n    return values;\n  }\n  return this._arrayApply(segments, move, cb);\n};\n\nLocalDoc.prototype.stringInsert = function(segments, index, value, cb) {\n  var self = this;\n  function validate(value) {\n    if (typeof value === 'string' || value == null) return;\n    return new TypeError(self._errorMessage(\n      'stringInsert on non-string', segments, value\n    ));\n  }\n  function stringInsert(node, key) {\n    var previous = node[key];\n    if (previous == null) {\n      node[key] = value;\n      return previous;\n    }\n    node[key] = previous.slice(0, index) + value + previous.slice(index);\n    return previous;\n  }\n  return this._validatedApply(segments, validate, stringInsert, cb);\n};\n\nLocalDoc.prototype.stringRemove = function(segments, index, howMany, cb) {\n  var self = this;\n  function validate(value) {\n    if (typeof value === 'string' || value == null) return;\n    return new TypeError(self._errorMessage(\n      'stringRemove on non-string', segments, value\n    ));\n  }\n  function stringRemove(node, key) {\n    var previous = node[key];\n    if (previous == null) return previous;\n    if (index < 0) index += previous.length;\n    node[key] = previous.slice(0, index) + previous.slice(index + howMany);\n    return previous;\n  }\n  return this._validatedApply(segments, validate, stringRemove, cb);\n};\n\nLocalDoc.prototype.get = function(segments) {\n  return util.lookup(segments, this.data);\n};\n\n/**\n * @param {Array} segments is the array representing a path\n * @param {Function} fn(node, key) applies a mutation on node[key]\n * @return {Object} returns the return value of fn(node, key)\n */\nLocalDoc.prototype._createImplied = function(segments, fn) {\n  var node = this;\n  var key = 'data';\n  var i = 0;\n  var nextKey = segments[i++];\n  while (nextKey != null) {\n    // Get or create implied object or array\n    node = node[key] || (node[key] = /^\\d+$/.test(nextKey) ? [] : {});\n    key = nextKey;\n    nextKey = segments[i++];\n  }\n  return fn(node, key);\n};\n\nLocalDoc.prototype._apply = function(segments, fn, cb) {\n  var out = this._createImplied(segments, fn);\n  this._updateCollectionData();\n  cb();\n  return out;\n};\n\nLocalDoc.prototype._validatedApply = function(segments, validate, fn, cb) {\n  var out = this._createImplied(segments, function(node, key) {\n    var err = validate(node[key]);\n    if (err) return cb(err);\n    return fn(node, key);\n  });\n  this._updateCollectionData();\n  cb();\n  return out;\n};\n\nLocalDoc.prototype._arrayApply = function(segments, fn, cb) {\n  // Lookup a pointer to the property or nested property &\n  // return the current value or create a new array\n  var arr = this._createImplied(segments, nodeCreateArray);\n\n  if (!Array.isArray(arr)) {\n    var message = this._errorMessage(fn.name + ' on non-array', segments, arr);\n    var err = new TypeError(message);\n    return cb(err);\n  }\n  var out = fn(arr);\n  this._updateCollectionData();\n  cb();\n  return out;\n};\n\nfunction nodeCreateArray(node, key) {\n  var node = node[key] || (node[key] = []);\n  return node;\n}\n",
    "var Model = require('./Model');\nvar LocalDoc = require('./LocalDoc');\nvar util = require('../util');\n\nfunction CollectionMap() {}\nfunction ModelData() {}\nfunction DocMap() {}\nfunction CollectionData() {}\n\nModel.INITS.push(function(model) {\n  model.root.collections = new CollectionMap();\n  model.root.data = new ModelData();\n});\n\nModel.prototype.getCollection = function(collectionName) {\n  return this.root.collections[collectionName];\n};\nModel.prototype.getDoc = function(collectionName, id) {\n  var collection = this.root.collections[collectionName];\n  return collection && collection.docs[id];\n};\nModel.prototype.get = function(subpath) {\n  var segments = this._splitPath(subpath);\n  return this._get(segments);\n};\nModel.prototype._get = function(segments) {\n  return util.lookup(segments, this.root.data);\n};\nModel.prototype.getCopy = function(subpath) {\n  var segments = this._splitPath(subpath);\n  return this._getCopy(segments);\n};\nModel.prototype._getCopy = function(segments) {\n  var value = this._get(segments);\n  return util.copy(value);\n};\nModel.prototype.getDeepCopy = function(subpath) {\n  var segments = this._splitPath(subpath);\n  return this._getDeepCopy(segments);\n};\nModel.prototype._getDeepCopy = function(segments) {\n  var value = this._get(segments);\n  return util.deepCopy(value);\n};\nModel.prototype.getOrCreateCollection = function(name) {\n  var collection = this.root.collections[name];\n  if (collection) return collection;\n  var Doc = this._getDocConstructor(name);\n  collection = new Collection(this.root, name, Doc);\n  this.root.collections[name] = collection;\n  return collection;\n};\nModel.prototype._getDocConstructor = function() {\n  // Only create local documents. This is overriden in ./connection.js, so that\n  // the RemoteDoc behavior can be selectively included\n  return LocalDoc;\n};\n\n/**\n * Returns an existing document with id in a collection. If the document does\n * not exist, then creates the document with id in a collection and returns the\n * new document.\n * @param {String} collectionName\n * @param {String} id\n * @param {Object} [data] data to create if doc with id does not exist in collection\n */\nModel.prototype.getOrCreateDoc = function(collectionName, id, data) {\n  var collection = this.getOrCreateCollection(collectionName);\n  return collection.docs[id] || collection.add(id, data);\n};\n\n/**\n * @param {String} subpath\n */\nModel.prototype.destroy = function(subpath) {\n  var segments = this._splitPath(subpath);\n  // Silently remove all types of listeners within subpath\n  var silentModel = this.silent();\n  silentModel.removeAllListeners(null, subpath);\n  silentModel._removeAllRefs(segments);\n  silentModel._stopAll(segments);\n  silentModel._removeAllFilters(segments);\n  // Silently remove all model data within subpath\n  if (segments.length === 0) {\n    this.root.collections = new CollectionMap();\n    // Delete each property of data instead of creating a new object so that\n    // it is possible to continue using a reference to the original data object\n    var data = this.root.data;\n    for (var key in data) {\n      delete data[key];\n    }\n  } else if (segments.length === 1) {\n    var collection = this.getCollection(segments[0]);\n    collection && collection.destroy();\n  } else {\n    silentModel._del(segments);\n  }\n};\n\nfunction Collection(model, name, Doc) {\n  this.model = model;\n  this.name = name;\n  this.Doc = Doc;\n  this.docs = new DocMap();\n  this.data = model.data[name] = new CollectionData();\n}\n\n/**\n * Adds a document with `id` and `data` to `this` Collection.\n * @param {String} id\n * @param {Object} data\n * @return {LocalDoc|RemoteDoc} doc\n */\nCollection.prototype.add = function(id, data) {\n  var doc = new this.Doc(this.model, this.name, id, data, this);\n  this.docs[id] = doc;\n  return doc;\n};\nCollection.prototype.destroy = function() {\n  delete this.model.collections[this.name];\n  delete this.model.data[this.name];\n};\n\n/**\n * Removes the document with `id` from `this` Collection. If there are no more\n * documents in the Collection after the given document is removed, then this\n * also destroys the Collection.\n * @param {String} id\n */\nCollection.prototype.remove = function(id) {\n  delete this.docs[id];\n  delete this.data[id];\n  if (noKeys(this.docs)) this.destroy();\n};\n\n/**\n * Returns an object that maps doc ids to fully resolved documents.\n * @return {Object}\n */\nCollection.prototype.get = function() {\n  return this.data;\n};\n\nfunction noKeys(object) {\n  // eslint-disable-next-line no-unused-vars\n  for (var key in object) {\n    return false;\n  }\n  return true;\n}\n",
    "var util = require('../util');\nvar Model = require('./Model');\n\nModel.prototype._mutate = function(segments, fn, cb) {\n  cb = this.wrapCallback(cb);\n  var collectionName = segments[0];\n  var id = segments[1];\n  if (!collectionName || !id) {\n    var message = fn.name + ' must be performed under a collection ' +\n      'and document id. Invalid path: ' + segments.join('.');\n    return cb(new Error(message));\n  }\n  var doc = this.getOrCreateDoc(collectionName, id);\n  var docSegments = segments.slice(2);\n  if (this._preventCompose && doc.shareDoc) {\n    var oldPreventCompose = doc.shareDoc.preventCompose;\n    doc.shareDoc.preventCompose = true;\n    var out = fn(doc, docSegments, cb);\n    doc.shareDoc.preventCompose = oldPreventCompose;\n    return out;\n  }\n  return fn(doc, docSegments, cb);\n};\n\nModel.prototype.set = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._set(segments, value, cb);\n};\nModel.prototype._set = function(segments, value, cb) {\n  segments = this._dereference(segments);\n  var model = this;\n  function set(doc, docSegments, fnCb) {\n    var previous = doc.set(docSegments, value, fnCb);\n    // On setting the entire doc, remote docs sometimes do a copy to add the\n    // id without it being stored in the database by ShareJS\n    if (docSegments.length === 0) value = doc.get(docSegments);\n    model.emit('change', segments, [value, previous, model._pass]);\n    return previous;\n  }\n  return this._mutate(segments, set, cb);\n};\n\nModel.prototype.setNull = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._setNull(segments, value, cb);\n};\nModel.prototype._setNull = function(segments, value, cb) {\n  segments = this._dereference(segments);\n  var model = this;\n  function setNull(doc, docSegments, fnCb) {\n    var previous = doc.get(docSegments);\n    if (previous != null) {\n      fnCb();\n      return previous;\n    }\n    doc.set(docSegments, value, fnCb);\n    model.emit('change', segments, [value, previous, model._pass]);\n    return value;\n  }\n  return this._mutate(segments, setNull, cb);\n};\n\nModel.prototype.setEach = function() {\n  var subpath, object, cb;\n  if (arguments.length === 1) {\n    object = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    object = arguments[1];\n  } else {\n    subpath = arguments[0];\n    object = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._setEach(segments, object, cb);\n};\nModel.prototype._setEach = function(segments, object, cb) {\n  segments = this._dereference(segments);\n  var group = util.asyncGroup(this.wrapCallback(cb));\n  for (var key in object) {\n    var value = object[key];\n    this._set(segments.concat(key), value, group());\n  }\n};\n\nModel.prototype.create = function() {\n  var subpath, value, cb;\n  if (arguments.length === 0) {\n    value = {};\n  } else if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      value = {};\n      cb = arguments[0];\n    } else {\n      value = arguments[0];\n    }\n  } else if (arguments.length === 2) {\n    if (typeof arguments[1] === 'function') {\n      value = arguments[0];\n      cb = arguments[1];\n    } else {\n      subpath = arguments[0];\n      value = arguments[1];\n    }\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._create(segments, value, cb);\n};\nModel.prototype._create = function(segments, value, cb) {\n  segments = this._dereference(segments);\n  if (segments.length !== 2) {\n    var message = 'create may only be used on a document path. ' +\n      'Invalid path: ' + segments.join('.');\n    cb = this.wrapCallback(cb);\n    return cb(new Error(message));\n  }\n  var model = this;\n  function create(doc, docSegments, fnCb) {\n    var previous;\n    doc.create(value, fnCb);\n    // On creating the doc, remote docs do a copy to add the id without\n    // it being stored in the database by ShareJS\n    value = doc.get();\n    model.emit('change', segments, [value, previous, model._pass]);\n  }\n  this._mutate(segments, create, cb);\n};\n\nModel.prototype.createNull = function() {\n  var subpath, value, cb;\n  if (arguments.length === 0) {\n    value = {};\n  } else if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      value = {};\n      cb = arguments[0];\n    } else {\n      value = arguments[0];\n    }\n  } else if (arguments.length === 2) {\n    if (typeof arguments[1] === 'function') {\n      value = arguments[0];\n      cb = arguments[1];\n    } else {\n      subpath = arguments[0];\n      value = arguments[1];\n    }\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._createNull(segments, value, cb);\n};\nModel.prototype._createNull = function(segments, value, cb) {\n  segments = this._dereference(segments);\n  var doc = this.getDoc(segments[0], segments[1]);\n  if (doc && doc.get() != null) return;\n  this._create(segments, value, cb);\n};\n\nModel.prototype.add = function() {\n  var subpath, value, cb;\n  if (arguments.length === 0) {\n    value = {};\n  } else if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      value = {};\n      cb = arguments[0];\n    } else {\n      value = arguments[0];\n    }\n  } else if (arguments.length === 2) {\n    if (typeof arguments[1] === 'function') {\n      value = arguments[0];\n      cb = arguments[1];\n    } else {\n      subpath = arguments[0];\n      value = arguments[1];\n    }\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._add(segments, value, cb);\n};\nModel.prototype._add = function(segments, value, cb) {\n  if (typeof value !== 'object') {\n    var message = 'add requires an object value. Invalid value: ' + value;\n    cb = this.wrapCallback(cb);\n    return cb(new Error(message));\n  }\n  var id = value.id || this.id();\n  value.id = id;\n  segments = this._dereference(segments.concat(id));\n  var model = this;\n  function add(doc, docSegments, fnCb) {\n    var previous;\n    if (docSegments.length) {\n      previous = doc.set(docSegments, value, fnCb);\n    } else {\n      doc.create(value, fnCb);\n      // On creating the doc, remote docs do a copy to add the id without\n      // it being stored in the database by ShareJS\n      value = doc.get();\n    }\n    model.emit('change', segments, [value, previous, model._pass]);\n  }\n  this._mutate(segments, add, cb);\n  return id;\n};\n\nModel.prototype.del = function() {\n  var subpath, cb;\n  if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      cb = arguments[0];\n    } else {\n      subpath = arguments[0];\n    }\n  } else {\n    subpath = arguments[0];\n    cb = arguments[1];\n  }\n  var segments = this._splitPath(subpath);\n  return this._del(segments, cb);\n};\nModel.prototype._del = function(segments, cb) {\n  segments = this._dereference(segments);\n  var model = this;\n  function del(doc, docSegments, fnCb) {\n    var previous = doc.del(docSegments, fnCb);\n    // When deleting an entire document, also remove the reference to the\n    // document object from its collection\n    if (segments.length === 2) {\n      var collectionName = segments[0];\n      var id = segments[1];\n      model.root.collections[collectionName].remove(id);\n    }\n    model.emit('change', segments, [undefined, previous, model._pass]);\n    return previous;\n  }\n  return this._mutate(segments, del, cb);\n};\n\nModel.prototype.increment = function() {\n  var subpath, byNumber, cb;\n  if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      cb = arguments[0];\n    } else if (typeof arguments[0] === 'number') {\n      byNumber = arguments[0];\n    } else {\n      subpath = arguments[0];\n    }\n  } else if (arguments.length === 2) {\n    if (typeof arguments[1] === 'function') {\n      cb = arguments[1];\n      if (typeof arguments[0] === 'number') {\n        byNumber = arguments[0];\n      } else {\n        subpath = arguments[0];\n      }\n    } else {\n      subpath = arguments[0];\n      byNumber = arguments[1];\n    }\n  } else {\n    subpath = arguments[0];\n    byNumber = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._increment(segments, byNumber, cb);\n};\nModel.prototype._increment = function(segments, byNumber, cb) {\n  segments = this._dereference(segments);\n  if (byNumber == null) byNumber = 1;\n  var model = this;\n  function increment(doc, docSegments, fnCb) {\n    var value = doc.increment(docSegments, byNumber, fnCb);\n    var previous = value - byNumber;\n    model.emit('change', segments, [value, previous, model._pass]);\n    return value;\n  }\n  return this._mutate(segments, increment, cb);\n};\n\nModel.prototype.push = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._push(segments, value, cb);\n};\nModel.prototype._push = function(segments, value, cb) {\n  var forArrayMutator = true;\n  segments = this._dereference(segments, forArrayMutator);\n  var model = this;\n  function push(doc, docSegments, fnCb) {\n    var length = doc.push(docSegments, value, fnCb);\n    model.emit('insert', segments, [length - 1, [value], model._pass]);\n    return length;\n  }\n  return this._mutate(segments, push, cb);\n};\n\nModel.prototype.unshift = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._unshift(segments, value, cb);\n};\nModel.prototype._unshift = function(segments, value, cb) {\n  var forArrayMutator = true;\n  segments = this._dereference(segments, forArrayMutator);\n  var model = this;\n  function unshift(doc, docSegments, fnCb) {\n    var length = doc.unshift(docSegments, value, fnCb);\n    model.emit('insert', segments, [0, [value], model._pass]);\n    return length;\n  }\n  return this._mutate(segments, unshift, cb);\n};\n\nModel.prototype.insert = function() {\n  var subpath, index, values, cb;\n  if (arguments.length < 2) {\n    throw new Error('Not enough arguments for insert');\n  } else if (arguments.length === 2) {\n    index = arguments[0];\n    values = arguments[1];\n  } else if (arguments.length === 3) {\n    subpath = arguments[0];\n    index = arguments[1];\n    values = arguments[2];\n  } else {\n    subpath = arguments[0];\n    index = arguments[1];\n    values = arguments[2];\n    cb = arguments[3];\n  }\n  var segments = this._splitPath(subpath);\n  return this._insert(segments, +index, values, cb);\n};\nModel.prototype._insert = function(segments, index, values, cb) {\n  var forArrayMutator = true;\n  segments = this._dereference(segments, forArrayMutator);\n  var model = this;\n  function insert(doc, docSegments, fnCb) {\n    var inserted = (Array.isArray(values)) ? values : [values];\n    var length = doc.insert(docSegments, index, inserted, fnCb);\n    model.emit('insert', segments, [index, inserted, model._pass]);\n    return length;\n  }\n  return this._mutate(segments, insert, cb);\n};\n\nModel.prototype.pop = function() {\n  var subpath, cb;\n  if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      cb = arguments[0];\n    } else {\n      subpath = arguments[0];\n    }\n  } else {\n    subpath = arguments[0];\n    cb = arguments[1];\n  }\n  var segments = this._splitPath(subpath);\n  return this._pop(segments, cb);\n};\nModel.prototype._pop = function(segments, cb) {\n  var forArrayMutator = true;\n  segments = this._dereference(segments, forArrayMutator);\n  var model = this;\n  function pop(doc, docSegments, fnCb) {\n    var arr = doc.get(docSegments);\n    var length = arr && arr.length;\n    if (!length) {\n      fnCb();\n      return;\n    }\n    var value = doc.pop(docSegments, fnCb);\n    model.emit('remove', segments, [length - 1, [value], model._pass]);\n    return value;\n  }\n  return this._mutate(segments, pop, cb);\n};\n\nModel.prototype.shift = function() {\n  var subpath, cb;\n  if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      cb = arguments[0];\n    } else {\n      subpath = arguments[0];\n    }\n  } else {\n    subpath = arguments[0];\n    cb = arguments[1];\n  }\n  var segments = this._splitPath(subpath);\n  return this._shift(segments, cb);\n};\nModel.prototype._shift = function(segments, cb) {\n  var forArrayMutator = true;\n  segments = this._dereference(segments, forArrayMutator);\n  var model = this;\n  function shift(doc, docSegments, fnCb) {\n    var arr = doc.get(docSegments);\n    var length = arr && arr.length;\n    if (!length) {\n      fnCb();\n      return;\n    }\n    var value = doc.shift(docSegments, fnCb);\n    model.emit('remove', segments, [0, [value], model._pass]);\n    return value;\n  }\n  return this._mutate(segments, shift, cb);\n};\n\nModel.prototype.remove = function() {\n  var subpath, index, howMany, cb;\n  if (arguments.length < 2) {\n    index = arguments[0];\n  } else if (arguments.length === 2) {\n    if (typeof arguments[1] === 'function') {\n      cb = arguments[1];\n      if (typeof arguments[0] === 'number') {\n        index = arguments[0];\n      } else {\n        subpath = arguments[0];\n      }\n    } else {\n      // eslint-disable-next-line no-lonely-if\n      if (typeof arguments[0] === 'number') {\n        index = arguments[0];\n        howMany = arguments[1];\n      } else {\n        subpath = arguments[0];\n        index = arguments[1];\n      }\n    }\n  } else if (arguments.length === 3) {\n    if (typeof arguments[2] === 'function') {\n      cb = arguments[2];\n      if (typeof arguments[0] === 'number') {\n        index = arguments[0];\n        howMany = arguments[1];\n      } else {\n        subpath = arguments[0];\n        index = arguments[1];\n      }\n    } else {\n      subpath = arguments[0];\n      index = arguments[1];\n      howMany = arguments[2];\n    }\n  } else {\n    subpath = arguments[0];\n    index = arguments[1];\n    howMany = arguments[2];\n    cb = arguments[3];\n  }\n  var segments = this._splitPath(subpath);\n  if (index == null) index = segments.pop();\n  return this._remove(segments, +index, howMany, cb);\n};\nModel.prototype._remove = function(segments, index, howMany, cb) {\n  var forArrayMutator = true;\n  segments = this._dereference(segments, forArrayMutator);\n  if (howMany == null) howMany = 1;\n  var model = this;\n  function remove(doc, docSegments, fnCb) {\n    var removed = doc.remove(docSegments, index, howMany, fnCb);\n    model.emit('remove', segments, [index, removed, model._pass]);\n    return removed;\n  }\n  return this._mutate(segments, remove, cb);\n};\n\nModel.prototype.move = function() {\n  var subpath, from, to, howMany, cb;\n  if (arguments.length < 2) {\n    throw new Error('Not enough arguments for move');\n  } else if (arguments.length === 2) {\n    from = arguments[0];\n    to = arguments[1];\n  } else if (arguments.length === 3) {\n    if (typeof arguments[2] === 'function') {\n      from = arguments[0];\n      to = arguments[1];\n      cb = arguments[2];\n    } else if (typeof arguments[0] === 'number') {\n      from = arguments[0];\n      to = arguments[1];\n      howMany = arguments[2];\n    } else {\n      subpath = arguments[0];\n      from = arguments[1];\n      to = arguments[2];\n    }\n  } else if (arguments.length === 4) {\n    if (typeof arguments[3] === 'function') {\n      cb = arguments[3];\n      if (typeof arguments[0] === 'number') {\n        from = arguments[0];\n        to = arguments[1];\n        howMany = arguments[2];\n      } else {\n        subpath = arguments[0];\n        from = arguments[1];\n        to = arguments[2];\n      }\n    } else {\n      subpath = arguments[0];\n      from = arguments[1];\n      to = arguments[2];\n      howMany = arguments[3];\n    }\n  } else {\n    subpath = arguments[0];\n    from = arguments[1];\n    to = arguments[2];\n    howMany = arguments[3];\n    cb = arguments[4];\n  }\n  var segments = this._splitPath(subpath);\n  return this._move(segments, from, to, howMany, cb);\n};\nModel.prototype._move = function(segments, from, to, howMany, cb) {\n  var forArrayMutator = true;\n  segments = this._dereference(segments, forArrayMutator);\n  if (howMany == null) howMany = 1;\n  var model = this;\n  function move(doc, docSegments, fnCb) {\n    // Cast to numbers\n    from = +from;\n    to = +to;\n    // Convert negative indices into positive\n    if (from < 0 || to < 0) {\n      var len = doc.get(docSegments).length;\n      if (from < 0) from += len;\n      if (to < 0) to += len;\n    }\n    var moved = doc.move(docSegments, from, to, howMany, fnCb);\n    model.emit('move', segments, [from, to, moved.length, model._pass]);\n    return moved;\n  }\n  return this._mutate(segments, move, cb);\n};\n\nModel.prototype.stringInsert = function() {\n  var subpath, index, text, cb;\n  if (arguments.length < 2) {\n    throw new Error('Not enough arguments for stringInsert');\n  } else if (arguments.length === 2) {\n    index = arguments[0];\n    text = arguments[1];\n  } else if (arguments.length === 3) {\n    if (typeof arguments[2] === 'function') {\n      index = arguments[0];\n      text = arguments[1];\n      cb = arguments[2];\n    } else {\n      subpath = arguments[0];\n      index = arguments[1];\n      text = arguments[2];\n    }\n  } else {\n    subpath = arguments[0];\n    index = arguments[1];\n    text = arguments[2];\n    cb = arguments[3];\n  }\n  var segments = this._splitPath(subpath);\n  return this._stringInsert(segments, index, text, cb);\n};\nModel.prototype._stringInsert = function(segments, index, text, cb) {\n  segments = this._dereference(segments);\n  var model = this;\n  function stringInsert(doc, docSegments, fnCb) {\n    var previous = doc.stringInsert(docSegments, index, text, fnCb);\n    var value = doc.get(docSegments);\n    var pass = model.pass({$stringInsert: {index: index, text: text}})._pass;\n    model.emit('change', segments, [value, previous, pass]);\n    return;\n  }\n  return this._mutate(segments, stringInsert, cb);\n};\n\nModel.prototype.stringRemove = function() {\n  var subpath, index, howMany, cb;\n  if (arguments.length < 2) {\n    throw new Error('Not enough arguments for stringRemove');\n  } else if (arguments.length === 2) {\n    index = arguments[0];\n    howMany = arguments[1];\n  } else if (arguments.length === 3) {\n    if (typeof arguments[2] === 'function') {\n      index = arguments[0];\n      howMany = arguments[1];\n      cb = arguments[2];\n    } else {\n      subpath = arguments[0];\n      index = arguments[1];\n      howMany = arguments[2];\n    }\n  } else {\n    subpath = arguments[0];\n    index = arguments[1];\n    howMany = arguments[2];\n    cb = arguments[3];\n  }\n  var segments = this._splitPath(subpath);\n  return this._stringRemove(segments, index, howMany, cb);\n};\nModel.prototype._stringRemove = function(segments, index, howMany, cb) {\n  segments = this._dereference(segments);\n  var model = this;\n  function stringRemove(doc, docSegments, fnCb) {\n    var previous = doc.stringRemove(docSegments, index, howMany, fnCb);\n    var value = doc.get(docSegments);\n    var pass = model.pass({$stringRemove: {index: index, howMany: howMany}})._pass;\n    model.emit('change', segments, [value, previous, pass]);\n    return;\n  }\n  return this._mutate(segments, stringRemove, cb);\n};\n\nModel.prototype.subtypeSubmit = function() {\n  var subpath, subtype, subtypeOp, cb;\n  if (arguments.length < 2) {\n    throw new Error('Not enough arguments for subtypeSubmit');\n  } else if (arguments.length === 2) {\n    subtype = arguments[0];\n    subtypeOp = arguments[1];\n  } else if (arguments.length === 3) {\n    if (typeof arguments[2] === 'function') {\n      subtype = arguments[0];\n      subtypeOp = arguments[1];\n      cb = arguments[2];\n    } else {\n      subpath = arguments[0];\n      subtype = arguments[1];\n      subtypeOp = arguments[2];\n    }\n  } else {\n    subpath = arguments[0];\n    subtype = arguments[1];\n    subtypeOp = arguments[2];\n    cb = arguments[3];\n  }\n  var segments = this._splitPath(subpath);\n  return this._subtypeSubmit(segments, subtype, subtypeOp, cb);\n};\n\nModel.prototype._subtypeSubmit = function(segments, subtype, subtypeOp, cb) {\n  segments = this._dereference(segments);\n  var model = this;\n  function subtypeSubmit(doc, docSegments, fnCb) {\n    var previous = doc.subtypeSubmit(docSegments, subtype, subtypeOp, fnCb);\n    var value = doc.get(docSegments);\n    var pass = model.pass({$subtype: {type: subtype, op: subtypeOp}})._pass;\n    // Emit undefined for the previous value, since we don't really know\n    // whether or not the previous value returned by the subtypeSubmit is the\n    // same object returned by reference or not. This may cause change\n    // listeners to over-trigger, but that is usually going to be better than\n    // under-triggering\n    model.emit('change', segments, [value, undefined, pass]);\n    return previous;\n  }\n  return this._mutate(segments, subtypeSubmit, cb);\n};\n",
    "module.exports = arrayDiff;\n\n// Based on some rough benchmarking, this algorithm is about O(2n) worst case,\n// and it can compute diffs on random arrays of length 1024 in about 34ms,\n// though just a few changes on an array of length 1024 takes about 0.5ms\n\narrayDiff.InsertDiff = InsertDiff;\narrayDiff.RemoveDiff = RemoveDiff;\narrayDiff.MoveDiff = MoveDiff;\n\nfunction InsertDiff(index, values) {\n  this.index = index;\n  this.values = values;\n}\nInsertDiff.prototype.type = 'insert';\nInsertDiff.prototype.toJSON = function() {\n  return {\n    type: this.type,\n    index: this.index,\n    values: this.values\n  };\n};\n\nfunction RemoveDiff(index, howMany) {\n  this.index = index;\n  this.howMany = howMany;\n}\nRemoveDiff.prototype.type = 'remove';\nRemoveDiff.prototype.toJSON = function() {\n  return {\n    type: this.type,\n    index: this.index,\n    howMany: this.howMany\n  };\n};\n\nfunction MoveDiff(from, to, howMany) {\n  this.from = from;\n  this.to = to;\n  this.howMany = howMany;\n}\nMoveDiff.prototype.type = 'move';\nMoveDiff.prototype.toJSON = function() {\n  return {\n    type: this.type,\n    from: this.from,\n    to: this.to,\n    howMany: this.howMany\n  };\n};\n\nfunction strictEqual(a, b) {\n  return a === b;\n}\n\nfunction arrayDiff(before, after, equalFn) {\n  if (!equalFn) equalFn = strictEqual;\n\n  // Find all items in both the before and after array, and represent them\n  // as moves. Many of these \"moves\" may end up being discarded in the last\n  // pass if they are from an index to the same index, but we don't know this\n  // up front, since we haven't yet offset the indices.\n  //\n  // Also keep a map of all the indices accounted for in the before and after\n  // arrays. These maps are used next to create insert and remove diffs.\n  var beforeLength = before.length;\n  var afterLength = after.length;\n  var moves = [];\n  var beforeMarked = {};\n  var afterMarked = {};\n  for (var beforeIndex = 0; beforeIndex < beforeLength; beforeIndex++) {\n    var beforeItem = before[beforeIndex];\n    for (var afterIndex = 0; afterIndex < afterLength; afterIndex++) {\n      if (afterMarked[afterIndex]) continue;\n      if (!equalFn(beforeItem, after[afterIndex])) continue;\n      var from = beforeIndex;\n      var to = afterIndex;\n      var howMany = 0;\n      do {\n        beforeMarked[beforeIndex++] = afterMarked[afterIndex++] = true;\n        howMany++;\n      } while (\n        beforeIndex < beforeLength &&\n        afterIndex < afterLength &&\n        equalFn(before[beforeIndex], after[afterIndex]) &&\n        !afterMarked[afterIndex]\n      );\n      moves.push(new MoveDiff(from, to, howMany));\n      beforeIndex--;\n      break;\n    }\n  }\n\n  // Create a remove for all of the items in the before array that were\n  // not marked as being matched in the after array as well\n  var removes = [];\n  for (beforeIndex = 0; beforeIndex < beforeLength;) {\n    if (beforeMarked[beforeIndex]) {\n      beforeIndex++;\n      continue;\n    }\n    var index = beforeIndex;\n    var howMany = 0;\n    while (beforeIndex < beforeLength && !beforeMarked[beforeIndex++]) {\n      howMany++;\n    }\n    removes.push(new RemoveDiff(index, howMany));\n  }\n\n  // Create an insert for all of the items in the after array that were\n  // not marked as being matched in the before array as well\n  var inserts = [];\n  for (var afterIndex = 0; afterIndex < afterLength;) {\n    if (afterMarked[afterIndex]) {\n      afterIndex++;\n      continue;\n    }\n    var index = afterIndex;\n    var howMany = 0;\n    while (afterIndex < afterLength && !afterMarked[afterIndex++]) {\n      howMany++;\n    }\n    var values = after.slice(index, index + howMany);\n    inserts.push(new InsertDiff(index, values));\n  }\n\n  var insertsLength = inserts.length;\n  var removesLength = removes.length;\n  var movesLength = moves.length;\n  var i, j;\n\n  // Offset subsequent removes and moves by removes\n  var count = 0;\n  for (i = 0; i < removesLength; i++) {\n    var remove = removes[i];\n    remove.index -= count;\n    count += remove.howMany;\n    for (j = 0; j < movesLength; j++) {\n      var move = moves[j];\n      if (move.from >= remove.index) move.from -= remove.howMany;\n    }\n  }\n\n  // Offset moves by inserts\n  for (i = insertsLength; i--;) {\n    var insert = inserts[i];\n    var howMany = insert.values.length;\n    for (j = movesLength; j--;) {\n      var move = moves[j];\n      if (move.to >= insert.index) move.to -= howMany;\n    }\n  }\n\n  // Offset the to of moves by later moves\n  for (i = movesLength; i-- > 1;) {\n    var move = moves[i];\n    if (move.to === move.from) continue;\n    for (j = i; j--;) {\n      var earlier = moves[j];\n      if (earlier.to >= move.to) earlier.to -= move.howMany;\n      if (earlier.to >= move.from) earlier.to += move.howMany;\n    }\n  }\n\n  // Only output moves that end up having an effect after offsetting\n  var outputMoves = [];\n\n  // Offset the from of moves by earlier moves\n  for (i = 0; i < movesLength; i++) {\n    var move = moves[i];\n    if (move.to === move.from) continue;\n    outputMoves.push(move);\n    for (j = i + 1; j < movesLength; j++) {\n      var later = moves[j];\n      if (later.from >= move.from) later.from -= move.howMany;\n      if (later.from >= move.to) later.from += move.howMany;\n    }\n  }\n\n  return removes.concat(outputMoves, inserts);\n}\n",
    "var util = require('../util');\nvar Model = require('./Model');\nvar arrayDiff = require('arraydiff');\n\nModel.prototype.setDiff = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._setDiff(segments, value, cb);\n};\nModel.prototype._setDiff = function(segments, value, cb) {\n  segments = this._dereference(segments);\n  var model = this;\n  function setDiff(doc, docSegments, fnCb) {\n    var previous = doc.get(docSegments);\n    if (util.equal(previous, value)) {\n      fnCb();\n      return previous;\n    }\n    doc.set(docSegments, value, fnCb);\n    model.emit('change', segments, [value, previous, model._pass]);\n    return previous;\n  }\n  return this._mutate(segments, setDiff, cb);\n};\n\nModel.prototype.setDiffDeep = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._setDiffDeep(segments, value, cb);\n};\nModel.prototype._setDiffDeep = function(segments, value, cb) {\n  var before = this._get(segments);\n  cb = this.wrapCallback(cb);\n  var group = util.asyncGroup(cb);\n  var finished = group();\n  diffDeep(this, segments, before, value, group);\n  finished();\n};\nfunction diffDeep(model, segments, before, after, group) {\n  if (typeof before !== 'object' || !before ||\n      typeof after !== 'object' || !after) {\n    // Diff the entire value if not diffable objects\n    model._setDiff(segments, after, group());\n    return;\n  }\n  if (Array.isArray(before) && Array.isArray(after)) {\n    var diff = arrayDiff(before, after, util.deepEqual);\n    if (!diff.length) return;\n    // If the only change is a single item replacement, diff the item instead\n    if (\n      diff.length === 2 &&\n      diff[0].index === diff[1].index &&\n      diff[0] instanceof arrayDiff.RemoveDiff &&\n      diff[0].howMany === 1 &&\n      diff[1] instanceof arrayDiff.InsertDiff &&\n      diff[1].values.length === 1\n    ) {\n      var index = diff[0].index;\n      var itemSegments = segments.concat(index);\n      diffDeep(model, itemSegments, before[index], after[index], group);\n      return;\n    }\n    model._applyArrayDiff(segments, diff, group());\n    return;\n  }\n\n  // Delete keys that were in before but not after\n  for (var key in before) {\n    if (key in after) continue;\n    var itemSegments = segments.concat(key);\n    model._del(itemSegments, group());\n  }\n\n  // Diff each property in after\n  for (var key in after) {\n    if (util.deepEqual(before[key], after[key])) continue;\n    var itemSegments = segments.concat(key);\n    diffDeep(model, itemSegments, before[key], after[key], group);\n  }\n}\n\nModel.prototype.setArrayDiff = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._setArrayDiff(segments, value, cb);\n};\nModel.prototype.setArrayDiffDeep = function() {\n  var subpath, value, cb;\n  if (arguments.length === 1) {\n    value = arguments[0];\n  } else if (arguments.length === 2) {\n    subpath = arguments[0];\n    value = arguments[1];\n  } else {\n    subpath = arguments[0];\n    value = arguments[1];\n    cb = arguments[2];\n  }\n  var segments = this._splitPath(subpath);\n  return this._setArrayDiffDeep(segments, value, cb);\n};\nModel.prototype._setArrayDiffDeep = function(segments, value, cb) {\n  return this._setArrayDiff(segments, value, cb, util.deepEqual);\n};\nModel.prototype._setArrayDiff = function(segments, value, cb, _equalFn) {\n  var before = this._get(segments);\n  if (before === value) return this.wrapCallback(cb)();\n  if (!Array.isArray(before) || !Array.isArray(value)) {\n    this._set(segments, value, cb);\n    return;\n  }\n  var diff = arrayDiff(before, value, _equalFn);\n  this._applyArrayDiff(segments, diff, cb);\n};\nModel.prototype._applyArrayDiff = function(segments, diff, cb) {\n  if (!diff.length) return this.wrapCallback(cb)();\n  segments = this._dereference(segments);\n  var model = this;\n  function applyArrayDiff(doc, docSegments, fnCb) {\n    var group = util.asyncGroup(fnCb);\n    for (var i = 0, len = diff.length; i < len; i++) {\n      var item = diff[i];\n      if (item instanceof arrayDiff.InsertDiff) {\n        // Insert\n        doc.insert(docSegments, item.index, item.values, group());\n        model.emit('insert', segments, [item.index, item.values, model._pass]);\n      } else if (item instanceof arrayDiff.RemoveDiff) {\n        // Remove\n        var removed = doc.remove(docSegments, item.index, item.howMany, group());\n        model.emit('remove', segments, [item.index, removed, model._pass]);\n      } else if (item instanceof arrayDiff.MoveDiff) {\n        // Move\n        var moved = doc.move(docSegments, item.from, item.to, item.howMany, group());\n        model.emit('move', segments, [item.from, item.to, moved.length, model._pass]);\n      }\n    }\n  }\n  return this._mutate(segments, applyArrayDiff, cb);\n};\n",
    "var EventEmitter = require('events').EventEmitter;\n\nexports.EventEmitter = EventEmitter;\nexports.mixin = mixin;\n\nfunction mixin(Constructor) {\n  for (var key in EventEmitter.prototype) {\n    Constructor.prototype[key] = EventEmitter.prototype[key];\n  }\n}\n",
    "var SUPPORTED_METHODS = [\n  'info',\n  'warn',\n  'error'\n];\n\nfunction Logger() {\n  var defaultMethods = {};\n  SUPPORTED_METHODS.forEach(function(method) {\n    // Deal with Chrome issue: https://bugs.chromium.org/p/chromium/issues/detail?id=179628\n    defaultMethods[method] = console[method].bind(console);\n  });\n  this.setMethods(defaultMethods);\n}\nmodule.exports = Logger;\n\nLogger.prototype.setMethods = function(overrides) {\n  overrides = overrides || {};\n  var logger = this;\n\n  SUPPORTED_METHODS.forEach(function(method) {\n    if (typeof overrides[method] === 'function') {\n      logger[method] = overrides[method];\n    }\n  });\n};\n",
    "var Logger = require('./logger');\nvar logger = new Logger();\nmodule.exports = logger;\n",
    "function ShareDBError(code, message) {\n  this.code = code;\n  this.message = message || '';\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, ShareDBError);\n  } else {\n    this.stack = new Error().stack;\n  }\n}\n\nShareDBError.prototype = Object.create(Error.prototype);\nShareDBError.prototype.constructor = ShareDBError;\nShareDBError.prototype.name = 'ShareDBError';\n\nShareDBError.CODES = {\n  ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT: 'ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT',\n  ERR_APPLY_SNAPSHOT_NOT_PROVIDED: 'ERR_APPLY_SNAPSHOT_NOT_PROVIDED',\n  ERR_CLIENT_ID_BADLY_FORMED: 'ERR_CLIENT_ID_BADLY_FORMED',\n  ERR_CONNECTION_STATE_TRANSITION_INVALID: 'ERR_CONNECTION_STATE_TRANSITION_INVALID',\n  ERR_DATABASE_ADAPTER_NOT_FOUND: 'ERR_DATABASE_ADAPTER_NOT_FOUND',\n  ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE: 'ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE',\n  ERR_DATABASE_METHOD_NOT_IMPLEMENTED: 'ERR_DATABASE_METHOD_NOT_IMPLEMENTED',\n  ERR_DEFAULT_TYPE_MISMATCH: 'ERR_DEFAULT_TYPE_MISMATCH',\n  ERR_DOC_MISSING_VERSION: 'ERR_DOC_MISSING_VERSION',\n  ERR_DOC_ALREADY_CREATED: 'ERR_DOC_ALREADY_CREATED',\n  ERR_DOC_DOES_NOT_EXIST: 'ERR_DOC_DOES_NOT_EXIST',\n  ERR_DOC_TYPE_NOT_RECOGNIZED: 'ERR_DOC_TYPE_NOT_RECOGNIZED',\n  ERR_DOC_WAS_DELETED: 'ERR_DOC_WAS_DELETED',\n  ERR_INFLIGHT_OP_MISSING: 'ERR_INFLIGHT_OP_MISSING',\n  ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION: 'ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION',\n  ERR_MAX_SUBMIT_RETRIES_EXCEEDED: 'ERR_MAX_SUBMIT_RETRIES_EXCEEDED',\n  ERR_MESSAGE_BADLY_FORMED: 'ERR_MESSAGE_BADLY_FORMED',\n  ERR_MILESTONE_ARGUMENT_INVALID: 'ERR_MILESTONE_ARGUMENT_INVALID',\n  ERR_OP_ALREADY_SUBMITTED: 'ERR_OP_ALREADY_SUBMITTED',\n  ERR_OP_NOT_ALLOWED_IN_PROJECTION: 'ERR_OP_NOT_ALLOWED_IN_PROJECTION',\n  ERR_OP_SUBMIT_REJECTED: 'ERR_OP_SUBMIT_REJECTED',\n  ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM: 'ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM',\n  ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM: 'ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM',\n  ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT: 'ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT',\n  ERR_OT_OP_BADLY_FORMED: 'ERR_OT_OP_BADLY_FORMED',\n  ERR_OT_OP_NOT_PROVIDED: 'ERR_OT_OP_NOT_PROVIDED',\n  ERR_PROTOCOL_VERSION_NOT_SUPPORTED: 'ERR_PROTOCOL_VERSION_NOT_SUPPORTED',\n  ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED: 'ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED',\n  /**\n   * A special error that a \"readSnapshots\" middleware implementation can use to indicate that it\n   * wishes for the ShareDB client to treat it as a silent rejection, not passing the error back to\n   * user code.\n   *\n   * For subscribes, the ShareDB client will still cancel the document subscription.\n   */\n  ERR_SNAPSHOT_READ_SILENT_REJECTION: 'ERR_SNAPSHOT_READ_SILENT_REJECTION',\n  /**\n   * A \"readSnapshots\" middleware rejected the reads of specific snapshots.\n   *\n   * This error code is mostly for server use and generally will not be encountered on the client.\n   * Instead, each specific doc that encountered an error will receive its specific error.\n   *\n   * The one exception is for queries, where a \"readSnapshots\" rejection of specific snapshots will\n   * cause the client to receive this error for the whole query, since queries don't support\n   * doc-specific errors.\n   */\n  ERR_SNAPSHOT_READS_REJECTED: 'ERR_SNAPSHOT_READS_REJECTED',\n  ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND: 'ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND',\n  ERR_TYPE_CANNOT_BE_PROJECTED: 'ERR_TYPE_CANNOT_BE_PROJECTED',\n  ERR_UNKNOWN_ERROR: 'ERR_UNKNOWN_ERROR'\n};\n\nmodule.exports = ShareDBError;\n",
    "// These methods let you build a transform function from a transformComponent\n// function for OT types like JSON0 in which operations are lists of components\n// and transforming them requires N^2 work. I find it kind of nasty that I need\n// this, but I'm not really sure what a better solution is. Maybe I should do\n// this automatically to types that don't have a compose function defined.\n\n// Add transform and transformX functions for an OT type which has\n// transformComponent defined.  transformComponent(destination array,\n// component, other component, side)\nmodule.exports = bootstrapTransform\nfunction bootstrapTransform(type, transformComponent, checkValidOp, append) {\n  var transformComponentX = function(left, right, destLeft, destRight) {\n    transformComponent(destLeft, left, right, 'left');\n    transformComponent(destRight, right, left, 'right');\n  };\n\n  var transformX = type.transformX = function(leftOp, rightOp) {\n    checkValidOp(leftOp);\n    checkValidOp(rightOp);\n    var newRightOp = [];\n\n    for (var i = 0; i < rightOp.length; i++) {\n      var rightComponent = rightOp[i];\n\n      // Generate newLeftOp by composing leftOp by rightComponent\n      var newLeftOp = [];\n      var k = 0;\n      while (k < leftOp.length) {\n        var nextC = [];\n        transformComponentX(leftOp[k], rightComponent, newLeftOp, nextC);\n        k++;\n\n        if (nextC.length === 1) {\n          rightComponent = nextC[0];\n        } else if (nextC.length === 0) {\n          for (var j = k; j < leftOp.length; j++) {\n            append(newLeftOp, leftOp[j]);\n          }\n          rightComponent = null;\n          break;\n        } else {\n          // Recurse.\n          var pair = transformX(leftOp.slice(k), nextC);\n          for (var l = 0; l < pair[0].length; l++) {\n            append(newLeftOp, pair[0][l]);\n          }\n          for (var r = 0; r < pair[1].length; r++) {\n            append(newRightOp, pair[1][r]);\n          }\n          rightComponent = null;\n          break;\n        }\n      }\n\n      if (rightComponent != null) {\n        append(newRightOp, rightComponent);\n      }\n      leftOp = newLeftOp;\n    }\n    return [leftOp, newRightOp];\n  };\n\n  // Transforms op with specified type ('left' or 'right') by otherOp.\n  type.transform = function(op, otherOp, type) {\n    if (!(type === 'left' || type === 'right'))\n      throw new Error(\"type must be 'left' or 'right'\");\n\n    if (otherOp.length === 0) return op;\n\n    if (op.length === 1 && otherOp.length === 1)\n      return transformComponent([], op[0], otherOp[0], type);\n\n    if (type === 'left')\n      return transformX(op, otherOp)[0];\n    else\n      return transformX(otherOp, op)[1];\n  };\n};\n",
    "// DEPRECATED!\n//\n// This type works, but is not exported. Its included here because the JSON0\n// embedded string operations use this library.\n\n\n// A simple text implementation\n//\n// Operations are lists of components. Each component either inserts or deletes\n// at a specified position in the document.\n//\n// Components are either:\n//  {i:'str', p:100}: Insert 'str' at position 100 in the document\n//  {d:'str', p:100}: Delete 'str' at position 100 in the document\n//\n// Components in an operation are executed sequentially, so the position of components\n// assumes previous components have already executed.\n//\n// Eg: This op:\n//   [{i:'abc', p:0}]\n// is equivalent to this op:\n//   [{i:'a', p:0}, {i:'b', p:1}, {i:'c', p:2}]\n\nvar text = module.exports = {\n  name: 'text0',\n  uri: 'http://sharejs.org/types/textv0',\n  create: function(initial) {\n    if ((initial != null) && typeof initial !== 'string') {\n      throw new Error('Initial data must be a string');\n    }\n    return initial || '';\n  }\n};\n\n/** Insert s2 into s1 at pos. */\nvar strInject = function(s1, pos, s2) {\n  return s1.slice(0, pos) + s2 + s1.slice(pos);\n};\n\n/** Check that an operation component is valid. Throws if its invalid. */\nvar checkValidComponent = function(c) {\n  if (typeof c.p !== 'number')\n    throw new Error('component missing position field');\n\n  if ((typeof c.i === 'string') === (typeof c.d === 'string'))\n    throw new Error('component needs an i or d field');\n\n  if (c.p < 0)\n    throw new Error('position cannot be negative');\n};\n\n/** Check that an operation is valid */\nvar checkValidOp = function(op) {\n  for (var i = 0; i < op.length; i++) {\n    checkValidComponent(op[i]);\n  }\n};\n\n/** Apply op to snapshot */\ntext.apply = function(snapshot, op) {\n  var deleted;\n\n  checkValidOp(op);\n  for (var i = 0; i < op.length; i++) {\n    var component = op[i];\n    if (component.i != null) {\n      snapshot = strInject(snapshot, component.p, component.i);\n    } else {\n      deleted = snapshot.slice(component.p, component.p + component.d.length);\n      if (component.d !== deleted)\n        throw new Error(\"Delete component '\" + component.d + \"' does not match deleted text '\" + deleted + \"'\");\n\n      snapshot = snapshot.slice(0, component.p) + snapshot.slice(component.p + component.d.length);\n    }\n  }\n  return snapshot;\n};\n\n/**\n * Append a component to the end of newOp. Exported for use by the random op\n * generator and the JSON0 type.\n */\nvar append = text._append = function(newOp, c) {\n  if (c.i === '' || c.d === '') return;\n\n  if (newOp.length === 0) {\n    newOp.push(c);\n  } else {\n    var last = newOp[newOp.length - 1];\n\n    if (last.i != null && c.i != null && last.p <= c.p && c.p <= last.p + last.i.length) {\n      // Compose the insert into the previous insert\n      newOp[newOp.length - 1] = {i:strInject(last.i, c.p - last.p, c.i), p:last.p};\n\n    } else if (last.d != null && c.d != null && c.p <= last.p && last.p <= c.p + c.d.length) {\n      // Compose the deletes together\n      newOp[newOp.length - 1] = {d:strInject(c.d, last.p - c.p, last.d), p:c.p};\n\n    } else {\n      newOp.push(c);\n    }\n  }\n};\n\n/** Compose op1 and op2 together */\ntext.compose = function(op1, op2) {\n  checkValidOp(op1);\n  checkValidOp(op2);\n  var newOp = op1.slice();\n  for (var i = 0; i < op2.length; i++) {\n    append(newOp, op2[i]);\n  }\n  return newOp;\n};\n\n/** Clean up an op */\ntext.normalize = function(op) {\n  var newOp = [];\n\n  // Normalize should allow ops which are a single (unwrapped) component:\n  // {i:'asdf', p:23}.\n  // There's no good way to test if something is an array:\n  // http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/\n  // so this is probably the least bad solution.\n  if (op.i != null || op.p != null) op = [op];\n\n  for (var i = 0; i < op.length; i++) {\n    var c = op[i];\n    if (c.p == null) c.p = 0;\n\n    append(newOp, c);\n  }\n\n  return newOp;\n};\n\n// This helper method transforms a position by an op component.\n//\n// If c is an insert, insertAfter specifies whether the transform\n// is pushed after the insert (true) or before it (false).\n//\n// insertAfter is optional for deletes.\nvar transformPosition = function(pos, c, insertAfter) {\n  // This will get collapsed into a giant ternary by uglify.\n  if (c.i != null) {\n    if (c.p < pos || (c.p === pos && insertAfter)) {\n      return pos + c.i.length;\n    } else {\n      return pos;\n    }\n  } else {\n    // I think this could also be written as: Math.min(c.p, Math.min(c.p -\n    // otherC.p, otherC.d.length)) but I think its harder to read that way, and\n    // it compiles using ternary operators anyway so its no slower written like\n    // this.\n    if (pos <= c.p) {\n      return pos;\n    } else if (pos <= c.p + c.d.length) {\n      return c.p;\n    } else {\n      return pos - c.d.length;\n    }\n  }\n};\n\n// Helper method to transform a cursor position as a result of an op.\n//\n// Like transformPosition above, if c is an insert, insertAfter specifies\n// whether the cursor position is pushed after an insert (true) or before it\n// (false).\ntext.transformCursor = function(position, op, side) {\n  var insertAfter = side === 'right';\n  for (var i = 0; i < op.length; i++) {\n    position = transformPosition(position, op[i], insertAfter);\n  }\n\n  return position;\n};\n\n// Transform an op component by another op component. Asymmetric.\n// The result will be appended to destination.\n//\n// exported for use in JSON type\nvar transformComponent = text._tc = function(dest, c, otherC, side) {\n  //var cIntersect, intersectEnd, intersectStart, newC, otherIntersect, s;\n\n  checkValidComponent(c);\n  checkValidComponent(otherC);\n\n  if (c.i != null) {\n    // Insert.\n    append(dest, {i:c.i, p:transformPosition(c.p, otherC, side === 'right')});\n  } else {\n    // Delete\n    if (otherC.i != null) {\n      // Delete vs insert\n      var s = c.d;\n      if (c.p < otherC.p) {\n        append(dest, {d:s.slice(0, otherC.p - c.p), p:c.p});\n        s = s.slice(otherC.p - c.p);\n      }\n      if (s !== '')\n        append(dest, {d: s, p: c.p + otherC.i.length});\n\n    } else {\n      // Delete vs delete\n      if (c.p >= otherC.p + otherC.d.length)\n        append(dest, {d: c.d, p: c.p - otherC.d.length});\n      else if (c.p + c.d.length <= otherC.p)\n        append(dest, c);\n      else {\n        // They overlap somewhere.\n        var newC = {d: '', p: c.p};\n\n        if (c.p < otherC.p)\n          newC.d = c.d.slice(0, otherC.p - c.p);\n\n        if (c.p + c.d.length > otherC.p + otherC.d.length)\n          newC.d += c.d.slice(otherC.p + otherC.d.length - c.p);\n\n        // This is entirely optional - I'm just checking the deleted text in\n        // the two ops matches\n        var intersectStart = Math.max(c.p, otherC.p);\n        var intersectEnd = Math.min(c.p + c.d.length, otherC.p + otherC.d.length);\n        var cIntersect = c.d.slice(intersectStart - c.p, intersectEnd - c.p);\n        var otherIntersect = otherC.d.slice(intersectStart - otherC.p, intersectEnd - otherC.p);\n        if (cIntersect !== otherIntersect)\n          throw new Error('Delete ops delete different text in the same region of the document');\n\n        if (newC.d !== '') {\n          newC.p = transformPosition(newC.p, otherC);\n          append(dest, newC);\n        }\n      }\n    }\n  }\n\n  return dest;\n};\n\nvar invertComponent = function(c) {\n  return (c.i != null) ? {d:c.i, p:c.p} : {i:c.d, p:c.p};\n};\n\n// No need to use append for invert, because the components won't be able to\n// cancel one another.\ntext.invert = function(op) {\n  // Shallow copy & reverse that sucka.\n  op = op.slice().reverse();\n  for (var i = 0; i < op.length; i++) {\n    op[i] = invertComponent(op[i]);\n  }\n  return op;\n};\n\nrequire('./bootstrapTransform')(text, transformComponent, checkValidOp, append);\n",
    "/*\n This is the implementation of the JSON OT type.\n\n Spec is here: https://github.com/josephg/ShareJS/wiki/JSON-Operations\n\n Note: This is being made obsolete. It will soon be replaced by the JSON2 type.\n*/\n\n/**\n * UTILITY FUNCTIONS\n */\n\n/**\n * Checks if the passed object is an Array instance. Can't use Array.isArray\n * yet because its not supported on IE8.\n *\n * @param obj\n * @returns {boolean}\n */\nvar isArray = function(obj) {\n  return Object.prototype.toString.call(obj) == '[object Array]';\n};\n\n/**\n * Checks if the passed object is an Object instance.\n * No function call (fast) version\n *\n * @param obj\n * @returns {boolean}\n */\nvar isObject = function(obj) {\n  return (!!obj) && (obj.constructor === Object);\n};\n\n/**\n * Clones the passed object using JSON serialization (which is slow).\n *\n * hax, copied from test/types/json. Apparently this is still the fastest way\n * to deep clone an object, assuming we have browser support for JSON.  @see\n * http://jsperf.com/cloning-an-object/12\n */\nvar clone = function(o) {\n  return JSON.parse(JSON.stringify(o));\n};\n\n/**\n * JSON OT Type\n * @type {*}\n */\nvar json = {\n  name: 'json0',\n  uri: 'http://sharejs.org/types/JSONv0'\n};\n\n// You can register another OT type as a subtype in a JSON document using\n// the following function. This allows another type to handle certain\n// operations instead of the builtin JSON type.\nvar subtypes = {};\njson.registerSubtype = function(subtype) {\n  subtypes[subtype.name] = subtype;\n};\n\njson.create = function(data) {\n  // Null instead of undefined if you don't pass an argument.\n  return data === undefined ? null : clone(data);\n};\n\njson.invertComponent = function(c) {\n  var c_ = {p: c.p};\n\n  // handle subtype ops\n  if (c.t && subtypes[c.t]) {\n    c_.t = c.t;\n    c_.o = subtypes[c.t].invert(c.o);\n  }\n\n  if (c.si !== void 0) c_.sd = c.si;\n  if (c.sd !== void 0) c_.si = c.sd;\n  if (c.oi !== void 0) c_.od = c.oi;\n  if (c.od !== void 0) c_.oi = c.od;\n  if (c.li !== void 0) c_.ld = c.li;\n  if (c.ld !== void 0) c_.li = c.ld;\n  if (c.na !== void 0) c_.na = -c.na;\n\n  if (c.lm !== void 0) {\n    c_.lm = c.p[c.p.length-1];\n    c_.p = c.p.slice(0,c.p.length-1).concat([c.lm]);\n  }\n\n  return c_;\n};\n\njson.invert = function(op) {\n  var op_ = op.slice().reverse();\n  var iop = [];\n  for (var i = 0; i < op_.length; i++) {\n    iop.push(json.invertComponent(op_[i]));\n  }\n  return iop;\n};\n\njson.checkValidOp = function(op) {\n  for (var i = 0; i < op.length; i++) {\n    if (!isArray(op[i].p)) throw new Error('Missing path');\n  }\n};\n\njson.checkList = function(elem) {\n  if (!isArray(elem))\n    throw new Error('Referenced element not a list');\n};\n\njson.checkObj = function(elem) {\n  if (!isObject(elem)) {\n    throw new Error(\"Referenced element not an object (it was \" + JSON.stringify(elem) + \")\");\n  }\n};\n\n// helper functions to convert old string ops to and from subtype ops\nfunction convertFromText(c) {\n  c.t = 'text0';\n  var o = {p: c.p.pop()};\n  if (c.si != null) o.i = c.si;\n  if (c.sd != null) o.d = c.sd;\n  c.o = [o];\n}\n\nfunction convertToText(c) {\n  c.p.push(c.o[0].p);\n  if (c.o[0].i != null) c.si = c.o[0].i;\n  if (c.o[0].d != null) c.sd = c.o[0].d;\n  delete c.t;\n  delete c.o;\n}\n\njson.apply = function(snapshot, op) {\n  json.checkValidOp(op);\n\n  op = clone(op);\n\n  var container = {\n    data: snapshot\n  };\n\n  for (var i = 0; i < op.length; i++) {\n    var c = op[i];\n\n    // convert old string ops to use subtype for backwards compatibility\n    if (c.si != null || c.sd != null)\n      convertFromText(c);\n\n    var parent = null;\n    var parentKey = null;\n    var elem = container;\n    var key = 'data';\n\n    for (var j = 0; j < c.p.length; j++) {\n      var p = c.p[j];\n\n      parent = elem;\n      parentKey = key;\n      elem = elem[key];\n      key = p;\n\n      if (parent == null)\n        throw new Error('Path invalid');\n    }\n\n    // handle subtype ops\n    if (c.t && c.o !== void 0 && subtypes[c.t]) {\n      elem[key] = subtypes[c.t].apply(elem[key], c.o);\n\n    // Number add\n    } else if (c.na !== void 0) {\n      if (typeof elem[key] != 'number')\n        throw new Error('Referenced element not a number');\n\n      elem[key] += c.na;\n    }\n\n    // List replace\n    else if (c.li !== void 0 && c.ld !== void 0) {\n      json.checkList(elem);\n      // Should check the list element matches c.ld\n      elem[key] = c.li;\n    }\n\n    // List insert\n    else if (c.li !== void 0) {\n      json.checkList(elem);\n      elem.splice(key,0, c.li);\n    }\n\n    // List delete\n    else if (c.ld !== void 0) {\n      json.checkList(elem);\n      // Should check the list element matches c.ld here too.\n      elem.splice(key,1);\n    }\n\n    // List move\n    else if (c.lm !== void 0) {\n      json.checkList(elem);\n      if (c.lm != key) {\n        var e = elem[key];\n        // Remove it...\n        elem.splice(key,1);\n        // And insert it back.\n        elem.splice(c.lm,0,e);\n      }\n    }\n\n    // Object insert / replace\n    else if (c.oi !== void 0) {\n      json.checkObj(elem);\n\n      // Should check that elem[key] == c.od\n      elem[key] = c.oi;\n    }\n\n    // Object delete\n    else if (c.od !== void 0) {\n      json.checkObj(elem);\n\n      // Should check that elem[key] == c.od\n      delete elem[key];\n    }\n\n    else {\n      throw new Error('invalid / missing instruction in op');\n    }\n  }\n\n  return container.data;\n};\n\n// Helper to break an operation up into a bunch of small ops.\njson.shatter = function(op) {\n  var results = [];\n  for (var i = 0; i < op.length; i++) {\n    results.push([op[i]]);\n  }\n  return results;\n};\n\n// Helper for incrementally applying an operation to a snapshot. Calls yield\n// after each op component has been applied.\njson.incrementalApply = function(snapshot, op, _yield) {\n  for (var i = 0; i < op.length; i++) {\n    var smallOp = [op[i]];\n    snapshot = json.apply(snapshot, smallOp);\n    // I'd just call this yield, but thats a reserved keyword. Bah!\n    _yield(smallOp, snapshot);\n  }\n\n  return snapshot;\n};\n\n// Checks if two paths, p1 and p2 match.\nvar pathMatches = json.pathMatches = function(p1, p2, ignoreLast) {\n  if (p1.length != p2.length)\n    return false;\n\n  for (var i = 0; i < p1.length; i++) {\n    if (p1[i] !== p2[i] && (!ignoreLast || i !== p1.length - 1))\n      return false;\n  }\n\n  return true;\n};\n\njson.append = function(dest,c) {\n  c = clone(c);\n\n  if (dest.length === 0) {\n    dest.push(c);\n    return;\n  }\n\n  var last = dest[dest.length - 1];\n\n  // convert old string ops to use subtype for backwards compatibility\n  if ((c.si != null || c.sd != null) && (last.si != null || last.sd != null)) {\n    convertFromText(c);\n    convertFromText(last);\n  }\n\n  if (pathMatches(c.p, last.p)) {\n    // handle subtype ops\n    if (c.t && last.t && c.t === last.t && subtypes[c.t]) {\n      last.o = subtypes[c.t].compose(last.o, c.o);\n\n      // convert back to old string ops\n      if (c.si != null || c.sd != null) {\n        var p = c.p;\n        for (var i = 0; i < last.o.length - 1; i++) {\n          c.o = [last.o.pop()];\n          c.p = p.slice();\n          convertToText(c);\n          dest.push(c);\n        }\n\n        convertToText(last);\n      }\n    } else if (last.na != null && c.na != null) {\n      dest[dest.length - 1] = {p: last.p, na: last.na + c.na};\n    } else if (last.li !== undefined && c.li === undefined && c.ld === last.li) {\n      // insert immediately followed by delete becomes a noop.\n      if (last.ld !== undefined) {\n        // leave the delete part of the replace\n        delete last.li;\n      } else {\n        dest.pop();\n      }\n    } else if (last.od !== undefined && last.oi === undefined && c.oi !== undefined && c.od === undefined) {\n      last.oi = c.oi;\n    } else if (last.oi !== undefined && c.od !== undefined) {\n      // The last path component inserted something that the new component deletes (or replaces).\n      // Just merge them.\n      if (c.oi !== undefined) {\n        last.oi = c.oi;\n      } else if (last.od !== undefined) {\n        delete last.oi;\n      } else {\n        // An insert directly followed by a delete turns into a no-op and can be removed.\n        dest.pop();\n      }\n    } else if (c.lm !== undefined && c.p[c.p.length - 1] === c.lm) {\n      // don't do anything\n    } else {\n      dest.push(c);\n    }\n  } else {\n    // convert string ops back\n    if ((c.si != null || c.sd != null) && (last.si != null || last.sd != null)) {\n      convertToText(c);\n      convertToText(last);\n    }\n\n    dest.push(c);\n  }\n};\n\njson.compose = function(op1,op2) {\n  json.checkValidOp(op1);\n  json.checkValidOp(op2);\n\n  var newOp = clone(op1);\n\n  for (var i = 0; i < op2.length; i++) {\n    json.append(newOp,op2[i]);\n  }\n\n  return newOp;\n};\n\njson.normalize = function(op) {\n  var newOp = [];\n\n  op = isArray(op) ? op : [op];\n\n  for (var i = 0; i < op.length; i++) {\n    var c = op[i];\n    if (c.p == null) c.p = [];\n\n    json.append(newOp,c);\n  }\n\n  return newOp;\n};\n\n// Returns the common length of the paths of ops a and b\njson.commonLengthForOps = function(a, b) {\n  var alen = a.p.length;\n  var blen = b.p.length;\n  if (a.na != null || a.t)\n    alen++;\n\n  if (b.na != null || b.t)\n    blen++;\n\n  if (alen === 0) return -1;\n  if (blen === 0) return null;\n\n  alen--;\n  blen--;\n\n  for (var i = 0; i < alen; i++) {\n    var p = a.p[i];\n    if (i >= blen || p !== b.p[i])\n      return null;\n  }\n\n  return alen;\n};\n\n// Returns true if an op can affect the given path\njson.canOpAffectPath = function(op, path) {\n  return json.commonLengthForOps({p:path}, op) != null;\n};\n\n// transform c so it applies to a document with otherC applied.\njson.transformComponent = function(dest, c, otherC, type) {\n  c = clone(c);\n\n  var common = json.commonLengthForOps(otherC, c);\n  var common2 = json.commonLengthForOps(c, otherC);\n  var cplength = c.p.length;\n  var otherCplength = otherC.p.length;\n\n  if (c.na != null || c.t)\n    cplength++;\n\n  if (otherC.na != null || otherC.t)\n    otherCplength++;\n\n  // if c is deleting something, and that thing is changed by otherC, we need to\n  // update c to reflect that change for invertibility.\n  if (common2 != null && otherCplength > cplength && c.p[common2] == otherC.p[common2]) {\n    if (c.ld !== void 0) {\n      var oc = clone(otherC);\n      oc.p = oc.p.slice(cplength);\n      c.ld = json.apply(clone(c.ld),[oc]);\n    } else if (c.od !== void 0) {\n      var oc = clone(otherC);\n      oc.p = oc.p.slice(cplength);\n      c.od = json.apply(clone(c.od),[oc]);\n    }\n  }\n\n  if (common != null) {\n    var commonOperand = cplength == otherCplength;\n\n    // backward compatibility for old string ops\n    var oc = otherC;\n    if ((c.si != null || c.sd != null) && (otherC.si != null || otherC.sd != null)) {\n      convertFromText(c);\n      oc = clone(otherC);\n      convertFromText(oc);\n    }\n\n    // handle subtype ops\n    if (oc.t && subtypes[oc.t]) {\n      if (c.t && c.t === oc.t) {\n        var res = subtypes[c.t].transform(c.o, oc.o, type);\n\n        // convert back to old string ops\n        if (c.si != null || c.sd != null) {\n          var p = c.p;\n          for (var i = 0; i < res.length; i++) {\n            c.o = [res[i]];\n            c.p = p.slice();\n            convertToText(c);\n            json.append(dest, c);\n          }\n        } else if (!isArray(res) || res.length > 0) {\n          c.o = res;\n          json.append(dest, c);\n        }\n\n        return dest;\n      }\n    }\n\n    // transform based on otherC\n    else if (otherC.na !== void 0) {\n      // this case is handled below\n    } else if (otherC.li !== void 0 && otherC.ld !== void 0) {\n      if (otherC.p[common] === c.p[common]) {\n        // noop\n\n        if (!commonOperand) {\n          return dest;\n        } else if (c.ld !== void 0) {\n          // we're trying to delete the same element, -> noop\n          if (c.li !== void 0 && type === 'left') {\n            // we're both replacing one element with another. only one can survive\n            c.ld = clone(otherC.li);\n          } else {\n            return dest;\n          }\n        }\n      }\n    } else if (otherC.li !== void 0) {\n      if (c.li !== void 0 && c.ld === undefined && commonOperand && c.p[common] === otherC.p[common]) {\n        // in li vs. li, left wins.\n        if (type === 'right')\n          c.p[common]++;\n      } else if (otherC.p[common] <= c.p[common]) {\n        c.p[common]++;\n      }\n\n      if (c.lm !== void 0) {\n        if (commonOperand) {\n          // otherC edits the same list we edit\n          if (otherC.p[common] <= c.lm)\n            c.lm++;\n          // changing c.from is handled above.\n        }\n      }\n    } else if (otherC.ld !== void 0) {\n      if (c.lm !== void 0) {\n        if (commonOperand) {\n          if (otherC.p[common] === c.p[common]) {\n            // they deleted the thing we're trying to move\n            return dest;\n          }\n          // otherC edits the same list we edit\n          var p = otherC.p[common];\n          var from = c.p[common];\n          var to = c.lm;\n          if (p < to || (p === to && from < to))\n            c.lm--;\n\n        }\n      }\n\n      if (otherC.p[common] < c.p[common]) {\n        c.p[common]--;\n      } else if (otherC.p[common] === c.p[common]) {\n        if (otherCplength < cplength) {\n          // we're below the deleted element, so -> noop\n          return dest;\n        } else if (c.ld !== void 0) {\n          if (c.li !== void 0) {\n            // we're replacing, they're deleting. we become an insert.\n            delete c.ld;\n          } else {\n            // we're trying to delete the same element, -> noop\n            return dest;\n          }\n        }\n      }\n\n    } else if (otherC.lm !== void 0) {\n      if (c.lm !== void 0 && cplength === otherCplength) {\n        // lm vs lm, here we go!\n        var from = c.p[common];\n        var to = c.lm;\n        var otherFrom = otherC.p[common];\n        var otherTo = otherC.lm;\n        if (otherFrom !== otherTo) {\n          // if otherFrom == otherTo, we don't need to change our op.\n\n          // where did my thing go?\n          if (from === otherFrom) {\n            // they moved it! tie break.\n            if (type === 'left') {\n              c.p[common] = otherTo;\n              if (from === to) // ugh\n                c.lm = otherTo;\n            } else {\n              return dest;\n            }\n          } else {\n            // they moved around it\n            if (from > otherFrom) c.p[common]--;\n            if (from > otherTo) c.p[common]++;\n            else if (from === otherTo) {\n              if (otherFrom > otherTo) {\n                c.p[common]++;\n                if (from === to) // ugh, again\n                  c.lm++;\n              }\n            }\n\n            // step 2: where am i going to put it?\n            if (to > otherFrom) {\n              c.lm--;\n            } else if (to === otherFrom) {\n              if (to > from)\n                c.lm--;\n            }\n            if (to > otherTo) {\n              c.lm++;\n            } else if (to === otherTo) {\n              // if we're both moving in the same direction, tie break\n              if ((otherTo > otherFrom && to > from) ||\n                  (otherTo < otherFrom && to < from)) {\n                if (type === 'right') c.lm++;\n              } else {\n                if (to > from) c.lm++;\n                else if (to === otherFrom) c.lm--;\n              }\n            }\n          }\n        }\n      } else if (c.li !== void 0 && c.ld === undefined && commonOperand) {\n        // li\n        var from = otherC.p[common];\n        var to = otherC.lm;\n        p = c.p[common];\n        if (p > from) c.p[common]--;\n        if (p > to) c.p[common]++;\n      } else {\n        // ld, ld+li, si, sd, na, oi, od, oi+od, any li on an element beneath\n        // the lm\n        //\n        // i.e. things care about where their item is after the move.\n        var from = otherC.p[common];\n        var to = otherC.lm;\n        p = c.p[common];\n        if (p === from) {\n          c.p[common] = to;\n        } else {\n          if (p > from) c.p[common]--;\n          if (p > to) c.p[common]++;\n          else if (p === to && from > to) c.p[common]++;\n        }\n      }\n    }\n    else if (otherC.oi !== void 0 && otherC.od !== void 0) {\n      if (c.p[common] === otherC.p[common]) {\n        if (c.oi !== void 0 && commonOperand) {\n          // we inserted where someone else replaced\n          if (type === 'right') {\n            // left wins\n            return dest;\n          } else {\n            // we win, make our op replace what they inserted\n            c.od = otherC.oi;\n          }\n        } else {\n          // -> noop if the other component is deleting the same object (or any parent)\n          return dest;\n        }\n      }\n    } else if (otherC.oi !== void 0) {\n      if (c.oi !== void 0 && c.p[common] === otherC.p[common]) {\n        // left wins if we try to insert at the same place\n        if (type === 'left') {\n          json.append(dest,{p: c.p, od:otherC.oi});\n        } else {\n          return dest;\n        }\n      }\n    } else if (otherC.od !== void 0) {\n      if (c.p[common] == otherC.p[common]) {\n        if (!commonOperand)\n          return dest;\n        if (c.oi !== void 0) {\n          delete c.od;\n        } else {\n          return dest;\n        }\n      }\n    }\n  }\n\n  json.append(dest,c);\n  return dest;\n};\n\nrequire('./bootstrapTransform')(json, json.transformComponent, json.checkValidOp, json.append);\n\n/**\n * Register a subtype for string operations, using the text0 type.\n */\nvar text = require('./text0');\n\njson.registerSubtype(text);\nmodule.exports = json;\n\n",
    "// Only the JSON type is exported, because the text type is deprecated\n// otherwise. (If you want to use it somewhere, you're welcome to pull it out\n// into a separate module that json0 can depend on).\n\nmodule.exports = {\n  type: require('./json0')\n};\n",
    "\nexports.defaultType = require('ot-json0').type;\n\nexports.map = {};\n\nexports.register = function(type) {\n  if (type.name) exports.map[type.name] = type;\n  if (type.uri) exports.map[type.uri] = type;\n};\n\nexports.register(exports.defaultType);\n",
    "var emitter = require('../emitter');\nvar logger = require('../logger');\nvar ShareDBError = require('../error');\nvar types = require('../types');\n\nvar ERROR_CODE = ShareDBError.CODES;\n\n/**\n * A Doc is a client's view on a sharejs document.\n *\n * It is is uniquely identified by its `id` and `collection`.  Documents\n * should not be created directly. Create them with connection.get()\n *\n *\n * Subscriptions\n * -------------\n *\n * We can subscribe a document to stay in sync with the server.\n *   doc.subscribe(function(error) {\n *     doc.subscribed // = true\n *   })\n * The server now sends us all changes concerning this document and these are\n * applied to our data. If the subscription was successful the initial\n * data and version sent by the server are loaded into the document.\n *\n * To stop listening to the changes we call `doc.unsubscribe()`.\n *\n * If we just want to load the data but not stay up-to-date, we call\n *   doc.fetch(function(error) {\n *     doc.data // sent by server\n *   })\n *\n *\n * Events\n * ------\n *\n * You can use doc.on(eventName, callback) to subscribe to the following events:\n * - `before op (op, source)` Fired before a partial operation is applied to the data.\n *   It may be used to read the old data just before applying an operation\n * - `op (op, source)` Fired after every partial operation with this operation as the\n *   first argument\n * - `create (source)` The document was created. That means its type was\n *   set and it has some initial data.\n * - `del (data, source)` Fired after the document is deleted, that is\n *   the data is null. It is passed the data before delteion as an\n *   arguments\n * - `load ()` Fired when a new snapshot is ingested from a fetch, subscribe, or query\n */\n\nmodule.exports = Doc;\nfunction Doc(connection, collection, id) {\n  emitter.EventEmitter.call(this);\n\n  this.connection = connection;\n\n  this.collection = collection;\n  this.id = id;\n\n  this.version = null;\n  this.type = null;\n  this.data = undefined;\n\n  // Array of callbacks or nulls as placeholders\n  this.inflightFetch = [];\n  this.inflightSubscribe = [];\n  this.inflightUnsubscribe = [];\n  this.pendingFetch = [];\n\n  // Whether we think we are subscribed on the server. Synchronously set to\n  // false on calls to unsubscribe and disconnect. Should never be true when\n  // this.wantSubscribe is false\n  this.subscribed = false;\n  // Whether to re-establish the subscription on reconnect\n  this.wantSubscribe = false;\n\n  // The op that is currently roundtripping to the server, or null.\n  //\n  // When the connection reconnects, the inflight op is resubmitted.\n  //\n  // This has the same format as an entry in pendingOps\n  this.inflightOp = null;\n\n  // All ops that are waiting for the server to acknowledge this.inflightOp\n  // This used to just be a single operation, but creates & deletes can't be\n  // composed with regular operations.\n  //\n  // This is a list of {[create:{...}], [del:true], [op:...], callbacks:[...]}\n  this.pendingOps = [];\n\n  // The OT type of this document. An uncreated document has type `null`\n  this.type = null;\n\n  // The applyStack enables us to track any ops submitted while we are\n  // applying an op incrementally. This value is an array when we are\n  // performing an incremental apply and null otherwise. When it is an array,\n  // all submitted ops should be pushed onto it. The `_otApply` method will\n  // reset it back to null when all incremental apply loops are complete.\n  this.applyStack = null;\n\n  // Disable the default behavior of composing submitted ops. This is read at\n  // the time of op submit, so it may be toggled on before submitting a\n  // specifc op and toggled off afterward\n  this.preventCompose = false;\n}\nemitter.mixin(Doc);\n\nDoc.prototype.destroy = function(callback) {\n  var doc = this;\n  doc.whenNothingPending(function() {\n    if (doc.wantSubscribe) {\n      doc.unsubscribe(function(err) {\n        if (err) {\n          if (callback) return callback(err);\n          return doc.emit('error', err);\n        }\n        doc.connection._destroyDoc(doc);\n        if (callback) callback();\n      });\n    } else {\n      doc.connection._destroyDoc(doc);\n      if (callback) callback();\n    }\n  });\n};\n\n\n// ****** Manipulating the document data, version and type.\n\n// Set the document's type, and associated properties. Most of the logic in\n// this function exists to update the document based on any added & removed API\n// methods.\n//\n// @param newType OT type provided by the ottypes library or its name or uri\nDoc.prototype._setType = function(newType) {\n  if (typeof newType === 'string') {\n    newType = types.map[newType];\n  }\n\n  if (newType) {\n    this.type = newType;\n  } else if (newType === null) {\n    this.type = newType;\n    // If we removed the type from the object, also remove its data\n    this.data = undefined;\n  } else {\n    var err = new ShareDBError(ERROR_CODE.ERR_DOC_TYPE_NOT_RECOGNIZED, 'Missing type ' + newType);\n    return this.emit('error', err);\n  }\n};\n\n// Ingest snapshot data. This data must include a version, snapshot and type.\n// This is used both to ingest data that was exported with a webpage and data\n// that was received from the server during a fetch.\n//\n// @param snapshot.v    version\n// @param snapshot.data\n// @param snapshot.type\n// @param callback\nDoc.prototype.ingestSnapshot = function(snapshot, callback) {\n  if (!snapshot) return callback && callback();\n\n  if (typeof snapshot.v !== 'number') {\n    var err = new ShareDBError(\n      ERROR_CODE.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,\n      'Missing version in ingested snapshot. ' + this.collection + '.' + this.id\n    );\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n\n  // If the doc is already created or there are ops pending, we cannot use the\n  // ingested snapshot and need ops in order to update the document\n  if (this.type || this.hasWritePending()) {\n    // The version should only be null on a created document when it was\n    // created locally without fetching\n    if (this.version == null) {\n      if (this.hasWritePending()) {\n        // If we have pending ops and we get a snapshot for a locally created\n        // document, we have to wait for the pending ops to complete, because\n        // we don't know what version to fetch ops from. It is possible that\n        // the snapshot came from our local op, but it is also possible that\n        // the doc was created remotely (which would conflict and be an error)\n        return callback && this.once('no write pending', callback);\n      }\n      // Otherwise, we've encounted an error state\n      var err = new ShareDBError(\n        ERROR_CODE.ERR_DOC_MISSING_VERSION,\n        'Cannot ingest snapshot in doc with null version. ' + this.collection + '.' + this.id\n      );\n      if (callback) return callback(err);\n      return this.emit('error', err);\n    }\n    // If we got a snapshot for a version further along than the document is\n    // currently, issue a fetch to get the latest ops and catch us up\n    if (snapshot.v > this.version) return this.fetch(callback);\n    return callback && callback();\n  }\n\n  // Ignore the snapshot if we are already at a newer version. Under no\n  // circumstance should we ever set the current version backward\n  if (this.version > snapshot.v) return callback && callback();\n\n  this.version = snapshot.v;\n  var type = (snapshot.type === undefined) ? types.defaultType : snapshot.type;\n  this._setType(type);\n  this.data = (this.type && this.type.deserialize) ?\n    this.type.deserialize(snapshot.data) :\n    snapshot.data;\n  this.emit('load');\n  callback && callback();\n};\n\nDoc.prototype.whenNothingPending = function(callback) {\n  var doc = this;\n  process.nextTick(function() {\n    if (doc.hasPending()) {\n      doc.once('nothing pending', callback);\n      return;\n    }\n    callback();\n  });\n};\n\nDoc.prototype.hasPending = function() {\n  return !!(\n    this.inflightOp ||\n    this.pendingOps.length ||\n    this.inflightFetch.length ||\n    this.inflightSubscribe.length ||\n    this.inflightUnsubscribe.length ||\n    this.pendingFetch.length\n  );\n};\n\nDoc.prototype.hasWritePending = function() {\n  return !!(this.inflightOp || this.pendingOps.length);\n};\n\nDoc.prototype._emitNothingPending = function() {\n  if (this.hasWritePending()) return;\n  this.emit('no write pending');\n  if (this.hasPending()) return;\n  this.emit('nothing pending');\n};\n\n// **** Helpers for network messages\n\nDoc.prototype._emitResponseError = function(err, callback) {\n  if (err && err.code === ERROR_CODE.ERR_SNAPSHOT_READ_SILENT_REJECTION) {\n    this.wantSubscribe = false;\n    if (callback) {\n      callback();\n    }\n    this._emitNothingPending();\n    return;\n  }\n  if (callback) {\n    callback(err);\n    this._emitNothingPending();\n    return;\n  }\n  this._emitNothingPending();\n  this.emit('error', err);\n};\n\nDoc.prototype._handleFetch = function(err, snapshot) {\n  var callback = this.inflightFetch.shift();\n  if (err) return this._emitResponseError(err, callback);\n  this.ingestSnapshot(snapshot, callback);\n  this._emitNothingPending();\n};\n\nDoc.prototype._handleSubscribe = function(err, snapshot) {\n  var callback = this.inflightSubscribe.shift();\n  if (err) return this._emitResponseError(err, callback);\n  // Indicate we are subscribed only if the client still wants to be. In the\n  // time since calling subscribe and receiving a response from the server,\n  // unsubscribe could have been called and we might already be unsubscribed\n  // but not have received the response. Also, because requests from the\n  // client are not serialized and may take different async time to process,\n  // it is possible that we could hear responses back in a different order\n  // from the order originally sent\n  if (this.wantSubscribe) this.subscribed = true;\n  this.ingestSnapshot(snapshot, callback);\n  this._emitNothingPending();\n};\n\nDoc.prototype._handleUnsubscribe = function(err) {\n  var callback = this.inflightUnsubscribe.shift();\n  if (err) return this._emitResponseError(err, callback);\n  if (callback) callback();\n  this._emitNothingPending();\n};\n\nDoc.prototype._handleOp = function(err, message) {\n  if (err) {\n    if (this.inflightOp) {\n      // The server has rejected submission of the current operation. If we get\n      // an \"Op submit rejected\" error, this was done intentionally\n      // and we should roll back but not return an error to the user.\n      if (err.code === ERROR_CODE.ERR_OP_SUBMIT_REJECTED) err = null;\n      return this._rollback(err);\n    }\n    return this.emit('error', err);\n  }\n\n  if (this.inflightOp &&\n      message.src === this.inflightOp.src &&\n      message.seq === this.inflightOp.seq) {\n    // The op has already been applied locally. Just update the version\n    // and pending state appropriately\n    this._opAcknowledged(message);\n    return;\n  }\n\n  if (this.version == null || message.v > this.version) {\n    // This will happen in normal operation if we become subscribed to a\n    // new document via a query. It can also happen if we get an op for\n    // a future version beyond the version we are expecting next. This\n    // could happen if the server doesn't publish an op for whatever reason\n    // or because of a race condition. In any case, we can send a fetch\n    // command to catch back up.\n    //\n    // Fetch only sends a new fetch command if no fetches are inflight, which\n    // will act as a natural debouncing so we don't send multiple fetch\n    // requests for many ops received at once.\n    this.fetch();\n    return;\n  }\n\n  if (message.v < this.version) {\n    // We can safely ignore the old (duplicate) operation.\n    return;\n  }\n\n  if (this.inflightOp) {\n    var transformErr = transformX(this.inflightOp, message);\n    if (transformErr) return this._hardRollback(transformErr);\n  }\n\n  for (var i = 0; i < this.pendingOps.length; i++) {\n    var transformErr = transformX(this.pendingOps[i], message);\n    if (transformErr) return this._hardRollback(transformErr);\n  }\n\n  this.version++;\n  try {\n    this._otApply(message, false);\n  } catch (error) {\n    return this._hardRollback(error);\n  }\n};\n\n// Called whenever (you guessed it!) the connection state changes. This will\n// happen when we get disconnected & reconnect.\nDoc.prototype._onConnectionStateChanged = function() {\n  if (this.connection.canSend) {\n    this.flush();\n    this._resubscribe();\n  } else {\n    if (this.inflightOp) {\n      this.pendingOps.unshift(this.inflightOp);\n      this.inflightOp = null;\n    }\n    this.subscribed = false;\n    if (this.inflightFetch.length || this.inflightSubscribe.length) {\n      this.pendingFetch = this.pendingFetch.concat(this.inflightFetch, this.inflightSubscribe);\n      this.inflightFetch.length = 0;\n      this.inflightSubscribe.length = 0;\n    }\n    if (this.inflightUnsubscribe.length) {\n      var callbacks = this.inflightUnsubscribe;\n      this.inflightUnsubscribe = [];\n      callEach(callbacks);\n    }\n  }\n};\n\nDoc.prototype._resubscribe = function() {\n  var callbacks = this.pendingFetch;\n  this.pendingFetch = [];\n\n  if (this.wantSubscribe) {\n    if (callbacks.length) {\n      this.subscribe(function(err) {\n        callEach(callbacks, err);\n      });\n      return;\n    }\n    this.subscribe();\n    return;\n  }\n\n  if (callbacks.length) {\n    this.fetch(function(err) {\n      callEach(callbacks, err);\n    });\n  }\n};\n\n// Request the current document snapshot or ops that bring us up to date\nDoc.prototype.fetch = function(callback) {\n  if (this.connection.canSend) {\n    var isDuplicate = this.connection.sendFetch(this);\n    pushActionCallback(this.inflightFetch, isDuplicate, callback);\n    return;\n  }\n  this.pendingFetch.push(callback);\n};\n\n// Fetch the initial document and keep receiving updates\nDoc.prototype.subscribe = function(callback) {\n  this.wantSubscribe = true;\n  if (this.connection.canSend) {\n    var isDuplicate = this.connection.sendSubscribe(this);\n    pushActionCallback(this.inflightSubscribe, isDuplicate, callback);\n    return;\n  }\n  this.pendingFetch.push(callback);\n};\n\n// Unsubscribe. The data will stay around in local memory, but we'll stop\n// receiving updates\nDoc.prototype.unsubscribe = function(callback) {\n  this.wantSubscribe = false;\n  // The subscribed state should be conservative in indicating when we are\n  // subscribed on the server. We'll actually be unsubscribed some time\n  // between sending the message and hearing back, but we cannot know exactly\n  // when. Thus, immediately mark us as not subscribed\n  this.subscribed = false;\n  if (this.connection.canSend) {\n    var isDuplicate = this.connection.sendUnsubscribe(this);\n    pushActionCallback(this.inflightUnsubscribe, isDuplicate, callback);\n    return;\n  }\n  if (callback) process.nextTick(callback);\n};\n\nfunction pushActionCallback(inflight, isDuplicate, callback) {\n  if (isDuplicate) {\n    var lastCallback = inflight.pop();\n    inflight.push(function(err) {\n      lastCallback && lastCallback(err);\n      callback && callback(err);\n    });\n  } else {\n    inflight.push(callback);\n  }\n}\n\n\n// Operations //\n\n// Send the next pending op to the server, if we can.\n//\n// Only one operation can be in-flight at a time. If an operation is already on\n// its way, or we're not currently connected, this method does nothing.\nDoc.prototype.flush = function() {\n  // Ignore if we can't send or we are already sending an op\n  if (!this.connection.canSend || this.inflightOp) return;\n\n  // Send first pending op unless paused\n  if (!this.paused && this.pendingOps.length) {\n    this._sendOp();\n  }\n};\n\n// Helper function to set op to contain a no-op.\nfunction setNoOp(op) {\n  delete op.op;\n  delete op.create;\n  delete op.del;\n}\n\n// Transform server op data by a client op, and vice versa. Ops are edited in place.\nfunction transformX(client, server) {\n  // Order of statements in this function matters. Be especially careful if\n  // refactoring this function\n\n  // A client delete op should dominate if both the server and the client\n  // delete the document. Thus, any ops following the client delete (such as a\n  // subsequent create) will be maintained, since the server op is transformed\n  // to a no-op\n  if (client.del) return setNoOp(server);\n\n  if (server.del) {\n    return new ShareDBError(ERROR_CODE.ERR_DOC_WAS_DELETED, 'Document was deleted');\n  }\n  if (server.create) {\n    return new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document already created');\n  }\n\n  // Ignore no-op coming from server\n  if (!server.op) return;\n\n  // I believe that this should not occur, but check just in case\n  if (client.create) {\n    return new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document already created');\n  }\n\n  // They both edited the document. This is the normal case for this function -\n  // as in, most of the time we'll end up down here.\n  //\n  // You should be wondering why I'm using client.type instead of this.type.\n  // The reason is, if we get ops at an old version of the document, this.type\n  // might be undefined or a totally different type. By pinning the type to the\n  // op data, we make sure the right type has its transform function called.\n  if (client.type.transformX) {\n    var result = client.type.transformX(client.op, server.op);\n    client.op = result[0];\n    server.op = result[1];\n  } else {\n    var clientOp = client.type.transform(client.op, server.op, 'left');\n    var serverOp = client.type.transform(server.op, client.op, 'right');\n    client.op = clientOp;\n    server.op = serverOp;\n  }\n};\n\n/**\n * Applies the operation to the snapshot\n *\n * If the operation is create or delete it emits `create` or `del`. Then the\n * operation is applied to the snapshot and `op` and `after op` are emitted.\n * If the type supports incremental updates and `this.incremental` is true we\n * fire `op` after every small operation.\n *\n * This is the only function to fire the above mentioned events.\n *\n * @private\n */\nDoc.prototype._otApply = function(op, source) {\n  if (op.op) {\n    if (!this.type) {\n      // Throw here, because all usage of _otApply should be wrapped with a try/catch\n      throw new ShareDBError(\n        ERROR_CODE.ERR_DOC_DOES_NOT_EXIST,\n        'Cannot apply op to uncreated document. ' + this.collection + '.' + this.id\n      );\n    }\n\n    // Iteratively apply multi-component remote operations and rollback ops\n    // (source === false) for the default JSON0 OT type. It could use\n    // type.shatter(), but since this code is so specific to use cases for the\n    // JSON0 type and ShareDB explicitly bundles the default type, we might as\n    // well write it this way and save needing to iterate through the op\n    // components twice.\n    //\n    // Ideally, we would not need this extra complexity. However, it is\n    // helpful for implementing bindings that update DOM nodes and other\n    // stateful objects by translating op events directly into corresponding\n    // mutations. Such bindings are most easily written as responding to\n    // individual op components one at a time in order, and it is important\n    // that the snapshot only include updates from the particular op component\n    // at the time of emission. Eliminating this would require rethinking how\n    // such external bindings are implemented.\n    if (!source && this.type === types.defaultType && op.op.length > 1) {\n      if (!this.applyStack) this.applyStack = [];\n      var stackLength = this.applyStack.length;\n      for (var i = 0; i < op.op.length; i++) {\n        var component = op.op[i];\n        var componentOp = {op: [component]};\n        // Transform componentOp against any ops that have been submitted\n        // sychronously inside of an op event handler since we began apply of\n        // our operation\n        for (var j = stackLength; j < this.applyStack.length; j++) {\n          var transformErr = transformX(this.applyStack[j], componentOp);\n          if (transformErr) return this._hardRollback(transformErr);\n        }\n        // Apply the individual op component\n        this.emit('before op', componentOp.op, source);\n        this.data = this.type.apply(this.data, componentOp.op);\n        this.emit('op', componentOp.op, source);\n      }\n      // Pop whatever was submitted since we started applying this op\n      this._popApplyStack(stackLength);\n      return;\n    }\n\n    // The 'before op' event enables clients to pull any necessary data out of\n    // the snapshot before it gets changed\n    this.emit('before op', op.op, source);\n    // Apply the operation to the local data, mutating it in place\n    this.data = this.type.apply(this.data, op.op);\n    // Emit an 'op' event once the local data includes the changes from the\n    // op. For locally submitted ops, this will be synchronously with\n    // submission and before the server or other clients have received the op.\n    // For ops from other clients, this will be after the op has been\n    // committed to the database and published\n    this.emit('op', op.op, source);\n    return;\n  }\n\n  if (op.create) {\n    this._setType(op.create.type);\n    this.data = (this.type.deserialize) ?\n      (this.type.createDeserialized) ?\n        this.type.createDeserialized(op.create.data) :\n        this.type.deserialize(this.type.create(op.create.data)) :\n      this.type.create(op.create.data);\n    this.emit('create', source);\n    return;\n  }\n\n  if (op.del) {\n    var oldData = this.data;\n    this._setType(null);\n    this.emit('del', oldData, source);\n    return;\n  }\n};\n\n\n// ***** Sending operations\n\n// Actually send op to the server.\nDoc.prototype._sendOp = function() {\n  // Wait until we have a src id from the server\n  var src = this.connection.id;\n  if (!src) return;\n\n  // When there is no inflightOp, send the first item in pendingOps. If\n  // there is inflightOp, try sending it again\n  if (!this.inflightOp) {\n    // Send first pending op\n    this.inflightOp = this.pendingOps.shift();\n  }\n  var op = this.inflightOp;\n  if (!op) {\n    var err = new ShareDBError(ERROR_CODE.ERR_INFLIGHT_OP_MISSING, 'No op to send on call to _sendOp');\n    return this.emit('error', err);\n  }\n\n  // Track data for retrying ops\n  op.sentAt = Date.now();\n  op.retries = (op.retries == null) ? 0 : op.retries + 1;\n\n  // The src + seq number is a unique ID representing this operation. This tuple\n  // is used on the server to detect when ops have been sent multiple times and\n  // on the client to match acknowledgement of an op back to the inflightOp.\n  // Note that the src could be different from this.connection.id after a\n  // reconnect, since an op may still be pending after the reconnection and\n  // this.connection.id will change. In case an op is sent multiple times, we\n  // also need to be careful not to override the original seq value.\n  if (op.seq == null) op.seq = this.connection.seq++;\n\n  this.connection.sendOp(this, op);\n\n  // src isn't needed on the first try, since the server session will have the\n  // same id, but it must be set on the inflightOp in case it is sent again\n  // after a reconnect and the connection's id has changed by then\n  if (op.src == null) op.src = src;\n};\n\n\n// Queues the operation for submission to the server and applies it locally.\n//\n// Internal method called to do the actual work for submit(), create() and del().\n// @private\n//\n// @param op\n// @param [op.op]\n// @param [op.del]\n// @param [op.create]\n// @param [callback] called when operation is submitted\nDoc.prototype._submit = function(op, source, callback) {\n  // Locally submitted ops must always have a truthy source\n  if (!source) source = true;\n\n  // The op contains either op, create, delete, or none of the above (a no-op).\n  if (op.op) {\n    if (!this.type) {\n      var err = new ShareDBError(\n        ERROR_CODE.ERR_DOC_DOES_NOT_EXIST,\n        'Cannot submit op. Document has not been created. ' + this.collection + '.' + this.id\n      );\n      if (callback) return callback(err);\n      return this.emit('error', err);\n    }\n    // Try to normalize the op. This removes trailing skip:0's and things like that.\n    if (this.type.normalize) op.op = this.type.normalize(op.op);\n  }\n\n  try {\n    this._pushOp(op, callback);\n    this._otApply(op, source);\n  } catch (error) {\n    return this._hardRollback(error);\n  }\n\n  // The call to flush is delayed so if submit() is called multiple times\n  // synchronously, all the ops are combined before being sent to the server.\n  var doc = this;\n  process.nextTick(function() {\n    doc.flush();\n  });\n};\n\nDoc.prototype._pushOp = function(op, callback) {\n  if (this.applyStack) {\n    // If we are in the process of incrementally applying an operation, don't\n    // compose the op and push it onto the applyStack so it can be transformed\n    // against other components from the op or ops being applied\n    this.applyStack.push(op);\n  } else {\n    // If the type supports composes, try to compose the operation onto the\n    // end of the last pending operation.\n    var composed = this._tryCompose(op);\n    if (composed) {\n      composed.callbacks.push(callback);\n      return;\n    }\n  }\n  // Push on to the pendingOps queue of ops to submit if we didn't compose\n  op.type = this.type;\n  op.callbacks = [callback];\n  this.pendingOps.push(op);\n};\n\nDoc.prototype._popApplyStack = function(to) {\n  if (to > 0) {\n    this.applyStack.length = to;\n    return;\n  }\n  // Once we have completed the outermost apply loop, reset to null and no\n  // longer add ops to the applyStack as they are submitted\n  var op = this.applyStack[0];\n  this.applyStack = null;\n  if (!op) return;\n  // Compose the ops added since the beginning of the apply stack, since we\n  // had to skip compose when they were originally pushed\n  var i = this.pendingOps.indexOf(op);\n  if (i === -1) return;\n  var ops = this.pendingOps.splice(i);\n  for (var i = 0; i < ops.length; i++) {\n    var op = ops[i];\n    var composed = this._tryCompose(op);\n    if (composed) {\n      composed.callbacks = composed.callbacks.concat(op.callbacks);\n    } else {\n      this.pendingOps.push(op);\n    }\n  }\n};\n\n// Try to compose a submitted op into the last pending op. Returns the\n// composed op if it succeeds, undefined otherwise\nDoc.prototype._tryCompose = function(op) {\n  if (this.preventCompose) return;\n\n  // We can only compose into the last pending op. Inflight ops have already\n  // been sent to the server, so we can't modify them\n  var last = this.pendingOps[this.pendingOps.length - 1];\n  if (!last || last.sentAt) return;\n\n  // Compose an op into a create by applying it. This effectively makes the op\n  // invisible, as if the document were created including the op originally\n  if (last.create && op.op) {\n    last.create.data = this.type.apply(last.create.data, op.op);\n    return last;\n  }\n\n  // Compose two ops into a single op if supported by the type. Types that\n  // support compose must be able to compose any two ops together\n  if (last.op && op.op && this.type.compose) {\n    last.op = this.type.compose(last.op, op.op);\n    return last;\n  }\n};\n\n// *** Client OT entrypoints.\n\n// Submit an operation to the document.\n//\n// @param operation handled by the OT type\n// @param options  {source: ...}\n// @param [callback] called after operation submitted\n//\n// @fires before op, op, after op\nDoc.prototype.submitOp = function(component, options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n  var op = {op: component};\n  var source = options && options.source;\n  this._submit(op, source, callback);\n};\n\n// Create the document, which in ShareJS semantics means to set its type. Every\n// object implicitly exists in the database but has no data and no type. Create\n// sets the type of the object and can optionally set some initial data on the\n// object, depending on the type.\n//\n// @param data  initial\n// @param type  OT type\n// @param options  {source: ...}\n// @param callback  called when operation submitted\nDoc.prototype.create = function(data, type, options, callback) {\n  if (typeof type === 'function') {\n    callback = type;\n    options = null;\n    type = null;\n  } else if (typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n  if (!type) {\n    type = types.defaultType.uri;\n  }\n  if (this.type) {\n    var err = new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document already exists');\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n  var op = {create: {type: type, data: data}};\n  var source = options && options.source;\n  this._submit(op, source, callback);\n};\n\n// Delete the document. This creates and submits a delete operation to the\n// server. Deleting resets the object's type to null and deletes its data. The\n// document still exists, and still has the version it used to have before you\n// deleted it (well, old version +1).\n//\n// @param options  {source: ...}\n// @param callback  called when operation submitted\nDoc.prototype.del = function(options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n  if (!this.type) {\n    var err = new ShareDBError(ERROR_CODE.ERR_DOC_DOES_NOT_EXIST, 'Document does not exist');\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n  var op = {del: true};\n  var source = options && options.source;\n  this._submit(op, source, callback);\n};\n\n\n// Stops the document from sending any operations to the server.\nDoc.prototype.pause = function() {\n  this.paused = true;\n};\n\n// Continue sending operations to the server\nDoc.prototype.resume = function() {\n  this.paused = false;\n  this.flush();\n};\n\n\n// *** Receiving operations\n\n// This is called when the server acknowledges an operation from the client.\nDoc.prototype._opAcknowledged = function(message) {\n  if (this.inflightOp.create) {\n    this.version = message.v;\n  } else if (message.v !== this.version) {\n    // We should already be at the same version, because the server should\n    // have sent all the ops that have happened before acknowledging our op\n    logger.warn('Invalid version from server. Expected: ' + this.version + ' Received: ' + message.v, message);\n\n    // Fetching should get us back to a working document state\n    return this.fetch();\n  }\n\n  // The op was committed successfully. Increment the version number\n  this.version++;\n\n  this._clearInflightOp();\n};\n\nDoc.prototype._rollback = function(err) {\n  // The server has rejected submission of the current operation. Invert by\n  // just the inflight op if possible. If not possible to invert, cancel all\n  // pending ops and fetch the latest from the server to get us back into a\n  // working state, then call back\n  var op = this.inflightOp;\n\n  if (op.op && op.type.invert) {\n    op.op = op.type.invert(op.op);\n\n    // Transform the undo operation by any pending ops.\n    for (var i = 0; i < this.pendingOps.length; i++) {\n      var transformErr = transformX(this.pendingOps[i], op);\n      if (transformErr) return this._hardRollback(transformErr);\n    }\n\n    // ... and apply it locally, reverting the changes.\n    //\n    // This operation is applied to look like it comes from a remote source.\n    // I'm still not 100% sure about this functionality, because its really a\n    // local op. Basically, the problem is that if the client's op is rejected\n    // by the server, the editor window should update to reflect the undo.\n    try {\n      this._otApply(op, false);\n    } catch (error) {\n      return this._hardRollback(error);\n    }\n\n    this._clearInflightOp(err);\n    return;\n  }\n\n  this._hardRollback(err);\n};\n\nDoc.prototype._hardRollback = function(err) {\n  // Store pending ops so that we can notify their callbacks of the error.\n  // We combine the inflight op and the pending ops, because it's possible\n  // to hit a condition where we have no inflight op, but we do have pending\n  // ops. This can happen when an invalid op is submitted, which causes us\n  // to hard rollback before the pending op was flushed.\n  var pendingOps = [];\n  if (this.inflightOp) pendingOps.push(this.inflightOp);\n  pendingOps = pendingOps.concat(this.pendingOps);\n\n  // Cancel all pending ops and reset if we can't invert\n  this._setType(null);\n  this.version = null;\n  this.inflightOp = null;\n  this.pendingOps = [];\n\n  // Fetch the latest version from the server to get us back into a working state\n  var doc = this;\n  this.fetch(function() {\n    // We want to check that no errors are swallowed, so we check that:\n    // - there are callbacks to call, and\n    // - that every single pending op called a callback\n    // If there are no ops queued, or one of them didn't handle the error,\n    // then we emit the error.\n    var allOpsHadCallbacks = !!pendingOps.length;\n    for (var i = 0; i < pendingOps.length; i++) {\n      allOpsHadCallbacks = callEach(pendingOps[i].callbacks, err) && allOpsHadCallbacks;\n    }\n    if (err && !allOpsHadCallbacks) return doc.emit('error', err);\n  });\n};\n\nDoc.prototype._clearInflightOp = function(err) {\n  var inflightOp = this.inflightOp;\n\n  this.inflightOp = null;\n\n  var called = callEach(inflightOp.callbacks, err);\n\n  this.flush();\n  this._emitNothingPending();\n\n  if (err && !called) return this.emit('error', err);\n};\n\nfunction callEach(callbacks, err) {\n  var called = false;\n  for (var i = 0; i < callbacks.length; i++) {\n    var callback = callbacks[i];\n    if (callback) {\n      callback(err);\n      called = true;\n    }\n  }\n  return called;\n}\n",
    "var emitter = require('../emitter');\n\n// Queries are live requests to the database for particular sets of fields.\n//\n// The server actively tells the client when there's new data that matches\n// a set of conditions.\nmodule.exports = Query;\nfunction Query(action, connection, id, collection, query, options, callback) {\n  emitter.EventEmitter.call(this);\n\n  // 'qf' or 'qs'\n  this.action = action;\n\n  this.connection = connection;\n  this.id = id;\n  this.collection = collection;\n\n  // The query itself. For mongo, this should look something like {\"data.x\":5}\n  this.query = query;\n\n  // A list of resulting documents. These are actual documents, complete with\n  // data and all the rest. It is possible to pass in an initial results set,\n  // so that a query can be serialized and then re-established\n  this.results = null;\n  if (options && options.results) {\n    this.results = options.results;\n    delete options.results;\n  }\n  this.extra = undefined;\n\n  // Options to pass through with the query\n  this.options = options;\n\n  this.callback = callback;\n  this.ready = false;\n  this.sent = false;\n}\nemitter.mixin(Query);\n\nQuery.prototype.hasPending = function() {\n  return !this.ready;\n};\n\n// Helper for subscribe & fetch, since they share the same message format.\n//\n// This function actually issues the query.\nQuery.prototype.send = function() {\n  if (!this.connection.canSend) return;\n\n  var message = {\n    a: this.action,\n    id: this.id,\n    c: this.collection,\n    q: this.query\n  };\n  if (this.options) {\n    message.o = this.options;\n  }\n  if (this.results) {\n    // Collect the version of all the documents in the current result set so we\n    // don't need to be sent their snapshots again.\n    var results = [];\n    for (var i = 0; i < this.results.length; i++) {\n      var doc = this.results[i];\n      results.push([doc.id, doc.version]);\n    }\n    message.r = results;\n  }\n\n  this.connection.send(message);\n  this.sent = true;\n};\n\n// Destroy the query object. Any subsequent messages for the query will be\n// ignored by the connection.\nQuery.prototype.destroy = function(callback) {\n  if (this.connection.canSend && this.action === 'qs') {\n    this.connection.send({a: 'qu', id: this.id});\n  }\n  this.connection._destroyQuery(this);\n  // There is a callback for consistency, but we don't actually wait for the\n  // server's unsubscribe message currently\n  if (callback) process.nextTick(callback);\n};\n\nQuery.prototype._onConnectionStateChanged = function() {\n  if (this.connection.canSend && !this.sent) {\n    this.send();\n  } else {\n    this.sent = false;\n  }\n};\n\nQuery.prototype._handleFetch = function(err, data, extra) {\n  // Once a fetch query gets its data, it is destroyed.\n  this.connection._destroyQuery(this);\n  this._handleResponse(err, data, extra);\n};\n\nQuery.prototype._handleSubscribe = function(err, data, extra) {\n  this._handleResponse(err, data, extra);\n};\n\nQuery.prototype._handleResponse = function(err, data, extra) {\n  var callback = this.callback;\n  this.callback = null;\n  if (err) return this._finishResponse(err, callback);\n  if (!data) return this._finishResponse(null, callback);\n\n  var query = this;\n  var wait = 1;\n  var finish = function(err) {\n    if (err) return query._finishResponse(err, callback);\n    if (--wait) return;\n    query._finishResponse(null, callback);\n  };\n\n  if (Array.isArray(data)) {\n    wait += data.length;\n    this.results = this._ingestSnapshots(data, finish);\n    this.extra = extra;\n  } else {\n    for (var id in data) {\n      wait++;\n      var snapshot = data[id];\n      var doc = this.connection.get(snapshot.c || this.collection, id);\n      doc.ingestSnapshot(snapshot, finish);\n    }\n  }\n\n  finish();\n};\n\nQuery.prototype._ingestSnapshots = function(snapshots, finish) {\n  var results = [];\n  for (var i = 0; i < snapshots.length; i++) {\n    var snapshot = snapshots[i];\n    var doc = this.connection.get(snapshot.c || this.collection, snapshot.d);\n    doc.ingestSnapshot(snapshot, finish);\n    results.push(doc);\n  }\n  return results;\n};\n\nQuery.prototype._finishResponse = function(err, callback) {\n  this.emit('ready');\n  this.ready = true;\n  if (err) {\n    this.connection._destroyQuery(this);\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n  if (callback) callback(null, this.results, this.extra);\n};\n\nQuery.prototype._handleError = function(err) {\n  this.emit('error', err);\n};\n\nQuery.prototype._handleDiff = function(diff) {\n  // We need to go through the list twice. First, we'll ingest all the new\n  // documents. After that we'll emit events and actually update our list.\n  // This avoids race conditions around setting documents to be subscribed &\n  // unsubscribing documents in event callbacks.\n  for (var i = 0; i < diff.length; i++) {\n    var d = diff[i];\n    if (d.type === 'insert') d.values = this._ingestSnapshots(d.values);\n  }\n\n  for (var i = 0; i < diff.length; i++) {\n    var d = diff[i];\n    switch (d.type) {\n      case 'insert':\n        var newDocs = d.values;\n        Array.prototype.splice.apply(this.results, [d.index, 0].concat(newDocs));\n        this.emit('insert', newDocs, d.index);\n        break;\n      case 'remove':\n        var howMany = d.howMany || 1;\n        var removed = this.results.splice(d.index, howMany);\n        this.emit('remove', removed, d.index);\n        break;\n      case 'move':\n        var howMany = d.howMany || 1;\n        var docs = this.results.splice(d.from, howMany);\n        Array.prototype.splice.apply(this.results, [d.to, 0].concat(docs));\n        this.emit('move', docs, d.from, d.to);\n        break;\n    }\n  }\n\n  this.emit('changed', this.results);\n};\n\nQuery.prototype._handleExtra = function(extra) {\n  this.extra = extra;\n  this.emit('extra', extra);\n};\n",
    "module.exports = Snapshot;\nfunction Snapshot(id, version, type, data, meta) {\n  this.id = id;\n  this.v = version;\n  this.type = type;\n  this.data = data;\n  this.m = meta;\n}\n",
    "var Snapshot = require('../../snapshot');\nvar emitter = require('../../emitter');\n\nmodule.exports = SnapshotRequest;\n\nfunction SnapshotRequest(connection, requestId, collection, id, callback) {\n  emitter.EventEmitter.call(this);\n\n  if (typeof callback !== 'function') {\n    throw new Error('Callback is required for SnapshotRequest');\n  }\n\n  this.requestId = requestId;\n  this.connection = connection;\n  this.id = id;\n  this.collection = collection;\n  this.callback = callback;\n\n  this.sent = false;\n}\nemitter.mixin(SnapshotRequest);\n\nSnapshotRequest.prototype.send = function() {\n  if (!this.connection.canSend) {\n    return;\n  }\n\n  this.connection.send(this._message());\n  this.sent = true;\n};\n\nSnapshotRequest.prototype._onConnectionStateChanged = function() {\n  if (this.connection.canSend) {\n    if (!this.sent) this.send();\n  } else {\n    // If the connection can't send, then we've had a disconnection, and even if we've already sent\n    // the request previously, we need to re-send it over this reconnected client, so reset the\n    // sent flag to false.\n    this.sent = false;\n  }\n};\n\nSnapshotRequest.prototype._handleResponse = function(error, message) {\n  this.emit('ready');\n\n  if (error) {\n    return this.callback(error);\n  }\n\n  var metadata = message.meta ? message.meta : null;\n  var snapshot = new Snapshot(this.id, message.v, message.type, message.data, metadata);\n\n  this.callback(null, snapshot);\n};\n",
    "\nexports.doNothing = doNothing;\nfunction doNothing() {}\n\nexports.hasKeys = function(object) {\n  for (var key in object) return true;\n  return false;\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger#Polyfill\nexports.isInteger = Number.isInteger || function(value) {\n  return typeof value === 'number' &&\n    isFinite(value) &&\n    Math.floor(value) === value;\n};\n\nexports.isValidVersion = function(version) {\n  if (version === null) return true;\n  return exports.isInteger(version) && version >= 0;\n};\n\nexports.isValidTimestamp = function(timestamp) {\n  return exports.isValidVersion(timestamp);\n};\n",
    "var SnapshotRequest = require('./snapshot-request');\nvar util = require('../../util');\n\nmodule.exports = SnapshotVersionRequest;\n\nfunction SnapshotVersionRequest(connection, requestId, collection, id, version, callback) {\n  SnapshotRequest.call(this, connection, requestId, collection, id, callback);\n\n  if (!util.isValidVersion(version)) {\n    throw new Error('Snapshot version must be a positive integer or null');\n  }\n\n  this.version = version;\n}\n\nSnapshotVersionRequest.prototype = Object.create(SnapshotRequest.prototype);\n\nSnapshotVersionRequest.prototype._message = function() {\n  return {\n    a: 'nf',\n    id: this.requestId,\n    c: this.collection,\n    d: this.id,\n    v: this.version\n  };\n};\n",
    "var SnapshotRequest = require('./snapshot-request');\nvar util = require('../../util');\n\nmodule.exports = SnapshotTimestampRequest;\n\nfunction SnapshotTimestampRequest(connection, requestId, collection, id, timestamp, callback) {\n  SnapshotRequest.call(this, connection, requestId, collection, id, callback);\n\n  if (!util.isValidTimestamp(timestamp)) {\n    throw new Error('Snapshot timestamp must be a positive integer or null');\n  }\n\n  this.timestamp = timestamp;\n}\n\nSnapshotTimestampRequest.prototype = Object.create(SnapshotRequest.prototype);\n\nSnapshotTimestampRequest.prototype._message = function() {\n  return {\n    a: 'nt',\n    id: this.requestId,\n    c: this.collection,\n    d: this.id,\n    ts: this.timestamp\n  };\n};\n",
    "var Doc = require('./doc');\nvar Query = require('./query');\nvar SnapshotVersionRequest = require('./snapshot-request/snapshot-version-request');\nvar SnapshotTimestampRequest = require('./snapshot-request/snapshot-timestamp-request');\nvar emitter = require('../emitter');\nvar ShareDBError = require('../error');\nvar types = require('../types');\nvar util = require('../util');\nvar logger = require('../logger');\n\nvar ERROR_CODE = ShareDBError.CODES;\n\nfunction connectionState(socket) {\n  if (socket.readyState === 0 || socket.readyState === 1) return 'connecting';\n  return 'disconnected';\n}\n\n/**\n * Handles communication with the sharejs server and provides queries and\n * documents.\n *\n * We create a connection with a socket object\n *   connection = new sharejs.Connection(sockset)\n * The socket may be any object handling the websocket protocol. See the\n * documentation of bindToSocket() for details. We then wait for the connection\n * to connect\n *   connection.on('connected', ...)\n * and are finally able to work with shared documents\n *   connection.get('food', 'steak') // Doc\n *\n * @param socket @see bindToSocket\n */\nmodule.exports = Connection;\nfunction Connection(socket) {\n  emitter.EventEmitter.call(this);\n\n  // Map of collection -> id -> doc object for created documents.\n  // (created documents MUST BE UNIQUE)\n  this.collections = {};\n\n  // Each query and snapshot request is created with an id that the server uses when it sends us\n  // info about the request (updates, etc)\n  this.nextQueryId = 1;\n  this.nextSnapshotRequestId = 1;\n\n  // Map from query ID -> query object.\n  this.queries = {};\n\n  // Map from snapshot request ID -> snapshot request\n  this._snapshotRequests = {};\n\n  // A unique message number for the given id\n  this.seq = 1;\n\n  // Equals agent.clientId on the server\n  this.id = null;\n\n  // This direct reference from connection to agent is not used internal to\n  // ShareDB, but it is handy for server-side only user code that may cache\n  // state on the agent and read it in middleware\n  this.agent = null;\n\n  this.debug = false;\n\n  this.state = connectionState(socket);\n\n  this.bindToSocket(socket);\n}\nemitter.mixin(Connection);\n\n\n/**\n * Use socket to communicate with server\n *\n * Socket is an object that can handle the websocket protocol. This method\n * installs the onopen, onclose, onmessage and onerror handlers on the socket to\n * handle communication and sends messages by calling socket.send(message). The\n * sockets `readyState` property is used to determine the initaial state.\n *\n * @param socket Handles the websocket protocol\n * @param socket.readyState\n * @param socket.close\n * @param socket.send\n * @param socket.onopen\n * @param socket.onclose\n * @param socket.onmessage\n * @param socket.onerror\n */\nConnection.prototype.bindToSocket = function(socket) {\n  if (this.socket) {\n    this.socket.close();\n    this.socket.onmessage = null;\n    this.socket.onopen = null;\n    this.socket.onerror = null;\n    this.socket.onclose = null;\n  }\n\n  this.socket = socket;\n\n  // State of the connection. The corresponding events are emitted when this changes\n  //\n  // - 'connecting'   The connection is still being established, or we are still\n  //                    waiting on the server to send us the initialization message\n  // - 'connected'    The connection is open and we have connected to a server\n  //                    and recieved the initialization message\n  // - 'disconnected' Connection is closed, but it will reconnect automatically\n  // - 'closed'       The connection was closed by the client, and will not reconnect\n  // - 'stopped'      The connection was closed by the server, and will not reconnect\n  var newState = connectionState(socket);\n  this._setState(newState);\n\n  // This is a helper variable the document uses to see whether we're\n  // currently in a 'live' state. It is true if and only if we're connected\n  this.canSend = false;\n\n  var connection = this;\n\n  socket.onmessage = function(event) {\n    try {\n      var data = (typeof event.data === 'string') ?\n        JSON.parse(event.data) : event.data;\n    } catch (err) {\n      logger.warn('Failed to parse message', event);\n      return;\n    }\n\n    if (connection.debug) logger.info('RECV', JSON.stringify(data));\n\n    var request = {data: data};\n    connection.emit('receive', request);\n    if (!request.data) return;\n\n    try {\n      connection.handleMessage(request.data);\n    } catch (err) {\n      process.nextTick(function() {\n        connection.emit('error', err);\n      });\n    }\n  };\n\n  socket.onopen = function() {\n    connection._setState('connecting');\n  };\n\n  socket.onerror = function(err) {\n    // This isn't the same as a regular error, because it will happen normally\n    // from time to time. Your connection should probably automatically\n    // reconnect anyway, but that should be triggered off onclose not onerror.\n    // (onclose happens when onerror gets called anyway).\n    connection.emit('connection error', err);\n  };\n\n  socket.onclose = function(reason) {\n    // node-browserchannel reason values:\n    //   'Closed' - The socket was manually closed by calling socket.close()\n    //   'Stopped by server' - The server sent the stop message to tell the client not to try connecting\n    //   'Request failed' - Server didn't respond to request (temporary, usually offline)\n    //   'Unknown session ID' - Server session for client is missing (temporary, will immediately reestablish)\n\n    if (reason === 'closed' || reason === 'Closed') {\n      connection._setState('closed', reason);\n    } else if (reason === 'stopped' || reason === 'Stopped by server') {\n      connection._setState('stopped', reason);\n    } else {\n      connection._setState('disconnected', reason);\n    }\n  };\n};\n\n/**\n * @param {object} message\n * @param {String} message.a action\n */\nConnection.prototype.handleMessage = function(message) {\n  var err = null;\n  if (message.error) {\n    err = wrapErrorData(message.error, message);\n    delete message.error;\n  }\n  // Switch on the message action. Most messages are for documents and are\n  // handled in the doc class.\n  switch (message.a) {\n    case 'init':\n      // Client initialization packet\n      if (message.protocol !== 1) {\n        err = new ShareDBError(\n          ERROR_CODE.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,\n          'Unsupported protocol version: ' + message.protocol\n        );\n        return this.emit('error', err);\n      }\n      if (types.map[message.type] !== types.defaultType) {\n        err = new ShareDBError(\n          ERROR_CODE.ERR_DEFAULT_TYPE_MISMATCH,\n          message.type + ' does not match the server default type'\n        );\n        return this.emit('error', err);\n      }\n      if (typeof message.id !== 'string') {\n        err = new ShareDBError(ERROR_CODE.ERR_CLIENT_ID_BADLY_FORMED, 'Client id must be a string');\n        return this.emit('error', err);\n      }\n      this.id = message.id;\n\n      this._setState('connected');\n      return;\n\n    case 'qf':\n      var query = this.queries[message.id];\n      if (query) query._handleFetch(err, message.data, message.extra);\n      return;\n    case 'qs':\n      var query = this.queries[message.id];\n      if (query) query._handleSubscribe(err, message.data, message.extra);\n      return;\n    case 'qu':\n      // Queries are removed immediately on calls to destroy, so we ignore\n      // replies to query unsubscribes. Perhaps there should be a callback for\n      // destroy, but this is currently unimplemented\n      return;\n    case 'q':\n      // Query message. Pass this to the appropriate query object.\n      var query = this.queries[message.id];\n      if (!query) return;\n      if (err) return query._handleError(err);\n      if (message.diff) query._handleDiff(message.diff);\n      if (message.hasOwnProperty('extra')) query._handleExtra(message.extra);\n      return;\n\n    case 'bf':\n      return this._handleBulkMessage(err, message, '_handleFetch');\n    case 'bs':\n      return this._handleBulkMessage(err, message, '_handleSubscribe');\n    case 'bu':\n      return this._handleBulkMessage(err, message, '_handleUnsubscribe');\n\n    case 'nf':\n    case 'nt':\n      return this._handleSnapshotFetch(err, message);\n\n    case 'f':\n      var doc = this.getExisting(message.c, message.d);\n      if (doc) doc._handleFetch(err, message.data);\n      return;\n    case 's':\n      var doc = this.getExisting(message.c, message.d);\n      if (doc) doc._handleSubscribe(err, message.data);\n      return;\n    case 'u':\n      var doc = this.getExisting(message.c, message.d);\n      if (doc) doc._handleUnsubscribe(err);\n      return;\n    case 'op':\n      var doc = this.getExisting(message.c, message.d);\n      if (doc) doc._handleOp(err, message);\n      return;\n\n    default:\n      logger.warn('Ignoring unrecognized message', message);\n  }\n};\n\nfunction wrapErrorData(errorData, fullMessage) {\n  // wrap in Error object so can be passed through event emitters\n  var err = new Error(errorData.message);\n  err.code = errorData.code;\n  if (fullMessage) {\n    // Add the message data to the error object for more context\n    err.data = fullMessage;\n  }\n  return err;\n}\n\nConnection.prototype._handleBulkMessage = function(err, message, method) {\n  if (message.data) {\n    for (var id in message.data) {\n      var dataForId = message.data[id];\n      var doc = this.getExisting(message.c, id);\n      if (doc) {\n        if (err) {\n          doc[method](err);\n        } else if (dataForId.error) {\n          // Bulk reply snapshot-specific errorr - see agent.js getMapResult\n          doc[method](wrapErrorData(dataForId.error));\n        } else {\n          doc[method](null, dataForId);\n        }\n      }\n    }\n  } else if (Array.isArray(message.b)) {\n    for (var i = 0; i < message.b.length; i++) {\n      var id = message.b[i];\n      var doc = this.getExisting(message.c, id);\n      if (doc) doc[method](err);\n    }\n  } else if (message.b) {\n    for (var id in message.b) {\n      var doc = this.getExisting(message.c, id);\n      if (doc) doc[method](err);\n    }\n  } else {\n    logger.error('Invalid bulk message', message);\n  }\n};\n\nConnection.prototype._reset = function() {\n  this.seq = 1;\n  this.id = null;\n  this.agent = null;\n};\n\n// Set the connection's state. The connection is basically a state machine.\nConnection.prototype._setState = function(newState, reason) {\n  if (this.state === newState) return;\n\n  // I made a state diagram. The only invalid transitions are getting to\n  // 'connecting' from anywhere other than 'disconnected' and getting to\n  // 'connected' from anywhere other than 'connecting'.\n  if (\n    (\n      newState === 'connecting' &&\n      this.state !== 'disconnected' &&\n      this.state !== 'stopped' &&\n      this.state !== 'closed'\n    ) || (\n      newState === 'connected' &&\n      this.state !== 'connecting'\n    )\n  ) {\n    var err = new ShareDBError(\n      ERROR_CODE.ERR_CONNECTION_STATE_TRANSITION_INVALID,\n      'Cannot transition directly from ' + this.state + ' to ' + newState\n    );\n    return this.emit('error', err);\n  }\n\n  this.state = newState;\n  this.canSend = (newState === 'connected');\n\n  if (\n    newState === 'disconnected' ||\n    newState === 'stopped' ||\n    newState === 'closed'\n  ) {\n    this._reset();\n  }\n\n  // Group subscribes together to help server make more efficient calls\n  this.startBulk();\n  // Emit the event to all queries\n  for (var id in this.queries) {\n    var query = this.queries[id];\n    query._onConnectionStateChanged();\n  }\n  // Emit the event to all documents\n  for (var collection in this.collections) {\n    var docs = this.collections[collection];\n    for (var id in docs) {\n      docs[id]._onConnectionStateChanged();\n    }\n  }\n  // Emit the event to all snapshots\n  for (var id in this._snapshotRequests) {\n    var snapshotRequest = this._snapshotRequests[id];\n    snapshotRequest._onConnectionStateChanged();\n  }\n  this.endBulk();\n\n  this.emit(newState, reason);\n  this.emit('state', newState, reason);\n};\n\nConnection.prototype.startBulk = function() {\n  if (!this.bulk) this.bulk = {};\n};\n\nConnection.prototype.endBulk = function() {\n  if (this.bulk) {\n    for (var collection in this.bulk) {\n      var actions = this.bulk[collection];\n      this._sendBulk('f', collection, actions.f);\n      this._sendBulk('s', collection, actions.s);\n      this._sendBulk('u', collection, actions.u);\n    }\n  }\n  this.bulk = null;\n};\n\nConnection.prototype._sendBulk = function(action, collection, values) {\n  if (!values) return;\n  var ids = [];\n  var versions = {};\n  var versionsCount = 0;\n  var versionId;\n  for (var id in values) {\n    var value = values[id];\n    if (value == null) {\n      ids.push(id);\n    } else {\n      versions[id] = value;\n      versionId = id;\n      versionsCount++;\n    }\n  }\n  if (ids.length === 1) {\n    var id = ids[0];\n    this.send({a: action, c: collection, d: id});\n  } else if (ids.length) {\n    this.send({a: 'b' + action, c: collection, b: ids});\n  }\n  if (versionsCount === 1) {\n    var version = versions[versionId];\n    this.send({a: action, c: collection, d: versionId, v: version});\n  } else if (versionsCount) {\n    this.send({a: 'b' + action, c: collection, b: versions});\n  }\n};\n\nConnection.prototype._sendAction = function(action, doc, version) {\n  // Ensure the doc is registered so that it receives the reply message\n  this._addDoc(doc);\n  if (this.bulk) {\n    // Bulk subscribe\n    var actions = this.bulk[doc.collection] || (this.bulk[doc.collection] = {});\n    var versions = actions[action] || (actions[action] = {});\n    var isDuplicate = versions.hasOwnProperty(doc.id);\n    versions[doc.id] = version;\n    return isDuplicate;\n  } else {\n    // Send single doc subscribe message\n    var message = {a: action, c: doc.collection, d: doc.id, v: version};\n    this.send(message);\n  }\n};\n\nConnection.prototype.sendFetch = function(doc) {\n  return this._sendAction('f', doc, doc.version);\n};\n\nConnection.prototype.sendSubscribe = function(doc) {\n  return this._sendAction('s', doc, doc.version);\n};\n\nConnection.prototype.sendUnsubscribe = function(doc) {\n  return this._sendAction('u', doc);\n};\n\nConnection.prototype.sendOp = function(doc, op) {\n  // Ensure the doc is registered so that it receives the reply message\n  this._addDoc(doc);\n  var message = {\n    a: 'op',\n    c: doc.collection,\n    d: doc.id,\n    v: doc.version,\n    src: op.src,\n    seq: op.seq\n  };\n  if (op.op) message.op = op.op;\n  if (op.create) message.create = op.create;\n  if (op.del) message.del = op.del;\n  this.send(message);\n};\n\n\n/**\n * Sends a message down the socket\n */\nConnection.prototype.send = function(message) {\n  if (this.debug) logger.info('SEND', JSON.stringify(message));\n\n  this.emit('send', message);\n  this.socket.send(JSON.stringify(message));\n};\n\n\n/**\n * Closes the socket and emits 'closed'\n */\nConnection.prototype.close = function() {\n  this.socket.close();\n};\n\nConnection.prototype.getExisting = function(collection, id) {\n  if (this.collections[collection]) return this.collections[collection][id];\n};\n\n\n/**\n * Get or create a document.\n *\n * @param collection\n * @param id\n * @return {Doc}\n */\nConnection.prototype.get = function(collection, id) {\n  var docs = this.collections[collection] ||\n    (this.collections[collection] = {});\n\n  var doc = docs[id];\n  if (!doc) {\n    doc = docs[id] = new Doc(this, collection, id);\n    this.emit('doc', doc);\n  }\n\n  return doc;\n};\n\n\n/**\n * Remove document from this.collections\n *\n * @private\n */\nConnection.prototype._destroyDoc = function(doc) {\n  var docs = this.collections[doc.collection];\n  if (!docs) return;\n\n  delete docs[doc.id];\n\n  // Delete the collection container if its empty. This could be a source of\n  // memory leaks if you slowly make a billion collections, which you probably\n  // won't do anyway, but whatever.\n  if (!util.hasKeys(docs)) {\n    delete this.collections[doc.collection];\n  }\n};\n\nConnection.prototype._addDoc = function(doc) {\n  var docs = this.collections[doc.collection];\n  if (!docs) {\n    docs = this.collections[doc.collection] = {};\n  }\n  if (docs[doc.id] !== doc) {\n    docs[doc.id] = doc;\n  }\n};\n\n// Helper for createFetchQuery and createSubscribeQuery, below.\nConnection.prototype._createQuery = function(action, collection, q, options, callback) {\n  var id = this.nextQueryId++;\n  var query = new Query(action, this, id, collection, q, options, callback);\n  this.queries[id] = query;\n  query.send();\n  return query;\n};\n\n// Internal function. Use query.destroy() to remove queries.\nConnection.prototype._destroyQuery = function(query) {\n  delete this.queries[query.id];\n};\n\n// The query options object can contain the following fields:\n//\n// db: Name of the db for the query. You can attach extraDbs to ShareDB and\n//   pick which one the query should hit using this parameter.\n\n// Create a fetch query. Fetch queries are only issued once, returning the\n// results directly into the callback.\n//\n// The callback should have the signature function(error, results, extra)\n// where results is a list of Doc objects.\nConnection.prototype.createFetchQuery = function(collection, q, options, callback) {\n  return this._createQuery('qf', collection, q, options, callback);\n};\n\n// Create a subscribe query. Subscribe queries return with the initial data\n// through the callback, then update themselves whenever the query result set\n// changes via their own event emitter.\n//\n// If present, the callback should have the signature function(error, results, extra)\n// where results is a list of Doc objects.\nConnection.prototype.createSubscribeQuery = function(collection, q, options, callback) {\n  return this._createQuery('qs', collection, q, options, callback);\n};\n\nConnection.prototype.hasPending = function() {\n  return !!(\n    this._firstDoc(hasPending) ||\n    this._firstQuery(hasPending) ||\n    this._firstSnapshotRequest()\n  );\n};\nfunction hasPending(object) {\n  return object.hasPending();\n}\n\nConnection.prototype.hasWritePending = function() {\n  return !!this._firstDoc(hasWritePending);\n};\nfunction hasWritePending(object) {\n  return object.hasWritePending();\n}\n\nConnection.prototype.whenNothingPending = function(callback) {\n  var doc = this._firstDoc(hasPending);\n  if (doc) {\n    // If a document is found with a pending operation, wait for it to emit\n    // that nothing is pending anymore, and then recheck all documents again.\n    // We have to recheck all documents, just in case another mutation has\n    // been made in the meantime as a result of an event callback\n    doc.once('nothing pending', this._nothingPendingRetry(callback));\n    return;\n  }\n  var query = this._firstQuery(hasPending);\n  if (query) {\n    query.once('ready', this._nothingPendingRetry(callback));\n    return;\n  }\n  var snapshotRequest = this._firstSnapshotRequest();\n  if (snapshotRequest) {\n    snapshotRequest.once('ready', this._nothingPendingRetry(callback));\n    return;\n  }\n  // Call back when no pending operations\n  process.nextTick(callback);\n};\nConnection.prototype._nothingPendingRetry = function(callback) {\n  var connection = this;\n  return function() {\n    process.nextTick(function() {\n      connection.whenNothingPending(callback);\n    });\n  };\n};\n\nConnection.prototype._firstDoc = function(fn) {\n  for (var collection in this.collections) {\n    var docs = this.collections[collection];\n    for (var id in docs) {\n      var doc = docs[id];\n      if (fn(doc)) {\n        return doc;\n      }\n    }\n  }\n};\n\nConnection.prototype._firstQuery = function(fn) {\n  for (var id in this.queries) {\n    var query = this.queries[id];\n    if (fn(query)) {\n      return query;\n    }\n  }\n};\n\nConnection.prototype._firstSnapshotRequest = function() {\n  for (var id in this._snapshotRequests) {\n    return this._snapshotRequests[id];\n  }\n};\n\n/**\n * Fetch a read-only snapshot at a given version\n *\n * @param collection - the collection name of the snapshot\n * @param id - the ID of the snapshot\n * @param version (optional) - the version number to fetch. If null, the latest version is fetched.\n * @param callback - (error, snapshot) => void, where snapshot takes the following schema:\n *\n * {\n *   id: string;         // ID of the snapshot\n *   v: number;          // version number of the snapshot\n *   type: string;       // the OT type of the snapshot, or null if it doesn't exist or is deleted\n *   data: any;          // the snapshot\n * }\n *\n */\nConnection.prototype.fetchSnapshot = function(collection, id, version, callback) {\n  if (typeof version === 'function') {\n    callback = version;\n    version = null;\n  }\n\n  var requestId = this.nextSnapshotRequestId++;\n  var snapshotRequest = new SnapshotVersionRequest(this, requestId, collection, id, version, callback);\n  this._snapshotRequests[snapshotRequest.requestId] = snapshotRequest;\n  snapshotRequest.send();\n};\n\n/**\n * Fetch a read-only snapshot at a given timestamp\n *\n * @param collection - the collection name of the snapshot\n * @param id - the ID of the snapshot\n * @param timestamp (optional) - the timestamp to fetch. If null, the latest version is fetched.\n * @param callback - (error, snapshot) => void, where snapshot takes the following schema:\n *\n * {\n *   id: string;         // ID of the snapshot\n *   v: number;          // version number of the snapshot\n *   type: string;       // the OT type of the snapshot, or null if it doesn't exist or is deleted\n *   data: any;          // the snapshot\n * }\n *\n */\nConnection.prototype.fetchSnapshotByTimestamp = function(collection, id, timestamp, callback) {\n  if (typeof timestamp === 'function') {\n    callback = timestamp;\n    timestamp = null;\n  }\n\n  var requestId = this.nextSnapshotRequestId++;\n  var snapshotRequest = new SnapshotTimestampRequest(this, requestId, collection, id, timestamp, callback);\n  this._snapshotRequests[snapshotRequest.requestId] = snapshotRequest;\n  snapshotRequest.send();\n};\n\nConnection.prototype._handleSnapshotFetch = function(error, message) {\n  var snapshotRequest = this._snapshotRequests[message.id];\n  if (!snapshotRequest) return;\n  delete this._snapshotRequests[message.id];\n  snapshotRequest._handleResponse(error, message);\n};\n",
    "exports.Connection = require('./connection');\nexports.Doc = require('./doc');\nexports.Error = require('../error');\nexports.Query = require('./query');\nexports.types = require('../types');\nexports.logger = require('../logger');\n",
    "/**\n * RemoteDoc adapts the ShareJS operation protocol to Racer's mutator\n * interface.\n *\n * 1. It maps Racer's mutator methods to outgoing ShareJS operations.\n * 2. It maps incoming ShareJS operations to Racer events.\n */\n\nvar Doc = require('./Doc');\nvar util = require('../util');\n\nmodule.exports = RemoteDoc;\n\nfunction RemoteDoc(model, collectionName, id, snapshot, collection) {\n  // This is a bit messy, but we have to immediately register this doc on the\n  // collection that added it, so that when we create the shareDoc and the\n  // connection emits the 'doc' event, we'll find this doc instead of\n  // creating a new one\n  if (collection) collection.docs[id] = this;\n\n  Doc.call(this, model, collectionName, id);\n  this.model = model.pass({$remote: true});\n  this.debugMutations = model.root.debug.remoteMutations;\n\n  // Get or create the Share document. Note that we must have already added\n  // this doc to the collection to avoid creating a duplicate doc\n  this.shareDoc = model.root.connection.get(collectionName, id);\n  this.shareDoc.ingestSnapshot(snapshot);\n  this._initShareDoc();\n}\n\nRemoteDoc.prototype = new Doc();\n\nRemoteDoc.prototype._initShareDoc = function() {\n  var doc = this;\n  var model = this.model;\n  var collectionName = this.collectionName;\n  var id = this.id;\n  var shareDoc = this.shareDoc;\n  // Override submitOp to disable all writes and perform a dry-run\n  if (model.root.debug.disableSubmit) {\n    shareDoc.submitOp = function() {};\n    shareDoc.create = function() {};\n    shareDoc.del = function() {};\n  }\n  // Subscribe to doc events\n  shareDoc.on('op', function(op, isLocal) {\n    // Don't emit on local operations, since they are emitted in the mutator\n    if (isLocal) return;\n    doc._updateCollectionData();\n    doc._onOp(op);\n  });\n  shareDoc.on('del', function(previous, isLocal) {\n    // Calling the shareDoc.del method does not emit an operation event,\n    // so we create the appropriate event here.\n    if (isLocal) return;\n    delete doc.collectionData[id];\n    model.emit('change', [collectionName, id], [undefined, previous, model._pass]);\n  });\n  shareDoc.on('create', function(isLocal) {\n    // Local creates should not emit an event, since they only happen\n    // implicitly as a result of another mutation, and that operation will\n    // emit the appropriate event. Remote creates can set the snapshot data\n    // without emitting an operation event, so an event needs to be emitted\n    // for them.\n    if (isLocal) return;\n    doc._updateCollectionData();\n    var value = shareDoc.data;\n    model.emit('change', [collectionName, id], [value, undefined, model._pass]);\n  });\n  shareDoc.on('error', function(err) {\n    model._emitError(err, collectionName + '.' + id);\n  });\n  shareDoc.on('load', function() {\n    doc._updateCollectionData();\n    var value = shareDoc.data;\n    // If we subscribe to an uncreated document, no need to emit 'load' event\n    if (value === undefined) return;\n    model.emit('load', [collectionName, id], [value, model._pass]);\n  });\n  this._updateCollectionData();\n};\n\nRemoteDoc.prototype._updateCollectionData = function() {\n  var data = this.shareDoc.data;\n  if (typeof data === 'object' && !Array.isArray(data) && data !== null) {\n    data.id = this.id;\n  }\n  this.collectionData[this.id] = data;\n};\n\nRemoteDoc.prototype.create = function(value, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc create', this.path(), value);\n  }\n  // We copy the snapshot data at time of create to prevent the id added\n  // outside of ShareJS from getting stored in the data\n  var data = util.deepCopy(value);\n  if (data) delete data.id;\n  this.shareDoc.create(data, cb);\n  // The id value will get added to the data that was passed in\n  this.shareDoc.data = value;\n  this._updateCollectionData();\n  this.model._context.createDoc(this.collectionName, this.id);\n  return;\n};\n\nRemoteDoc.prototype.set = function(segments, value, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc set', this.path(segments), value);\n  }\n  var previous = this._createImplied(segments);\n  var lastSegment = segments[segments.length - 1];\n  if (previous instanceof ImpliedOp) {\n    previous.value[lastSegment] = value;\n    this.shareDoc.submitOp(previous.op, cb);\n    this._updateCollectionData();\n    return;\n  }\n  var op = (util.isArrayIndex(lastSegment)) ?\n    [new ListReplaceOp(segments.slice(0, -1), lastSegment, previous, value)] :\n    [new ObjectReplaceOp(segments, previous, value)];\n  this.shareDoc.submitOp(op, cb);\n  this._updateCollectionData();\n  return previous;\n};\n\nRemoteDoc.prototype.del = function(segments, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc del', this.path(segments));\n  }\n  if (segments.length === 0) {\n    var previous = this.get();\n    this.shareDoc.del(cb);\n    delete this.collectionData[this.id];\n    return previous;\n  }\n  // Don't do anything if the value is already undefined, since\n  // the del method should not create anything\n  var previous = this.get(segments);\n  if (previous === undefined) {\n    cb();\n    return;\n  }\n  var op = [new ObjectDeleteOp(segments, previous)];\n  this.shareDoc.submitOp(op, cb);\n  this._updateCollectionData();\n  return previous;\n};\n\nRemoteDoc.prototype.increment = function(segments, byNumber, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc increment', this.path(segments), byNumber);\n  }\n  var previous = this._createImplied(segments);\n  if (previous instanceof ImpliedOp) {\n    var lastSegment = segments[segments.length - 1];\n    previous.value[lastSegment] = byNumber;\n    this.shareDoc.submitOp(previous.op, cb);\n    this._updateCollectionData();\n    return byNumber;\n  }\n  if (previous == null) {\n    var lastSegment = segments[segments.length - 1];\n    var op = (util.isArrayIndex(lastSegment)) ?\n      [new ListInsertOp(segments.slice(0, -1), lastSegment, byNumber)] :\n      [new ObjectInsertOp(segments, byNumber)];\n    this.shareDoc.submitOp(op, cb);\n    this._updateCollectionData();\n    return byNumber;\n  }\n  var op = [new IncrementOp(segments, byNumber)];\n  this.shareDoc.submitOp(op, cb);\n  this._updateCollectionData();\n  return previous + byNumber;\n};\n\nRemoteDoc.prototype.push = function(segments, value, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc push', this.path(segments), value);\n  }\n  var shareDoc = this.shareDoc;\n  function push(arr, fnCb) {\n    var op = [new ListInsertOp(segments, arr.length, value)];\n    shareDoc.submitOp(op, fnCb);\n    return arr.length;\n  }\n  return this._arrayApply(segments, push, cb);\n};\n\nRemoteDoc.prototype.unshift = function(segments, value, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc unshift', this.path(segments), value);\n  }\n  var shareDoc = this.shareDoc;\n  function unshift(arr, fnCb) {\n    var op = [new ListInsertOp(segments, 0, value)];\n    shareDoc.submitOp(op, fnCb);\n    return arr.length;\n  }\n  return this._arrayApply(segments, unshift, cb);\n};\n\nRemoteDoc.prototype.insert = function(segments, index, values, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc insert', this.path(segments), index, values);\n  }\n  var shareDoc = this.shareDoc;\n  function insert(arr, fnCb) {\n    var op = createInsertOp(segments, index, values);\n    shareDoc.submitOp(op, fnCb);\n    return arr.length;\n  }\n  return this._arrayApply(segments, insert, cb);\n};\n\nfunction createInsertOp(segments, index, values) {\n  if (!Array.isArray(values)) {\n    return [new ListInsertOp(segments, index, values)];\n  }\n  var op = [];\n  for (var i = 0, len = values.length; i < len; i++) {\n    op.push(new ListInsertOp(segments, index++, values[i]));\n  }\n  return op;\n}\n\nRemoteDoc.prototype.pop = function(segments, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc pop', this.path(segments));\n  }\n  var shareDoc = this.shareDoc;\n  function pop(arr, fnCb) {\n    var index = arr.length - 1;\n    var value = arr[index];\n    var op = [new ListRemoveOp(segments, index, value)];\n    shareDoc.submitOp(op, fnCb);\n    return value;\n  }\n  return this._arrayApply(segments, pop, cb);\n};\n\nRemoteDoc.prototype.shift = function(segments, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc shift', this.path(segments));\n  }\n  var shareDoc = this.shareDoc;\n  function shift(arr, fnCb) {\n    var value = arr[0];\n    var op = [new ListRemoveOp(segments, 0, value)];\n    shareDoc.submitOp(op, fnCb);\n    return value;\n  }\n  return this._arrayApply(segments, shift, cb);\n};\n\nRemoteDoc.prototype.remove = function(segments, index, howMany, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc remove', this.path(segments), index, howMany);\n  }\n  var shareDoc = this.shareDoc;\n  function remove(arr, fnCb) {\n    var values = arr.slice(index, index + howMany);\n    var op = [];\n    for (var i = 0, len = values.length; i < len; i++) {\n      op.push(new ListRemoveOp(segments, index, values[i]));\n    }\n    shareDoc.submitOp(op, fnCb);\n    return values;\n  }\n  return this._arrayApply(segments, remove, cb);\n};\n\nRemoteDoc.prototype.move = function(segments, from, to, howMany, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc move', this.path(segments), from, to, howMany);\n  }\n  var shareDoc = this.shareDoc;\n  function move(arr, fnCb) {\n    // Get the return value\n    var values = arr.slice(from, from + howMany);\n\n    // Build an op that moves each item individually\n    var op = [];\n    for (var i = 0; i < howMany; i++) {\n      op.push(new ListMoveOp(segments, (from < to) ? from : from + howMany - 1, (from < to) ? to + howMany - 1 : to));\n    }\n    shareDoc.submitOp(op, fnCb);\n\n    return values;\n  }\n  return this._arrayApply(segments, move, cb);\n};\n\nRemoteDoc.prototype.stringInsert = function(segments, index, value, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc stringInsert', this.path(segments), index, value);\n  }\n  var previous = this._createImplied(segments);\n  if (previous instanceof ImpliedOp) {\n    var lastSegment = segments[segments.length - 1];\n    previous.value[lastSegment] = value;\n    this.shareDoc.submitOp(previous.op, cb);\n    this._updateCollectionData();\n    return;\n  }\n  if (previous == null) {\n    var lastSegment = segments[segments.length - 1];\n    var op = (util.isArrayIndex(lastSegment)) ?\n      [new ListInsertOp(segments.slice(0, -1), lastSegment, value)] :\n      [new ObjectInsertOp(segments, value)];\n    this.shareDoc.submitOp(op, cb);\n    this._updateCollectionData();\n    return previous;\n  }\n  var op = [new StringInsertOp(segments, index, value)];\n  this.shareDoc.submitOp(op, cb);\n  this._updateCollectionData();\n  return previous;\n};\n\nRemoteDoc.prototype.stringRemove = function(segments, index, howMany, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc stringRemove', this.path(segments), index, howMany);\n  }\n  var previous = this._createImplied(segments);\n  if (previous instanceof ImpliedOp) return;\n  if (previous == null) return previous;\n  var removed = previous.slice(index, index + howMany);\n  var op = [new StringRemoveOp(segments, index, removed)];\n  this.shareDoc.submitOp(op, cb);\n  this._updateCollectionData();\n  return previous;\n};\n\nRemoteDoc.prototype.subtypeSubmit = function(segments, subtype, subtypeOp, cb) {\n  if (this.debugMutations) {\n    console.log('RemoteDoc subtypeSubmit', this.path(segments), subtype, subtypeOp);\n  }\n  var previous = this._createImplied(segments);\n  if (previous instanceof ImpliedOp) {\n    this.shareDoc.submitOp(previous.op);\n    previous = undefined;\n  }\n  var op = new SubtypeOp(segments, subtype, subtypeOp);\n  this.shareDoc.submitOp(op, cb);\n  this._updateCollectionData();\n  return previous;\n};\n\nRemoteDoc.prototype.get = function(segments) {\n  return util.lookup(segments, this.shareDoc.data);\n};\n\nRemoteDoc.prototype._createImplied = function(segments) {\n  if (!this.shareDoc.type) {\n    throw new Error('Mutation on uncreated remote document');\n  }\n  var parent = this.shareDoc;\n  var key = 'data';\n  var node = parent[key];\n  var i = 0;\n  var nextKey = segments[i++];\n  var op, value;\n  while (nextKey != null) {\n    if (!node) {\n      if (op) {\n        value = value[key] = util.isArrayIndex(nextKey) ? [] : {};\n      } else {\n        value = util.isArrayIndex(nextKey) ? [] : {};\n        if (Array.isArray(parent)) {\n          if (key >= parent.length) {\n            op = new ListInsertOp(segments.slice(0, i - 2), key, value);\n          } else {\n            op = new ListReplaceOp(segments.slice(0, i - 2), key, node, value);\n          }\n        } else {\n          op = new ObjectInsertOp(segments.slice(0, i - 1), value);\n        }\n      }\n      node = value;\n    }\n    parent = node;\n    key = nextKey;\n    node = parent[key];\n    nextKey = segments[i++];\n  }\n  if (op) return new ImpliedOp(op, value);\n  return node;\n};\n\nfunction ImpliedOp(op, value) {\n  this.op = op;\n  this.value = value;\n}\n\nRemoteDoc.prototype._arrayApply = function(segments, fn, cb) {\n  var arr = this._createImplied(segments);\n  if (arr instanceof ImpliedOp) {\n    this.shareDoc.submitOp(arr.op);\n    arr = this.get(segments);\n  }\n  if (arr == null) {\n    var lastSegment = segments[segments.length - 1];\n    var op = (util.isArrayIndex(lastSegment)) ?\n      [new ListInsertOp(segments.slice(0, -1), lastSegment, [])] :\n      [new ObjectInsertOp(segments, [])];\n    this.shareDoc.submitOp(op);\n    arr = this.get(segments);\n  }\n\n  if (!Array.isArray(arr)) {\n    var message = this._errorMessage(fn.name + ' on non-array', segments, arr);\n    var err = new TypeError(message);\n    return cb(err);\n  }\n  var out = fn(arr, cb);\n  this._updateCollectionData();\n  return out;\n};\n\nRemoteDoc.prototype._onOp = function(op) {\n  var item;\n  if (op.length === 1) {\n    // ShareDB docs shatter json0 ops into single components during apply\n    item = op[0];\n  } else if (op.length === 0) {\n    // Ignore no-ops\n    return;\n  } else {\n    try {\n      op = JSON.stringify(op);\n    } catch (err) {}\n    throw new Error('Received op with multiple components from ShareDB ' + op);\n  }\n  var segments = [this.collectionName, this.id].concat(item.p);\n  var model = this.model;\n\n  // ObjectReplaceOp, ObjectInsertOp, or ObjectDeleteOp\n  if (defined(item.oi) || defined(item.od)) {\n    var value = item.oi;\n    var previous = item.od;\n    model.emit('change', segments, [value, previous, model._pass]);\n\n  // ListReplaceOp\n  } else if (defined(item.li) && defined(item.ld)) {\n    var value = item.li;\n    var previous = item.ld;\n    model.emit('change', segments, [value, previous, model._pass]);\n\n  // ListInsertOp\n  } else if (defined(item.li)) {\n    var index = segments[segments.length - 1];\n    var values = [item.li];\n    model.emit('insert', segments.slice(0, -1), [index, values, model._pass]);\n\n  // ListRemoveOp\n  } else if (defined(item.ld)) {\n    var index = segments[segments.length - 1];\n    var removed = [item.ld];\n    model.emit('remove', segments.slice(0, -1), [index, removed, model._pass]);\n\n  // ListMoveOp\n  } else if (defined(item.lm)) {\n    var from = segments[segments.length - 1];\n    var to = item.lm;\n    var howMany = 1;\n    model.emit('move', segments.slice(0, -1), [from, to, howMany, model._pass]);\n\n  // StringInsertOp\n  } else if (defined(item.si)) {\n    var index = segments[segments.length - 1];\n    var text = item.si;\n    segments = segments.slice(0, -1);\n    var value = model._get(segments);\n    var previous = value.slice(0, index) + value.slice(index + text.length);\n    var pass = model.pass({$stringInsert: {index: index, text: text}})._pass;\n    model.emit('change', segments, [value, previous, pass]);\n\n  // StringRemoveOp\n  } else if (defined(item.sd)) {\n    var index = segments[segments.length - 1];\n    var text = item.sd;\n    var howMany = text.length;\n    segments = segments.slice(0, -1);\n    var value = model._get(segments);\n    var previous = value.slice(0, index) + text + value.slice(index);\n    var pass = model.pass({$stringRemove: {index: index, howMany: howMany}})._pass;\n    model.emit('change', segments, [value, previous, pass]);\n\n  // IncrementOp\n  } else if (defined(item.na)) {\n    var value = this.get(item.p);\n    var previous = value - item.na;\n    model.emit('change', segments, [value, previous, model._pass]);\n\n  // SubtypeOp\n  } else if (defined(item.t)) {\n    var value = this.get(item.p);\n    // Since this is generic to all subtypes, we don't know how to get a copy\n    // of the previous value efficiently. We could make a copy eagerly, but\n    // given that embedded types are likely to be used for custom editors,\n    // we'll assume they primarily use the returned op and are unlikely to\n    // need the previous snapshot data\n    var previous = undefined;\n    var type = item.t;\n    var op = item.o;\n    var pass = model.pass({$subtype: {type: type, op: op}})._pass;\n    model.emit('change', segments, [value, previous, pass]);\n  }\n};\n\nfunction ObjectReplaceOp(segments, before, after) {\n  this.p = util.castSegments(segments);\n  this.od = before;\n  this.oi = (after === undefined) ? null : after;\n}\nfunction ObjectInsertOp(segments, value) {\n  this.p = util.castSegments(segments);\n  this.oi = (value === undefined) ? null : value;\n}\nfunction ObjectDeleteOp(segments, value) {\n  this.p = util.castSegments(segments);\n  this.od = (value === undefined) ? null : value;\n}\nfunction ListReplaceOp(segments, index, before, after) {\n  this.p = util.castSegments(segments.concat(index));\n  this.ld = before;\n  this.li = (after === undefined) ? null : after;\n}\nfunction ListInsertOp(segments, index, value) {\n  this.p = util.castSegments(segments.concat(index));\n  this.li = (value === undefined) ? null : value;\n}\nfunction ListRemoveOp(segments, index, value) {\n  this.p = util.castSegments(segments.concat(index));\n  this.ld = (value === undefined) ? null : value;\n}\nfunction ListMoveOp(segments, from, to) {\n  this.p = util.castSegments(segments.concat(from));\n  this.lm = to;\n}\nfunction StringInsertOp(segments, index, value) {\n  this.p = util.castSegments(segments.concat(index));\n  this.si = value;\n}\nfunction StringRemoveOp(segments, index, value) {\n  this.p = util.castSegments(segments.concat(index));\n  this.sd = value;\n}\nfunction IncrementOp(segments, byNumber) {\n  this.p = util.castSegments(segments);\n  this.na = byNumber;\n}\nfunction SubtypeOp(segments, subtype, subtypeOp) {\n  this.p = util.castSegments(segments);\n  this.t = subtype;\n  this.o = subtypeOp;\n}\n\nfunction defined(value) {\n  return value !== undefined;\n}\n",
    "var Connection = require('sharedb/lib/client').Connection;\nvar Model = require('./Model');\nvar LocalDoc = require('./LocalDoc');\nvar RemoteDoc = require('./RemoteDoc');\n\nModel.INITS.push(function(model) {\n  model.root._preventCompose = false;\n});\n\nModel.prototype.preventCompose = function() {\n  var model = this._child();\n  model._preventCompose = true;\n  return model;\n};\n\nModel.prototype.allowCompose = function() {\n  var model = this._child();\n  model._preventCompose = false;\n  return model;\n};\n\nModel.prototype.createConnection = function(bundle) {\n  // Model::_createSocket should be defined by the socket plugin\n  this.root.socket = this._createSocket(bundle);\n\n  // The Share connection will bind to the socket by defining the onopen,\n  // onmessage, etc. methods\n  var model = this;\n  this.root.connection = new Connection(this.root.socket);\n  this.root.connection.on('state', function(state, reason) {\n    model._setDiff(['$connection', 'state'], state);\n    model._setDiff(['$connection', 'reason'], reason);\n  });\n  this._set(['$connection', 'state'], 'connected');\n\n  this._finishCreateConnection();\n};\n\nModel.prototype._finishCreateConnection = function() {\n  var model = this;\n  this.root.connection.on('error', function(err) {\n    model._emitError(err);\n  });\n  // Share docs can be created by queries, so we need to register them\n  // with Racer as soon as they are created to capture their events\n  this.root.connection.on('doc', function(shareDoc) {\n    model.getOrCreateDoc(shareDoc.collection, shareDoc.id);\n  });\n};\n\nModel.prototype.connect = function() {\n  this.root.socket.open();\n};\nModel.prototype.disconnect = function() {\n  this.root.socket.close();\n};\nModel.prototype.reconnect = function() {\n  this.disconnect();\n  this.connect();\n};\n// Clean delayed disconnect\nModel.prototype.close = function(cb) {\n  cb = this.wrapCallback(cb);\n  var model = this;\n  this.whenNothingPending(function() {\n    model.root.socket.close();\n    cb();\n  });\n};\n\n// Returns a reference to the ShareDB agent if it is connected directly on the\n// server. Will return null if the ShareDB connection has been disconnected or\n// if we are not in the same process and we do not have a reference to the\n// server-side agent object\nModel.prototype.getAgent = function() {\n  return this.root.connection.agent;\n};\n\nModel.prototype._isLocal = function(name) {\n  // Whether the collection is local or remote is determined by its name.\n  // Collections starting with an underscore ('_') are for user-defined local\n  // collections, those starting with a dollar sign ('$'') are for\n  // framework-defined local collections, and all others are remote.\n  var firstCharcter = name.charAt(0);\n  return firstCharcter === '_' || firstCharcter === '$';\n};\n\nModel.prototype._getDocConstructor = function(name) {\n  return (this._isLocal(name)) ? LocalDoc : RemoteDoc;\n};\n\nModel.prototype.hasPending = function() {\n  return this.root.connection.hasPending();\n};\nModel.prototype.hasWritePending = function() {\n  return this.root.connection.hasWritePending();\n};\nModel.prototype.whenNothingPending = function(cb) {\n  return this.root.connection.whenNothingPending(cb);\n};\n",
    "var util = require('../util');\nvar Model = require('./Model');\nvar defaultType = require('sharedb/lib/client').types.defaultType;\n\nmodule.exports = Query;\n\nModel.INITS.push(function(model) {\n  model.root._queries = new Queries();\n});\n\nModel.prototype.query = function(collectionName, expression, options) {\n  // DEPRECATED: Passing in a string as the third argument specifies the db\n  // option for backward compatibility\n  if (typeof options === 'string') {\n    options = {db: options};\n  }\n  return this._getOrCreateQuery(collectionName, expression, options, Query);\n};\n\n/**\n * If an existing query is present with the same `collectionName`, `expression`,\n * and `options`, then returns the existing query; otherwise, constructs and\n * returns a new query using `QueryConstructor`.\n *\n * @param {string} collectionName\n * @param {*} expression\n * @param {*} options\n * @param {new (model: Model, collectionName: string, expression: any, options: any) => Query} QueryConstructor -\n *   constructor function for a Query, to create one if not already present on this model\n */\nModel.prototype._getOrCreateQuery = function(collectionName, expression, options, QueryConstructor) {\n  expression = this.sanitizeQuery(expression);\n  var query = this.root._queries.get(collectionName, expression, options);\n  if (query) return query;\n  query = new QueryConstructor(this, collectionName, expression, options);\n  this.root._queries.add(query);\n  return query;\n};\n\n// This method replaces undefined in query objects with null, because\n// undefined properties are removed in JSON stringify. This can be dangerous\n// in queries, where presenece of a property may indicate that it should be a\n// filter and absence means that all values are accepted. We aren't checking\n// for cycles, which aren't allowed in JSON, so this could throw a max call\n// stack error\nModel.prototype.sanitizeQuery = function(expression) {\n  if (expression && typeof expression === 'object') {\n    for (var key in expression) {\n      if (expression.hasOwnProperty(key)) {\n        var value = expression[key];\n        if (value === undefined) {\n          expression[key] = null;\n        } else {\n          this.sanitizeQuery(value);\n        }\n      }\n    }\n  }\n  return expression;\n};\n\n// Called during initialization of the bundle on page load.\nModel.prototype._initQueries = function(items) {\n  var queries = this.root._queries;\n  for (var i = 0; i < items.length; i++) {\n    var item = items[i];\n    var counts = item[0];\n    var collectionName = item[1];\n    var expression = item[2];\n    var results = item[3] || [];\n    var options = item[4];\n    var extra = item[5];\n    var query = this.root._queries.get(collectionName, expression, options);\n    if (!query) {\n      query = new Query(this, collectionName, expression, options);\n      queries.add(query);\n    }\n\n    query._setExtra(extra);\n\n    var ids = [];\n    for (var resultIndex = 0; resultIndex < results.length; resultIndex++) {\n      var result = results[resultIndex];\n      if (typeof result === 'string') {\n        ids.push(result);\n        continue;\n      }\n      var data = result[0];\n      var v = result[1];\n      var id = result[2] || data.id;\n      var type = result[3];\n      ids.push(id);\n      var snapshot = {data: data, v: v, type: type};\n      this.getOrCreateDoc(collectionName, id, snapshot);\n    }\n    query._addMapIds(ids);\n    this._set(query.idsSegments, ids);\n\n    for (var countIndex = 0; countIndex < counts.length; countIndex++) {\n      var count = counts[countIndex];\n      var subscribed = count[0] || 0;\n      var fetched = count[1] || 0;\n      var contextId = count[2];\n      if (contextId) query.model.setContext(contextId);\n      while (subscribed--) {\n        query.subscribe();\n      }\n      query.fetchCount += fetched;\n      while (fetched--) {\n        query.model._context.fetchQuery(query);\n      }\n    }\n  }\n};\n\nfunction Queries() {\n  // Map is a flattened map of queries by hash. Currently used in contexts\n  this.map = {};\n  // Collections is a nested map of queries by collection then hash\n  this.collections = {};\n}\nQueries.prototype.add = function(query) {\n  this.map[query.hash] = query;\n  var collection = this.collections[query.collectionName] ||\n    (this.collections[query.collectionName] = {});\n  collection[query.hash] = query;\n};\nQueries.prototype.remove = function(query) {\n  delete this.map[query.hash];\n  var collection = this.collections[query.collectionName];\n  if (!collection) return;\n  delete collection[query.hash];\n  // Check if the collection still has any keys\n  // eslint-disable-next-line no-unused-vars\n  for (var key in collection) return;\n  delete this.collections[query.collectionName];\n};\nQueries.prototype.get = function(collectionName, expression, options) {\n  var hash = queryHash(collectionName, expression, options);\n  return this.map[hash];\n};\nQueries.prototype.toJSON = function() {\n  var out = [];\n  for (var hash in this.map) {\n    var query = this.map[hash];\n    if (query.subscribeCount || query.fetchCount) {\n      out.push(query.serialize());\n    }\n  }\n  return out;\n};\n\nfunction Query(model, collectionName, expression, options) {\n  this.model = model.pass({$query: this});\n  this.collectionName = collectionName;\n  this.expression = expression;\n  this.options = options;\n  this.hash = queryHash(collectionName, expression, options);\n  this.segments = ['$queries', this.hash];\n  this.idsSegments = ['$queries', this.hash, 'ids'];\n  this.extraSegments = ['$queries', this.hash, 'extra'];\n\n  this._pendingSubscribeCallbacks = [];\n\n  // These are used to help cleanup appropriately when calling unsubscribe and\n  // unfetch. A query won't be fully cleaned up until unfetch and unsubscribe\n  // are called the same number of times that fetch and subscribe were called.\n  this.subscribeCount = 0;\n  this.fetchCount = 0;\n\n  this.created = false;\n  this.shareQuery = null;\n\n  // idMap is checked in maybeUnload to see if the query is currently holding\n  // a reference to an id in its results set. This map is duplicative of the\n  // actual results id list stored in the model, but we are maintaining it,\n  // because otherwise maybeUnload would be looping through the entire results\n  // set of each query on the same collection for every doc checked\n  //\n  // Map of id -> count of ids\n  this.idMap = {};\n}\n\nQuery.prototype.create = function() {\n  this.created = true;\n  this.model.root._queries.add(this);\n};\n\nQuery.prototype.destroy = function() {\n  var ids = this.getIds();\n  this.created = false;\n  if (this.shareQuery) {\n    this.shareQuery.destroy();\n    this.shareQuery = null;\n  }\n  this.model.root._queries.remove(this);\n  this.idMap = {};\n  this.model._del(this.segments);\n  this._maybeUnloadDocs(ids);\n};\n\nQuery.prototype.fetch = function(cb) {\n  cb = this.model.wrapCallback(cb);\n  this.model._context.fetchQuery(this);\n\n  this.fetchCount++;\n\n  if (!this.created) this.create();\n\n  var query = this;\n  function fetchCb(err, results, extra) {\n    if (err) return cb(err);\n    query._setExtra(extra);\n    query._setResults(results);\n    cb();\n  }\n  this.model.root.connection.createFetchQuery(\n    this.collectionName,\n    this.expression,\n    this.options,\n    fetchCb\n  );\n  return this;\n};\n\nQuery.prototype.subscribe = function(cb) {\n  cb = this.model.wrapCallback(cb);\n  this.model._context.subscribeQuery(this);\n\n  if (this.subscribeCount++) {\n    var query = this;\n    process.nextTick(function() {\n      var data = query.model._get(query.segments);\n      if (data) {\n        cb();\n      } else {\n        query._pendingSubscribeCallbacks.push(cb);\n      }\n    });\n    return this;\n  }\n\n  if (!this.created) this.create();\n\n  var options = (this.options) ? util.copy(this.options) : {};\n  options.results = this._getShareResults();\n\n  // When doing server-side rendering, we actually do a fetch the first time\n  // that subscribe is called, but keep track of the state as if subscribe\n  // were called for proper initialization in the client\n  if (this.model.root.fetchOnly) {\n    this._shareFetchedSubscribe(options, cb);\n  } else {\n    this._shareSubscribe(options, cb);\n  }\n\n  return this;\n};\n\nQuery.prototype._subscribeCb = function(cb) {\n  var query = this;\n  return function subscribeCb(err, results, extra) {\n    if (err) return query._flushSubscribeCallbacks(err, cb);\n    query._setExtra(extra);\n    query._setResults(results);\n    query._flushSubscribeCallbacks(null, cb);\n  };\n};\n\nQuery.prototype._shareFetchedSubscribe = function(options, cb) {\n  this.model.root.connection.createFetchQuery(\n    this.collectionName,\n    this.expression,\n    options,\n    this._subscribeCb(cb)\n  );\n};\n\nQuery.prototype._shareSubscribe = function(options, cb) {\n  var query = this;\n  // Sanity check, though this shouldn't happen\n  if (this.shareQuery) {\n    this.shareQuery.destroy();\n  }\n  this.shareQuery = this.model.root.connection.createSubscribeQuery(\n    this.collectionName,\n    this.expression,\n    options,\n    this._subscribeCb(cb)\n  );\n  this.shareQuery.on('insert', function(shareDocs, index) {\n    var ids = resultsIds(shareDocs);\n    query._addMapIds(ids);\n    query.model._insert(query.idsSegments, index, ids);\n  });\n  this.shareQuery.on('remove', function(shareDocs, index) {\n    var ids = resultsIds(shareDocs);\n    query._removeMapIds(ids);\n    query.model._remove(query.idsSegments, index, shareDocs.length);\n  });\n  this.shareQuery.on('move', function(shareDocs, from, to) {\n    query.model._move(query.idsSegments, from, to, shareDocs.length);\n  });\n  this.shareQuery.on('extra', function(extra) {\n    query.model._setDiffDeep(query.extraSegments, extra);\n  });\n  this.shareQuery.on('error', function(err) {\n    query.model._emitError(err, query.hash);\n  });\n};\n\nQuery.prototype._removeMapIds = function(ids) {\n  for (var i = ids.length; i--;) {\n    var id = ids[i];\n    if (this.idMap[id] > 1) {\n      this.idMap[id]--;\n    } else {\n      delete this.idMap[id];\n    }\n  }\n  // Technically this isn't quite right and we might not wait the full unload\n  // delay if someone else calls maybeUnload for the same doc id. However,\n  // it is a lot easier to implement than delaying the removal until later and\n  // dealing with adds that might happen in the meantime. This will probably\n  // work to avoid thrashing subscribe/unsubscribe in expected cases\n  if (this.model.root.unloadDelay) {\n    var query = this;\n    setTimeout(function() {\n      query._maybeUnloadDocs(ids);\n    }, this.model.root.unloadDelay);\n    return;\n  }\n  this._maybeUnloadDocs(ids);\n};\nQuery.prototype._addMapIds = function(ids) {\n  for (var i = ids.length; i--;) {\n    var id = ids[i];\n    this.idMap[id] = (this.idMap[id] || 0) + 1;\n  }\n};\nQuery.prototype._diffMapIds = function(ids) {\n  var addedIds = [];\n  var removedIds = [];\n  var newMap = {};\n  for (var i = ids.length; i--;) {\n    var id = ids[i];\n    newMap[id] = true;\n    if (this.idMap[id]) continue;\n    addedIds.push(id);\n  }\n  for (var id in this.idMap) {\n    if (newMap[id]) continue;\n    removedIds.push(id);\n  }\n  if (addedIds.length) this._addMapIds(addedIds);\n  if (removedIds.length) this._removeMapIds(removedIds);\n};\nQuery.prototype._setExtra = function(extra) {\n  if (extra === undefined) return;\n  this.model._setDiffDeep(this.extraSegments, extra);\n};\nQuery.prototype._setResults = function(results) {\n  var ids = resultsIds(results);\n  this._setResultIds(ids);\n};\nQuery.prototype._setResultIds = function(ids) {\n  this._diffMapIds(ids);\n  this.model._setArrayDiff(this.idsSegments, ids);\n};\nQuery.prototype._maybeUnloadDocs = function(ids) {\n  for (var i = 0; i < ids.length; i++) {\n    var id = ids[i];\n    this.model._maybeUnloadDoc(this.collectionName, id);\n  }\n};\n\n// Flushes `_pendingSubscribeCallbacks`, calling each callback in the array,\n// with an optional error to pass into each. `_pendingSubscribeCallbacks` will\n// be empty after this runs.\nQuery.prototype._flushSubscribeCallbacks = function(err, cb) {\n  cb(err);\n  var pendingCallback;\n  while ((pendingCallback = this._pendingSubscribeCallbacks.shift())) {\n    pendingCallback(err);\n  }\n};\n\nQuery.prototype.unfetch = function(cb) {\n  cb = this.model.wrapCallback(cb);\n  this.model._context.unfetchQuery(this);\n\n  // No effect if the query is not currently fetched\n  if (!this.fetchCount) {\n    cb();\n    return this;\n  }\n\n  var query = this;\n  if (this.model.root.unloadDelay) {\n    setTimeout(finishUnfetchQuery, this.model.root.unloadDelay);\n  } else {\n    finishUnfetchQuery();\n  }\n  function finishUnfetchQuery() {\n    var count = --query.fetchCount;\n    if (count) return cb(null, count);\n    // Cleanup when no fetches or subscribes remain\n    if (!query.subscribeCount) query.destroy();\n    cb(null, 0);\n  }\n  return this;\n};\n\nQuery.prototype.unsubscribe = function(cb) {\n  cb = this.model.wrapCallback(cb);\n  this.model._context.unsubscribeQuery(this);\n\n  // No effect if the query is not currently subscribed\n  if (!this.subscribeCount) {\n    cb();\n    return this;\n  }\n\n  var query = this;\n  if (this.model.root.unloadDelay) {\n    setTimeout(finishUnsubscribeQuery, this.model.root.unloadDelay);\n  } else {\n    finishUnsubscribeQuery();\n  }\n  function finishUnsubscribeQuery() {\n    var count = --query.subscribeCount;\n    if (count) return cb(null, count);\n\n    if (query.shareQuery) {\n      query.shareQuery.destroy();\n      query.shareQuery = null;\n    }\n\n    unsubscribeQueryCallback();\n  }\n  function unsubscribeQueryCallback(err) {\n    if (err) return cb(err);\n    // Cleanup when no fetches or subscribes remain\n    if (!query.fetchCount) query.destroy();\n    cb(null, 0);\n  }\n  return this;\n};\n\nQuery.prototype._getShareResults = function() {\n  var ids = this.model._get(this.idsSegments);\n  if (!ids) return;\n\n  var collection = this.model.getCollection(this.collectionName);\n  if (!collection) return;\n\n  var results = [];\n  for (var i = 0; i < ids.length; i++) {\n    var id = ids[i];\n    var doc = collection.docs[id];\n    results.push(doc && doc.shareDoc);\n  }\n  return results;\n};\n\nQuery.prototype.get = function() {\n  var results = [];\n  var data = this.model._get(this.segments);\n  if (!data) {\n    console.warn('You must fetch or subscribe to a query before getting its results.');\n    return results;\n  }\n  var ids = data.ids;\n  if (!ids) return results;\n\n  var collection = this.model.getCollection(this.collectionName);\n  for (var i = 0, l = ids.length; i < l; i++) {\n    var id = ids[i];\n    var doc = collection && collection.docs[id];\n    results.push(doc && doc.get());\n  }\n  return results;\n};\n\nQuery.prototype.getIds = function() {\n  return this.model._get(this.idsSegments) || [];\n};\n\nQuery.prototype.getExtra = function() {\n  return this.model._get(this.extraSegments);\n};\n\nQuery.prototype.ref = function(from) {\n  var idsPath = this.idsSegments.join('.');\n  return this.model.refList(from, this.collectionName, idsPath);\n};\n\nQuery.prototype.refIds = function(from) {\n  var idsPath = this.idsSegments.join('.');\n  return this.model.root.ref(from, idsPath);\n};\n\nQuery.prototype.refExtra = function(from, relPath) {\n  var extraPath = this.extraSegments.join('.');\n  if (relPath) extraPath += '.' + relPath;\n  return this.model.root.ref(from, extraPath);\n};\n\nQuery.prototype.serialize = function() {\n  var ids = this.getIds();\n  var collection = this.model.getCollection(this.collectionName);\n  var results;\n  if (collection) {\n    results = [];\n    for (var i = 0; i < ids.length; i++) {\n      var id = ids[i];\n      var doc = collection.docs[id];\n      if (doc) {\n        delete collection.docs[id];\n        var data = doc.shareDoc.data;\n        var result = [data, doc.shareDoc.version];\n        if (!data || data.id !== id) {\n          result[2] = id;\n        }\n        if (doc.shareDoc.type !== defaultType) {\n          result[3] = doc.shareDoc.type && doc.shareDoc.type.name;\n        }\n        results.push(result);\n      } else {\n        results.push(id);\n      }\n    }\n  }\n  var counts = [];\n  var contexts = this.model.root._contexts;\n  for (var key in contexts) {\n    var context = contexts[key];\n    var subscribed = context.subscribedQueries[this.hash] || 0;\n    var fetched = context.fetchedQueries[this.hash] || 0;\n    if (subscribed || fetched) {\n      if (key !== 'root') {\n        counts.push([subscribed, fetched, key]);\n      } else if (fetched) {\n        counts.push([subscribed, fetched]);\n      } else {\n        counts.push([subscribed]);\n      }\n    }\n  }\n  var serialized = [\n    counts,\n    this.collectionName,\n    this.expression,\n    results,\n    this.options,\n    this.getExtra()\n  ];\n  while (serialized[serialized.length - 1] == null) {\n    serialized.pop();\n  }\n  return serialized;\n};\n\nfunction queryHash(collectionName, expression, options) {\n  var args = [collectionName, expression, options];\n  return JSON.stringify(args).replace(/\\./g, '|');\n}\n\nfunction resultsIds(results) {\n  var ids = [];\n  for (var i = 0; i < results.length; i++) {\n    var shareDoc = results[i];\n    ids.push(shareDoc.id);\n  }\n  return ids;\n}\n",
    "module.exports = CollectionCounter;\n\nfunction CollectionCounter() {\n  this.reset();\n}\nCollectionCounter.prototype.reset = function() {\n  this.collections = {};\n};\nCollectionCounter.prototype.get = function(collectionName, id) {\n  var collection = this.collections[collectionName];\n  return collection && collection[id];\n};\nCollectionCounter.prototype.increment = function(collectionName, id) {\n  var collection = this.collections[collectionName] ||\n    (this.collections[collectionName] = {});\n  var count = (collection[id] || 0) + 1;\n  collection[id] = count;\n  return count;\n};\nCollectionCounter.prototype.decrement = function(collectionName, id) {\n  var collection = this.collections[collectionName];\n  var count = collection && collection[id];\n  if (count == null) return;\n  if (count > 1) {\n    count--;\n    collection[id] = count;\n    return count;\n  }\n  delete collection[id];\n  // Check if the collection still has any keys\n  // eslint-disable-next-line no-unused-vars\n  for (var key in collection) return 0;\n  delete this.collections[collectionName];\n  return 0;\n};\nCollectionCounter.prototype.toJSON = function() {\n  // Check to see if we have any keys\n  // eslint-disable-next-line no-unused-vars\n  for (var key in this.collections) {\n    return this.collections;\n  }\n  return;\n};\n",
    "var util = require('../util');\nvar Model = require('./Model');\nvar Query = require('./Query');\nvar CollectionCounter = require('./CollectionCounter');\n\nModel.INITS.push(function(model, options) {\n  model.root.fetchOnly = options.fetchOnly;\n  model.root.unloadDelay = options.unloadDelay || (util.isServer) ? 0 : 1000;\n\n  // Track the total number of active fetches per doc\n  model.root._fetchedDocs = new CollectionCounter();\n  // Track the total number of active susbscribes per doc\n  model.root._subscribedDocs = new CollectionCounter();\n});\n\nModel.prototype.fetch = function() {\n  this._forSubscribable(arguments, 'fetch');\n  return this;\n};\nModel.prototype.unfetch = function() {\n  this._forSubscribable(arguments, 'unfetch');\n  return this;\n};\nModel.prototype.subscribe = function() {\n  this._forSubscribable(arguments, 'subscribe');\n  return this;\n};\nModel.prototype.unsubscribe = function() {\n  this._forSubscribable(arguments, 'unsubscribe');\n  return this;\n};\n\nModel.prototype._forSubscribable = function(argumentsObject, method) {\n  var args, cb;\n  if (!argumentsObject.length) {\n    // Use this model's scope if no arguments\n    args = [null];\n  } else if (typeof argumentsObject[0] === 'function') {\n    // Use this model's scope if the first argument is a callback\n    args = [null];\n    cb = argumentsObject[0];\n  } else if (Array.isArray(argumentsObject[0])) {\n    // Items can be passed in as an array\n    args = argumentsObject[0];\n    cb = argumentsObject[1];\n  } else {\n    // Or as multiple arguments\n    args = Array.prototype.slice.call(argumentsObject);\n    var last = args[args.length - 1];\n    if (typeof last === 'function') cb = args.pop();\n  }\n\n  var group = util.asyncGroup(this.wrapCallback(cb));\n  var finished = group();\n  var docMethod = method + 'Doc';\n\n  this.root.connection.startBulk();\n  for (var i = 0; i < args.length; i++) {\n    var item = args[i];\n    if (item instanceof Query) {\n      item[method](group());\n    } else {\n      var segments = this._dereference(this._splitPath(item));\n      if (segments.length === 2) {\n        // Do the appropriate method for a single document.\n        this[docMethod](segments[0], segments[1], group());\n      } else {\n        var message = 'Cannot ' + method + ' to path: ' + segments.join('.');\n        group()(new Error(message));\n      }\n    }\n  }\n  this.root.connection.endBulk();\n  process.nextTick(finished);\n};\n\nModel.prototype.fetchDoc = function(collectionName, id, cb) {\n  cb = this.wrapCallback(cb);\n\n  // Maintain a count of fetches so that we can unload the document\n  // when there are no remaining fetches or subscribes for that document\n  this._context.fetchDoc(collectionName, id);\n  this.root._fetchedDocs.increment(collectionName, id);\n\n  // Fetch\n  var doc = this.getOrCreateDoc(collectionName, id);\n  doc.shareDoc.fetch(cb);\n};\n\nModel.prototype.subscribeDoc = function(collectionName, id, cb) {\n  cb = this.wrapCallback(cb);\n\n  // Maintain a count of subscribes so that we can unload the document\n  // when there are no remaining fetches or subscribes for that document\n  this._context.subscribeDoc(collectionName, id);\n  this.root._subscribedDocs.increment(collectionName, id);\n\n  var doc = this.getOrCreateDoc(collectionName, id);\n  // Early return if we know we are already subscribed\n  if (doc.shareDoc.subscribed) {\n    return cb();\n  }\n  // Subscribe\n  if (this.root.fetchOnly) {\n    doc.shareDoc.fetch(cb);\n  } else {\n    doc.shareDoc.subscribe(cb);\n  }\n};\n\nModel.prototype.unfetchDoc = function(collectionName, id, cb) {\n  cb = this.wrapCallback(cb);\n  this._context.unfetchDoc(collectionName, id);\n\n  // No effect if the document is not currently fetched\n  if (!this.root._fetchedDocs.get(collectionName, id)) return cb();\n\n  var model = this;\n  if (this.root.unloadDelay) {\n    setTimeout(finishUnfetchDoc, this.root.unloadDelay);\n  } else {\n    finishUnfetchDoc();\n  }\n  function finishUnfetchDoc() {\n    var count = model.root._fetchedDocs.decrement(collectionName, id);\n    if (count) return cb(null, count);\n    model._maybeUnloadDoc(collectionName, id);\n    cb(null, 0);\n  }\n};\n\nModel.prototype.unsubscribeDoc = function(collectionName, id, cb) {\n  cb = this.wrapCallback(cb);\n  this._context.unsubscribeDoc(collectionName, id);\n\n  // No effect if the document is not currently subscribed\n  if (!this.root._subscribedDocs.get(collectionName, id)) return cb();\n\n  var model = this;\n  if (this.root.unloadDelay) {\n    setTimeout(finishUnsubscribeDoc, this.root.unloadDelay);\n  } else {\n    finishUnsubscribeDoc();\n  }\n  function finishUnsubscribeDoc() {\n    var count = model.root._subscribedDocs.decrement(collectionName, id);\n    // If there are more remaining subscriptions, only decrement the count\n    // and callback with how many subscriptions are remaining\n    if (count) return cb(null, count);\n\n    // If there is only one remaining subscription, actually unsubscribe\n    if (model.root.fetchOnly) {\n      unsubscribeDocCallback();\n    } else {\n      var doc = model.getDoc(collectionName, id);\n      var shareDoc = doc && doc.shareDoc;\n      if (!shareDoc) return unsubscribeDocCallback();\n      shareDoc.unsubscribe(unsubscribeDocCallback);\n    }\n  }\n  function unsubscribeDocCallback(err) {\n    model._maybeUnloadDoc(collectionName, id);\n    if (err) return cb(err);\n    cb(null, 0);\n  }\n};\n\n// Removes the document from the local model if the model no longer has any\n// remaining fetches or subscribes via a query or direct loading\nModel.prototype._maybeUnloadDoc = function(collectionName, id) {\n  var doc = this.getDoc(collectionName, id);\n  if (!doc) return;\n\n  // If there is a query or direct fetch or subscribe that is holding reference\n  // to this doc, leave it loaded\n  if (this._hasDocReferences(collectionName, id)) return;\n  // Calling sharedDoc.destroy() will remove it from the connection only when\n  // there aren't any operations, fetches, or subscribes pending on the doc.\n  // Thus, if we remove the doc from Racer's model but don't remove it from\n  // ShareDB, we can end up with an inconsistent state, with the data existing\n  // in ShareDB not reflected in the racer model data\n  if (doc.shareDoc && doc.shareDoc.hasPending()) return;\n\n  var previous = doc.get();\n\n  // Remove doc from Racer\n  this.root.collections[collectionName].remove(id);\n  // Remove doc from Share\n  if (doc.shareDoc) doc.shareDoc.destroy();\n\n  this.emit('unload', [collectionName, id], [previous, this._pass]);\n};\n\nModel.prototype._hasDocReferences = function(collectionName, id) {\n  // Check if any fetched or subscribed queries currently have the\n  // id in their results\n  var queries = this.root._queries.collections[collectionName];\n  if (queries) {\n    for (var hash in queries) {\n      var query = queries[hash];\n      if (!query.subscribeCount && !query.fetchCount) continue;\n      if (query.idMap[id] > 0) return true;\n    }\n  }\n\n  // Check if document currently has direct fetch or subscribe\n  if (\n    this.root._fetchedDocs.get(collectionName, id) ||\n    this.root._subscribedDocs.get(collectionName, id)\n  ) return true;\n\n  return false;\n};\n",
    "/**\n * Contexts are useful for keeping track of the origin of subscribes.\n */\n\nvar Model = require('./Model');\nvar CollectionCounter = require('./CollectionCounter');\n\nModel.INITS.push(function(model) {\n  model.root._contexts = new Contexts();\n  model.root.setContext('root');\n});\n\nModel.prototype.context = function(id) {\n  var model = this._child();\n  model.setContext(id);\n  return model;\n};\n\nModel.prototype.setContext = function(id) {\n  this._context = this.getOrCreateContext(id);\n};\n\nModel.prototype.getOrCreateContext = function(id) {\n  var context = this.root._contexts[id] ||\n    (this.root._contexts[id] = new Context(this, id));\n  return context;\n};\n\nModel.prototype.unload = function(id) {\n  var context = (id) ? this.root._contexts[id] : this._context;\n  context && context.unload();\n};\n\nModel.prototype.unloadAll = function() {\n  var contexts = this.root._contexts;\n  for (var key in contexts) {\n    contexts[key].unload();\n  }\n};\n\nfunction Contexts() {}\n\nfunction FetchedQueries() {}\nfunction SubscribedQueries() {}\n\nfunction Context(model, id) {\n  this.model = model;\n  this.id = id;\n  this.fetchedDocs = new CollectionCounter();\n  this.subscribedDocs = new CollectionCounter();\n  this.createdDocs = new CollectionCounter();\n  this.fetchedQueries = new FetchedQueries();\n  this.subscribedQueries = new SubscribedQueries();\n}\n\nContext.prototype.toJSON = function() {\n  var fetchedDocs = this.fetchedDocs.toJSON();\n  var subscribedDocs = this.subscribedDocs.toJSON();\n  var createdDocs = this.createdDocs.toJSON();\n  if (!fetchedDocs && !subscribedDocs && !createdDocs) return;\n  return {\n    fetchedDocs: fetchedDocs,\n    subscribedDocs: subscribedDocs,\n    createdDocs: createdDocs\n  };\n};\n\nContext.prototype.fetchDoc = function(collectionName, id) {\n  this.fetchedDocs.increment(collectionName, id);\n};\nContext.prototype.subscribeDoc = function(collectionName, id) {\n  this.subscribedDocs.increment(collectionName, id);\n};\nContext.prototype.unfetchDoc = function(collectionName, id) {\n  this.fetchedDocs.decrement(collectionName, id);\n};\nContext.prototype.unsubscribeDoc = function(collectionName, id) {\n  this.subscribedDocs.decrement(collectionName, id);\n};\nContext.prototype.createDoc = function(collectionName, id) {\n  this.createdDocs.increment(collectionName, id);\n};\nContext.prototype.fetchQuery = function(query) {\n  mapIncrement(this.fetchedQueries, query.hash);\n};\nContext.prototype.subscribeQuery = function(query) {\n  mapIncrement(this.subscribedQueries, query.hash);\n};\nContext.prototype.unfetchQuery = function(query) {\n  mapDecrement(this.fetchedQueries, query.hash);\n};\nContext.prototype.unsubscribeQuery = function(query) {\n  mapDecrement(this.subscribedQueries, query.hash);\n};\nfunction mapIncrement(map, key) {\n  map[key] = (map[key] || 0) + 1;\n}\nfunction mapDecrement(map, key) {\n  map[key] && map[key]--;\n  if (!map[key]) delete map[key];\n}\n\nContext.prototype.unload = function() {\n  var model = this.model;\n  for (var hash in this.fetchedQueries) {\n    var query = model.root._queries.map[hash];\n    if (!query) continue;\n    var count = this.fetchedQueries[hash];\n    while (count--) query.unfetch();\n  }\n  for (var hash in this.subscribedQueries) {\n    var query = model.root._queries.map[hash];\n    if (!query) continue;\n    var count = this.subscribedQueries[hash];\n    while (count--) query.unsubscribe();\n  }\n  for (var collectionName in this.fetchedDocs.collections) {\n    var collection = this.fetchedDocs.collections[collectionName];\n    for (var id in collection) {\n      var count = collection[id];\n      while (count--) model.unfetchDoc(collectionName, id);\n    }\n  }\n  for (var collectionName in this.subscribedDocs.collections) {\n    var collection = this.subscribedDocs.collections[collectionName];\n    for (var id in collection) {\n      var count = collection[id];\n      while (count--) model.unsubscribeDoc(collectionName, id);\n    }\n  }\n  for (var collectionName in this.createdDocs.collections) {\n    var collection = this.createdDocs.collections[collectionName];\n    for (var id in collection) {\n      model._maybeUnloadDoc(collectionName, id);\n    }\n  }\n  this.createdDocs.reset();\n};\n",
    "var defaultFns = module.exports = new DefaultFns();\n\ndefaultFns.reverse = new FnPair(getReverse, setReverse);\ndefaultFns.asc = asc;\ndefaultFns.desc = desc;\n\nfunction DefaultFns() {}\nfunction FnPair(get, set) {\n  this.get = get;\n  this.set = set;\n}\n\nfunction getReverse(array) {\n  return array && array.slice().reverse();\n}\nfunction setReverse(values) {\n  return {0: getReverse(values)};\n}\n\nfunction asc(a, b) {\n  if (a < b) return -1;\n  if (a > b) return 1;\n  return 0;\n}\nfunction desc(a, b) {\n  if (a > b) return -1;\n  if (a < b) return 1;\n  return 0;\n}\n",
    "var util = require('../util');\nvar Model = require('./Model');\nvar defaultFns = require('./defaultFns');\n\nfunction NamedFns() {}\n\nModel.INITS.push(function(model) {\n  model.root._namedFns = new NamedFns();\n  model.root._fns = new Fns(model);\n  model.on('all', fnListener);\n  function fnListener(segments, eventArgs) {\n    var pass = eventArgs[eventArgs.length - 1];\n    var map = model.root._fns.fromMap;\n    for (var path in map) {\n      var fn = map[path];\n      if (pass.$fn === fn) continue;\n      if (util.mayImpactAny(fn.inputsSegments, segments)) {\n        // Mutation affecting input path\n        fn.onInput(pass);\n      } else if (util.mayImpact(fn.fromSegments, segments)) {\n        // Mutation affecting output path\n        fn.onOutput(pass);\n      }\n    }\n  }\n});\n\nModel.prototype.fn = function(name, fns) {\n  this.root._namedFns[name] = fns;\n};\n\nfunction parseStartArguments(model, args, hasPath) {\n  var last = args.pop();\n  var fns, name;\n  if (typeof last === 'string') {\n    name = last;\n  } else {\n    fns = last;\n  }\n  // For `Model#start`, the first parameter is the output path.\n  var path;\n  if (hasPath) {\n    path = model.path(args.shift());\n  }\n  // The second-to-last original argument could be an options object.\n  // If it's not an array and not path-like, then it's an options object.\n  last = args[args.length - 1];\n  var options;\n  if (!Array.isArray(last) && !model.isPath(last)) {\n    options = args.pop();\n  }\n\n  // `args` is just the input paths at this point.\n  var inputs;\n  if (args.length === 1 && Array.isArray(args[0])) {\n    // Inputs provided as one array:\n    //   model.start(outPath, [inPath1, inPath2], fn);\n    inputs = args[0];\n  } else {\n    // Inputs provided as var-args:\n    //   model.start(outPath, inPath1, inPath2, fn);\n    inputs = args;\n  }\n\n  // Normalize each input into a string path.\n  var i = inputs.length;\n  while (i--) {\n    inputs[i] = model.path(inputs[i]);\n  }\n  return {\n    name: name,\n    path: path,\n    inputPaths: inputs,\n    fns: fns,\n    options: options\n  };\n}\n\nModel.prototype.evaluate = function() {\n  var args = Array.prototype.slice.call(arguments);\n  var parsed = parseStartArguments(this, args, false);\n  return this.root._fns.get(parsed.name, parsed.inputPaths, parsed.fns, parsed.options);\n};\n\nModel.prototype.start = function() {\n  var args = Array.prototype.slice.call(arguments);\n  var parsed = parseStartArguments(this, args, true);\n  return this.root._fns.start(parsed.name, parsed.path, parsed.inputPaths, parsed.fns, parsed.options);\n};\n\nModel.prototype.stop = function(subpath) {\n  var path = this.path(subpath);\n  this._stop(path);\n};\nModel.prototype._stop = function(fromPath) {\n  this.root._fns.stop(fromPath);\n};\n\nModel.prototype.stopAll = function(subpath) {\n  var segments = this._splitPath(subpath);\n  this._stopAll(segments);\n};\nModel.prototype._stopAll = function(segments) {\n  var fns = this.root._fns.fromMap;\n  for (var from in fns) {\n    var fromSegments = fns[from].fromSegments;\n    if (util.contains(segments, fromSegments)) {\n      this._stop(from);\n    }\n  }\n};\n\nfunction FromMap() {}\nfunction Fns(model) {\n  this.model = model;\n  this.nameMap = model.root._namedFns;\n  this.fromMap = new FromMap();\n}\n\nFns.prototype.get = function(name, inputPaths, fns, options) {\n  fns || (fns = this.nameMap[name] || defaultFns[name]);\n  var fn = new Fn(this.model, name, null, inputPaths, fns, options);\n  return fn.get();\n};\n\nFns.prototype.start = function(name, path, inputPaths, fns, options) {\n  fns || (fns = this.nameMap[name] || defaultFns[name]);\n  var fn = new Fn(this.model, name, path, inputPaths, fns, options);\n  this.fromMap[path] = fn;\n  return fn._onInput();\n};\n\nFns.prototype.stop = function(path) {\n  var fn = this.fromMap[path];\n  delete this.fromMap[path];\n  return fn;\n};\n\nFns.prototype.toJSON = function() {\n  var out = [];\n  for (var from in this.fromMap) {\n    var fn = this.fromMap[from];\n    // Don't try to bundle non-named functions that were started via\n    // model.start directly instead of by name\n    if (!fn.name) continue;\n    var args = [fn.from].concat(fn.inputPaths);\n    if (fn.options) args.push(fn.options);\n    args.push(fn.name);\n    out.push(args);\n  }\n  return out;\n};\n\nfunction Fn(model, name, from, inputPaths, fns, options) {\n  this.model = model.pass({$fn: this});\n  this.name = name;\n  this.from = from;\n  this.inputPaths = inputPaths;\n  this.options = options;\n  if (!fns) {\n    throw new TypeError('Model function not found: ' + name);\n  }\n  this.getFn = fns.get || fns;\n  this.setFn = fns.set;\n  this.fromSegments = from && from.split('.');\n  this.inputsSegments = [];\n  for (var i = 0; i < this.inputPaths.length; i++) {\n    var segments = this.inputPaths[i].split('.');\n    this.inputsSegments.push(segments);\n  }\n\n  // Copy can be 'output', 'input', 'both', or 'none'\n  var copy = (options && options.copy) || 'output';\n  this.copyInput = (copy === 'input' || copy === 'both');\n  this.copyOutput = (copy === 'output' || copy === 'both');\n\n  // Mode can be 'diffDeep', 'diff', 'arrayDeep', or 'array'\n  this.mode = (options && options.mode) || 'diffDeep';\n\n  this.async = !!(options && options.async);\n  this.eventPending = false;\n}\n\nFn.prototype.apply = function(fn, inputs) {\n  for (var i = 0, len = this.inputsSegments.length; i < len; i++) {\n    var input = this.model._get(this.inputsSegments[i]);\n    inputs.push(this.copyInput ? util.deepCopy(input) : input);\n  }\n  return fn.apply(this.model, inputs);\n};\n\nFn.prototype.get = function() {\n  return this.apply(this.getFn, []);\n};\n\nFn.prototype.set = function(value, pass) {\n  if (!this.setFn) return;\n  var out = this.apply(this.setFn, [value]);\n  if (!out) return;\n  var inputsSegments = this.inputsSegments;\n  var model = this.model.pass(pass, true);\n  for (var key in out) {\n    var value = (this.copyOutput) ? util.deepCopy(out[key]) : out[key];\n    this._setValue(model, inputsSegments[key], value);\n  }\n};\n\nFn.prototype.onInput = function(pass) {\n  if (this.async) {\n    if (this.eventPending) return;\n    this.eventPending = true;\n    var fn = this;\n    process.nextTick(function() {\n      fn._onInput(pass);\n      fn.eventPending = false;\n    });\n    return;\n  }\n  return this._onInput(pass);\n};\n\nFn.prototype._onInput = function(pass) {\n  var value = (this.copyOutput) ? util.deepCopy(this.get()) : this.get();\n  this._setValue(this.model.pass(pass, true), this.fromSegments, value);\n  return value;\n};\n\nFn.prototype.onOutput = function(pass) {\n  var value = this.model._get(this.fromSegments);\n  return this.set(value, pass);\n};\n\nFn.prototype._setValue = function(model, segments, value) {\n  if (this.mode === 'diffDeep') {\n    model._setDiffDeep(segments, value);\n  } else if (this.mode === 'arrayDeep') {\n    model._setArrayDiffDeep(segments, value);\n  } else if (this.mode === 'array') {\n    model._setArrayDiff(segments, value);\n  } else {\n    model._setDiff(segments, value);\n  }\n};\n",
    "var util = require('../util');\nvar Model = require('./Model');\nvar defaultFns = require('./defaultFns');\n\nModel.INITS.push(function(model) {\n  model.root._filters = new Filters(model);\n  model.on('all', filterListener);\n  function filterListener(segments, eventArgs) {\n    var pass = eventArgs[eventArgs.length - 1];\n    var map = model.root._filters.fromMap;\n    for (var path in map) {\n      var filter = map[path];\n      if (pass.$filter === filter) continue;\n      if (\n        util.mayImpact(filter.segments, segments) ||\n        (filter.inputsSegments && util.mayImpactAny(filter.inputsSegments, segments))\n      ) {\n        filter.update(pass);\n      }\n    }\n  }\n});\n\nfunction parseFilterArguments(model, args) {\n  var fn = args.pop();\n  var options;\n  if (!model.isPath(args[args.length - 1])) {\n    options = args.pop();\n  }\n  var path = model.path(args.shift());\n  var i = args.length;\n  while (i--) {\n    args[i] = model.path(args[i]);\n  }\n  return {\n    path: path,\n    inputPaths: (args.length) ? args : null,\n    options: options,\n    fn: fn\n  };\n}\n\nModel.prototype.filter = function() {\n  var args = Array.prototype.slice.call(arguments);\n  var parsed = parseFilterArguments(this, args);\n  return this.root._filters.add(\n    parsed.path,\n    parsed.fn,\n    null,\n    parsed.inputPaths,\n    parsed.options\n  );\n};\n\nModel.prototype.sort = function() {\n  var args = Array.prototype.slice.call(arguments);\n  var parsed = parseFilterArguments(this, args);\n  return this.root._filters.add(\n    parsed.path,\n    null,\n    parsed.fn || 'asc',\n    parsed.inputPaths,\n    parsed.options\n  );\n};\n\nModel.prototype.removeAllFilters = function(subpath) {\n  var segments = this._splitPath(subpath);\n  this._removeAllFilters(segments);\n};\nModel.prototype._removeAllFilters = function(segments) {\n  var filters = this.root._filters.fromMap;\n  for (var from in filters) {\n    if (util.contains(segments, filters[from].fromSegments)) {\n      filters[from].destroy();\n    }\n  }\n};\n\nfunction FromMap() {}\nfunction Filters(model) {\n  this.model = model;\n  this.fromMap = new FromMap();\n}\n\nFilters.prototype.add = function(path, filterFn, sortFn, inputPaths, options) {\n  return new Filter(this, path, filterFn, sortFn, inputPaths, options);\n};\n\nFilters.prototype.toJSON = function() {\n  var out = [];\n  for (var from in this.fromMap) {\n    var filter = this.fromMap[from];\n    // Don't try to bundle if functions were passed directly instead of by name\n    if (!filter.bundle) continue;\n    var args = [from, filter.path, filter.filterName, filter.sortName, filter.inputPaths];\n    if (filter.options) args.push(filter.options);\n    out.push(args);\n  }\n  return out;\n};\n\nfunction Filter(filters, path, filterFn, sortFn, inputPaths, options) {\n  this.filters = filters;\n  this.model = filters.model.pass({$filter: this});\n  this.path = path;\n  this.segments = path.split('.');\n  this.filterName = null;\n  this.sortName = null;\n  this.bundle = true;\n  this.filterFn = null;\n  this.sortFn = null;\n  this.inputPaths = inputPaths;\n  this.inputsSegments = null;\n  if (inputPaths) {\n    this.inputsSegments = [];\n    for (var i = 0; i < this.inputPaths.length; i++) {\n      var segments = this.inputPaths[i].split('.');\n      this.inputsSegments.push(segments);\n    }\n  }\n  this.options = options;\n  this.skip = options && options.skip;\n  this.limit = options && options.limit;\n  if (filterFn) this.filter(filterFn);\n  if (sortFn) this.sort(sortFn);\n  this.idsSegments = null;\n  this.from = null;\n  this.fromSegments = null;\n}\n\nFilter.prototype.filter = function(fn) {\n  if (typeof fn === 'function') {\n    this.filterFn = fn;\n    this.bundle = false;\n    return this;\n  } else if (typeof fn === 'string') {\n    this.filterName = fn;\n    this.filterFn = this.model.root._namedFns[fn] || defaultFns[fn];\n    if (!this.filterFn) {\n      throw new TypeError('Filter function not found: ' + fn);\n    }\n  }\n  return this;\n};\n\nFilter.prototype.sort = function(fn) {\n  if (!fn) fn = 'asc';\n  if (typeof fn === 'function') {\n    this.sortFn = fn;\n    this.bundle = false;\n    return this;\n  } else if (typeof fn === 'string') {\n    this.sortName = fn;\n    this.sortFn = this.model.root._namedFns[fn] || defaultFns[fn];\n    if (!this.sortFn) {\n      throw new TypeError('Sort function not found: ' + fn);\n    }\n  }\n  return this;\n};\n\nFilter.prototype._slice = function(results) {\n  if (this.skip == null && this.limit == null) return results;\n  var begin = this.skip || 0;\n  // A limit of zero is equivalent to setting no limit\n  var end;\n  if (this.limit) end = begin + this.limit;\n  return results.slice(begin, end);\n};\n\nFilter.prototype.getInputs = function() {\n  if (!this.inputsSegments) return;\n  var inputs = [];\n  for (var i = 0, len = this.inputsSegments.length; i < len; i++) {\n    var input = this.model._get(this.inputsSegments[i]);\n    inputs.push(input);\n  }\n  return inputs;\n};\n\nFilter.prototype.callFilter = function(items, key, inputs) {\n  var item = items[key];\n  return (inputs) ?\n    this.filterFn.apply(this.model, [item, key, items].concat(inputs)) :\n    this.filterFn.call(this.model, item, key, items);\n};\n\nFilter.prototype.ids = function() {\n  var items = this.model._get(this.segments);\n  var ids = [];\n  if (!items) return ids;\n  if (Array.isArray(items)) {\n    throw new Error('model.filter is not currently supported on arrays');\n  }\n  if (this.filterFn) {\n    var inputs = this.getInputs();\n    for (var key in items) {\n      if (items.hasOwnProperty(key) && this.callFilter(items, key, inputs)) {\n        ids.push(key);\n      }\n    }\n  } else {\n    ids = Object.keys(items);\n  }\n  var sortFn = this.sortFn;\n  if (sortFn) {\n    ids.sort(function(a, b) {\n      return sortFn(items[a], items[b]);\n    });\n  }\n  return this._slice(ids);\n};\n\nFilter.prototype.get = function() {\n  var items = this.model._get(this.segments);\n  var results = [];\n  if (Array.isArray(items)) {\n    throw new Error('model.filter is not currently supported on arrays');\n  }\n  if (this.filterFn) {\n    var inputs = this.getInputs();\n    for (var key in items) {\n      if (items.hasOwnProperty(key) && this.callFilter(items, key, inputs)) {\n        results.push(items[key]);\n      }\n    }\n  } else {\n    for (var key in items) {\n      if (items.hasOwnProperty(key)) {\n        results.push(items[key]);\n      }\n    }\n  }\n  if (this.sortFn) results.sort(this.sortFn);\n  return this._slice(results);\n};\n\nFilter.prototype.update = function(pass) {\n  var ids = this.ids();\n  this.model.pass(pass, true)._setArrayDiff(this.idsSegments, ids);\n};\n\nFilter.prototype.ref = function(from) {\n  from = this.model.path(from);\n  this.from = from;\n  this.fromSegments = from.split('.');\n  this.filters.fromMap[from] = this;\n  this.idsSegments = ['$filters', from.replace(/\\./g, '|')];\n  this.update();\n  return this.model.refList(from, this.path, this.idsSegments.join('.'));\n};\n\nFilter.prototype.destroy = function() {\n  delete this.filters.fromMap[this.from];\n  this.model._removeRef(this.idsSegments);\n  this.model._del(this.idsSegments);\n};\n",
    "var util = require('../util');\nvar Model = require('./Model');\n\nModel.INITS.push(function(model) {\n  var root = model.root;\n  root._refLists = new RefLists();\n  for (var type in Model.MUTATOR_EVENTS) {\n    addListener(root, type);\n  }\n});\n\nfunction addListener(model, type) {\n  model.on(type + 'Immediate', refListListener);\n  function refListListener(segments, eventArgs) {\n    var pass = eventArgs[eventArgs.length - 1];\n    // Check for updates on or underneath paths\n    var fromMap = model._refLists.fromMap;\n    for (var from in fromMap) {\n      var refList = fromMap[from];\n      if (pass.$refList === refList) continue;\n      refList.onMutation(type, segments, eventArgs);\n    }\n  }\n}\n\n/**\n * @param {String} type\n * @param {Array} segments\n * @param {Array} eventArgs\n * @param {RefList} refList\n */\nfunction patchFromEvent(type, segments, eventArgs, refList) {\n  var fromLength = refList.fromSegments.length;\n  var segmentsLength = segments.length;\n  var pass = eventArgs[eventArgs.length - 1];\n  var model = refList.model.pass(pass, true);\n\n  // Mutation on the `from` output itself\n  if (segmentsLength === fromLength) {\n    if (type === 'insert') {\n      var index = eventArgs[0];\n      var values = eventArgs[1];\n      var ids = setNewToValues(model, refList, values);\n      model._insert(refList.idsSegments, index, ids);\n      return;\n    }\n\n    if (type === 'remove') {\n      var index = eventArgs[0];\n      var howMany = eventArgs[1].length;\n      var ids = model._remove(refList.idsSegments, index, howMany);\n      // Delete the appropriate items underneath `to` if the `deleteRemoved`\n      // option was set true\n      if (refList.deleteRemoved) {\n        for (var i = 0; i < ids.length; i++) {\n          var item = refList.itemById(ids[i]);\n          model._del(refList.toSegmentsByItem(item));\n        }\n      }\n      return;\n    }\n\n    if (type === 'move') {\n      var from = eventArgs[0];\n      var to = eventArgs[1];\n      var howMany = eventArgs[2];\n      model._move(refList.idsSegments, from, to, howMany);\n      return;\n    }\n\n    // Change of the entire output\n    var values = (type === 'change') ?\n      eventArgs[0] : model._get(refList.fromSegments);\n    // Set ids to empty list if output is set to null\n    if (!values) {\n      model._set(refList.idsSegments, []);\n      return;\n    }\n    // If the entire output is set, create a list of ids based on the output,\n    // and update the corresponding items\n    var ids = setNewToValues(model, refList, values);\n    model._set(refList.idsSegments, ids);\n    return;\n  }\n\n  // If mutation is on a parent of `from`, we might need to re-create the\n  // entire refList output\n  if (segmentsLength < fromLength) {\n    model._setArrayDiff(refList.fromSegments, refList.get());\n    return;\n  }\n\n  var index = segments[fromLength];\n  var value = model._get(refList.fromSegments.concat(index));\n  var toSegments = refList.toSegmentsByItem(value);\n\n  // Mutation underneath a child of the `from` object.\n  if (segmentsLength > fromLength + 1) {\n    throw new Error('Mutation on descendant of refList `from`' +\n      ' should have been dereferenced: ' + segments.join('.'));\n  }\n\n  // Otherwise, mutation of a child of the `from` object\n\n  // If changing the item itself, it will also have to be re-set on the\n  // original object\n  if (type === 'change') {\n    model._set(toSegments, value);\n    updateIdForValue(model, refList, index, value);\n    return;\n  }\n  if (type === 'insert' || type === 'remove' || type === 'move') {\n    throw new Error('Array mutation on child of refList `from`' +\n      'should have been dereferenced: ' + segments.join('.'));\n  }\n}\n\n/**\n * @private\n * @param {Model} model\n * @param {RefList} refList\n * @param {Array} values\n */\nfunction setNewToValues(model, refList, values) {\n  var ids = [];\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    var id = refList.idByItem(value);\n    if (id === undefined && typeof value === 'object') {\n      id = value.id = model.id();\n    }\n    var toSegments = refList.toSegmentsByItem(value);\n    if (id === undefined || toSegments === undefined) {\n      throw new Error('Unable to add item to refList: ' + value);\n    }\n    if (model._get(toSegments) !== value) {\n      model._set(toSegments, value);\n    }\n    ids.push(id);\n  }\n  return ids;\n}\nfunction updateIdForValue(model, refList, index, value) {\n  var id = refList.idByItem(value);\n  var outSegments = refList.idsSegments.concat(index);\n  model._set(outSegments, id);\n}\n\nfunction patchToEvent(type, segments, eventArgs, refList) {\n  var toLength = refList.toSegments.length;\n  var segmentsLength = segments.length;\n  var pass = eventArgs[eventArgs.length - 1];\n  var model = refList.model.pass(pass, true);\n\n  // Mutation on the `to` object itself\n  if (segmentsLength === toLength) {\n    if (type === 'insert') {\n      var values = eventArgs[1];\n      for (var i = 0; i < values.length; i++) {\n        var value = values[i];\n        var indices = refList.indicesByItem(value);\n        if (!indices) continue;\n        for (var j = 0; j < indices.length; j++) {\n          var outSegments = refList.fromSegments.concat(indices[j]);\n          model._set(outSegments, value);\n        }\n      }\n      return;\n    }\n\n    if (type === 'remove') {\n      var removeIndex = eventArgs[0];\n      var values = eventArgs[1];\n      var howMany = values.length;\n      for (var i = removeIndex, len = removeIndex + howMany; i < len; i++) {\n        var indices = refList.indicesByItem(values[i]);\n        if (!indices) continue;\n        for (var j = 0, indicesLen = indices.length; j < indicesLen; j++) {\n          var outSegments = refList.fromSegments.concat(indices[j]);\n          model._set(outSegments, undefined);\n        }\n      }\n      return;\n    }\n\n    if (type === 'move') {\n      // Moving items in the `to` object should have no effect on the output\n      return;\n    }\n  }\n\n  // Mutation on or above the `to` object\n  if (segmentsLength <= toLength) {\n    // If the entire `to` object is updated, we need to re-create the\n    // entire refList output and apply what is different\n    model._setArrayDiff(refList.fromSegments, refList.get());\n    return;\n  }\n\n  // Mutation underneath a child of the `to` object. The item will already\n  // be up to date, since it is under an object reference. Just re-emit\n  if (segmentsLength > toLength + 1) {\n    var value = model._get(segments.slice(0, toLength + 1));\n    var indices = refList.indicesByItem(value);\n    if (!indices) return;\n    var remaining = segments.slice(toLength + 1);\n    for (var i = 0; i < indices.length; i++) {\n      var index = indices[i];\n      var dereferenced = refList.fromSegments.concat(index, remaining);\n      dereferenced = model._dereference(dereferenced, null, refList);\n      eventArgs = eventArgs.slice();\n      eventArgs[eventArgs.length - 1] = model._pass;\n      model.emit(type, dereferenced, eventArgs);\n    }\n    return;\n  }\n\n  // Otherwise, mutation of a child of the `to` object\n\n  // If changing the item itself, it will also have to be re-set on the\n  // array created by the refList\n  if (type === 'change' || type === 'load' || type === 'unload') {\n    var value, previous;\n    if (type === 'change') {\n      value = eventArgs[0];\n      previous = eventArgs[1];\n    } else if (type === 'load') {\n      value = eventArgs[0];\n      previous = undefined;\n    } else if (type === 'unload') {\n      value = undefined;\n      previous = eventArgs[0];\n    }\n    var newIndices = refList.indicesByItem(value);\n    var oldIndices = refList.indicesByItem(previous);\n    if (!newIndices && !oldIndices) return;\n    if (oldIndices && !equivalentArrays(oldIndices, newIndices)) {\n      // The changed item used to refer to some indices, but no longer does\n      for (var i = 0; i < oldIndices.length; i++) {\n        var outSegments = refList.fromSegments.concat(oldIndices[i]);\n        model._set(outSegments, undefined);\n      }\n    }\n    if (newIndices) {\n      for (var i = 0; i < newIndices.length; i++) {\n        var outSegments = refList.fromSegments.concat(newIndices[i]);\n        model._set(outSegments, value);\n      }\n    }\n    return;\n  }\n\n  var value = model._get(segments.slice(0, toLength + 1));\n  var indices = refList.indicesByItem(value);\n  if (!indices) return;\n\n  if (type === 'insert' || type === 'remove' || type === 'move') {\n    // Array mutations will have already been updated via an object\n    // reference, so only re-emit\n    for (var i = 0; i < indices.length; i++) {\n      var dereferenced = refList.fromSegments.concat(indices[i]);\n      dereferenced = model._dereference(dereferenced, null, refList);\n      eventArgs = eventArgs.slice();\n      eventArgs[eventArgs.length - 1] = model._pass;\n      model.emit(type, dereferenced, eventArgs);\n    }\n  }\n}\nfunction equivalentArrays(a, b) {\n  if (!a || !b) return false;\n  if (a.length !== b.length) return false;\n  for (var i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction patchIdsEvent(type, segments, eventArgs, refList) {\n  var idsLength = refList.idsSegments.length;\n  var segmentsLength = segments.length;\n  var pass = eventArgs[eventArgs.length - 1];\n  var model = refList.model.pass(pass, true);\n\n  // An array mutation of the ids should be mirrored with a like change in\n  // the output array\n  if (segmentsLength === idsLength) {\n    if (type === 'insert') {\n      var index = eventArgs[0];\n      var inserted = eventArgs[1];\n      var values = [];\n      for (var i = 0; i < inserted.length; i++) {\n        var value = refList.itemById(inserted[i]);\n        values.push(value);\n      }\n      model._insert(refList.fromSegments, index, values);\n      return;\n    }\n\n    if (type === 'remove') {\n      var index = eventArgs[0];\n      var howMany = eventArgs[1].length;\n      model._remove(refList.fromSegments, index, howMany);\n      return;\n    }\n\n    if (type === 'move') {\n      var from = eventArgs[0];\n      var to = eventArgs[1];\n      var howMany = eventArgs[2];\n      model._move(refList.fromSegments, from, to, howMany);\n      return;\n    }\n  }\n\n  // Mutation on the `ids` list itself\n  if (segmentsLength <= idsLength) {\n    // If the entire `ids` array is updated, we need to re-create the\n    // entire refList output and apply what is different\n    model._setArrayDiff(refList.fromSegments, refList.get());\n    return;\n  }\n\n  // Otherwise, direct mutation of a child in the `ids` object or mutation\n  // underneath an item in the `ids` list. Update the item for the appropriate\n  // id if it has changed\n  var index = segments[idsLength];\n  var id = refList.idByIndex(index);\n  var item = refList.itemById(id);\n  var itemSegments = refList.fromSegments.concat(index);\n  if (model._get(itemSegments) !== item) {\n    model._set(itemSegments, item);\n  }\n}\n\nModel.prototype.refList = function() {\n  var from, to, ids, options;\n  if (arguments.length === 2) {\n    to = arguments[0];\n    ids = arguments[1];\n  } else if (arguments.length === 3) {\n    if (this.isPath(arguments[2])) {\n      from = arguments[0];\n      to = arguments[1];\n      ids = arguments[2];\n    } else {\n      to = arguments[0];\n      ids = arguments[1];\n      options = arguments[2];\n    }\n  } else {\n    from = arguments[0];\n    to = arguments[1];\n    ids = arguments[2];\n    options = arguments[3];\n  }\n  var fromPath = this.path(from);\n  var toPath;\n  if (Array.isArray(to)) {\n    toPath = [];\n    for (var i = 0; i < to.length; i++) {\n      toPath.push(this.path(to[i]));\n    }\n  } else {\n    toPath = this.path(to);\n  }\n  var idsPath = this.path(ids);\n  var refList = new RefList(this.root, fromPath, toPath, idsPath, options);\n  this.root._refLists.remove(fromPath);\n  refList.model._setArrayDiff(refList.fromSegments, refList.get());\n  this.root._refLists.add(refList);\n  return this.scope(fromPath);\n};\n\nfunction RefList(model, from, to, ids, options) {\n  this.model = model && model.pass({$refList: this});\n  this.from = from;\n  this.to = to;\n  this.ids = ids;\n  this.fromSegments = from && from.split('.');\n  this.toSegments = to && to.split('.');\n  this.idsSegments = ids && ids.split('.');\n  this.options = options;\n  this.deleteRemoved = options && options.deleteRemoved;\n}\n\n// The default implementation assumes that the ids array is a flat list of\n// keys on the to object. Ideally, this mapping could be customized via\n// inheriting from RefList and overriding these methods without having to\n// modify the above event handling code.\n//\n// In the default refList implementation, `key` and `id` are equal.\n//\n// Terms in the below methods:\n//   `item`  - Object on the `to` path, which gets mirrored on the `from` path\n//   `key`   - The property under `to` at which an item is located\n//   `id`    - String or object in the array at the `ids` path\n//   `index` - The index of an id, which corresponds to an index on `from`\nRefList.prototype.get = function() {\n  var ids = this.model._get(this.idsSegments);\n  if (!ids) return [];\n  var items = this.model._get(this.toSegments);\n  var out = [];\n  for (var i = 0; i < ids.length; i++) {\n    var key = ids[i];\n    out.push(items && items[key]);\n  }\n  return out;\n};\nRefList.prototype.dereference = function(segments, i) {\n  var remaining = segments.slice(i + 1);\n  var key = this.idByIndex(remaining[0]);\n  if (key == null) return [];\n  remaining[0] = key;\n  return this.toSegments.concat(remaining);\n};\nRefList.prototype.toSegmentsByItem = function(item) {\n  var key = this.idByItem(item);\n  if (key === undefined) return;\n  return this.toSegments.concat(key);\n};\nRefList.prototype.idByItem = function(item) {\n  if (item && item.id) return item.id;\n  var items = this.model._get(this.toSegments);\n  for (var key in items) {\n    if (item === items[key]) return key;\n  }\n};\nRefList.prototype.indicesByItem = function(item) {\n  var id = this.idByItem(item);\n  var ids = this.model._get(this.idsSegments);\n  if (!ids) return;\n  var indices;\n  var index = -1;\n  for (;;) {\n    index = ids.indexOf(id, index + 1);\n    if (index === -1) break;\n    if (indices) {\n      indices.push(index);\n    } else {\n      indices = [index];\n    }\n  }\n  return indices;\n};\nRefList.prototype.itemById = function(id) {\n  return this.model._get(this.toSegments.concat(id));\n};\nRefList.prototype.idByIndex = function(index) {\n  return this.model._get(this.idsSegments.concat(index));\n};\nRefList.prototype.onMutation = function(type, segments, eventArgs) {\n  if (util.mayImpact(this.toSegments, segments)) {\n    patchToEvent(type, segments, eventArgs, this);\n  } else if (util.mayImpact(this.idsSegments, segments)) {\n    patchIdsEvent(type, segments, eventArgs, this);\n  } else if (util.mayImpact(this.fromSegments, segments)) {\n    patchFromEvent(type, segments, eventArgs, this);\n  }\n};\n\nfunction FromMap() {}\n\nfunction RefLists() {\n  this.fromMap = new FromMap();\n}\n\nRefLists.prototype.add = function(refList) {\n  this.fromMap[refList.from] = refList;\n};\n\nRefLists.prototype.remove = function(from) {\n  var refList = this.fromMap[from];\n  delete this.fromMap[from];\n  return refList;\n};\n\nRefLists.prototype.toJSON = function() {\n  var out = [];\n  for (var from in this.fromMap) {\n    var refList = this.fromMap[from];\n    out.push([refList.from, refList.to, refList.ids, refList.options]);\n  }\n  return out;\n};\n",
    "var util = require('../util');\nvar Model = require('./Model');\n\nModel.INITS.push(function(model) {\n  var root = model.root;\n  root._refs = new Refs();\n  addIndexListeners(root);\n  addListener(root, 'change', refChange);\n  addListener(root, 'load', refLoad);\n  addListener(root, 'unload', refUnload);\n  addListener(root, 'insert', refInsert);\n  addListener(root, 'remove', refRemove);\n  addListener(root, 'move', refMove);\n});\n\nfunction addIndexListeners(model) {\n  model.on('insertImmediate', function refInsertIndex(segments, eventArgs) {\n    var index = eventArgs[0];\n    var howMany = eventArgs[1].length;\n    function patchInsert(refIndex) {\n      return (index <= refIndex) ? refIndex + howMany : refIndex;\n    }\n    onIndexChange(segments, patchInsert);\n  });\n  model.on('removeImmediate', function refRemoveIndex(segments, eventArgs) {\n    var index = eventArgs[0];\n    var howMany = eventArgs[1].length;\n    function patchRemove(refIndex) {\n      return (index <= refIndex) ? refIndex - howMany : refIndex;\n    }\n    onIndexChange(segments, patchRemove);\n  });\n  model.on('moveImmediate', function refMoveIndex(segments, eventArgs) {\n    var from = eventArgs[0];\n    var to = eventArgs[1];\n    var howMany = eventArgs[2];\n    function patchMove(refIndex) {\n      // If the index was moved itself\n      if (from <= refIndex && refIndex < from + howMany) {\n        return refIndex + to - from;\n      }\n      // Remove part of a move\n      if (from <= refIndex) refIndex -= howMany;\n      // Insert part of a move\n      if (to <= refIndex) refIndex += howMany;\n      return refIndex;\n    }\n    onIndexChange(segments, patchMove);\n  });\n  function onIndexChange(segments, patch) {\n    var fromMap = model._refs.fromMap;\n    for (var from in fromMap) {\n      var ref = fromMap[from];\n      if (!(ref.updateIndices &&\n        util.contains(segments, ref.toSegments) &&\n        ref.toSegments.length > segments.length)) continue;\n      var index = +ref.toSegments[segments.length];\n      var patched = patch(index);\n      if (index === patched) continue;\n      model._refs.remove(from);\n      ref.toSegments[segments.length] = '' + patched;\n      ref.to = ref.toSegments.join('.');\n      model._refs.add(ref);\n    }\n  }\n}\n\nfunction refChange(model, dereferenced, eventArgs, segments) {\n  var value = eventArgs[0];\n  // Detect if we are deleting vs. setting to undefined\n  if (value === undefined) {\n    var parentSegments = segments.slice();\n    var last = parentSegments.pop();\n    var parent = model._get(parentSegments);\n    if (!parent || !(last in parent)) {\n      model._del(dereferenced);\n      return;\n    }\n  }\n  model._set(dereferenced, value);\n}\nfunction refLoad(model, dereferenced, eventArgs) {\n  var value = eventArgs[0];\n  model._set(dereferenced, value);\n}\nfunction refUnload(model, dereferenced) {\n  model._del(dereferenced);\n}\nfunction refInsert(model, dereferenced, eventArgs) {\n  var index = eventArgs[0];\n  var values = eventArgs[1];\n  model._insert(dereferenced, index, values);\n}\nfunction refRemove(model, dereferenced, eventArgs) {\n  var index = eventArgs[0];\n  var howMany = eventArgs[1].length;\n  model._remove(dereferenced, index, howMany);\n}\nfunction refMove(model, dereferenced, eventArgs) {\n  var from = eventArgs[0];\n  var to = eventArgs[1];\n  var howMany = eventArgs[2];\n  model._move(dereferenced, from, to, howMany);\n}\n\nfunction addListener(model, type, fn) {\n  model.on(type + 'Immediate', refListener);\n  function refListener(segments, eventArgs) {\n    var pass = eventArgs[eventArgs.length - 1];\n    // Find cases where an event is emitted on a path where a reference\n    // is pointing. All original mutations happen on the fully dereferenced\n    // location, so this detection only needs to happen in one direction\n    var toMap = model._refs.toMap;\n    var subpath;\n    for (var i = 0, len = segments.length; i < len; i++) {\n      subpath = (subpath) ? subpath + '.' + segments[i] : segments[i];\n      // If a ref is found pointing to a matching subpath, re-emit on the\n      // place where the reference is coming from as if the mutation also\n      // occured at that path\n      var refs = toMap[subpath];\n      if (!refs) continue;\n\n      // Shallow clone refs in case a ref is removed while going through\n      // the loop\n      refs = refs.slice();\n      var remaining = segments.slice(i + 1);\n      for (var refIndex = 0, numRefs = refs.length; refIndex < numRefs; refIndex++) {\n        var ref = refs[refIndex];\n        var dereferenced = ref.fromSegments.concat(remaining);\n        // The value may already be up to date via object reference. If so,\n        // simply re-emit the event. Otherwise, perform the same mutation on\n        // the ref's path\n        if (model._get(dereferenced) === model._get(segments)) {\n          model.emit(type, dereferenced, eventArgs);\n        } else {\n          var setterModel = ref.model.pass(pass, true);\n          setterModel._dereference = noopDereference;\n          fn(setterModel, dereferenced, eventArgs, segments);\n        }\n      }\n    }\n    // If a ref points to a child of a matching subpath, get the value in\n    // case it has changed and set if different\n    var parentToMap = model._refs.parentToMap;\n    var refs = parentToMap[subpath];\n    if (!refs) return;\n    for (var refIndex = 0, numRefs = refs.length; refIndex < numRefs; refIndex++) {\n      var ref = refs[refIndex];\n      var value = model._get(ref.toSegments);\n      var previous = model._get(ref.fromSegments);\n      if (previous !== value) {\n        var setterModel = ref.model.pass(pass, true);\n        setterModel._dereference = noopDereference;\n        setterModel._set(ref.fromSegments, value);\n      }\n    }\n  }\n}\n\nModel.prototype._canRefTo = function(value) {\n  return this.isPath(value) || (value && typeof value.ref === 'function');\n};\n\nModel.prototype.ref = function() {\n  var from, to, options;\n  if (arguments.length === 1) {\n    to = arguments[0];\n  } else if (arguments.length === 2) {\n    if (this._canRefTo(arguments[1])) {\n      from = arguments[0];\n      to = arguments[1];\n    } else {\n      to = arguments[0];\n      options = arguments[1];\n    }\n  } else {\n    from = arguments[0];\n    to = arguments[1];\n    options = arguments[2];\n  }\n  var fromPath = this.path(from);\n  var toPath = this.path(to);\n  // Make ref to reffable object, such as query or filter\n  if (!toPath) return to.ref(fromPath);\n  var ref = new Ref(this.root, fromPath, toPath, options);\n  if (ref.fromSegments.length < 2) {\n    throw new Error('ref must be performed under a collection ' +\n      'and document id. Invalid path: ' + fromPath);\n  }\n  this.root._refs.remove(fromPath);\n  this.root._refLists.remove(fromPath);\n  var value = this.get(to);\n  ref.model._set(ref.fromSegments, value);\n  this.root._refs.add(ref);\n  return this.scope(fromPath);\n};\n\nModel.prototype.removeRef = function(subpath) {\n  var segments = this._splitPath(subpath);\n  var fromPath = segments.join('.');\n  this._removeRef(segments, fromPath);\n};\nModel.prototype._removeRef = function(segments, fromPath) {\n  this.root._refs.remove(fromPath);\n  this.root._refLists.remove(fromPath);\n  this._del(segments);\n};\n\nModel.prototype.removeAllRefs = function(subpath) {\n  var segments = this._splitPath(subpath);\n  this._removeAllRefs(segments);\n};\nModel.prototype._removeAllRefs = function(segments) {\n  this._removeMapRefs(segments, this.root._refs.fromMap);\n  this._removeMapRefs(segments, this.root._refLists.fromMap);\n};\nModel.prototype._removeMapRefs = function(segments, map) {\n  for (var from in map) {\n    var fromSegments = map[from].fromSegments;\n    if (util.contains(segments, fromSegments)) {\n      this._removeRef(fromSegments, from);\n    }\n  }\n};\n\nModel.prototype.dereference = function(subpath) {\n  var segments = this._splitPath(subpath);\n  return this._dereference(segments).join('.');\n};\n\nModel.prototype._dereference = function(segments, forArrayMutator, ignore) {\n  if (segments.length === 0) return segments;\n  var refs = this.root._refs.fromMap;\n  var refLists = this.root._refLists.fromMap;\n  var doAgain;\n  do {\n    var subpath = '';\n    doAgain = false;\n    for (var i = 0, len = segments.length; i < len; i++) {\n      subpath = (subpath) ? subpath + '.' + segments[i] : segments[i];\n\n      var ref = refs[subpath];\n      if (ref) {\n        var remaining = segments.slice(i + 1);\n        segments = ref.toSegments.concat(remaining);\n        doAgain = true;\n        break;\n      }\n\n      var refList = refLists[subpath];\n      if (refList && refList !== ignore) {\n        var belowDescendant = i + 2 < len;\n        var belowChild = i + 1 < len;\n        if (!(belowDescendant || forArrayMutator && belowChild)) continue;\n        segments = refList.dereference(segments, i);\n        doAgain = true;\n        break;\n      }\n    }\n  } while (doAgain);\n  // If a dereference fails, return a path that will result in a null value\n  // instead of a path to everything in the model\n  if (segments.length === 0) return ['$null'];\n  return segments;\n};\n\nfunction noopDereference(segments) {\n  return segments;\n}\n\nfunction Ref(model, from, to, options) {\n  this.model = model && model.pass({$ref: this});\n  this.from = from;\n  this.to = to;\n  this.fromSegments = from.split('.');\n  this.toSegments = to.split('.');\n  this.parentTos = [];\n  for (var i = 1, len = this.toSegments.length; i < len; i++) {\n    var parentTo = this.toSegments.slice(0, i).join('.');\n    this.parentTos.push(parentTo);\n  }\n  this.updateIndices = options && options.updateIndices;\n}\nfunction FromMap() {}\nfunction ToMap() {}\n\nfunction Refs() {\n  this.fromMap = new FromMap();\n  this.toMap = new ToMap();\n  this.parentToMap = new ToMap();\n}\n\nRefs.prototype.add = function(ref) {\n  this.fromMap[ref.from] = ref;\n  listMapAdd(this.toMap, ref.to, ref);\n  for (var i = 0, len = ref.parentTos.length; i < len; i++) {\n    listMapAdd(this.parentToMap, ref.parentTos[i], ref);\n  }\n};\n\nRefs.prototype.remove = function(from) {\n  var ref = this.fromMap[from];\n  if (!ref) return;\n  delete this.fromMap[from];\n  listMapRemove(this.toMap, ref.to, ref);\n  for (var i = 0, len = ref.parentTos.length; i < len; i++) {\n    listMapRemove(this.parentToMap, ref.parentTos[i], ref);\n  }\n  return ref;\n};\n\nRefs.prototype.toJSON = function() {\n  var out = [];\n  for (var from in this.fromMap) {\n    var ref = this.fromMap[from];\n    out.push([ref.from, ref.to]);\n  }\n  return out;\n};\n\nfunction listMapAdd(map, name, item) {\n  map[name] || (map[name] = []);\n  map[name].push(item);\n}\n\nfunction listMapRemove(map, name, item) {\n  var items = map[name];\n  if (!items) return;\n  var index = items.indexOf(item);\n  if (index === -1) return;\n  items.splice(index, 1);\n  if (!items.length) delete map[name];\n}\n",
    "module.exports = require('./Model');\nvar util = require('../util');\n\n// Extend model on both server and client //\nrequire('./unbundle');\nrequire('./events');\nrequire('./paths');\nrequire('./collections');\nrequire('./mutators');\nrequire('./setDiff');\n\nrequire('./connection');\nrequire('./subscriptions');\nrequire('./Query');\nrequire('./contexts');\n\nrequire('./fn');\nrequire('./filter');\nrequire('./refList');\nrequire('./ref');\n\n// Extend model for server //\nutil.serverRequire(module, './bundle');\nutil.serverRequire(module, './connection.server');\n",
    "var EventEmitter = require('events').EventEmitter;\nvar Model = require('./Model');\nvar util = require('./util');\n\nmodule.exports = Racer;\n\nfunction Racer() {\n  EventEmitter.call(this);\n}\n\nutil.mergeInto(Racer.prototype, EventEmitter.prototype);\n\n// Make classes accessible for use by plugins and tests\nRacer.prototype.Model = Model;\nRacer.prototype.util = util;\n\n// Support plugins on racer instances\nRacer.prototype.use = util.use;\nRacer.prototype.serverUse = util.serverUse;\n\nRacer.prototype.createModel = function(data) {\n  var model = new Model();\n  if (data) {\n    model.createConnection(data);\n    model.unbundle(data);\n  }\n  return model;\n};\n\nutil.serverRequire(module, './Racer.server');\n",
    "var Racer = require('./Racer');\nmodule.exports = new Racer();\n",
    "(function(){\nvar f, aa = aa || {}, l = this;\nfunction ba(a) {\n  a = a.split(\".\");\n  for (var b = l, c;c = a.shift();) {\n    if (null != b[c]) {\n      b = b[c];\n    } else {\n      return null;\n    }\n  }\n  return b;\n}\nfunction ca() {\n}\nfunction da(a) {\n  var b = typeof a;\n  if (\"object\" == b) {\n    if (a) {\n      if (a instanceof Array) {\n        return \"array\";\n      }\n      if (a instanceof Object) {\n        return b;\n      }\n      var c = Object.prototype.toString.call(a);\n      if (\"[object Window]\" == c) {\n        return \"object\";\n      }\n      if (\"[object Array]\" == c || \"number\" == typeof a.length && \"undefined\" != typeof a.splice && \"undefined\" != typeof a.propertyIsEnumerable && !a.propertyIsEnumerable(\"splice\")) {\n        return \"array\";\n      }\n      if (\"[object Function]\" == c || \"undefined\" != typeof a.call && \"undefined\" != typeof a.propertyIsEnumerable && !a.propertyIsEnumerable(\"call\")) {\n        return \"function\";\n      }\n    } else {\n      return \"null\";\n    }\n  } else {\n    if (\"function\" == b && \"undefined\" == typeof a.call) {\n      return \"object\";\n    }\n  }\n  return b;\n}\nfunction m(a) {\n  return \"array\" == da(a);\n}\nfunction ea(a) {\n  var b = da(a);\n  return \"array\" == b || \"object\" == b && \"number\" == typeof a.length;\n}\nfunction n(a) {\n  return \"string\" == typeof a;\n}\nfunction fa(a) {\n  return \"function\" == da(a);\n}\nvar ga = \"closure_uid_\" + (1E9 * Math.random() >>> 0), ha = 0;\nfunction ia(a, b, c) {\n  return a.call.apply(a.bind, arguments);\n}\nfunction ja(a, b, c) {\n  if (!a) {\n    throw Error();\n  }\n  if (2 < arguments.length) {\n    var d = Array.prototype.slice.call(arguments, 2);\n    return function() {\n      var c = Array.prototype.slice.call(arguments);\n      Array.prototype.unshift.apply(c, d);\n      return a.apply(b, c);\n    };\n  }\n  return function() {\n    return a.apply(b, arguments);\n  };\n}\nfunction p(a, b, c) {\n  p = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? ia : ja;\n  return p.apply(null, arguments);\n}\nvar q = Date.now || function() {\n  return+new Date;\n};\nfunction s(a, b) {\n  function c() {\n  }\n  c.prototype = b.prototype;\n  a.pa = b.prototype;\n  a.prototype = new c;\n  a.Hc = function(a, c, g) {\n    var h = Array.prototype.slice.call(arguments, 2);\n    return b.prototype[c].apply(a, h);\n  };\n}\n;function ka(a, b) {\n  for (var c = a.split(\"%s\"), d = \"\", e = Array.prototype.slice.call(arguments, 1);e.length && 1 < c.length;) {\n    d += c.shift() + e.shift();\n  }\n  return d + c.join(\"%s\");\n}\nfunction la(a) {\n  if (!ma.test(a)) {\n    return a;\n  }\n  -1 != a.indexOf(\"&\") && (a = a.replace(na, \"&amp;\"));\n  -1 != a.indexOf(\"<\") && (a = a.replace(oa, \"&lt;\"));\n  -1 != a.indexOf(\">\") && (a = a.replace(pa, \"&gt;\"));\n  -1 != a.indexOf('\"') && (a = a.replace(qa, \"&quot;\"));\n  -1 != a.indexOf(\"'\") && (a = a.replace(ra, \"&#39;\"));\n  return a;\n}\nvar na = /&/g, oa = /</g, pa = />/g, qa = /\"/g, ra = /'/g, ma = /[&<>\"']/;\nfunction sa() {\n  return Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ q()).toString(36);\n}\nfunction ta(a, b) {\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n;var x, ua, va, wa;\nfunction xa() {\n  return l.navigator ? l.navigator.userAgent : null;\n}\nwa = va = ua = x = !1;\nvar ya;\nif (ya = xa()) {\n  var za = l.navigator;\n  x = 0 == ya.lastIndexOf(\"Opera\", 0);\n  ua = !x && (-1 != ya.indexOf(\"MSIE\") || -1 != ya.indexOf(\"Trident\"));\n  va = !x && -1 != ya.indexOf(\"WebKit\");\n  wa = !x && !va && !ua && \"Gecko\" == za.product;\n}\nvar Aa = x, y = ua, Ba = wa, z = va;\nfunction Ca() {\n  var a = l.document;\n  return a ? a.documentMode : void 0;\n}\nvar Da;\na: {\n  var Ea = \"\", Fa;\n  if (Aa && l.opera) {\n    var Ga = l.opera.version, Ea = \"function\" == typeof Ga ? Ga() : Ga\n  } else {\n    if (Ba ? Fa = /rv\\:([^\\);]+)(\\)|;)/ : y ? Fa = /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/ : z && (Fa = /WebKit\\/(\\S+)/), Fa) {\n      var Ha = Fa.exec(xa()), Ea = Ha ? Ha[1] : \"\"\n    }\n  }\n  if (y) {\n    var Ia = Ca();\n    if (Ia > parseFloat(Ea)) {\n      Da = String(Ia);\n      break a;\n    }\n  }\n  Da = Ea;\n}\nvar Ja = {};\nfunction A(a) {\n  var b;\n  if (!(b = Ja[a])) {\n    b = 0;\n    for (var c = String(Da).replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g, \"\").split(\".\"), d = String(a).replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g, \"\").split(\".\"), e = Math.max(c.length, d.length), g = 0;0 == b && g < e;g++) {\n      var h = c[g] || \"\", k = d[g] || \"\", u = RegExp(\"(\\\\d*)(\\\\D*)\", \"g\"), K = RegExp(\"(\\\\d*)(\\\\D*)\", \"g\");\n      do {\n        var v = u.exec(h) || [\"\", \"\", \"\"], r = K.exec(k) || [\"\", \"\", \"\"];\n        if (0 == v[0].length && 0 == r[0].length) {\n          break;\n        }\n        b = ta(0 == v[1].length ? 0 : parseInt(v[1], 10), 0 == r[1].length ? 0 : parseInt(r[1], 10)) || ta(0 == v[2].length, 0 == r[2].length) || ta(v[2], r[2]);\n      } while (0 == b);\n    }\n    b = Ja[a] = 0 <= b;\n  }\n  return b;\n}\nvar La = l.document, Ma = La && y ? Ca() || (\"CSS1Compat\" == La.compatMode ? parseInt(Da, 10) : 5) : void 0;\nfunction Na(a) {\n  Error.captureStackTrace ? Error.captureStackTrace(this, Na) : this.stack = Error().stack || \"\";\n  a && (this.message = String(a));\n}\ns(Na, Error);\nNa.prototype.name = \"CustomError\";\nfunction Oa(a, b) {\n  b.unshift(a);\n  Na.call(this, ka.apply(null, b));\n  b.shift();\n}\ns(Oa, Na);\nOa.prototype.name = \"AssertionError\";\nfunction Pa(a, b) {\n  throw new Oa(\"Failure\" + (a ? \": \" + a : \"\"), Array.prototype.slice.call(arguments, 1));\n}\n;var Qa = RegExp(\"^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\\\?([^#]*))?(?:#(.*))?$\");\nfunction Ra(a) {\n  if (Sa) {\n    Sa = !1;\n    var b = l.location;\n    if (b) {\n      var c = b.href;\n      if (c && (c = (c = Ra(c)[3] || null) && decodeURIComponent(c)) && c != b.hostname) {\n        throw Sa = !0, Error();\n      }\n    }\n  }\n  return a.match(Qa);\n}\nvar Sa = z;\nfunction Ta(a) {\n  var b = [], c = 0, d;\n  for (d in a) {\n    b[c++] = a[d];\n  }\n  return b;\n}\nfunction Ua(a) {\n  var b = [], c = 0, d;\n  for (d in a) {\n    b[c++] = d;\n  }\n  return b;\n}\nvar Va = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\nfunction Wa(a, b) {\n  for (var c, d, e = 1;e < arguments.length;e++) {\n    d = arguments[e];\n    for (c in d) {\n      a[c] = d[c];\n    }\n    for (var g = 0;g < Va.length;g++) {\n      c = Va[g], Object.prototype.hasOwnProperty.call(d, c) && (a[c] = d[c]);\n    }\n  }\n}\n;var B = Array.prototype, Xa = B.indexOf ? function(a, b, c) {\n  return B.indexOf.call(a, b, c);\n} : function(a, b, c) {\n  c = null == c ? 0 : 0 > c ? Math.max(0, a.length + c) : c;\n  if (n(a)) {\n    return n(b) && 1 == b.length ? a.indexOf(b, c) : -1;\n  }\n  for (;c < a.length;c++) {\n    if (c in a && a[c] === b) {\n      return c;\n    }\n  }\n  return-1;\n}, Ya = B.forEach ? function(a, b, c) {\n  B.forEach.call(a, b, c);\n} : function(a, b, c) {\n  for (var d = a.length, e = n(a) ? a.split(\"\") : a, g = 0;g < d;g++) {\n    g in e && b.call(c, e[g], g, a);\n  }\n};\nfunction Za(a) {\n  var b;\n  a: {\n    b = $a;\n    for (var c = a.length, d = n(a) ? a.split(\"\") : a, e = 0;e < c;e++) {\n      if (e in d && b.call(void 0, d[e], e, a)) {\n        b = e;\n        break a;\n      }\n    }\n    b = -1;\n  }\n  return 0 > b ? null : n(a) ? a.charAt(b) : a[b];\n}\nfunction ab(a) {\n  return B.concat.apply(B, arguments);\n}\nfunction bb(a) {\n  var b = a.length;\n  if (0 < b) {\n    for (var c = Array(b), d = 0;d < b;d++) {\n      c[d] = a[d];\n    }\n    return c;\n  }\n  return[];\n}\n;function cb(a, b) {\n  this.O = {};\n  this.j = [];\n  this.o = 0;\n  var c = arguments.length;\n  if (1 < c) {\n    if (c % 2) {\n      throw Error(\"Uneven number of arguments\");\n    }\n    for (var d = 0;d < c;d += 2) {\n      this.set(arguments[d], arguments[d + 1]);\n    }\n  } else {\n    if (a) {\n      a instanceof cb ? (c = a.ca(), d = a.N()) : (c = Ua(a), d = Ta(a));\n      for (var e = 0;e < c.length;e++) {\n        this.set(c[e], d[e]);\n      }\n    }\n  }\n}\nf = cb.prototype;\nf.N = function() {\n  db(this);\n  for (var a = [], b = 0;b < this.j.length;b++) {\n    a.push(this.O[this.j[b]]);\n  }\n  return a;\n};\nf.ca = function() {\n  db(this);\n  return this.j.concat();\n};\nf.wa = function(a) {\n  return C(this.O, a);\n};\nf.remove = function(a) {\n  return C(this.O, a) ? (delete this.O[a], this.o--, this.j.length > 2 * this.o && db(this), !0) : !1;\n};\nfunction db(a) {\n  if (a.o != a.j.length) {\n    for (var b = 0, c = 0;b < a.j.length;) {\n      var d = a.j[b];\n      C(a.O, d) && (a.j[c++] = d);\n      b++;\n    }\n    a.j.length = c;\n  }\n  if (a.o != a.j.length) {\n    for (var e = {}, c = b = 0;b < a.j.length;) {\n      d = a.j[b], C(e, d) || (a.j[c++] = d, e[d] = 1), b++;\n    }\n    a.j.length = c;\n  }\n}\nf.get = function(a, b) {\n  return C(this.O, a) ? this.O[a] : b;\n};\nf.set = function(a, b) {\n  C(this.O, a) || (this.o++, this.j.push(a));\n  this.O[a] = b;\n};\nf.n = function() {\n  return new cb(this);\n};\nfunction C(a, b) {\n  return Object.prototype.hasOwnProperty.call(a, b);\n}\n;function eb(a) {\n  if (\"function\" == typeof a.N) {\n    return a.N();\n  }\n  if (n(a)) {\n    return a.split(\"\");\n  }\n  if (ea(a)) {\n    for (var b = [], c = a.length, d = 0;d < c;d++) {\n      b.push(a[d]);\n    }\n    return b;\n  }\n  return Ta(a);\n}\nfunction D(a, b, c) {\n  if (\"function\" == typeof a.forEach) {\n    a.forEach(b, c);\n  } else {\n    if (ea(a) || n(a)) {\n      Ya(a, b, c);\n    } else {\n      var d;\n      if (\"function\" == typeof a.ca) {\n        d = a.ca();\n      } else {\n        if (\"function\" != typeof a.N) {\n          if (ea(a) || n(a)) {\n            d = [];\n            for (var e = a.length, g = 0;g < e;g++) {\n              d.push(g);\n            }\n          } else {\n            d = Ua(a);\n          }\n        } else {\n          d = void 0;\n        }\n      }\n      for (var e = eb(a), g = e.length, h = 0;h < g;h++) {\n        b.call(c, e[h], d && d[h], a);\n      }\n    }\n  }\n}\n;function E(a, b) {\n  var c;\n  if (a instanceof E) {\n    this.D = void 0 !== b ? b : a.D, fb(this, a.oa), c = a.eb, F(this), this.eb = c, gb(this, a.ja), hb(this, a.Ca), ib(this, a.I), jb(this, a.R.n()), c = a.Na, F(this), this.Na = c;\n  } else {\n    if (a && (c = Ra(String(a)))) {\n      this.D = !!b;\n      fb(this, c[1] || \"\", !0);\n      var d = c[2] || \"\";\n      F(this);\n      this.eb = d ? decodeURIComponent(d) : \"\";\n      gb(this, c[3] || \"\", !0);\n      hb(this, c[4]);\n      ib(this, c[5] || \"\", !0);\n      jb(this, c[6] || \"\", !0);\n      c = c[7] || \"\";\n      F(this);\n      this.Na = c ? decodeURIComponent(c) : \"\";\n    } else {\n      this.D = !!b, this.R = new kb(null, 0, this.D);\n    }\n  }\n}\nf = E.prototype;\nf.oa = \"\";\nf.eb = \"\";\nf.ja = \"\";\nf.Ca = null;\nf.I = \"\";\nf.Na = \"\";\nf.oc = !1;\nf.D = !1;\nf.toString = function() {\n  var a = [], b = this.oa;\n  b && a.push(lb(b, mb), \":\");\n  if (b = this.ja) {\n    a.push(\"//\");\n    var c = this.eb;\n    c && a.push(lb(c, mb), \"@\");\n    a.push(encodeURIComponent(String(b)));\n    b = this.Ca;\n    null != b && a.push(\":\", String(b));\n  }\n  if (b = this.I) {\n    this.ja && \"/\" != b.charAt(0) && a.push(\"/\"), a.push(lb(b, \"/\" == b.charAt(0) ? nb : ob));\n  }\n  (b = this.R.toString()) && a.push(\"?\", b);\n  (b = this.Na) && a.push(\"#\", lb(b, pb));\n  return a.join(\"\");\n};\nf.n = function() {\n  return new E(this);\n};\nfunction fb(a, b, c) {\n  F(a);\n  a.oa = c ? b ? decodeURIComponent(b) : \"\" : b;\n  a.oa && (a.oa = a.oa.replace(/:$/, \"\"));\n}\nfunction gb(a, b, c) {\n  F(a);\n  a.ja = c ? b ? decodeURIComponent(b) : \"\" : b;\n}\nfunction hb(a, b) {\n  F(a);\n  if (b) {\n    b = Number(b);\n    if (isNaN(b) || 0 > b) {\n      throw Error(\"Bad port number \" + b);\n    }\n    a.Ca = b;\n  } else {\n    a.Ca = null;\n  }\n}\nfunction ib(a, b, c) {\n  F(a);\n  a.I = c ? b ? decodeURIComponent(b) : \"\" : b;\n}\nfunction jb(a, b, c) {\n  F(a);\n  b instanceof kb ? (a.R = b, a.R.ub(a.D)) : (c || (b = lb(b, qb)), a.R = new kb(b, 0, a.D));\n}\nfunction G(a, b, c) {\n  F(a);\n  a.R.set(b, c);\n}\nfunction rb(a, b, c) {\n  F(a);\n  m(c) || (c = [String(c)]);\n  sb(a.R, b, c);\n}\nfunction H(a) {\n  F(a);\n  G(a, \"zx\", sa());\n  return a;\n}\nfunction F(a) {\n  if (a.oc) {\n    throw Error(\"Tried to modify a read-only Uri\");\n  }\n}\nf.ub = function(a) {\n  this.D = a;\n  this.R && this.R.ub(a);\n  return this;\n};\nfunction tb(a) {\n  return a instanceof E ? a.n() : new E(a, void 0);\n}\nfunction ub(a, b, c, d) {\n  var e = new E(null, void 0);\n  a && fb(e, a);\n  b && gb(e, b);\n  c && hb(e, c);\n  d && ib(e, d);\n  return e;\n}\nfunction lb(a, b) {\n  return n(a) ? encodeURI(a).replace(b, vb) : null;\n}\nfunction vb(a) {\n  a = a.charCodeAt(0);\n  return \"%\" + (a >> 4 & 15).toString(16) + (a & 15).toString(16);\n}\nvar mb = /[#\\/\\?@]/g, ob = /[\\#\\?:]/g, nb = /[\\#\\?]/g, qb = /[\\#\\?@]/g, pb = /#/g;\nfunction kb(a, b, c) {\n  this.C = a || null;\n  this.D = !!c;\n}\nfunction I(a) {\n  if (!a.h && (a.h = new cb, a.o = 0, a.C)) {\n    for (var b = a.C.split(\"&\"), c = 0;c < b.length;c++) {\n      var d = b[c].indexOf(\"=\"), e = null, g = null;\n      0 <= d ? (e = b[c].substring(0, d), g = b[c].substring(d + 1)) : e = b[c];\n      e = decodeURIComponent(e.replace(/\\+/g, \" \"));\n      e = J(a, e);\n      a.add(e, g ? decodeURIComponent(g.replace(/\\+/g, \" \")) : \"\");\n    }\n  }\n}\nf = kb.prototype;\nf.h = null;\nf.o = null;\nf.add = function(a, b) {\n  I(this);\n  this.C = null;\n  a = J(this, a);\n  var c = this.h.get(a);\n  c || this.h.set(a, c = []);\n  c.push(b);\n  this.o++;\n  return this;\n};\nf.remove = function(a) {\n  I(this);\n  a = J(this, a);\n  return this.h.wa(a) ? (this.C = null, this.o -= this.h.get(a).length, this.h.remove(a)) : !1;\n};\nf.wa = function(a) {\n  I(this);\n  a = J(this, a);\n  return this.h.wa(a);\n};\nf.ca = function() {\n  I(this);\n  for (var a = this.h.N(), b = this.h.ca(), c = [], d = 0;d < b.length;d++) {\n    for (var e = a[d], g = 0;g < e.length;g++) {\n      c.push(b[d]);\n    }\n  }\n  return c;\n};\nf.N = function(a) {\n  I(this);\n  var b = [];\n  if (n(a)) {\n    this.wa(a) && (b = ab(b, this.h.get(J(this, a))));\n  } else {\n    a = this.h.N();\n    for (var c = 0;c < a.length;c++) {\n      b = ab(b, a[c]);\n    }\n  }\n  return b;\n};\nf.set = function(a, b) {\n  I(this);\n  this.C = null;\n  a = J(this, a);\n  this.wa(a) && (this.o -= this.h.get(a).length);\n  this.h.set(a, [b]);\n  this.o++;\n  return this;\n};\nf.get = function(a, b) {\n  var c = a ? this.N(a) : [];\n  return 0 < c.length ? String(c[0]) : b;\n};\nfunction sb(a, b, c) {\n  a.remove(b);\n  0 < c.length && (a.C = null, a.h.set(J(a, b), bb(c)), a.o += c.length);\n}\nf.toString = function() {\n  if (this.C) {\n    return this.C;\n  }\n  if (!this.h) {\n    return \"\";\n  }\n  for (var a = [], b = this.h.ca(), c = 0;c < b.length;c++) {\n    for (var d = b[c], e = encodeURIComponent(String(d)), d = this.N(d), g = 0;g < d.length;g++) {\n      var h = e;\n      \"\" !== d[g] && (h += \"=\" + encodeURIComponent(String(d[g])));\n      a.push(h);\n    }\n  }\n  return this.C = a.join(\"&\");\n};\nf.n = function() {\n  var a = new kb;\n  a.C = this.C;\n  this.h && (a.h = this.h.n(), a.o = this.o);\n  return a;\n};\nfunction J(a, b) {\n  var c = String(b);\n  a.D && (c = c.toLowerCase());\n  return c;\n}\nf.ub = function(a) {\n  a && !this.D && (I(this), this.C = null, D(this.h, function(a, c) {\n    var d = c.toLowerCase();\n    c != d && (this.remove(c), sb(this, d, a));\n  }, this));\n  this.D = a;\n};\nfunction wb(a) {\n  a = String(a);\n  if (/^\\s*$/.test(a) ? 0 : /^[\\],:{}\\s\\u2028\\u2029]*$/.test(a.replace(/\\\\[\"\\\\\\/bfnrtu]/g, \"@\").replace(/\"[^\"\\\\\\n\\r\\u2028\\u2029\\x00-\\x08\\x0a-\\x1f]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, \"]\").replace(/(?:^|:|,)(?:[\\s\\u2028\\u2029]*\\[)+/g, \"\"))) {\n    try {\n      return eval(\"(\" + a + \")\");\n    } catch (b) {\n    }\n  }\n  throw Error(\"Invalid JSON string: \" + a);\n}\nfunction xb(a) {\n  return eval(\"(\" + a + \")\");\n}\nfunction yb(a) {\n  var b = [];\n  zb(new Ab, a, b);\n  return b.join(\"\");\n}\nfunction Ab() {\n  this.Ya = void 0;\n}\nfunction zb(a, b, c) {\n  switch(typeof b) {\n    case \"string\":\n      Bb(b, c);\n      break;\n    case \"number\":\n      c.push(isFinite(b) && !isNaN(b) ? b : \"null\");\n      break;\n    case \"boolean\":\n      c.push(b);\n      break;\n    case \"undefined\":\n      c.push(\"null\");\n      break;\n    case \"object\":\n      if (null == b) {\n        c.push(\"null\");\n        break;\n      }\n      if (m(b)) {\n        var d = b.length;\n        c.push(\"[\");\n        for (var e = \"\", g = 0;g < d;g++) {\n          c.push(e), e = b[g], zb(a, a.Ya ? a.Ya.call(b, String(g), e) : e, c), e = \",\";\n        }\n        c.push(\"]\");\n        break;\n      }\n      c.push(\"{\");\n      d = \"\";\n      for (g in b) {\n        Object.prototype.hasOwnProperty.call(b, g) && (e = b[g], \"function\" != typeof e && (c.push(d), Bb(g, c), c.push(\":\"), zb(a, a.Ya ? a.Ya.call(b, g, e) : e, c), d = \",\"));\n      }\n      c.push(\"}\");\n      break;\n    case \"function\":\n      break;\n    default:\n      throw Error(\"Unknown type: \" + typeof b);;\n  }\n}\nvar Cb = {'\"':'\\\\\"', \"\\\\\":\"\\\\\\\\\", \"/\":\"\\\\/\", \"\\b\":\"\\\\b\", \"\\f\":\"\\\\f\", \"\\n\":\"\\\\n\", \"\\r\":\"\\\\r\", \"\\t\":\"\\\\t\", \"\\x0B\":\"\\\\u000b\"}, Db = /\\uffff/.test(\"\\uffff\") ? /[\\\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g : /[\\\\\\\"\\x00-\\x1f\\x7f-\\xff]/g;\nfunction Bb(a, b) {\n  b.push('\"', a.replace(Db, function(a) {\n    if (a in Cb) {\n      return Cb[a];\n    }\n    var b = a.charCodeAt(0), e = \"\\\\u\";\n    16 > b ? e += \"000\" : 256 > b ? e += \"00\" : 4096 > b && (e += \"0\");\n    return Cb[a] = e + b.toString(16);\n  }), '\"');\n}\n;function Eb(a) {\n  return Fb(a || arguments.callee.caller, []);\n}\nfunction Fb(a, b) {\n  var c = [];\n  if (0 <= Xa(b, a)) {\n    c.push(\"[...circular reference...]\");\n  } else {\n    if (a && 50 > b.length) {\n      c.push(Gb(a) + \"(\");\n      for (var d = a.arguments, e = 0;e < d.length;e++) {\n        0 < e && c.push(\", \");\n        var g;\n        g = d[e];\n        switch(typeof g) {\n          case \"object\":\n            g = g ? \"object\" : \"null\";\n            break;\n          case \"string\":\n            break;\n          case \"number\":\n            g = String(g);\n            break;\n          case \"boolean\":\n            g = g ? \"true\" : \"false\";\n            break;\n          case \"function\":\n            g = (g = Gb(g)) ? g : \"[fn]\";\n            break;\n          default:\n            g = typeof g;\n        }\n        40 < g.length && (g = g.substr(0, 40) + \"...\");\n        c.push(g);\n      }\n      b.push(a);\n      c.push(\")\\n\");\n      try {\n        c.push(Fb(a.caller, b));\n      } catch (h) {\n        c.push(\"[exception trying to get caller]\\n\");\n      }\n    } else {\n      a ? c.push(\"[...long stack...]\") : c.push(\"[end]\");\n    }\n  }\n  return c.join(\"\");\n}\nfunction Gb(a) {\n  if (Hb[a]) {\n    return Hb[a];\n  }\n  a = String(a);\n  if (!Hb[a]) {\n    var b = /function ([^\\(]+)/.exec(a);\n    Hb[a] = b ? b[1] : \"[Anonymous]\";\n  }\n  return Hb[a];\n}\nvar Hb = {};\nfunction Ib(a, b, c, d, e) {\n  this.reset(a, b, c, d, e);\n}\nIb.prototype.Fb = null;\nIb.prototype.Eb = null;\nvar Jb = 0;\nIb.prototype.reset = function(a, b, c, d, e) {\n  \"number\" == typeof e || Jb++;\n  d || q();\n  this.Aa = a;\n  this.qc = b;\n  delete this.Fb;\n  delete this.Eb;\n};\nIb.prototype.$b = function(a) {\n  this.Aa = a;\n};\nfunction L(a) {\n  this.rc = a;\n}\nL.prototype.Sa = null;\nL.prototype.Aa = null;\nL.prototype.jb = null;\nL.prototype.Jb = null;\nfunction Kb(a, b) {\n  this.name = a;\n  this.value = b;\n}\nKb.prototype.toString = function() {\n  return this.name;\n};\nvar Lb = new Kb(\"SEVERE\", 1E3), Mb = new Kb(\"WARNING\", 900), Nb = new Kb(\"INFO\", 800), Ob = new Kb(\"CONFIG\", 700), Pb = new Kb(\"FINE\", 500);\nf = L.prototype;\nf.getParent = function() {\n  return this.Sa;\n};\nf.$b = function(a) {\n  this.Aa = a;\n};\nfunction Qb(a) {\n  if (a.Aa) {\n    return a.Aa;\n  }\n  if (a.Sa) {\n    return Qb(a.Sa);\n  }\n  Pa(\"Root logger has no level set.\");\n  return null;\n}\nf.log = function(a, b, c) {\n  if (a.value >= Qb(this).value) {\n    for (fa(b) && (b = b()), a = this.mc(a, b, c), b = \"log:\" + a.qc, l.console && (l.console.timeStamp ? l.console.timeStamp(b) : l.console.markTimeline && l.console.markTimeline(b)), l.msWriteProfilerMark && l.msWriteProfilerMark(b), b = this;b;) {\n      c = b;\n      var d = a;\n      if (c.Jb) {\n        for (var e = 0, g = void 0;g = c.Jb[e];e++) {\n          g(d);\n        }\n      }\n      b = b.getParent();\n    }\n  }\n};\nf.mc = function(a, b, c) {\n  var d = new Ib(a, String(b), this.rc);\n  if (c) {\n    d.Fb = c;\n    var e;\n    var g = arguments.callee.caller;\n    try {\n      var h;\n      var k = ba(\"window.location.href\");\n      if (n(c)) {\n        h = {message:c, name:\"Unknown error\", lineNumber:\"Not available\", fileName:k, stack:\"Not available\"};\n      } else {\n        var u, K, v = !1;\n        try {\n          u = c.lineNumber || c.Ic || \"Not available\";\n        } catch (r) {\n          u = \"Not available\", v = !0;\n        }\n        try {\n          K = c.fileName || c.filename || c.sourceURL || l.$googDebugFname || k;\n        } catch (Ka) {\n          K = \"Not available\", v = !0;\n        }\n        h = !v && c.lineNumber && c.fileName && c.stack && c.message && c.name ? c : {message:c.message || \"Not available\", name:c.name || \"UnknownError\", lineNumber:u, fileName:K, stack:c.stack || \"Not available\"};\n      }\n      e = \"Message: \" + la(h.message) + '\\nUrl: <a href=\"view-source:' + h.fileName + '\" target=\"_new\">' + h.fileName + \"</a>\\nLine: \" + h.lineNumber + \"\\n\\nBrowser stack:\\n\" + la(h.stack + \"-> \") + \"[end]\\n\\nJS stack traversal:\\n\" + la(Eb(g) + \"-> \");\n    } catch (w) {\n      e = \"Exception trying to expose exception! You win, we lose. \" + w;\n    }\n    d.Eb = e;\n  }\n  return d;\n};\nf.J = function(a, b) {\n  this.log(Lb, a, b);\n};\nf.Z = function(a, b) {\n  this.log(Mb, a, b);\n};\nf.info = function(a, b) {\n  this.log(Nb, a, b);\n};\nvar Rb = {}, Sb = null;\nfunction Tb(a) {\n  Sb || (Sb = new L(\"\"), Rb[\"\"] = Sb, Sb.$b(Ob));\n  var b;\n  if (!(b = Rb[a])) {\n    b = new L(a);\n    var c = a.lastIndexOf(\".\"), d = a.substr(c + 1), c = Tb(a.substr(0, c));\n    c.jb || (c.jb = {});\n    c.jb[d] = b;\n    b.Sa = c;\n    Rb[a] = b;\n  }\n  return b;\n}\n;function M(a, b) {\n  a && a.log(Pb, b, void 0);\n}\n;function N() {\n  this.r = Tb(\"goog.net.BrowserChannel\");\n}\nfunction Ub(a, b, c, d) {\n  a.info(\"XMLHTTP TEXT (\" + b + \"): \" + Vb(a, c) + (d ? \" \" + d : \"\"));\n}\nN.prototype.debug = function(a) {\n  this.info(a);\n};\nfunction Wb(a, b, c) {\n  a.J((c || \"Exception\") + b);\n}\nN.prototype.info = function(a) {\n  var b = this.r;\n  b && b.info(a, void 0);\n};\nN.prototype.Z = function(a) {\n  var b = this.r;\n  b && b.Z(a, void 0);\n};\nN.prototype.J = function(a) {\n  var b = this.r;\n  b && b.J(a, void 0);\n};\nfunction Vb(a, b) {\n  if (!b || b == Xb) {\n    return b;\n  }\n  try {\n    var c = xb(b);\n    if (c) {\n      for (var d = 0;d < c.length;d++) {\n        if (m(c[d])) {\n          var e = c[d];\n          if (!(2 > e.length)) {\n            var g = e[1];\n            if (m(g) && !(1 > g.length)) {\n              var h = g[0];\n              if (\"noop\" != h && \"stop\" != h) {\n                for (var k = 1;k < g.length;k++) {\n                  g[k] = \"\";\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return yb(c);\n  } catch (u) {\n    return a.debug(\"Exception parsing expected JS array - probably was not JS\"), b;\n  }\n}\n;function Yb(a, b) {\n  this.P = b ? xb : wb;\n}\nYb.prototype.parse = function(a) {\n  return this.P(a);\n};\nfunction O() {\n  0 != Zb && ($b[this[ga] || (this[ga] = ++ha)] = this);\n}\nvar Zb = 0, $b = {};\nO.prototype.mb = !1;\nO.prototype.Ja = function() {\n  if (!this.mb && (this.mb = !0, this.u(), 0 != Zb)) {\n    var a = this[ga] || (this[ga] = ++ha);\n    delete $b[a];\n  }\n};\nO.prototype.u = function() {\n  if (this.Pb) {\n    for (;this.Pb.length;) {\n      this.Pb.shift()();\n    }\n  }\n};\nvar ac = \"closure_listenable_\" + (1E6 * Math.random() | 0);\nfunction bc(a) {\n  try {\n    return!(!a || !a[ac]);\n  } catch (b) {\n    return!1;\n  }\n}\nvar cc = 0;\nfunction dc(a, b, c, d, e) {\n  this.fa = a;\n  this.Ua = null;\n  this.src = b;\n  this.type = c;\n  this.capture = !!d;\n  this.Oa = e;\n  this.key = ++cc;\n  this.na = this.Ia = !1;\n}\nfunction ec(a) {\n  a.na = !0;\n  a.fa = null;\n  a.Ua = null;\n  a.src = null;\n  a.Oa = null;\n}\n;function P(a) {\n  this.src = a;\n  this.s = {};\n  this.Ga = 0;\n}\nP.prototype.add = function(a, b, c, d, e) {\n  var g = this.s[a];\n  g || (g = this.s[a] = [], this.Ga++);\n  var h = fc(g, b, d, e);\n  -1 < h ? (a = g[h], c || (a.Ia = !1)) : (a = new dc(b, this.src, a, !!d, e), a.Ia = c, g.push(a));\n  return a;\n};\nP.prototype.remove = function(a, b, c, d) {\n  if (!(a in this.s)) {\n    return!1;\n  }\n  var e = this.s[a];\n  b = fc(e, b, c, d);\n  return-1 < b ? (ec(e[b]), B.splice.call(e, b, 1), 0 == e.length && (delete this.s[a], this.Ga--), !0) : !1;\n};\nfunction gc(a, b) {\n  var c = b.type;\n  if (!(c in a.s)) {\n    return!1;\n  }\n  var d = a.s[c], e = Xa(d, b), g;\n  (g = 0 <= e) && B.splice.call(d, e, 1);\n  g && (ec(b), 0 == a.s[c].length && (delete a.s[c], a.Ga--));\n  return g;\n}\nP.prototype.Xa = function(a) {\n  var b = 0, c;\n  for (c in this.s) {\n    if (!a || c == a) {\n      for (var d = this.s[c], e = 0;e < d.length;e++) {\n        ++b, ec(d[e]);\n      }\n      delete this.s[c];\n      this.Ga--;\n    }\n  }\n  return b;\n};\nP.prototype.ya = function(a, b, c, d) {\n  a = this.s[a];\n  var e = -1;\n  a && (e = fc(a, b, c, d));\n  return-1 < e ? a[e] : null;\n};\nfunction fc(a, b, c, d) {\n  for (var e = 0;e < a.length;++e) {\n    var g = a[e];\n    if (!g.na && g.fa == b && g.capture == !!c && g.Oa == d) {\n      return e;\n    }\n  }\n  return-1;\n}\n;var hc = !y || y && 9 <= Ma, ic = y && !A(\"9\");\n!z || A(\"528\");\nBa && A(\"1.9b\") || y && A(\"8\") || Aa && A(\"9.5\") || z && A(\"528\");\nBa && !A(\"8\") || y && A(\"9\");\nfunction Q(a, b) {\n  this.type = a;\n  this.currentTarget = this.target = b;\n}\nf = Q.prototype;\nf.u = function() {\n};\nf.Ja = function() {\n};\nf.ga = !1;\nf.defaultPrevented = !1;\nf.Yb = !0;\nf.preventDefault = function() {\n  this.defaultPrevented = !0;\n  this.Yb = !1;\n};\nfunction jc(a) {\n  jc[\" \"](a);\n  return a;\n}\njc[\" \"] = ca;\nfunction kc(a, b) {\n  Q.call(this, a ? a.type : \"\");\n  this.relatedTarget = this.currentTarget = this.target = null;\n  this.charCode = this.keyCode = this.button = this.screenY = this.screenX = this.clientY = this.clientX = this.offsetY = this.offsetX = 0;\n  this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1;\n  this.Db = this.state = null;\n  if (a) {\n    var c = this.type = a.type;\n    this.target = a.target || a.srcElement;\n    this.currentTarget = b;\n    var d = a.relatedTarget;\n    if (d) {\n      if (Ba) {\n        var e;\n        a: {\n          try {\n            jc(d.nodeName);\n            e = !0;\n            break a;\n          } catch (g) {\n          }\n          e = !1;\n        }\n        e || (d = null);\n      }\n    } else {\n      \"mouseover\" == c ? d = a.fromElement : \"mouseout\" == c && (d = a.toElement);\n    }\n    this.relatedTarget = d;\n    this.offsetX = z || void 0 !== a.offsetX ? a.offsetX : a.layerX;\n    this.offsetY = z || void 0 !== a.offsetY ? a.offsetY : a.layerY;\n    this.clientX = void 0 !== a.clientX ? a.clientX : a.pageX;\n    this.clientY = void 0 !== a.clientY ? a.clientY : a.pageY;\n    this.screenX = a.screenX || 0;\n    this.screenY = a.screenY || 0;\n    this.button = a.button;\n    this.keyCode = a.keyCode || 0;\n    this.charCode = a.charCode || (\"keypress\" == c ? a.keyCode : 0);\n    this.ctrlKey = a.ctrlKey;\n    this.altKey = a.altKey;\n    this.shiftKey = a.shiftKey;\n    this.metaKey = a.metaKey;\n    this.state = a.state;\n    this.Db = a;\n    a.defaultPrevented && this.preventDefault();\n    delete this.ga;\n  }\n}\ns(kc, Q);\nkc.prototype.preventDefault = function() {\n  kc.pa.preventDefault.call(this);\n  var a = this.Db;\n  if (a.preventDefault) {\n    a.preventDefault();\n  } else {\n    if (a.returnValue = !1, ic) {\n      try {\n        if (a.ctrlKey || 112 <= a.keyCode && 123 >= a.keyCode) {\n          a.keyCode = -1;\n        }\n      } catch (b) {\n      }\n    }\n  }\n};\nkc.prototype.u = function() {\n};\nvar lc = \"closure_lm_\" + (1E6 * Math.random() | 0), mc = {}, nc = 0;\nfunction oc(a, b, c, d, e) {\n  if (m(b)) {\n    for (var g = 0;g < b.length;g++) {\n      oc(a, b[g], c, d, e);\n    }\n    return null;\n  }\n  c = pc(c);\n  if (bc(a)) {\n    a = a.Ra(b, c, d, e);\n  } else {\n    if (!b) {\n      throw Error(\"Invalid event type\");\n    }\n    var g = !!d, h = qc(a);\n    h || (a[lc] = h = new P(a));\n    c = h.add(b, c, !1, d, e);\n    c.Ua || (d = rc(), c.Ua = d, d.src = a, d.fa = c, a.addEventListener ? a.addEventListener(b, d, g) : a.attachEvent(b in mc ? mc[b] : mc[b] = \"on\" + b, d), nc++);\n    a = c;\n  }\n  return a;\n}\nfunction rc() {\n  var a = sc, b = hc ? function(c) {\n    return a.call(b.src, b.fa, c);\n  } : function(c) {\n    c = a.call(b.src, b.fa, c);\n    if (!c) {\n      return c;\n    }\n  };\n  return b;\n}\nfunction tc(a, b, c, d, e) {\n  if (m(b)) {\n    for (var g = 0;g < b.length;g++) {\n      tc(a, b[g], c, d, e);\n    }\n  } else {\n    c = pc(c), bc(a) ? a.vb(b, c, d, e) : a && (a = qc(a)) && (b = a.ya(b, c, !!d, e)) && uc(b);\n  }\n}\nfunction uc(a) {\n  if (\"number\" == typeof a || !a || a.na) {\n    return!1;\n  }\n  var b = a.src;\n  if (bc(b)) {\n    return gc(b.W, a);\n  }\n  var c = a.type, d = a.Ua;\n  b.removeEventListener ? b.removeEventListener(c, d, a.capture) : b.detachEvent && b.detachEvent(c in mc ? mc[c] : mc[c] = \"on\" + c, d);\n  nc--;\n  (c = qc(b)) ? (gc(c, a), 0 == c.Ga && (c.src = null, b[lc] = null)) : ec(a);\n  return!0;\n}\nfunction vc(a, b, c, d) {\n  var e = 1;\n  if (a = qc(a)) {\n    if (b = a.s[b]) {\n      for (b = bb(b), a = 0;a < b.length;a++) {\n        var g = b[a];\n        g && g.capture == c && !g.na && (e &= !1 !== wc(g, d));\n      }\n    }\n  }\n  return Boolean(e);\n}\nfunction wc(a, b) {\n  var c = a.fa, d = a.Oa || a.src;\n  a.Ia && uc(a);\n  return c.call(d, b);\n}\nfunction sc(a, b) {\n  if (a.na) {\n    return!0;\n  }\n  if (!hc) {\n    var c = b || ba(\"window.event\"), d = new kc(c, this), e = !0;\n    if (!(0 > c.keyCode || void 0 != c.returnValue)) {\n      a: {\n        var g = !1;\n        if (0 == c.keyCode) {\n          try {\n            c.keyCode = -1;\n            break a;\n          } catch (h) {\n            g = !0;\n          }\n        }\n        if (g || void 0 == c.returnValue) {\n          c.returnValue = !0;\n        }\n      }\n      c = [];\n      for (g = d.currentTarget;g;g = g.parentNode) {\n        c.push(g);\n      }\n      for (var g = a.type, k = c.length - 1;!d.ga && 0 <= k;k--) {\n        d.currentTarget = c[k], e &= vc(c[k], g, !0, d);\n      }\n      for (k = 0;!d.ga && k < c.length;k++) {\n        d.currentTarget = c[k], e &= vc(c[k], g, !1, d);\n      }\n    }\n    return e;\n  }\n  return wc(a, new kc(b, this));\n}\nfunction qc(a) {\n  a = a[lc];\n  return a instanceof P ? a : null;\n}\nvar xc = \"__closure_events_fn_\" + (1E9 * Math.random() >>> 0);\nfunction pc(a) {\n  return fa(a) ? a : a[xc] || (a[xc] = function(b) {\n    return a.handleEvent(b);\n  });\n}\n;function R() {\n  O.call(this);\n  this.W = new P(this);\n  this.fc = this;\n}\ns(R, O);\nR.prototype[ac] = !0;\nf = R.prototype;\nf.tb = null;\nf.addEventListener = function(a, b, c, d) {\n  oc(this, a, b, c, d);\n};\nf.removeEventListener = function(a, b, c, d) {\n  tc(this, a, b, c, d);\n};\nf.dispatchEvent = function(a) {\n  var b, c = this.tb;\n  if (c) {\n    for (b = [];c;c = c.tb) {\n      b.push(c);\n    }\n  }\n  var c = this.fc, d = a.type || a;\n  if (n(a)) {\n    a = new Q(a, c);\n  } else {\n    if (a instanceof Q) {\n      a.target = a.target || c;\n    } else {\n      var e = a;\n      a = new Q(d, c);\n      Wa(a, e);\n    }\n  }\n  var e = !0, g;\n  if (b) {\n    for (var h = b.length - 1;!a.ga && 0 <= h;h--) {\n      g = a.currentTarget = b[h], e = yc(g, d, !0, a) && e;\n    }\n  }\n  a.ga || (g = a.currentTarget = c, e = yc(g, d, !0, a) && e, a.ga || (e = yc(g, d, !1, a) && e));\n  if (b) {\n    for (h = 0;!a.ga && h < b.length;h++) {\n      g = a.currentTarget = b[h], e = yc(g, d, !1, a) && e;\n    }\n  }\n  return e;\n};\nf.u = function() {\n  R.pa.u.call(this);\n  this.W && this.W.Xa(void 0);\n  this.tb = null;\n};\nf.Ra = function(a, b, c, d) {\n  return this.W.add(String(a), b, !1, c, d);\n};\nf.vb = function(a, b, c, d) {\n  return this.W.remove(String(a), b, c, d);\n};\nfunction yc(a, b, c, d) {\n  b = a.W.s[String(b)];\n  if (!b) {\n    return!0;\n  }\n  b = bb(b);\n  for (var e = !0, g = 0;g < b.length;++g) {\n    var h = b[g];\n    if (h && !h.na && h.capture == c) {\n      var k = h.fa, u = h.Oa || h.src;\n      h.Ia && gc(a.W, h);\n      e = !1 !== k.call(u, d) && e;\n    }\n  }\n  return e && !1 != d.Yb;\n}\nf.ya = function(a, b, c, d) {\n  return this.W.ya(String(a), b, c, d);\n};\nfunction zc(a, b) {\n  R.call(this);\n  this.ea = a || 1;\n  this.ra = b || l;\n  this.ib = p(this.Gc, this);\n  this.sb = q();\n}\ns(zc, R);\nf = zc.prototype;\nf.enabled = !1;\nf.l = null;\nf.setInterval = function(a) {\n  this.ea = a;\n  this.l && this.enabled ? (this.stop(), this.start()) : this.l && this.stop();\n};\nf.Gc = function() {\n  if (this.enabled) {\n    var a = q() - this.sb;\n    0 < a && a < 0.8 * this.ea ? this.l = this.ra.setTimeout(this.ib, this.ea - a) : (this.l && (this.ra.clearTimeout(this.l), this.l = null), this.dispatchEvent(Ac), this.enabled && (this.l = this.ra.setTimeout(this.ib, this.ea), this.sb = q()));\n  }\n};\nf.start = function() {\n  this.enabled = !0;\n  this.l || (this.l = this.ra.setTimeout(this.ib, this.ea), this.sb = q());\n};\nf.stop = function() {\n  this.enabled = !1;\n  this.l && (this.ra.clearTimeout(this.l), this.l = null);\n};\nf.u = function() {\n  zc.pa.u.call(this);\n  this.stop();\n  delete this.ra;\n};\nvar Ac = \"tick\";\nfunction Bc(a, b, c) {\n  if (fa(a)) {\n    c && (a = p(a, c));\n  } else {\n    if (a && \"function\" == typeof a.handleEvent) {\n      a = p(a.handleEvent, a);\n    } else {\n      throw Error(\"Invalid listener argument\");\n    }\n  }\n  return 2147483647 < b ? -1 : l.setTimeout(a, b || 0);\n}\n;function Cc() {\n}\nCc.prototype.Ab = null;\nfunction Dc(a) {\n  var b;\n  (b = a.Ab) || (b = {}, Ec(a) && (b[0] = !0, b[1] = !0), b = a.Ab = b);\n  return b;\n}\n;var Fc;\nfunction Gc() {\n}\ns(Gc, Cc);\nfunction Hc(a) {\n  return(a = Ec(a)) ? new ActiveXObject(a) : new XMLHttpRequest;\n}\nfunction Ec(a) {\n  if (!a.Kb && \"undefined\" == typeof XMLHttpRequest && \"undefined\" != typeof ActiveXObject) {\n    for (var b = [\"MSXML2.XMLHTTP.6.0\", \"MSXML2.XMLHTTP.3.0\", \"MSXML2.XMLHTTP\", \"Microsoft.XMLHTTP\"], c = 0;c < b.length;c++) {\n      var d = b[c];\n      try {\n        return new ActiveXObject(d), a.Kb = d;\n      } catch (e) {\n      }\n    }\n    throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");\n  }\n  return a.Kb;\n}\nFc = new Gc;\nfunction Ic(a) {\n  R.call(this);\n  this.headers = new cb;\n  this.gb = a || null;\n  this.T = !1;\n  this.fb = this.f = null;\n  this.Mb = this.Qa = \"\";\n  this.ka = 0;\n  this.q = \"\";\n  this.da = this.qb = this.Pa = this.nb = !1;\n  this.Fa = 0;\n  this.bb = null;\n  this.Xb = Jc;\n  this.cb = this.dc = !1;\n}\ns(Ic, R);\nvar Jc = \"\";\nIc.prototype.r = Tb(\"goog.net.XhrIo\");\nvar Kc = /^https?$/i, Lc = [\"POST\", \"PUT\"];\nf = Ic.prototype;\nf.send = function(a, b, c, d) {\n  if (this.f) {\n    throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + this.Qa + \"; newUri=\" + a);\n  }\n  b = b ? b.toUpperCase() : \"GET\";\n  this.Qa = a;\n  this.q = \"\";\n  this.ka = 0;\n  this.Mb = b;\n  this.nb = !1;\n  this.T = !0;\n  this.f = this.gb ? Hc(this.gb) : Hc(Fc);\n  this.fb = this.gb ? Dc(this.gb) : Dc(Fc);\n  this.f.onreadystatechange = p(this.Qb, this);\n  try {\n    M(this.r, S(this, \"Opening Xhr\")), this.qb = !0, this.f.open(b, a, !0), this.qb = !1;\n  } catch (e) {\n    M(this.r, S(this, \"Error opening Xhr: \" + e.message));\n    Mc(this, e);\n    return;\n  }\n  a = c || \"\";\n  var g = this.headers.n();\n  d && D(d, function(a, b) {\n    g.set(b, a);\n  });\n  d = Za(g.ca());\n  c = l.FormData && a instanceof l.FormData;\n  !(0 <= Xa(Lc, b)) || d || c || g.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\");\n  D(g, function(a, b) {\n    this.f.setRequestHeader(b, a);\n  }, this);\n  this.Xb && (this.f.responseType = this.Xb);\n  \"withCredentials\" in this.f && (this.f.withCredentials = this.dc);\n  try {\n    Nc(this), 0 < this.Fa && (this.cb = Oc(this.f), M(this.r, S(this, \"Will abort after \" + this.Fa + \"ms if incomplete, xhr2 \" + this.cb)), this.cb ? (this.f.timeout = this.Fa, this.f.ontimeout = p(this.qa, this)) : this.bb = Bc(this.qa, this.Fa, this)), M(this.r, S(this, \"Sending request\")), this.Pa = !0, this.f.send(a), this.Pa = !1;\n  } catch (h) {\n    M(this.r, S(this, \"Send error: \" + h.message)), Mc(this, h);\n  }\n};\nfunction Oc(a) {\n  return y && A(9) && \"number\" == typeof a.timeout && void 0 !== a.ontimeout;\n}\nfunction $a(a) {\n  return \"content-type\" == a.toLowerCase();\n}\nf.qa = function() {\n  \"undefined\" != typeof aa && this.f && (this.q = \"Timed out after \" + this.Fa + \"ms, aborting\", this.ka = 8, M(this.r, S(this, this.q)), this.dispatchEvent(\"timeout\"), this.abort(8));\n};\nfunction Mc(a, b) {\n  a.T = !1;\n  a.f && (a.da = !0, a.f.abort(), a.da = !1);\n  a.q = b;\n  a.ka = 5;\n  Pc(a);\n  Qc(a);\n}\nfunction Pc(a) {\n  a.nb || (a.nb = !0, a.dispatchEvent(\"complete\"), a.dispatchEvent(\"error\"));\n}\nf.abort = function(a) {\n  this.f && this.T && (M(this.r, S(this, \"Aborting\")), this.T = !1, this.da = !0, this.f.abort(), this.da = !1, this.ka = a || 7, this.dispatchEvent(\"complete\"), this.dispatchEvent(\"abort\"), Qc(this));\n};\nf.u = function() {\n  this.f && (this.T && (this.T = !1, this.da = !0, this.f.abort(), this.da = !1), Qc(this, !0));\n  Ic.pa.u.call(this);\n};\nf.Qb = function() {\n  this.mb || (this.qb || this.Pa || this.da ? Rc(this) : this.uc());\n};\nf.uc = function() {\n  Rc(this);\n};\nfunction Rc(a) {\n  if (a.T && \"undefined\" != typeof aa) {\n    if (a.fb[1] && 4 == T(a) && 2 == Sc(a)) {\n      M(a.r, S(a, \"Local request error detected and ignored\"));\n    } else {\n      if (a.Pa && 4 == T(a)) {\n        Bc(a.Qb, 0, a);\n      } else {\n        if (a.dispatchEvent(\"readystatechange\"), 4 == T(a)) {\n          M(a.r, S(a, \"Request complete\"));\n          a.T = !1;\n          try {\n            var b = Sc(a), c, d;\n            a: {\n              switch(b) {\n                case 200:\n                ;\n                case 201:\n                ;\n                case 202:\n                ;\n                case 204:\n                ;\n                case 206:\n                ;\n                case 304:\n                ;\n                case 1223:\n                  d = !0;\n                  break a;\n                default:\n                  d = !1;\n              }\n            }\n            if (!(c = d)) {\n              var e;\n              if (e = 0 === b) {\n                var g = Ra(String(a.Qa))[1] || null;\n                if (!g && self.location) {\n                  var h = self.location.protocol, g = h.substr(0, h.length - 1)\n                }\n                e = !Kc.test(g ? g.toLowerCase() : \"\");\n              }\n              c = e;\n            }\n            if (c) {\n              a.dispatchEvent(\"complete\"), a.dispatchEvent(\"success\");\n            } else {\n              a.ka = 6;\n              var k;\n              try {\n                k = 2 < T(a) ? a.f.statusText : \"\";\n              } catch (u) {\n                M(a.r, \"Can not get status: \" + u.message), k = \"\";\n              }\n              a.q = k + \" [\" + Sc(a) + \"]\";\n              Pc(a);\n            }\n          } finally {\n            Qc(a);\n          }\n        }\n      }\n    }\n  }\n}\nfunction Qc(a, b) {\n  if (a.f) {\n    Nc(a);\n    var c = a.f, d = a.fb[0] ? ca : null;\n    a.f = null;\n    a.fb = null;\n    b || a.dispatchEvent(\"ready\");\n    try {\n      c.onreadystatechange = d;\n    } catch (e) {\n      (c = a.r) && c.J(\"Problem encountered resetting onreadystatechange: \" + e.message, void 0);\n    }\n  }\n}\nfunction Nc(a) {\n  a.f && a.cb && (a.f.ontimeout = null);\n  \"number\" == typeof a.bb && (l.clearTimeout(a.bb), a.bb = null);\n}\nf.isActive = function() {\n  return!!this.f;\n};\nfunction T(a) {\n  return a.f ? a.f.readyState : 0;\n}\nfunction Sc(a) {\n  try {\n    return 2 < T(a) ? a.f.status : -1;\n  } catch (b) {\n    return(a = a.r) && a.Z(\"Can not get status: \" + b.message, void 0), -1;\n  }\n}\nfunction Tc(a) {\n  try {\n    return a.f ? a.f.responseText : \"\";\n  } catch (b) {\n    return M(a.r, \"Can not get responseText: \" + b.message), \"\";\n  }\n}\nf.Ib = function() {\n  return n(this.q) ? this.q : String(this.q);\n};\nfunction S(a, b) {\n  return b + \" [\" + a.Mb + \" \" + a.Qa + \" \" + Sc(a) + \"]\";\n}\n;function Uc() {\n  this.Wb = q();\n}\nnew Uc;\nUc.prototype.set = function(a) {\n  this.Wb = a;\n};\nUc.prototype.reset = function() {\n  this.set(q());\n};\nUc.prototype.get = function() {\n  return this.Wb;\n};\nfunction Vc(a) {\n  O.call(this);\n  this.e = a;\n  this.j = {};\n}\ns(Vc, O);\nvar Wc = [];\nf = Vc.prototype;\nf.Ra = function(a, b, c, d) {\n  m(b) || (Wc[0] = b, b = Wc);\n  for (var e = 0;e < b.length;e++) {\n    var g = oc(a, b[e], c || this.handleEvent, d || !1, this.e || this);\n    if (!g) {\n      break;\n    }\n    this.j[g.key] = g;\n  }\n  return this;\n};\nf.vb = function(a, b, c, d, e) {\n  if (m(b)) {\n    for (var g = 0;g < b.length;g++) {\n      this.vb(a, b[g], c, d, e);\n    }\n  } else {\n    c = c || this.handleEvent, e = e || this.e || this, c = pc(c), d = !!d, b = bc(a) ? a.ya(b, c, d, e) : a ? (a = qc(a)) ? a.ya(b, c, d, e) : null : null, b && (uc(b), delete this.j[b.key]);\n  }\n  return this;\n};\nf.Xa = function() {\n  var a = this.j, b = uc, c;\n  for (c in a) {\n    b.call(void 0, a[c], c, a);\n  }\n  this.j = {};\n};\nf.u = function() {\n  Vc.pa.u.call(this);\n  this.Xa();\n};\nf.handleEvent = function() {\n  throw Error(\"EventHandler.handleEvent not implemented\");\n};\nfunction Xc(a, b, c) {\n  O.call(this);\n  this.pc = a;\n  this.ea = b;\n  this.e = c;\n  this.jc = p(this.vc, this);\n}\ns(Xc, O);\nf = Xc.prototype;\nf.Za = !1;\nf.Vb = 0;\nf.l = null;\nf.stop = function() {\n  this.l && (l.clearTimeout(this.l), this.l = null, this.Za = !1);\n};\nf.u = function() {\n  Xc.pa.u.call(this);\n  this.stop();\n};\nf.vc = function() {\n  this.l = null;\n  this.Za && !this.Vb && (this.Za = !1, Yc(this));\n};\nfunction Yc(a) {\n  a.l = Bc(a.jc, a.ea);\n  a.pc.call(a.e);\n}\n;function U(a, b, c, d, e) {\n  this.b = a;\n  this.a = b;\n  this.Y = c;\n  this.B = d;\n  this.Ea = e || 1;\n  this.qa = Zc;\n  this.ob = new Vc(this);\n  this.Ta = new zc;\n  this.Ta.setInterval($c);\n}\nf = U.prototype;\nf.v = null;\nf.F = !1;\nf.ua = null;\nf.xb = null;\nf.Da = null;\nf.sa = null;\nf.U = null;\nf.w = null;\nf.X = null;\nf.k = null;\nf.Ha = 0;\nf.K = null;\nf.ta = null;\nf.q = null;\nf.g = -1;\nf.Zb = !0;\nf.$ = !1;\nf.ma = 0;\nf.Va = null;\nvar Zc = 45E3, $c = 250;\nfunction ad(a, b) {\n  switch(a) {\n    case 0:\n      return \"Non-200 return code (\" + b + \")\";\n    case 1:\n      return \"XMLHTTP failure (no data)\";\n    case 2:\n      return \"HttpConnection timeout\";\n    default:\n      return \"Unknown error\";\n  }\n}\nvar bd = {}, dd = {};\nfunction ed() {\n  return!y || y && 10 <= Ma;\n}\nf = U.prototype;\nf.S = function(a) {\n  this.v = a;\n};\nf.setTimeout = function(a) {\n  this.qa = a;\n};\nf.bc = function(a) {\n  this.ma = a;\n};\nfunction fd(a, b, c) {\n  a.sa = 1;\n  a.U = H(b.n());\n  a.X = c;\n  a.Cb = !0;\n  gd(a, null);\n}\nfunction hd(a, b, c, d, e) {\n  a.sa = 1;\n  a.U = H(b.n());\n  a.X = null;\n  a.Cb = c;\n  e && (a.Zb = !1);\n  gd(a, d);\n}\nfunction gd(a, b) {\n  a.Da = q();\n  id(a);\n  a.w = a.U.n();\n  rb(a.w, \"t\", a.Ea);\n  a.Ha = 0;\n  a.k = a.b.lb(a.b.$a() ? b : null);\n  0 < a.ma && (a.Va = new Xc(p(a.ec, a, a.k), a.ma));\n  a.ob.Ra(a.k, \"readystatechange\", a.Bc);\n  var c;\n  if (a.v) {\n    c = a.v;\n    var d = {}, e;\n    for (e in c) {\n      d[e] = c[e];\n    }\n    c = d;\n  } else {\n    c = {};\n  }\n  a.X ? (a.ta = \"POST\", c[\"Content-Type\"] = \"application/x-www-form-urlencoded\", a.k.send(a.w, a.ta, a.X, c)) : (a.ta = \"GET\", a.Zb && !z && (c.Connection = \"close\"), a.k.send(a.w, a.ta, null, c));\n  a.b.H(jd);\n  if (d = a.X) {\n    for (c = \"\", d = d.split(\"&\"), e = 0;e < d.length;e++) {\n      var g = d[e].split(\"=\");\n      if (1 < g.length) {\n        var h = g[0], g = g[1], k = h.split(\"_\");\n        c = 2 <= k.length && \"type\" == k[1] ? c + (h + \"=\" + g + \"&\") : c + (h + \"=redacted&\");\n      }\n    }\n  } else {\n    c = null;\n  }\n  a.a.info(\"XMLHTTP REQ (\" + a.B + \") [attempt \" + a.Ea + \"]: \" + a.ta + \"\\n\" + a.w + \"\\n\" + c);\n}\nf.Bc = function(a) {\n  a = a.target;\n  var b = this.Va;\n  b && 3 == T(a) ? (this.a.debug(\"Throttling readystatechange.\"), b.l || b.Vb ? b.Za = !0 : Yc(b)) : this.ec(a);\n};\nf.ec = function(a) {\n  try {\n    if (a == this.k) {\n      a: {\n        var b = T(this.k), c = this.k.ka, d = Sc(this.k);\n        if (!ed() || z && !A(\"420+\")) {\n          if (4 > b) {\n            break a;\n          }\n        } else {\n          if (3 > b || 3 == b && !Aa && !Tc(this.k)) {\n            break a;\n          }\n        }\n        this.$ || 4 != b || 7 == c || (8 == c || 0 >= d ? this.b.H(kd) : this.b.H(ld));\n        md(this);\n        var e = Sc(this.k);\n        this.g = e;\n        var g = Tc(this.k);\n        g || this.a.debug(\"No response text for uri \" + this.w + \" status \" + e);\n        this.F = 200 == e;\n        this.a.info(\"XMLHTTP RESP (\" + this.B + \") [ attempt \" + this.Ea + \"]: \" + this.ta + \"\\n\" + this.w + \"\\n\" + b + \" \" + e);\n        this.F ? (4 == b && V(this), this.Cb ? (nd(this, b, g), Aa && this.F && 3 == b && (this.ob.Ra(this.Ta, Ac, this.Ac), this.Ta.start())) : (Ub(this.a, this.B, g, null), od(this, g)), this.F && !this.$ && (4 == b ? this.b.la(this) : (this.F = !1, id(this)))) : (400 == e && 0 < g.indexOf(\"Unknown SID\") ? (this.q = 3, W(), this.a.Z(\"XMLHTTP Unknown SID (\" + this.B + \")\")) : (this.q = 0, W(), this.a.Z(\"XMLHTTP Bad status \" + e + \" (\" + this.B + \")\")), V(this), pd(this));\n      }\n    } else {\n      this.a.Z(\"Called back with an unexpected xmlhttp\");\n    }\n  } catch (h) {\n    this.a.debug(\"Failed call to OnXmlHttpReadyStateChanged_\"), this.k && Tc(this.k) ? Wb(this.a, h, \"ResponseText: \" + Tc(this.k)) : Wb(this.a, h, \"No response text\");\n  } finally {\n  }\n};\nfunction nd(a, b, c) {\n  for (var d = !0;!a.$ && a.Ha < c.length;) {\n    var e = qd(a, c);\n    if (e == dd) {\n      4 == b && (a.q = 4, W(), d = !1);\n      Ub(a.a, a.B, null, \"[Incomplete Response]\");\n      break;\n    } else {\n      if (e == bd) {\n        a.q = 4;\n        W();\n        Ub(a.a, a.B, c, \"[Invalid Chunk]\");\n        d = !1;\n        break;\n      } else {\n        Ub(a.a, a.B, e, null), od(a, e);\n      }\n    }\n  }\n  4 == b && 0 == c.length && (a.q = 1, W(), d = !1);\n  a.F = a.F && d;\n  d || (Ub(a.a, a.B, c, \"[Invalid Chunked Response]\"), V(a), pd(a));\n}\nf.Ac = function() {\n  var a = T(this.k), b = Tc(this.k);\n  this.Ha < b.length && (md(this), nd(this, a, b), this.F && 4 != a && id(this));\n};\nfunction qd(a, b) {\n  var c = a.Ha, d = b.indexOf(\"\\n\", c);\n  if (-1 == d) {\n    return dd;\n  }\n  c = Number(b.substring(c, d));\n  if (isNaN(c)) {\n    return bd;\n  }\n  d += 1;\n  if (d + c > b.length) {\n    return dd;\n  }\n  var e = b.substr(d, c);\n  a.Ha = d + c;\n  return e;\n}\nfunction rd(a, b) {\n  a.Da = q();\n  id(a);\n  var c = b ? window.location.hostname : \"\";\n  a.w = a.U.n();\n  G(a.w, \"DOMAIN\", c);\n  G(a.w, \"t\", a.Ea);\n  try {\n    a.K = new ActiveXObject(\"htmlfile\");\n  } catch (d) {\n    a.a.J(\"ActiveX blocked\");\n    V(a);\n    a.q = 7;\n    W();\n    pd(a);\n    return;\n  }\n  var e = \"<html><body>\";\n  b && (e += '<script>document.domain=\"' + c + '\"\\x3c/script>');\n  e += \"</body></html>\";\n  a.K.open();\n  a.K.write(e);\n  a.K.close();\n  a.K.parentWindow.m = p(a.yc, a);\n  a.K.parentWindow.d = p(a.Ub, a, !0);\n  a.K.parentWindow.rpcClose = p(a.Ub, a, !1);\n  c = a.K.createElement(\"div\");\n  a.K.parentWindow.document.body.appendChild(c);\n  c.innerHTML = '<iframe src=\"' + a.w + '\"></iframe>';\n  a.a.info(\"TRIDENT REQ (\" + a.B + \") [ attempt \" + a.Ea + \"]: GET\\n\" + a.w);\n  a.b.H(jd);\n}\nf.yc = function(a) {\n  Y(p(this.xc, this, a), 0);\n};\nf.xc = function(a) {\n  if (!this.$) {\n    var b = this.a;\n    b.info(\"TRIDENT TEXT (\" + this.B + \"): \" + Vb(b, a));\n    md(this);\n    od(this, a);\n    id(this);\n  }\n};\nf.Ub = function(a) {\n  Y(p(this.wc, this, a), 0);\n};\nf.wc = function(a) {\n  this.$ || (this.a.info(\"TRIDENT TEXT (\" + this.B + \"): \" + a ? \"success\" : \"failure\"), V(this), this.F = a, this.b.la(this), this.b.H(sd));\n};\nf.nc = function() {\n  md(this);\n  this.b.la(this);\n};\nf.cancel = function() {\n  this.$ = !0;\n  V(this);\n};\nfunction id(a) {\n  a.xb = q() + a.qa;\n  td(a, a.qa);\n}\nfunction td(a, b) {\n  if (null != a.ua) {\n    throw Error(\"WatchDog timer not null\");\n  }\n  a.ua = Y(p(a.zc, a), b);\n}\nfunction md(a) {\n  a.ua && (l.clearTimeout(a.ua), a.ua = null);\n}\nf.zc = function() {\n  this.ua = null;\n  var a = q();\n  0 <= a - this.xb ? (this.F && this.a.J(\"Received watchdog timeout even though request loaded successfully\"), this.a.info(\"TIMEOUT: \" + this.w), 2 != this.sa && this.b.H(kd), V(this), this.q = 2, W(), pd(this)) : (this.a.Z(\"WatchDog timer called too early\"), td(this, this.xb - a));\n};\nfunction pd(a) {\n  a.b.Lb() || a.$ || a.b.la(a);\n}\nfunction V(a) {\n  md(a);\n  var b = a.Va;\n  b && \"function\" == typeof b.Ja && b.Ja();\n  a.Va = null;\n  a.Ta.stop();\n  a.ob.Xa();\n  a.k && (b = a.k, a.k = null, b.abort(), b.Ja());\n  a.K && (a.K = null);\n}\nf.Ib = function() {\n  return this.q;\n};\nfunction od(a, b) {\n  try {\n    a.b.Rb(a, b), a.b.H(sd);\n  } catch (c) {\n    Wb(a.a, c, \"Error in httprequest callback\");\n  }\n}\n;function ud(a, b, c, d, e) {\n  (new N).debug(\"TestLoadImageWithRetries: \" + e);\n  if (0 == d) {\n    c(!1);\n  } else {\n    var g = e || 0;\n    d--;\n    vd(a, b, function(e) {\n      e ? c(!0) : l.setTimeout(function() {\n        ud(a, b, c, d, g);\n      }, g);\n    });\n  }\n}\nfunction vd(a, b, c) {\n  function d(a, b) {\n    return function() {\n      try {\n        e.debug(\"TestLoadImage: \" + b), g.onload = null, g.onerror = null, g.onabort = null, g.ontimeout = null, l.clearTimeout(h), c(a);\n      } catch (d) {\n        Wb(e, d);\n      }\n    };\n  }\n  var e = new N;\n  e.debug(\"TestLoadImage: loading \" + a);\n  var g = new Image, h = null;\n  g.onload = d(!0, \"loaded\");\n  g.onerror = d(!1, \"error\");\n  g.onabort = d(!1, \"abort\");\n  g.ontimeout = d(!1, \"timeout\");\n  h = l.setTimeout(function() {\n    if (g.ontimeout) {\n      g.ontimeout();\n    }\n  }, b);\n  g.src = a;\n}\n;function wd(a, b) {\n  this.b = a;\n  this.a = b;\n  this.P = new Yb(0, !0);\n}\nf = wd.prototype;\nf.v = null;\nf.A = null;\nf.Wa = !1;\nf.cc = null;\nf.La = null;\nf.rb = null;\nf.I = null;\nf.c = null;\nf.g = -1;\nf.L = null;\nf.va = null;\nf.S = function(a) {\n  this.v = a;\n};\nf.ac = function(a) {\n  this.P = a;\n};\nf.kb = function(a) {\n  this.I = a;\n  a = xd(this.b, this.I);\n  W();\n  this.cc = q();\n  var b = this.b.Gb;\n  null != b ? (this.L = this.b.correctHostPrefix(b[0]), (this.va = b[1]) ? (this.c = 1, yd(this)) : (this.c = 2, zd(this))) : (rb(a, \"MODE\", \"init\"), this.A = new U(this, this.a, void 0, void 0, void 0), this.A.S(this.v), hd(this.A, a, !1, null, !0), this.c = 0);\n};\nfunction yd(a) {\n  var b = Ad(a.b, a.va, \"/mail/images/cleardot.gif\");\n  H(b);\n  ud(b.toString(), 5E3, p(a.kc, a), 3, 2E3);\n  a.H(jd);\n}\nf.kc = function(a) {\n  if (a) {\n    this.c = 2, zd(this);\n  } else {\n    W();\n    var b = this.b;\n    b.a.debug(\"Test Connection Blocked\");\n    b.g = b.V.g;\n    Z(b, 9);\n  }\n  a && this.H(ld);\n};\nfunction zd(a) {\n  a.a.debug(\"TestConnection: starting stage 2\");\n  var b = a.b.Dc;\n  if (null != b) {\n    a.a.debug(\"TestConnection: skipping stage 2, precomputed result is \" + b ? \"Buffered\" : \"Unbuffered\"), W(), b ? (W(), Bd(a.b, a, !1)) : (W(), Bd(a.b, a, !0));\n  } else {\n    if (a.A = new U(a, a.a, void 0, void 0, void 0), a.A.S(a.v), b = Cd(a.b, a.L, a.I), W(), ed()) {\n      rb(b, \"TYPE\", \"xmlhttp\"), hd(a.A, b, !1, a.L, !1);\n    } else {\n      rb(b, \"TYPE\", \"html\");\n      var c = a.A;\n      a = Boolean(a.L);\n      c.sa = 3;\n      c.U = H(b.n());\n      rd(c, a);\n    }\n  }\n}\nf.lb = function(a) {\n  return this.b.lb(a);\n};\nf.abort = function() {\n  this.A && (this.A.cancel(), this.A = null);\n  this.g = -1;\n};\nf.Lb = function() {\n  return!1;\n};\nf.Rb = function(a, b) {\n  this.g = a.g;\n  if (0 == this.c) {\n    if (this.a.debug(\"TestConnection: Got data for stage 1\"), b) {\n      try {\n        var c = this.P.parse(b);\n      } catch (d) {\n        Wb(this.a, d);\n        Dd(this.b, this);\n        return;\n      }\n      this.L = this.b.correctHostPrefix(c[0]);\n      this.va = c[1];\n    } else {\n      this.a.debug(\"TestConnection: Null responseText\"), Dd(this.b, this);\n    }\n  } else {\n    if (2 == this.c) {\n      if (this.Wa) {\n        W(), this.rb = q();\n      } else {\n        if (\"11111\" == b) {\n          if (W(), this.Wa = !0, this.La = q(), c = this.La - this.cc, ed() || 500 > c) {\n            this.g = 200, this.A.cancel(), this.a.debug(\"Test connection succeeded; using streaming connection\"), W(), Bd(this.b, this, !0);\n          }\n        } else {\n          W(), this.La = this.rb = q(), this.Wa = !1;\n        }\n      }\n    }\n  }\n};\nf.la = function() {\n  this.g = this.A.g;\n  if (!this.A.F) {\n    this.a.debug(\"TestConnection: request failed, in state \" + this.c), 0 == this.c ? W() : 2 == this.c && W(), Dd(this.b, this);\n  } else {\n    if (0 == this.c) {\n      this.a.debug(\"TestConnection: request complete for initial check\"), this.va ? (this.c = 1, yd(this)) : (this.c = 2, zd(this));\n    } else {\n      if (2 == this.c) {\n        this.a.debug(\"TestConnection: request complete for stage 2\");\n        var a = !1;\n        (a = ed() ? this.Wa : 200 > this.rb - this.La ? !1 : !0) ? (this.a.debug(\"Test connection succeeded; using streaming connection\"), W(), Bd(this.b, this, !0)) : (this.a.debug(\"Test connection failed; not using streaming\"), W(), Bd(this.b, this, !1));\n      }\n    }\n  }\n};\nf.$a = function() {\n  return this.b.$a();\n};\nf.isActive = function() {\n  return this.b.isActive();\n};\nf.H = function(a) {\n  this.b.H(a);\n};\nfunction Ed(a, b, c) {\n  this.Bb = a || null;\n  this.c = Fd;\n  this.t = [];\n  this.Q = [];\n  this.a = new N;\n  this.P = new Yb(0, !0);\n  this.Gb = b || null;\n  this.Dc = null != c ? c : null;\n}\nfunction Gd(a, b) {\n  this.Ob = a;\n  this.map = b;\n}\nf = Ed.prototype;\nf.v = null;\nf.xa = null;\nf.p = null;\nf.i = null;\nf.I = null;\nf.Ma = null;\nf.zb = null;\nf.L = null;\nf.hc = !0;\nf.Ba = 0;\nf.sc = 0;\nf.Ka = !1;\nf.e = null;\nf.G = null;\nf.M = null;\nf.aa = null;\nf.V = null;\nf.wb = null;\nf.gc = !0;\nf.za = -1;\nf.Nb = -1;\nf.g = -1;\nf.ba = 0;\nf.ha = 0;\nf.ic = 5E3;\nf.Cc = 1E4;\nf.pb = 2;\nf.Hb = 2E4;\nf.ma = 0;\nf.ab = !1;\nf.ia = 8;\nvar Fd = 1, Hd = new R;\nfunction Id(a) {\n  Q.call(this, \"statevent\", a);\n}\ns(Id, Q);\nfunction Jd(a, b) {\n  Q.call(this, \"timingevent\", a);\n  this.size = b;\n}\ns(Jd, Q);\nvar jd = 1, ld = 2, kd = 3, sd = 4;\nfunction Kd(a) {\n  Q.call(this, \"serverreachability\", a);\n}\ns(Kd, Q);\nvar Xb = \"y2f%\";\nf = Ed.prototype;\nf.kb = function(a, b, c, d, e) {\n  this.a.debug(\"connect()\");\n  W();\n  this.I = b;\n  this.xa = c || {};\n  d && void 0 !== e && (this.xa.OSID = d, this.xa.OAID = e);\n  this.a.debug(\"connectTest_()\");\n  Ld(this) && (this.V = new wd(this, this.a), this.V.S(this.v), this.V.ac(this.P), this.V.kb(a));\n};\nf.disconnect = function() {\n  this.a.debug(\"disconnect()\");\n  Md(this);\n  if (3 == this.c) {\n    var a = this.Ba++, b = this.Ma.n();\n    G(b, \"SID\", this.Y);\n    G(b, \"RID\", a);\n    G(b, \"TYPE\", \"terminate\");\n    Nd(this, b);\n    a = new U(this, this.a, this.Y, a, void 0);\n    a.sa = 2;\n    a.U = H(b.n());\n    b = new Image;\n    b.src = a.U;\n    b.onload = b.onerror = p(a.nc, a);\n    a.Da = q();\n    id(a);\n  }\n  Od(this);\n};\nfunction Md(a) {\n  a.V && (a.V.abort(), a.V = null);\n  a.i && (a.i.cancel(), a.i = null);\n  a.M && (l.clearTimeout(a.M), a.M = null);\n  Pd(a);\n  a.p && (a.p.cancel(), a.p = null);\n  a.G && (l.clearTimeout(a.G), a.G = null);\n}\nf.S = function(a) {\n  this.v = a;\n};\nf.bc = function(a) {\n  this.ma = a;\n};\nf.Lb = function() {\n  return 0 == this.c;\n};\nf.ac = function(a) {\n  this.P = a;\n};\nfunction Qd(a) {\n  a.p || a.G || (a.G = Y(p(a.Tb, a), 0), a.ba = 0);\n}\nf.Tb = function(a) {\n  this.G = null;\n  this.a.debug(\"startForwardChannel_\");\n  if (Ld(this)) {\n    if (this.c == Fd) {\n      if (a) {\n        this.a.J(\"Not supposed to retry the open\");\n      } else {\n        this.a.debug(\"open_()\");\n        this.Ba = Math.floor(1E5 * Math.random());\n        a = this.Ba++;\n        var b = new U(this, this.a, \"\", a, void 0);\n        b.S(this.v);\n        var c = Rd(this), d = this.Ma.n();\n        G(d, \"RID\", a);\n        this.Bb && G(d, \"CVER\", this.Bb);\n        Nd(this, d);\n        fd(b, d, c);\n        this.p = b;\n        this.c = 2;\n      }\n    } else {\n      3 == this.c && (a ? Sd(this, a) : 0 == this.t.length ? this.a.debug(\"startForwardChannel_ returned: nothing to send\") : this.p ? this.a.J(\"startForwardChannel_ returned: connection already in progress\") : (Sd(this), this.a.debug(\"startForwardChannel_ finished, sent request\")));\n    }\n  }\n};\nfunction Sd(a, b) {\n  var c, d;\n  b ? 6 < a.ia ? (a.t = a.Q.concat(a.t), a.Q.length = 0, c = a.Ba - 1, d = Rd(a)) : (c = b.B, d = b.X) : (c = a.Ba++, d = Rd(a));\n  var e = a.Ma.n();\n  G(e, \"SID\", a.Y);\n  G(e, \"RID\", c);\n  G(e, \"AID\", a.za);\n  Nd(a, e);\n  c = new U(a, a.a, a.Y, c, a.ba + 1);\n  c.S(a.v);\n  c.setTimeout(Math.round(0.5 * a.Hb) + Math.round(0.5 * a.Hb * Math.random()));\n  a.p = c;\n  fd(c, e, d);\n}\nfunction Nd(a, b) {\n  if (a.e) {\n    var c = a.e.getAdditionalParams(a);\n    c && D(c, function(a, c) {\n      G(b, c, a);\n    });\n  }\n}\nfunction Rd(a) {\n  var b = Math.min(a.t.length, 1E3), c = [\"count=\" + b], d;\n  6 < a.ia && 0 < b ? (d = a.t[0].Ob, c.push(\"ofs=\" + d)) : d = 0;\n  for (var e = 0;e < b;e++) {\n    var g = a.t[e].Ob, h = a.t[e].map, g = 6 >= a.ia ? e : g - d;\n    try {\n      D(h, function(a, b) {\n        c.push(\"req\" + g + \"_\" + b + \"=\" + encodeURIComponent(a));\n      });\n    } catch (k) {\n      c.push(\"req\" + g + \"_type=\" + encodeURIComponent(\"_badmap\")), a.e && a.e.badMapError(a, h);\n    }\n  }\n  a.Q = a.Q.concat(a.t.splice(0, b));\n  return c.join(\"&\");\n}\nfunction Td(a) {\n  a.i || a.M || (a.yb = 1, a.M = Y(p(a.Sb, a), 0), a.ha = 0);\n}\nfunction Ud(a) {\n  if (a.i || a.M) {\n    return a.a.J(\"Request already in progress\"), !1;\n  }\n  if (3 <= a.ha) {\n    return!1;\n  }\n  a.a.debug(\"Going to retry GET\");\n  a.yb++;\n  a.M = Y(p(a.Sb, a), Vd(a, a.ha));\n  a.ha++;\n  return!0;\n}\nf.Sb = function() {\n  this.M = null;\n  if (Ld(this)) {\n    this.a.debug(\"Creating new HttpRequest\");\n    this.i = new U(this, this.a, this.Y, \"rpc\", this.yb);\n    this.i.S(this.v);\n    this.i.bc(this.ma);\n    var a = this.zb.n();\n    G(a, \"RID\", \"rpc\");\n    G(a, \"SID\", this.Y);\n    G(a, \"CI\", this.wb ? \"0\" : \"1\");\n    G(a, \"AID\", this.za);\n    Nd(this, a);\n    if (ed()) {\n      G(a, \"TYPE\", \"xmlhttp\"), hd(this.i, a, !0, this.L, !1);\n    } else {\n      G(a, \"TYPE\", \"html\");\n      var b = this.i, c = Boolean(this.L);\n      b.sa = 3;\n      b.U = H(a.n());\n      rd(b, c);\n    }\n    this.a.debug(\"New Request created\");\n  }\n};\nfunction Ld(a) {\n  if (a.e) {\n    var b = a.e.okToMakeRequest(a);\n    if (0 != b) {\n      return a.a.debug(\"Handler returned error code from okToMakeRequest\"), Z(a, b), !1;\n    }\n  }\n  return!0;\n}\nfunction Bd(a, b, c) {\n  a.a.debug(\"Test Connection Finished\");\n  a.wb = a.gc && c;\n  a.g = b.g;\n  a.a.debug(\"connectChannel_()\");\n  a.lc(Fd, 0);\n  a.Ma = xd(a, a.I);\n  Qd(a);\n}\nfunction Dd(a, b) {\n  a.a.debug(\"Test Connection Failed\");\n  a.g = b.g;\n  Z(a, 2);\n}\nf.Rb = function(a, b) {\n  if (0 != this.c && (this.i == a || this.p == a)) {\n    if (this.g = a.g, this.p == a && 3 == this.c) {\n      if (7 < this.ia) {\n        var c;\n        try {\n          c = this.P.parse(b);\n        } catch (d) {\n          c = null;\n        }\n        if (m(c) && 3 == c.length) {\n          var e = c;\n          if (0 == e[0]) {\n            a: {\n              if (this.a.debug(\"Server claims our backchannel is missing.\"), this.M) {\n                this.a.debug(\"But we are currently starting the request.\");\n              } else {\n                if (this.i) {\n                  if (this.i.Da + 3E3 < this.p.Da) {\n                    Pd(this), this.i.cancel(), this.i = null;\n                  } else {\n                    break a;\n                  }\n                } else {\n                  this.a.Z(\"We do not have a BackChannel established\");\n                }\n                Ud(this);\n                W();\n              }\n            }\n          } else {\n            this.Nb = e[1], c = this.Nb - this.za, 0 < c && (e = e[2], this.a.debug(e + \" bytes (in \" + c + \" arrays) are outstanding on the BackChannel\"), 37500 > e && this.wb && 0 == this.ha && !this.aa && (this.aa = Y(p(this.tc, this), 6E3)));\n          }\n        } else {\n          this.a.debug(\"Bad POST response data returned\"), Z(this, 11);\n        }\n      } else {\n        b != Xb && (this.a.debug(\"Bad data returned - missing/invald magic cookie\"), Z(this, 11));\n      }\n    } else {\n      if (this.i == a && Pd(this), !/^[\\s\\xa0]*$/.test(b)) {\n        c = this.P.parse(b);\n        for (var e = this.e && this.e.channelHandleMultipleArrays ? [] : null, g = 0;g < c.length;g++) {\n          var h = c[g];\n          this.za = h[0];\n          h = h[1];\n          2 == this.c ? \"c\" == h[0] ? (this.Y = h[1], this.L = this.correctHostPrefix(h[2]), h = h[3], this.ia = null != h ? h : 6, this.c = 3, this.e && this.e.channelOpened(this), this.zb = Cd(this, this.L, this.I), Td(this)) : \"stop\" == h[0] && Z(this, 7) : 3 == this.c && (\"stop\" == h[0] ? (e && 0 != e.length && (this.e.channelHandleMultipleArrays(this, e), e.length = 0), Z(this, 7)) : \"noop\" != h[0] && (e ? e.push(h) : this.e && this.e.channelHandleArray(this, h)), this.ha = 0);\n        }\n        e && 0 != e.length && this.e.channelHandleMultipleArrays(this, e);\n      }\n    }\n  }\n};\nf.correctHostPrefix = function(a) {\n  return this.hc ? this.e ? this.e.correctHostPrefix(a) : a : null;\n};\nf.tc = function() {\n  null != this.aa && (this.aa = null, this.i.cancel(), this.i = null, Ud(this), W());\n};\nfunction Pd(a) {\n  null != a.aa && (l.clearTimeout(a.aa), a.aa = null);\n}\nf.la = function(a) {\n  this.a.debug(\"Request complete\");\n  var b;\n  if (this.i == a) {\n    Pd(this), this.i = null, b = 2;\n  } else {\n    if (this.p == a) {\n      this.p = null, b = 1;\n    } else {\n      return;\n    }\n  }\n  this.g = a.g;\n  if (0 != this.c) {\n    if (a.F) {\n      1 == b ? (q(), Hd.dispatchEvent(new Jd(Hd, a.X ? a.X.length : 0)), Qd(this), this.Q.length = 0) : Td(this);\n    } else {\n      var c = a.Ib();\n      if (3 == c || 7 == c || 0 == c && 0 < this.g) {\n        this.a.debug(\"Not retrying due to error type\");\n      } else {\n        this.a.debug(\"Maybe retrying, last error: \" + ad(c, this.g));\n        var d;\n        if (d = 1 == b) {\n          this.p || this.G ? (this.a.J(\"Request already in progress\"), d = !1) : this.c == Fd || this.ba >= (this.Ka ? 0 : this.pb) ? d = !1 : (this.a.debug(\"Going to retry POST\"), this.G = Y(p(this.Tb, this, a), Vd(this, this.ba)), this.ba++, d = !0);\n        }\n        if (d || 2 == b && Ud(this)) {\n          return;\n        }\n        this.a.debug(\"Exceeded max number of retries\");\n      }\n      this.a.debug(\"Error: HTTP request failed\");\n      switch(c) {\n        case 1:\n          Z(this, 5);\n          break;\n        case 4:\n          Z(this, 10);\n          break;\n        case 3:\n          Z(this, 6);\n          break;\n        case 7:\n          Z(this, 12);\n          break;\n        default:\n          Z(this, 2);\n      }\n    }\n  }\n};\nfunction Vd(a, b) {\n  var c = a.ic + Math.floor(Math.random() * a.Cc);\n  a.isActive() || (a.a.debug(\"Inactive channel\"), c *= 2);\n  return c * b;\n}\nf.lc = function(a) {\n  if (!(0 <= Xa(arguments, this.c))) {\n    throw Error(\"Unexpected channel state: \" + this.c);\n  }\n};\nfunction Z(a, b) {\n  a.a.info(\"Error code \" + b);\n  if (2 == b || 9 == b) {\n    var c = null;\n    a.e && (c = a.e.getNetworkTestImageUri(a));\n    var d = p(a.Fc, a);\n    c || (c = new E(\"//www.google.com/images/cleardot.gif\"), H(c));\n    vd(c.toString(), 1E4, d);\n  } else {\n    W();\n  }\n  Wd(a, b);\n}\nf.Fc = function(a) {\n  a ? (this.a.info(\"Successfully pinged google.com\"), W()) : (this.a.info(\"Failed to ping google.com\"), W(), Wd(this, 8));\n};\nfunction Wd(a, b) {\n  a.a.debug(\"HttpChannel: error - \" + b);\n  a.c = 0;\n  a.e && a.e.channelError(a, b);\n  Od(a);\n  Md(a);\n}\nfunction Od(a) {\n  a.c = 0;\n  a.g = -1;\n  if (a.e) {\n    if (0 == a.Q.length && 0 == a.t.length) {\n      a.e.channelClosed(a);\n    } else {\n      a.a.debug(\"Number of undelivered maps, pending: \" + a.Q.length + \", outgoing: \" + a.t.length);\n      var b = bb(a.Q), c = bb(a.t);\n      a.Q.length = 0;\n      a.t.length = 0;\n      a.e.channelClosed(a, b, c);\n    }\n  }\n}\nfunction xd(a, b) {\n  var c = Ad(a, null, b);\n  a.a.debug(\"GetForwardChannelUri: \" + c);\n  return c;\n}\nfunction Cd(a, b, c) {\n  b = Ad(a, a.$a() ? b : null, c);\n  a.a.debug(\"GetBackChannelUri: \" + b);\n  return b;\n}\nfunction Ad(a, b, c) {\n  var d = tb(c);\n  if (\"\" != d.ja) {\n    b && gb(d, b + \".\" + d.ja), hb(d, d.Ca);\n  } else {\n    var e = window.location, d = ub(e.protocol, b ? b + \".\" + e.hostname : e.hostname, e.port, c)\n  }\n  a.xa && D(a.xa, function(a, b) {\n    G(d, b, a);\n  });\n  G(d, \"VER\", a.ia);\n  Nd(a, d);\n  return d;\n}\nf.lb = function(a) {\n  if (a && !this.ab) {\n    throw Error(\"Can't create secondary domain capable XhrIo object.\");\n  }\n  a = new Ic;\n  a.dc = this.ab;\n  return a;\n};\nf.isActive = function() {\n  return!!this.e && this.e.isActive(this);\n};\nfunction Y(a, b) {\n  if (!fa(a)) {\n    throw Error(\"Fn must not be null and must be a function\");\n  }\n  return l.setTimeout(function() {\n    a();\n  }, b);\n}\nf.H = function() {\n  Hd.dispatchEvent(new Kd(Hd));\n};\nfunction W() {\n  Hd.dispatchEvent(new Id(Hd));\n}\nf.$a = function() {\n  return this.ab || !ed();\n};\nfunction Xd() {\n}\nf = Xd.prototype;\nf.channelHandleMultipleArrays = null;\nf.okToMakeRequest = function() {\n  return 0;\n};\nf.channelOpened = function() {\n};\nf.channelHandleArray = function() {\n};\nf.channelError = function() {\n};\nf.channelClosed = function() {\n};\nf.getAdditionalParams = function() {\n  return{};\n};\nf.getNetworkTestImageUri = function() {\n  return null;\n};\nf.isActive = function() {\n  return!0;\n};\nf.badMapError = function() {\n};\nf.correctHostPrefix = function(a) {\n  return a;\n};\nvar $, Yd;\nYd = {0:\"Ok\", 4:\"User is logging out\", 6:\"Unknown session ID\", 7:\"Stopped by server\", 8:\"General network error\", 2:\"Request failed\", 9:\"Blocked by a network administrator\", 5:\"No data from server\", 10:\"Got bad data from the server\", 11:\"Got a bad response from the server\"};\n$ = function(a, b) {\n  var c, d, e, g, h, k, u, K, v, r, Ka, w, X, cd;\n  if (!(this instanceof $)) {\n    return new $(a, b);\n  }\n  r = this;\n  a || (a = \"channel\");\n  a.match(/:\\/\\//) && a.replace(/^ws/, \"http\");\n  b || (b = {});\n  m(b || \"string\" === typeof b) && (b = {});\n  K = b.reconnectTime || 3E3;\n  c = b.extraHeaders || null;\n  d = b.extraParams || null;\n  null !== b.affinity && (d || (d = {}), b.affinityParam || (b.affinityParam = \"a\"), this.affinity = b.affinity || sa(), d[b.affinityParam] = this.affinity);\n  X = function(a) {\n    r.readyState = r.readyState = a;\n  };\n  X(this.CLOSED);\n  w = null;\n  k = null != (cd = b.prev) ? cd.Ec : void 0;\n  e = function(a, b, c, d, e) {\n    try {\n      return \"function\" === typeof r[a] ? r[a](c, d, e) : void 0;\n    } catch (g) {\n      throw \"undefined\" !== typeof console && null !== console && console.error(g.stack), g;\n    }\n  };\n  g = new Xd;\n  g.channelOpened = function() {\n    k = w;\n    X($.OPEN);\n    return e(\"onopen\");\n  };\n  h = null;\n  g.channelError = function(a, b) {\n    var c;\n    c = Yd[b];\n    h = b;\n    r.readyState !== $.CLOSED && X($.hb);\n    return e(\"onerror\", 0, c, b);\n  };\n  v = null;\n  g.channelClosed = function(a, c, d) {\n    var g;\n    if (r.readyState !== $.CLOSED) {\n      return w = null, a = h ? Yd[h] : \"Closed\", X($.CLOSED), b.reconnect && 7 !== h && 0 !== h && (g = 6 === h ? 0 : K, clearTimeout(v), v = setTimeout(u, g)), e(\"onclose\", 0, a, c, d), h = null;\n    }\n  };\n  g.channelHandleArray = function(a, b) {\n    return e(\"onmessage\", 0, {type:\"message\", data:b});\n  };\n  u = function() {\n    if (w) {\n      throw Error(\"Reconnect() called from invalid state\");\n    }\n    X($.CONNECTING);\n    e(\"onconnecting\");\n    clearTimeout(v);\n    r.Ec = w = new Ed(b.appVersion, null != k ? k.Gb : void 0);\n    b.crossDomainXhr && (w.ab = !0);\n    w.e = g;\n    c && w.S(c);\n    h = null;\n    if (b.failFast) {\n      var t = w;\n      t.Ka = !0;\n      t.a.info(\"setFailFast: true\");\n      (t.p || t.G) && t.ba > (t.Ka ? 0 : t.pb) && (t.a.info(\"Retry count \" + t.ba + \" > new maxRetries \" + (t.Ka ? 0 : t.pb) + \". Fail immediately!\"), t.p ? (t.p.cancel(), t.la(t.p)) : (l.clearTimeout(t.G), t.G = null, Z(t, 2)));\n    }\n    return w.kb(\"\" + a + \"/test\", \"\" + a + \"/bind\", d, null != k ? k.Y : void 0, null != k ? k.za : void 0);\n  };\n  this.open = function() {\n    if (r.readyState !== r.CLOSED) {\n      throw Error(\"Already open\");\n    }\n    return u();\n  };\n  this.close = function() {\n    clearTimeout(v);\n    h = 0;\n    if (r.readyState !== $.CLOSED) {\n      return X($.hb), w.disconnect();\n    }\n  };\n  this.sendMap = Ka = function(a) {\n    var b;\n    if ((b = r.readyState) !== $.hb && b !== $.CLOSED) {\n      b = w;\n      if (0 == b.c) {\n        throw Error(\"Invalid operation: sending map when state is closed\");\n      }\n      1E3 == b.t.length && b.a.J(\"Already have 1000 queued maps upon queueing \" + yb(a));\n      b.t.push(new Gd(b.sc++, a));\n      2 != b.c && 3 != b.c || Qd(b);\n    }\n  };\n  this.send = function(a) {\n    return \"string\" === typeof a ? Ka({_S:a}) : Ka({JSON:yb(a)});\n  };\n  u();\n};\n$.prototype.canSendWhileConnecting = $.canSendWhileConnecting = !0;\n$.prototype.canSendJSON = $.canSendJSON = !0;\n$.prototype.CONNECTING = $.CONNECTING = $.CONNECTING = 0;\n$.prototype.OPEN = $.OPEN = $.OPEN = 1;\n$.prototype.CLOSING = $.CLOSING = $.hb = 2;\n$.prototype.CLOSED = $.CLOSED = $.CLOSED = 3;\n(\"undefined\" !== typeof exports && null !== exports ? exports : window).BCSocket = $;\n\n})();\n",
    "module.exports = Socket;\n\nvar BCSocket = require('browserchannel/dist/bcsocket-uncompressed').BCSocket;\n\nfunction Socket(options) {\n  this._options = options;\n  this._messageQueue = [];\n  this._connectedOnce = false;\n  this._attemptNum = 0;\n  this._url = getWebSocketURL(options);\n\n  if (supportWebSockets() && !options.browserChannelOnly) {\n    this._createWebSocket();\n  } else {\n    this._createBrowserChannel();\n  }\n}\n\nSocket.prototype._createWebSocket = function() {\n\n  this._type = 'websocket';\n  this._socket = new WebSocket(this._url);\n\n  this.open = this._createWebSocket.bind(this);\n  this._syncState();\n\n  this._socket.onmessage = this._ws_onmessage.bind(this);\n  this._socket.onopen = this._ws_onopen.bind(this);\n  this._socket.onclose = this._ws_onclose.bind(this);\n\n};\n\nSocket.prototype._createBrowserChannel = function() {\n  this._type = 'browserchannel';\n  this._socket = BCSocket(this._options.base, this._options);\n\n  this.open = this._createBrowserChannel.bind(this);\n  this._syncState();\n\n  this._socket.onmessage = this._bc_onmessage.bind(this);\n  this._socket.onopen = this._bc_onopen.bind(this);\n  this._socket.onclose = this._bc_onclose.bind(this);\n};\n\nSocket.prototype._ws_onmessage = function(message) {\n  this._syncState();\n  message.data = JSON.parse(message.data);\n  this.onmessage && this.onmessage(message);\n};\n\nSocket.prototype._ws_onopen = function(event) {\n  this._attemptNum = 0;\n  this._connectedOnce = true;\n\n  this._syncState();\n  this._flushQueue();\n\n  this.onopen && this.onopen(event);\n};\n\nSocket.prototype._ws_onclose = function(event) {\n  this._syncState();\n  console.log('WebSocket: connection is broken', event);\n\n  this.onclose && this.onclose(event);\n\n  if (!this._connectedOnce) {\n    return this._createBrowserChannel();\n  }\n\n  var socket = this;\n\n  if (this._options.reconnect && !event.wasClean) {\n    setTimeout(function(){\n      if (socket.readyState === socket.CLOSED) {\n        socket._createWebSocket();\n      }\n    }, this._getTimeout());\n  }\n  this._attemptNum++;\n};\n\nSocket.prototype._getTimeout = function(){\n  var base = this._options.timeout;\n  var increment = this._options.timeoutIncrement * this._attemptNum;\n  var maxTimeout = base + increment;\n  return getRandom(maxTimeout / 3, maxTimeout);\n};\n\nSocket.prototype._bc_onmessage = function(data) {\n  this._syncState();\n  this.onmessage && this.onmessage(data);\n};\n\nSocket.prototype._bc_onopen = function(event) {\n  this._syncState();\n  this.onopen && this.onopen(event);\n};\n\nSocket.prototype._bc_onclose = function(event) {\n  this._syncState();\n  this.onclose && this.onclose(event);\n};\n\nSocket.prototype._flushQueue = function(){\n  while (this._messageQueue.length !== 0) {\n    var data = this._messageQueue.shift();\n    this._send(data);\n  }\n};\n\nSocket.prototype._send = function(data){\n  if (this._type === 'websocket' && (typeof data !== 'string')) data = JSON.stringify(data);\n\n  this._socket.send(data);\n};\n\nSocket.prototype.send = function(data){\n  if (this._type === 'websocket') {\n    if (this._socket.readyState === WebSocket.OPEN && this._messageQueue.length === 0) {\n      this._send(data);\n    } else {\n      this._messageQueue.push(data);\n    }\n  } else {\n    this._send(data);\n  }\n};\n\nSocket.prototype.close = function(){\n  this._socket.close();\n};\n\nSocket.prototype._syncState = function(){\n  this.readyState = this._socket.readyState;\n};\n\nSocket.prototype.reconnect = function(){\n  if (this._type === 'websocket' && this.readyState === this.CLOSED){\n    this._createWebSocket();\n  }\n};\n\n// ShareJS constants\nSocket.prototype.canSendWhileConnecting = true;\nSocket.prototype.canSendJSON = true;\n\n// WebSocket constants\nSocket.prototype.CONNECTING = 0;\nSocket.prototype.OPEN = 1;\nSocket.prototype.CLOSING = 2;\nSocket.prototype.CLOSED = 3;\n\nfunction getRandom(min, max){\n  return Math.random() * (max - min) + min;\n}\n\nfunction supportWebSockets(){\n  // The condition is from Modernizr\n  // https://github.com/Modernizr/Modernizr/blob/master/feature-detects/websockets.js#L28\n  return 'WebSocket' in window && window.WebSocket.CLOSING === 2;\n}\n\nfunction getWebSocketURL(options){\n  var port;\n\n  if (window.location && window.location.port) {\n    port = \":\" + window.location.port;\n  }\n\n  var srvPort = options.srvPort;\n  var srvSecurePort = options.srvSecurePort;\n\n  var srvHost = options.srvHost || window.location.hostname;\n  var srvProtocol = options.srvProtocol || window.location.protocol;\n\n  var protocol = (srvProtocol === 'https:' ? 'wss:' : 'ws:');\n\n  if (protocol === 'ws:' && srvPort) {\n    port = \":\" + srvPort;\n  } else if (protocol === 'wss:' && srvSecurePort) {\n    port = \":\" + srvSecurePort;\n  }\n  return protocol + '//' + srvHost + (port || \"\") + options.base;\n}\n\n// Maybe need to use reconnection timing algorithm from\n// http://blog.johnryding.com/post/78544969349/how-to-reconnect-web-sockets-in-a-realtime-web-app\n",
    "var racer = require('racer');\nvar Socket = require('./socket');\nvar CLIENT_OPTIONS = JSON.parse('{\"base\":\"/channel\",\"reconnect\":true,\"browserChannelOnly\":false,\"timeout\":10000,\"timeoutIncrement\":10000}');\n\nracer.Model.prototype._createSocket = function(bundle) {\n  return new Socket(CLIENT_OPTIONS);\n};\n\n",
    "// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n",
    "\n/**\n * Module dependencies.\n */\n\n/**\n * toString ref.\n */\n\nvar toString = {}.toString;\n\n/**\n * Return ETag for `body`.\n *\n * @param {String|Buffer} body\n * @return {String}\n * @api private\n */\n\nexports.etag = function(body){\n  return '\"' + crc32.signed(body) + '\"';\n};\n\n/**\n * Make `locals()` bound to the given `obj`.\n *\n * This is used for `app.locals` and `res.locals`.\n *\n * @param {Object} obj\n * @return {Function}\n * @api private\n */\n\nexports.locals = function(obj){\n  function locals(obj){\n    for (var key in obj) locals[key] = obj[key];\n    return obj;\n  };\n\n  return locals;\n};\n\n/**\n * Check if `path` looks absolute.\n *\n * @param {String} path\n * @return {Boolean}\n * @api private\n */\n\nexports.isAbsolute = function(path){\n  if ('/' == path[0]) return true;\n  if (':' == path[1] && '\\\\' == path[2]) return true;\n};\n\n/**\n * Flatten the given `arr`.\n *\n * @param {Array} arr\n * @return {Array}\n * @api private\n */\n\nexports.flatten = function(arr, ret){\n  var ret = ret || []\n    , len = arr.length;\n  for (var i = 0; i < len; ++i) {\n    if (Array.isArray(arr[i])) {\n      exports.flatten(arr[i], ret);\n    } else {\n      ret.push(arr[i]);\n    }\n  }\n  return ret;\n};\n\n/**\n * Normalize the given `type`, for example \"html\" becomes \"text/html\".\n *\n * @param {String} type\n * @return {Object}\n * @api private\n */\n\nexports.normalizeType = function(type){\n  return ~type.indexOf('/')\n    ? acceptParams(type)\n    : { value: mime.lookup(type), params: {} };\n};\n\n/**\n * Normalize `types`, for example \"html\" becomes \"text/html\".\n *\n * @param {Array} types\n * @return {Array}\n * @api private\n */\n\nexports.normalizeTypes = function(types){\n  var ret = [];\n\n  for (var i = 0; i < types.length; ++i) {\n    ret.push(exports.normalizeType(types[i]));\n  }\n\n  return ret;\n};\n\n/**\n * Return the acceptable type in `types`, if any.\n *\n * @param {Array} types\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.acceptsArray = function(types, str){\n  // accept anything when Accept is not present\n  if (!str) return types[0];\n\n  // parse\n  var accepted = exports.parseAccept(str)\n    , normalized = exports.normalizeTypes(types)\n    , len = accepted.length;\n\n  for (var i = 0; i < len; ++i) {\n    for (var j = 0, jlen = types.length; j < jlen; ++j) {\n      if (exports.accept(normalized[j], accepted[i])) {\n        return types[j];\n      }\n    }\n  }\n};\n\n/**\n * Check if `type(s)` are acceptable based on\n * the given `str`.\n *\n * @param {String|Array} type(s)\n * @param {String} str\n * @return {Boolean|String}\n * @api private\n */\n\nexports.accepts = function(type, str){\n  if ('string' == typeof type) type = type.split(/ *, */);\n  return exports.acceptsArray(type, str);\n};\n\n/**\n * Check if `type` array is acceptable for `other`.\n *\n * @param {Object} type\n * @param {Object} other\n * @return {Boolean}\n * @api private\n */\n\nexports.accept = function(type, other){\n  var t = type.value.split('/');\n  return (t[0] == other.type || '*' == other.type)\n    && (t[1] == other.subtype || '*' == other.subtype)\n    && paramsEqual(type.params, other.params);\n};\n\n/**\n * Check if accept params are equal.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Boolean}\n * @api private\n */\n\nfunction paramsEqual(a, b){\n  return !Object.keys(a).some(function(k) {\n    return a[k] != b[k];\n  });\n}\n\n/**\n * Parse accept `str`, returning\n * an array objects containing\n * `.type` and `.subtype` along\n * with the values provided by\n * `parseQuality()`.\n *\n * @param {Type} name\n * @return {Type}\n * @api private\n */\n\nexports.parseAccept = function(str){\n  return exports\n    .parseParams(str)\n    .map(function(obj){\n      var parts = obj.value.split('/');\n      obj.type = parts[0];\n      obj.subtype = parts[1];\n      return obj;\n    });\n};\n\n/**\n * Parse quality `str`, returning an\n * array of objects with `.value`,\n * `.quality` and optional `.params`\n *\n * @param {String} str\n * @return {Array}\n * @api private\n */\n\nexports.parseParams = function(str){\n  return str\n    .split(/ *, */)\n    .map(acceptParams)\n    .filter(function(obj){\n      return obj.quality;\n    })\n    .sort(function(a, b){\n      if (a.quality === b.quality) {\n        return a.originalIndex - b.originalIndex;\n      } else {\n        return b.quality - a.quality;\n      }\n    });\n};\n\n/**\n * Parse accept params `str` returning an\n * object with `.value`, `.quality` and `.params`.\n * also includes `.originalIndex` for stable sorting\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction acceptParams(str, index) {\n  var parts = str.split(/ *; */);\n  var ret = { value: parts[0], quality: 1, params: {}, originalIndex: index };\n\n  for (var i = 1; i < parts.length; ++i) {\n    var pms = parts[i].split(/ *= */);\n    if ('q' == pms[0]) {\n      ret.quality = parseFloat(pms[1]);\n    } else {\n      ret.params[pms[0]] = pms[1];\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {String} html\n * @return {String}\n * @api private\n */\n\nexports.escape = function(html) {\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\n/**\n * Normalize the given path string,\n * returning a regular expression.\n *\n * An empty array should be passed,\n * which will contain the placeholder\n * key names. For example \"/user/:id\" will\n * then contain [\"id\"].\n *\n * @param  {String|RegExp|Array} path\n * @param  {Array} keys\n * @param  {Boolean} sensitive\n * @param  {Boolean} strict\n * @return {RegExp}\n * @api private\n */\n\nexports.pathRegexp = function(path, keys, sensitive, strict) {\n  if (toString.call(path) == '[object RegExp]') return path;\n  if (Array.isArray(path)) path = '(' + path.join('|') + ')';\n  path = path\n    .concat(strict ? '' : '/?')\n    .replace(/\\/\\(/g, '(?:/')\n    .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?(\\*)?/g, function(_, slash, format, key, capture, optional, star){\n      keys.push({ name: key, optional: !! optional });\n      slash = slash || '';\n      return ''\n        + (optional ? '' : slash)\n        + '(?:'\n        + (optional ? slash : '')\n        + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')'\n        + (optional || '')\n        + (star ? '(/*)?' : '');\n    })\n    .replace(/([\\/.])/g, '\\\\$1')\n    .replace(/\\*/g, '(.*)');\n  return new RegExp('^' + path + '$', sensitive ? '' : 'i');\n}\n",
    "\n/**\n * Module dependencies.\n */\n\nvar utils = require('../utils');\n\n/**\n * Expose `Route`.\n */\n\nmodule.exports = Route;\n\n/**\n * Initialize `Route` with the given HTTP `method`, `path`,\n * and an array of `callbacks` and `options`.\n *\n * Options:\n *\n *   - `sensitive`    enable case-sensitive routes\n *   - `strict`       enable strict matching for trailing slashes\n *\n * @param {String} method\n * @param {String} path\n * @param {Array} callbacks\n * @param {Object} options.\n * @api private\n */\n\nfunction Route(method, path, callbacks, options) {\n  options = options || {};\n  this.path = path;\n  this.method = method;\n  this.callbacks = callbacks;\n  this.regexp = utils.pathRegexp(path\n    , this.keys = []\n    , options.sensitive\n    , options.strict);\n}\n\n/**\n * Check if this route matches `path`, if so\n * populate `.params`.\n *\n * @param {String} path\n * @return {Boolean}\n * @api private\n */\n\nRoute.prototype.match = function(path){\n  var keys = this.keys\n    , params = this.params = []\n    , m = this.regexp.exec(path);\n\n  if (!m) return false;\n\n  for (var i = 1, len = m.length; i < len; ++i) {\n    var key = keys[i - 1];\n\n    var val = 'string' == typeof m[i]\n      ? decodeURIComponent(m[i])\n      : m[i];\n\n    if (key) {\n      params[key.name] = val;\n    } else {\n      params.push(val);\n    }\n  }\n\n  return true;\n};\n",
    "'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n",
    "'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n",
    "'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = obj.join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (isArray(obj)) {\n            pushToArray(values, stringify(\n                obj[key],\n                typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix,\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        } else {\n            pushToArray(values, stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        }\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n",
    "'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\n// This is what browsers will submit when the  character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the  character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = options.decoder(part.slice(pos + 1), defaults.decoder, charset, 'value');\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n            val = val.split(',');\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new Error('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n",
    "'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n",
    "/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n",
    "'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n",
    "'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n",
    "var qs = require('qs')\nvar nodeUrl = require('url');\n\nmodule.exports = {\n  render: render\n, isTransitional: isTransitional\n, mapRoute: mapRoute\n}\n\nfunction isTransitional(pattern) {\n  return pattern.hasOwnProperty('from') && pattern.hasOwnProperty('to')\n}\n\nfunction mapRoute(from, params) {\n  var i = params.url.indexOf('?')\n  var queryString = (~i) ? params.url.slice(i) : ''\n  // If the route looks like /:a/:b?/:c/:d?\n  // and :b and :d are missing, return /a/c\n  // Thus, skip the / if the value is missing\n  var i = 0\n  var path = from.replace(/\\/(?:(?:\\:([^?\\/:*(]+)(?:\\([^)]+\\))?)|\\*)(\\?)?/g, onMatch)\n  function onMatch(match, key, optional) {\n    var value = key ? params[key] : params[i++]\n    return (optional && value == null) ? '' : '/' + encodeURIComponent(value)\n  }\n  return path + queryString\n}\n\nfunction render(history, options, e) {\n  var req = new RenderReq(history.app.page, history.routes, options, e)\n  req.routeTransitional(0, function() {\n    req.page = history.page()\n    req.routeQueue(0, function() {\n      // Cancel rendering by this app if no routes match\n      req.cancel()\n    })\n  })\n}\n\nfunction RenderReq(page, routes, options, e) {\n  this.page = page\n  this.options = options\n  this.e = e\n  this.setUrl(options.url.replace(/#.*/, ''))\n  var queryString = nodeUrl.parse(this.url).query;\n  this.query = queryString ? qs.parse(queryString) : {}\n  this.method = options.method\n  this.body = options.body || {}\n  this.setPrevious(options.previous)\n  this.transitional = routes.transitional[this.method]\n  this.queue = routes.queue[this.method]\n  this.app = routes.app\n}\n\nRenderReq.prototype.cancel = function() {\n  var options = this.options\n  // Don't do anything if this is the result of an event, since the\n  // appropriate action will happen by default\n  if (this.e || options.noNavigate) return\n  // Otherwise, manually perform appropriate action\n  if (options.form) {\n    options.form.setAttribute('data-router-ignore', '')\n    options.form.submit()\n  } else {\n    window.location.assign(options.url)\n  }\n}\n\nRenderReq.prototype.setUrl = function(url) {\n  this.url = url\n  this.path = url.replace(/\\?.*/, '')\n}\nRenderReq.prototype.setPrevious = function(previous) {\n  this.previous = previous\n  this.previousPath = previous && previous.replace(/\\?.*/, '')\n}\n\nRenderReq.prototype.routeTransitional = function(i, next) {\n  i || (i = 0)\n  var item\n  while (item = this.transitional[i++]) {\n    if (!item.to.match(this.path) || !item.from.match(this.previousPath)) continue\n    var req = this\n    var params = this.routeParams(item.to)\n    // Even though we don't need to do anything after a done, pass a\n    // no op function, so that routes can expect it to be defined\n    function done() {}\n    this.onMatch(item.to, params, function(err) {\n      if (err) return req.cancel()\n      req.routeTransitional(i, next)\n    }, done)\n    return\n  }\n  next()\n}\n\nRenderReq.prototype.routeQueue = function(i, next) {\n  i || (i = 0)\n  var route\n  while (route = this.queue[i++]) {\n    if (!route.match(this.path)) continue\n    var req = this\n    var params = this.routeParams(route)\n    this.onMatch(route, params, function(err) {\n      if (err) return req.cancel()\n      req.routeQueue(i, next)\n    })\n    return\n  }\n  next()\n}\n\nRenderReq.prototype.onMatch = function(route, params, next, done) {\n  if (!this.page) return next()\n  // Stop the default browser action, such as clicking a link or submitting a form\n  if (this.e) {\n    this.e.preventDefault()\n    this.e = null\n  }\n  this.page.params = params\n  if (route.isTransitional) {\n    this.app.onRoute(route.callbacks, this.page, next, done)\n  } else {\n    this.app.onRoute(route.callbacks, this.page, next)\n  }\n}\n\nRenderReq.prototype.routeParams = function(route) {\n  var routeParams = route.params\n  var params = routeParams.slice()\n\n  for (var key in routeParams) {\n    params[key] = routeParams[key]\n  }\n  params.previous = this.previous\n  params.url = this.url\n  params.body = this.body\n  params.query = this.query\n  params.method = this.method\n  return params\n}\n",
    "var qs = require('qs')\nvar parseUrl = require('url').parse\nvar resolveUrl = require('url').resolve\nvar router = require('./router')\nvar currentPath = window.location.pathname + window.location.search\n\n// Replace the initial state with the current URL immediately,\n// so that it will be rendered if the state is later popped\nif (window.history.replaceState) {\n  window.history.replaceState({\n    $render: true,\n    $method: 'get'\n  }, null, window.location.href)\n}\n\nmodule.exports = History\n\nfunction History(app, routes) {\n  this.app = app\n  this.routes = routes\n\n  if (window.history.pushState) {\n    addListeners(this)\n    return\n  }\n  this.push = function(url) {\n    window.location.assign(url)\n  }\n  this.replace = function(url) {\n    window.location.replace(url)\n  }\n}\n\nHistory.prototype.push = function(url, render, state, e) {\n  this._update('pushState', url, render, state, e)\n}\n\nHistory.prototype.replace = function(url, render, state, e) {\n  this._update('replaceState', url, render, state, e)\n}\n\n// Rerender the current url locally\nHistory.prototype.refresh = function() {\n  var path = routePath(window.location.href)\n  // Note that we don't pass previous to avoid triggering transitions\n  router.render(this, {url: path, method: 'get'})\n}\n\nHistory.prototype.back = function() {\n  window.history.back()\n}\n\nHistory.prototype.forward = function() {\n  window.history.forward()\n}\n\nHistory.prototype.go = function(i) {\n  window.history.go(i)\n}\n\nHistory.prototype._update = function(historyMethod, relativeUrl, render, state, e) {\n  var url = resolveUrl(window.location.href, relativeUrl)\n  var path = routePath(url)\n\n  // TODO: history.push should set the window.location with external urls\n  if (!path) return\n  if (render == null) render = true\n  if (state == null) state = {}\n\n  // Update the URL\n  var options = renderOptions(e, path)\n  state.$render = true\n  state.$method = options.method\n  window.history[historyMethod](state, null, options.url)\n  currentPath = window.location.pathname + window.location.search\n  if (render) router.render(this, options, e)\n}\n\nHistory.prototype.page = function() {\n  var page = this.app.createPage()\n  var history = this\n\n  function redirect(url) {\n    if (url === 'back') return history.back()\n    // TODO: Add support for `basepath` option like Express\n    if (url === 'home') url = '\\\\'\n    history.replace(url, true)\n  }\n\n  page.redirect = redirect\n  return page\n}\n\n// Get the pathname if it is on the same protocol and domain\nfunction routePath(url) {\n  var match = parseUrl(url)\n  return match &&\n    match.protocol === window.location.protocol &&\n    match.host === window.location.host &&\n    match.pathname + (match.search || '')\n}\n\nfunction renderOptions(e, path) {\n  // If this is a form submission, extract the form data and\n  // append it to the url for a get or params.body for a post\n  if (e && e.type === 'submit') {\n    var form = e.target\n    var elements = form.elements\n    var query = []\n    for (var i = 0, len = elements.length, el; i < len; i++) {\n      el = elements[i]\n      var name = el.name\n      if (!name) continue\n      var value = el.value\n      query.push(encodeURIComponent(name) + '=' + encodeURIComponent(value))\n      if (name === '_method') {\n        var override = value.toLowerCase()\n        if (override === 'delete') override = 'del'\n      }\n    }\n    query = query.join('&')\n    if (form.method.toLowerCase() === 'post') {\n      var method = override || 'post'\n      var body = qs.parse(query)\n    } else {\n      method = 'get'\n      path += '?' + query\n    }\n  } else {\n    method = 'get'\n  }\n  return {\n    method: method\n  , url: path\n  , previous: window.location.pathname + window.location.search\n  , body: body\n  , form: form\n  , link: e && e._tracksLink\n  }\n}\n\nfunction addListeners(history) {\n\n  // Detect clicks on links\n  function onClick(e) {\n    var el = e.target\n\n    // Ignore command click, control click, and non-left click\n    if (e.metaKey || e.which !== 1) return\n\n    // Ignore if already prevented\n    if (e.defaultPrevented) return\n\n    // Also look up for parent links (<a><img></a>)\n    while (el) {\n      var url = el.href\n      if (url) {\n\n        // Ignore if created by Tracks\n        if (el.hasAttribute && el.hasAttribute('data-router-ignore')) return\n\n        // Ignore links meant to open in a different window or frame\n        if (el.target && el.target !== '_self') return\n\n        // Ignore hash links to the same page\n        var hashIndex = url.indexOf('#')\n        if (~hashIndex && url.slice(0, hashIndex) === window.location.href.replace(/#.*/, '')) {\n          return\n        }\n\n        e._tracksLink = el\n        history.push(url, true, null, e)\n        return\n      }\n\n      el = el.parentNode\n    }\n  }\n\n  function onSubmit(e) {\n    var target = e.target\n\n    // Ignore if already prevented\n    if (e.defaultPrevented) return\n\n    // Only handle if emitted on a form element that isn't multipart\n    if (target.tagName.toLowerCase() !== 'form') return\n    if (target.enctype === 'multipart/form-data') return\n\n    // Ignore if created by Tracks\n    if (target.hasAttribute && target.hasAttribute('data-router-ignore')) return\n\n    // Use the url from the form action, defaulting to the current url\n    var url = target.action || window.location.href\n    history.push(url, true, null, e)\n  }\n\n  function onPopState(e) {\n    // HACK: Chrome sometimes does a pop state before the app is set up properly\n    if (!history.app.page) return\n\n    var previous = currentPath\n    var state = e.state\n    currentPath = window.location.pathname + window.location.search\n\n    var options = {\n      previous: previous\n    , url: currentPath\n    }\n\n    if (state) {\n      if (!state.$render) return\n      options.method = state.$method\n      // Note that the post body is only sent on the initial reqest\n      // and it is empty if the state is later popped\n      return router.render(history, options)\n    }\n\n    // The state object will be null for states created by jump links.\n    // window.location.hash cannot be used, because it returns nothing\n    // if the url ends in just a hash character\n    var url = window.location.href\n      , hashIndex = url.indexOf('#')\n      , el, id\n    if (~hashIndex && currentPath !== previous) {\n      options.method = 'get'\n      router.render(history, options)\n      id = url.slice(hashIndex + 1)\n      if (el = document.getElementById(id) || document.getElementsByName(id)[0]) {\n        el.scrollIntoView()\n      }\n    }\n  }\n\n  document.addEventListener('click', onClick, true)\n  document.addEventListener('submit', onSubmit, false)\n  window.addEventListener('popstate', onPopState, true)\n}\n",
    "var Route = require('../vendor/express/router/route')\nvar History = require('./History')\nvar router = module.exports = require('./router')\n\nrouter.setup = setup\n\nfunction setup(app) {\n  var routes = {\n    queue: {}\n  , transitional: {}\n  , app: app\n  }\n  app.history = new History(app, routes)\n\n  ;['get', 'post', 'put', 'del', 'enter', 'exit'].forEach(function(method) {\n    var queue = routes.queue[method] = []\n    var transitional = routes.transitional[method] = []\n\n    app[method] = function(pattern, callback) {\n      if (Array.isArray(pattern)) {\n        pattern.forEach(function(item) {\n          app[method](item, callback)\n        })\n        return app\n      }\n\n      if (router.isTransitional(pattern)) {\n        var from = pattern.from\n        var to = pattern.to\n        var forward = pattern.forward || (callback && callback.forward) || callback\n        var back = pattern.back || (callback && callback.back)\n\n        var fromRoute = new Route(method, from, back)\n        var toRoute = new Route(method, to, forward)\n        fromRoute.isTransitional = true\n        toRoute.isTransitional = true\n        transitional.push({\n          from: fromRoute\n        , to: toRoute\n        })\n        if (back) transitional.push({\n          from: toRoute\n        , to: fromRoute\n        })\n\n        return app\n      }\n\n      queue.push(new Route(method, pattern, callback))\n      return app\n    }\n  })\n}\n",
    "exports.ContextMeta = ContextMeta;\nexports.Context = Context;\n\nfunction noop() {}\n\n// TODO:\n// Implement removeItemContext\n\nfunction ContextMeta() {\n  this.addBinding = noop;\n  this.removeBinding = noop;\n  this.removeNode = noop;\n  this.addItemContext = noop;\n  this.removeItemContext = noop;\n  this.views = null;\n  this.idNamespace = '';\n  this.idCount = 0;\n  this.pending = [];\n  this.pauseCount = 0;\n}\n\nfunction Context(meta, controller, parent, unbound, expression) {\n  // Required properties //\n\n  // Properties which are globally inherited for the entire page\n  this.meta = meta;\n  // The page or component. Must have a `model` property with a `data` property\n  this.controller = controller;\n\n  // Optional properties //\n\n  // Containing context\n  this.parent = parent;\n  // Boolean set to true when bindings should be ignored\n  this.unbound = unbound;\n  // The expression for a block\n  this.expression = expression;\n  // Alias name for the given expression\n  this.alias = expression && expression.meta && expression.meta.as;\n  // Alias name for the index or iterated key\n  this.keyAlias = expression && expression.meta && expression.meta.keyAs;\n\n  // For Context::eachChild\n  // The context of the each at render time\n  this.item = null;\n\n  // For Context::viewChild\n  // Reference to the current view\n  this.view = null;\n  // Attribute values passed to the view instance\n  this.attributes = null;\n  // MarkupHooks to be called after insert into DOM of component\n  this.hooks = null;\n  // MarkupHooks to be called immediately before init of component\n  this.initHooks = null;\n\n  // For Context::closureChild\n  // Reference to another context established at render time by ContextClosure\n  this.closure = null;\n\n  // Used in EventModel\n  this._id = null;\n}\n\nContext.prototype.id = function() {\n  var count = ++this.meta.idCount;\n  return this.meta.idNamespace + '_' + count.toString(36);\n};\n\nContext.prototype.addBinding = function(binding) {\n  // Don't add bindings that wrap list items. Only their outer range is needed\n  if (binding.itemFor) return;\n  var expression = binding.template.expression;\n  // Don't rerender in unbound sections\n  if (expression ? expression.isUnbound(this) : this.unbound) return;\n  // Don't rerender to changes in a with expression\n  if (expression && expression.meta && expression.meta.blockType === 'with') return;\n  this.meta.addBinding(binding);\n};\nContext.prototype.removeBinding = function(binding) {\n  this.meta.removeBinding(binding);\n};\nContext.prototype.removeNode = function(node) {\n  this.meta.removeNode(node);\n};\n\nContext.prototype.child = function(expression) {\n  // Set or inherit the binding mode\n  var blockType = expression.meta && expression.meta.blockType;\n  var unbound = (blockType === 'unbound') ? true :\n    (blockType === 'bound') ? false :\n    this.unbound;\n  return new Context(this.meta, this.controller, this, unbound, expression);\n};\n\nContext.prototype.componentChild = function(component) {\n  return new Context(this.meta, component, this, this.unbound);\n};\n\n// Make a context for an item in an each block\nContext.prototype.eachChild = function(expression, item) {\n  var context = new Context(this.meta, this.controller, this, this.unbound, expression);\n  context.item = item;\n  this.meta.addItemContext(context);\n  return context;\n};\n\nContext.prototype.viewChild = function(view, attributes, hooks, initHooks) {\n  var context = new Context(this.meta, this.controller, this, this.unbound);\n  context.view = view;\n  context.attributes = attributes;\n  context.hooks = hooks;\n  context.initHooks = initHooks;\n  return context;\n};\n\nContext.prototype.closureChild = function(closure) {\n  var context = new Context(this.meta, this.controller, this, this.unbound);\n  context.closure = closure;\n  return context;\n};\n\nContext.prototype.forRelative = function(expression) {\n  var context = this;\n  while (context && context.expression === expression || context.view) {\n    context = context.parent;\n  }\n  return context;\n};\n\n// Returns the closest context which defined the named alias\nContext.prototype.forAlias = function(alias) {\n  var context = this;\n  while (context) {\n    if (context.alias === alias || context.keyAlias === alias) return context;\n    context = context.parent;\n  }\n};\n\n// Returns the closest containing context for a view attribute name or nothing\nContext.prototype.forAttribute = function(attribute) {\n  var context = this;\n  while (context) {\n    // Find the closest context associated with a view\n    if (context.view) {\n      var attributes = context.attributes;\n      if (!attributes) return;\n      if (attributes.hasOwnProperty(attribute)) return context;\n      // If the attribute isn't found, but the attributes inherit, continue\n      // looking in the next closest view context\n      if (!attributes.inherit && !attributes.extend) return;\n    }\n    context = context.parent;\n  }\n};\n\nContext.prototype.forViewParent = function() {\n  var context = this;\n  while (context) {\n    // When a context with a `closure` property is encountered, skip to its\n    // parent context rather than returning the nearest view's. This reference\n    // is created by wrapping a template in a ContextClosure template\n    if (context.closure) return context.closure.parent;\n    // Find the closest view and return the containing context\n    if (context.view) return context.parent;\n    context = context.parent;\n  }\n};\n\nContext.prototype.getView = function() {\n  var context = this;\n  while (context) {\n    // Find the closest view\n    if (context.view) return context.view;\n    context = context.parent;\n  }\n};\n\n// Returns the `this` value for a context\nContext.prototype.get = function() {\n  var value = (this.expression) ?\n    this.expression.get(this) :\n    this.controller.model.data;\n  if (this.item != null) {\n    return value && value[this.item];\n  }\n  return value;\n};\n\nContext.prototype.pause = function() {\n  this.meta.pauseCount++;\n};\n\nContext.prototype.unpause = function() {\n  if (--this.meta.pauseCount) return;\n  this.flush();\n};\n\nContext.prototype.flush = function() {\n  var pending = this.meta.pending;\n  var len = pending.length;\n  if (!len) return;\n  this.meta.pending = [];\n  for (var i = 0; i < len; i++) {\n    pending[i]();\n  }\n};\n\nContext.prototype.queue = function(cb) {\n  this.meta.pending.push(cb);\n};\n",
    "// `-` and `+` can be either unary or binary, so all unary operators are\n// postfixed with `U` to differentiate\n\nexports.get = {\n  // Unary operators\n  '!U': function(value) {\n    return !value;\n  }\n, '-U': function(value) {\n    return -value;\n  }\n, '+U': function(value) {\n    return +value;\n  }\n, '~U': function(value) {\n    return ~value;\n  }\n, 'typeofU': function(value) {\n    return typeof value;\n  }\n  // Binary operators\n, '||': function(left, right) {\n    return left || right;\n  }\n, '&&': function(left, right) {\n    return left && right;\n  }\n, '|': function(left, right) {\n    return left | right;\n  }\n, '^': function(left, right) {\n    return left ^ right;\n  }\n, '&': function(left, right) {\n    return left & right;\n  }\n, '==': function(left, right) {\n    return left == right; // jshint ignore:line\n  }\n, '!=': function(left, right) {\n    return left != right; // jshint ignore:line\n  }\n, '===': function(left, right) {\n    return left === right;\n  }\n, '!==': function(left, right) {\n    return left !== right;\n  }\n, '<': function(left, right) {\n    return left < right;\n  }\n, '>': function(left, right) {\n    return left > right;\n  }\n, '<=': function(left, right) {\n    return left <= right;\n  }\n, '>=': function(left, right) {\n    return left >= right;\n  }\n, 'instanceof': function(left, right) {\n    return left instanceof right;\n  }\n, 'in': function(left, right) {\n    return left in right;\n  }\n, '<<': function(left, right) {\n    return left << right;\n  }\n, '>>': function(left, right) {\n    return left >> right;\n  }\n, '>>>': function(left, right) {\n    return left >>> right;\n  }\n, '+': function(left, right) {\n    return left + right;\n  }\n, '-': function(left, right) {\n    return left - right;\n  }\n, '*': function(left, right) {\n    return left * right;\n  }\n, '/': function(left, right) {\n    return left / right;\n  }\n, '%': function(left, right) {\n    return left % right;\n  }\n  // Conditional operator\n, '?': function(test, consequent, alternate) {\n    return (test) ? consequent : alternate;\n  }\n, // Sequence\n  ',': function() {\n    return arguments[arguments.length - 1];\n  }\n};\n\nexports.set = {\n  // Unary operators\n  '!U': function(value) {\n    return [!value];\n  }\n, '-U': function(value) {\n    return [-value];\n  }\n  // Binary operators\n, '==': function(value, left, right) {\n    if (value) return [right];\n  }\n, '===': function(value, left, right) {\n    if (value) return [right];\n  }\n, 'in': function(value, left, right) {\n    right[left] = true;\n    return {1: right};\n  }\n, '+': function(value, left, right) {\n    return [value - right];\n  }\n, '-': function(value, left, right) {\n    return [value + right];\n  }\n, '*': function(value, left, right) {\n    return [value / right];\n  }\n, '/': function(value, left, right) {\n    return [value * right];\n  }\n};\n",
    "if (typeof require === 'function') {\n  var serializeObject = require('serialize-object');\n}\n\n// UPDATE_PROPERTIES map HTML attribute names to an Element DOM property that\n// should be used for setting on bindings updates instead of setAttribute.\n//\n// https://github.com/jquery/jquery/blob/1.x-master/src/attributes/prop.js\n// https://github.com/jquery/jquery/blob/master/src/attributes/prop.js\n// http://webbugtrack.blogspot.com/2007/08/bug-242-setattribute-doesnt-always-work.html\nvar BOOLEAN_PROPERTIES = {\n  checked: 'checked'\n, disabled: 'disabled'\n, readonly: 'readOnly'\n, selected: 'selected'\n};\nvar INTEGER_PROPERTIES = {\n  colspan: 'colSpan'\n, maxlength: 'maxLength'\n, rowspan: 'rowSpan'\n, tabindex: 'tabIndex'\n};\nvar STRING_PROPERTIES = {\n  cellpadding: 'cellPadding'\n, cellspacing: 'cellSpacing'\n, 'class': 'className'\n, contenteditable: 'contentEditable'\n, enctype: 'encoding'\n, 'for': 'htmlFor'\n, frameborder: 'frameBorder'\n, id: 'id'\n, title: 'title'\n, type: 'type'\n, usemap: 'useMap'\n, value: 'value'\n};\nvar UPDATE_PROPERTIES = {};\nmergeInto(BOOLEAN_PROPERTIES, UPDATE_PROPERTIES);\nmergeInto(INTEGER_PROPERTIES, UPDATE_PROPERTIES);\nmergeInto(STRING_PROPERTIES, UPDATE_PROPERTIES);\n\n// CREATE_PROPERTIES map HTML attribute names to an Element DOM property that\n// should be used for setting on Element rendering instead of setAttribute.\n// input.defaultChecked and input.defaultValue affect the attribute, so we want\n// to use these for initial dynamic rendering. For binding updates,\n// input.checked and input.value are modified.\nvar CREATE_PROPERTIES = {};\nmergeInto(UPDATE_PROPERTIES, CREATE_PROPERTIES);\nCREATE_PROPERTIES.checked = 'defaultChecked';\nCREATE_PROPERTIES.value = 'defaultValue';\n\n// http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\nvar VOID_ELEMENTS = {\n  area: true\n, base: true\n, br: true\n, col: true\n, embed: true\n, hr: true\n, img: true\n, input: true\n, keygen: true\n, link: true\n, menuitem: true\n, meta: true\n, param: true\n, source: true\n, track: true\n, wbr: true\n};\n\nvar NAMESPACE_URIS = {\n  svg: 'http://www.w3.org/2000/svg'\n, xlink: 'http://www.w3.org/1999/xlink'\n, xmlns: 'http://www.w3.org/2000/xmlns/'\n};\n\nexports.CREATE_PROPERTIES = CREATE_PROPERTIES;\nexports.BOOLEAN_PROPERTIES = BOOLEAN_PROPERTIES;\nexports.INTEGER_PROPERTIES = INTEGER_PROPERTIES;\nexports.STRING_PROPERTIES = STRING_PROPERTIES;\nexports.UPDATE_PROPERTIES = UPDATE_PROPERTIES;\nexports.VOID_ELEMENTS = VOID_ELEMENTS;\nexports.NAMESPACE_URIS = NAMESPACE_URIS;\n\n// Template Classes\nexports.Template = Template;\nexports.Doctype = Doctype;\nexports.Text = Text;\nexports.DynamicText = DynamicText;\nexports.Comment = Comment;\nexports.DynamicComment = DynamicComment;\nexports.Html = Html;\nexports.DynamicHtml = DynamicHtml;\nexports.Element = Element;\nexports.DynamicElement = DynamicElement;\nexports.Block = Block;\nexports.ConditionalBlock = ConditionalBlock;\nexports.EachBlock = EachBlock;\n\nexports.Attribute = Attribute;\nexports.DynamicAttribute = DynamicAttribute;\n\n// Binding Classes\nexports.Binding = Binding;\nexports.NodeBinding = NodeBinding;\nexports.AttributeBinding = AttributeBinding;\nexports.RangeBinding = RangeBinding;\n\nfunction Template(content, source) {\n  this.content = content;\n  this.source = source;\n}\nTemplate.prototype.toString = function() {\n  return this.source;\n};\nTemplate.prototype.get = function(context, unescaped) {\n  return contentHtml(this.content, context, unescaped);\n};\nTemplate.prototype.getFragment = function(context, binding) {\n  var fragment = document.createDocumentFragment();\n  this.appendTo(fragment, context, binding);\n  return fragment;\n};\nTemplate.prototype.appendTo = function(parent, context) {\n  context.pause();\n  appendContent(parent, this.content, context);\n  context.unpause();\n};\nTemplate.prototype.attachTo = function(parent, node, context) {\n  context.pause();\n  var node = attachContent(parent, node, this.content, context);\n  context.unpause();\n  return node;\n};\nTemplate.prototype.update = function() {};\nTemplate.prototype.stringify = function(value) {\n  return (value == null) ? '' : value + '';\n};\nTemplate.prototype.equals = function(other) {\n  return this === other;\n};\nTemplate.prototype.module = 'templates';\nTemplate.prototype.type = 'Template';\nTemplate.prototype.serialize = function() {\n  return serializeObject.instance(this, this.content, this.source);\n};\n\n\nfunction Doctype(name, publicId, systemId) {\n  this.name = name;\n  this.publicId = publicId;\n  this.systemId = systemId;\n}\nDoctype.prototype = Object.create(Template.prototype);\nDoctype.prototype.constructor = Doctype;\nDoctype.prototype.get = function() {\n  var publicText = (this.publicId) ?\n    ' PUBLIC \"' + this.publicId  + '\"' :\n    '';\n  var systemText = (this.systemId) ?\n    (this.publicId) ?\n      ' \"' + this.systemId + '\"' :\n      ' SYSTEM \"' + this.systemId + '\"' :\n    '';\n  return '<!DOCTYPE ' + this.name + publicText + systemText + '>';\n};\nDoctype.prototype.appendTo = function() {\n  // Doctype could be created via:\n  //   document.implementation.createDocumentType(this.name, this.publicId, this.systemId)\n  // However, it does not appear possible or useful to append it to the\n  // document fragment. Therefore, just don't render it in the browser\n};\nDoctype.prototype.attachTo = function(parent, node) {\n  if (!node || node.nodeType !== 10) {\n    throw attachError(parent, node);\n  }\n  return node.nextSibling;\n};\nDoctype.prototype.type = 'Doctype';\nDoctype.prototype.serialize = function() {\n  return serializeObject.instance(this, this.name, this.publicId, this.systemId);\n};\n\nfunction Text(data) {\n  this.data = data;\n  this.escaped = escapeHtml(data);\n}\nText.prototype = Object.create(Template.prototype);\nText.prototype.constructor = Text;\nText.prototype.get = function(context, unescaped) {\n  return (unescaped) ? this.data : this.escaped;\n};\nText.prototype.appendTo = function(parent) {\n  var node = document.createTextNode(this.data);\n  parent.appendChild(node);\n};\nText.prototype.attachTo = function(parent, node) {\n  return attachText(parent, node, this.data, this);\n};\nText.prototype.type = 'Text';\nText.prototype.serialize = function() {\n  return serializeObject.instance(this, this.data);\n};\n\n// DynamicText might be more accurately named DynamicContent. When its\n// expression returns a template, it acts similar to a Block, and it renders\n// the template surrounded by comment markers for range replacement. When its\n// expression returns any other type, it renders a DOM Text node with no\n// markers. Text nodes are bound by updating their data property dynamically.\n// The update method must take care to switch between these types of bindings\n// in case the expression return type changes dynamically.\nfunction DynamicText(expression) {\n  this.expression = expression;\n  this.unbound = false;\n}\nDynamicText.prototype = Object.create(Template.prototype);\nDynamicText.prototype.constructor = DynamicText;\nDynamicText.prototype.get = function(context, unescaped) {\n  var value = this.expression.get(context);\n  if (value instanceof Template) {\n    do {\n      value = value.get(context, unescaped);\n    } while (value instanceof Template);\n    return value;\n  }\n  var data = this.stringify(value);\n  return (unescaped) ? data : escapeHtml(data);\n};\nDynamicText.prototype.appendTo = function(parent, context, binding) {\n  var value = this.expression.get(context);\n  if (value instanceof Template) {\n    var start = document.createComment(this.expression);\n    var end = document.createComment('/' + this.expression);\n    var condition = this.getCondition(context);\n    parent.appendChild(start);\n    value.appendTo(parent, context);\n    parent.appendChild(end);\n    updateRange(context, binding, this, start, end, null, condition);\n    return;\n  }\n  var data = this.stringify(value);\n  var node = document.createTextNode(data);\n  parent.appendChild(node);\n  addNodeBinding(this, context, node);\n};\nDynamicText.prototype.attachTo = function(parent, node, context) {\n  var value = this.expression.get(context);\n  if (value instanceof Template) {\n    var start = document.createComment(this.expression);\n    var end = document.createComment('/' + this.expression);\n    var condition = this.getCondition(context);\n    parent.insertBefore(start, node || null);\n    node = value.attachTo(parent, node, context);\n    parent.insertBefore(end, node || null);\n    updateRange(context, null, this, start, end, null, condition);\n    return node;\n  }\n  var data = this.stringify(value);\n  return attachText(parent, node, data, this, context);\n};\nDynamicText.prototype.update = function(context, binding) {\n  if (binding instanceof RangeBinding) {\n    this._blockUpdate(context, binding);\n    return;\n  }\n  var value = this.expression.get(context);\n  if (value instanceof Template) {\n    var start = binding.node;\n    if (!start.parentNode) return;\n    var end = start;\n    var fragment = this.getFragment(context);\n    replaceRange(context, start, end, fragment, binding);\n    return;\n  }\n  binding.node.data = this.stringify(value);\n};\nDynamicText.prototype.getCondition = function(context) {\n  return this.expression.get(context);\n};\nDynamicText.prototype.type = 'DynamicText';\nDynamicText.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression);\n};\n\nfunction attachText(parent, node, data, template, context) {\n  if (!node) {\n    var newNode = document.createTextNode(data);\n    parent.appendChild(newNode);\n    addNodeBinding(template, context, newNode);\n    return;\n  }\n  if (node.nodeType === 3) {\n    // Proceed if nodes already match\n    if (node.data === data) {\n      addNodeBinding(template, context, node);\n      return node.nextSibling;\n    }\n    data = normalizeLineBreaks(data);\n    // Split adjacent text nodes that would have been merged together in HTML\n    var nextNode = splitData(node, data.length);\n    if (node.data !== data) {\n      throw attachError(parent, node);\n    }\n    addNodeBinding(template, context, node);\n    return nextNode;\n  }\n  // An empty text node might not be created at the end of some text\n  if (data === '') {\n    var newNode = document.createTextNode('');\n    parent.insertBefore(newNode, node || null);\n    addNodeBinding(template, context, newNode);\n    return node;\n  }\n  throw attachError(parent, node);\n}\n\nfunction Comment(data, hooks) {\n  this.data = data;\n  this.hooks = hooks;\n}\nComment.prototype = Object.create(Template.prototype);\nComment.prototype.constructor = Comment;\nComment.prototype.get = function() {\n  return '<!--' + this.data + '-->';\n};\nComment.prototype.appendTo = function(parent, context) {\n  var node = document.createComment(this.data);\n  parent.appendChild(node);\n  emitHooks(this.hooks, context, node);\n};\nComment.prototype.attachTo = function(parent, node, context) {\n  return attachComment(parent, node, this.data, this, context);\n};\nComment.prototype.type = 'Comment';\nComment.prototype.serialize = function() {\n  return serializeObject.instance(this, this.data, this.hooks);\n}\n\nfunction DynamicComment(expression, hooks) {\n  this.expression = expression;\n  this.hooks = hooks;\n}\nDynamicComment.prototype = Object.create(Template.prototype);\nDynamicComment.prototype.constructor = DynamicComment;\nDynamicComment.prototype.get = function(context) {\n  var value = getUnescapedValue(this.expression, context);\n  var data = this.stringify(value);\n  return '<!--' + data + '-->';\n};\nDynamicComment.prototype.appendTo = function(parent, context) {\n  var value = getUnescapedValue(this.expression, context);\n  var data = this.stringify(value);\n  var node = document.createComment(data);\n  parent.appendChild(node);\n  addNodeBinding(this, context, node);\n};\nDynamicComment.prototype.attachTo = function(parent, node, context) {\n  var value = getUnescapedValue(this.expression, context);\n  var data = this.stringify(value);\n  return attachComment(parent, node, data, this, context);\n};\nDynamicComment.prototype.update = function(context, binding) {\n  var value = getUnescapedValue(this.expression, context);\n  binding.node.data = this.stringify(value);\n};\nDynamicComment.prototype.type = 'DynamicComment';\nDynamicComment.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression, this.hooks);\n}\n\nfunction attachComment(parent, node, data, template, context) {\n  // Sometimes IE fails to create Comment nodes from HTML or innerHTML.\n  // This is an issue inside of <select> elements, for example.\n  if (!node || node.nodeType !== 8) {\n    var newNode = document.createComment(data);\n    parent.insertBefore(newNode, node || null);\n    addNodeBinding(template, context, newNode);\n    return node;\n  }\n  // Proceed if nodes already match\n  if (node.data === data) {\n    addNodeBinding(template, context, node);\n    return node.nextSibling;\n  }\n  throw attachError(parent, node);\n}\n\nfunction addNodeBinding(template, context, node) {\n  if (template.expression && !template.unbound) {\n    context.addBinding(new NodeBinding(template, context, node));\n  }\n  emitHooks(template.hooks, context, node);\n}\n\nfunction Html(data) {\n  this.data = data;\n}\nHtml.prototype = Object.create(Template.prototype);\nHtml.prototype.constructor = Html;\nHtml.prototype.get = function() {\n  return this.data;\n};\nHtml.prototype.appendTo = function(parent) {\n  var fragment = createHtmlFragment(parent, this.data);\n  parent.appendChild(fragment);\n};\nHtml.prototype.attachTo = function(parent, node) {\n  return attachHtml(parent, node, this.data);\n};\nHtml.prototype.type = \"Html\";\nHtml.prototype.serialize = function() {\n  return serializeObject.instance(this, this.data);\n};\n\nfunction DynamicHtml(expression) {\n  this.expression = expression;\n  this.ending = '/' + expression;\n}\nDynamicHtml.prototype = Object.create(Template.prototype);\nDynamicHtml.prototype.constructor = DynamicHtml;\nDynamicHtml.prototype.get = function(context) {\n  var value = getUnescapedValue(this.expression, context);\n  return this.stringify(value);\n};\nDynamicHtml.prototype.appendTo = function(parent, context, binding) {\n  var start = document.createComment(this.expression);\n  var end = document.createComment(this.ending);\n  var value = getUnescapedValue(this.expression, context);\n  var html = this.stringify(value);\n  var fragment = createHtmlFragment(parent, html);\n  parent.appendChild(start);\n  parent.appendChild(fragment);\n  parent.appendChild(end);\n  updateRange(context, binding, this, start, end);\n};\nDynamicHtml.prototype.attachTo = function(parent, node, context) {\n  var start = document.createComment(this.expression);\n  var end = document.createComment(this.ending);\n  var value = getUnescapedValue(this.expression, context);\n  var html = this.stringify(value);\n  parent.insertBefore(start, node || null);\n  node = attachHtml(parent, node, html);\n  parent.insertBefore(end, node || null);\n  updateRange(context, null, this, start, end);\n  return node;\n};\nDynamicHtml.prototype.update = function(context, binding) {\n  var parent = binding.start.parentNode;\n  if (!parent) return;\n  // Get start and end in advance, since binding is mutated in getFragment\n  var start = binding.start;\n  var end = binding.end;\n  var value = getUnescapedValue(this.expression, context);\n  var html = this.stringify(value);\n  var fragment = createHtmlFragment(parent, html);\n  var innerOnly = true;\n  replaceRange(context, start, end, fragment, binding, innerOnly);\n};\nDynamicHtml.prototype.type = 'DynamicHtml';\nDynamicHtml.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression);\n};\n\nfunction createHtmlFragment(parent, html) {\n  if (parent && parent.nodeType === 1) {\n    var range = document.createRange();\n    range.selectNodeContents(parent);\n    return range.createContextualFragment(html);\n  }\n  var div = document.createElement('div');\n  var range = document.createRange();\n  div.innerHTML = html;\n  range.selectNodeContents(div);\n  return range.extractContents();\n}\nfunction attachHtml(parent, node, html) {\n  var fragment = createHtmlFragment(parent, html);\n  for (var i = 0, len = fragment.childNodes.length; i < len; i++) {\n    if (!node) throw attachError(parent, node);\n    node = node.nextSibling;\n  }\n  return node;\n}\n\nfunction Attribute(data, ns) {\n  this.data = data;\n  this.ns = ns;\n}\nAttribute.prototype = Object.create(Template.prototype);\nAttribute.prototype.constructor = Attribute;\nAttribute.prototype.get = Attribute.prototype.getBound = function(context) {\n  return this.data;\n};\nAttribute.prototype.type = 'Attribute';\nAttribute.prototype.serialize = function() {\n  return serializeObject.instance(this, this.data, this.ns);\n};\n\nfunction DynamicAttribute(expression, ns) {\n  // In attributes, expression may be an instance of Template or Expression\n  this.expression = expression;\n  this.ns = ns;\n  this.elementNs = null;\n}\nDynamicAttribute.prototype = Object.create(Attribute.prototype);\nDynamicAttribute.prototype.constructor = DynamicAttribute;\nDynamicAttribute.prototype.get = function(context) {\n  return getUnescapedValue(this.expression, context);\n};\nDynamicAttribute.prototype.getBound = function(context, element, name, elementNs) {\n  this.elementNs = elementNs;\n  context.addBinding(new AttributeBinding(this, context, element, name));\n  return getUnescapedValue(this.expression, context);\n};\nDynamicAttribute.prototype.update = function(context, binding) {\n  var value = getUnescapedValue(this.expression, context);\n  var element = binding.element;\n  var propertyName = !this.elementNs && UPDATE_PROPERTIES[binding.name];\n  if (propertyName) {\n    var propertyValue = (STRING_PROPERTIES[binding.name]) ?\n      this.stringify(value) : value;\n    if (element[propertyName] === propertyValue) return;\n    element[propertyName] = propertyValue;\n    return;\n  }\n  if (value === false || value == null) {\n    if (this.ns) {\n      element.removeAttributeNS(this.ns, binding.name);\n    } else {\n      element.removeAttribute(binding.name);\n    }\n    return;\n  }\n  if (value === true) value = binding.name;\n  if (this.ns) {\n    element.setAttributeNS(this.ns, binding.name, value);\n  } else {\n    element.setAttribute(binding.name, value);\n  }\n};\nDynamicAttribute.prototype.type = 'DynamicAttribute';\nDynamicAttribute.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression, this.ns);\n};\n\nfunction getUnescapedValue(expression, context) {\n  var unescaped = true;\n  var value = expression.get(context, unescaped);\n  while (value instanceof Template) {\n    value = value.get(context, unescaped);\n  }\n  return value;\n}\n\nfunction Element(tagName, attributes, content, hooks, selfClosing, notClosed, ns) {\n  this.tagName = tagName;\n  this.attributes = attributes;\n  this.content = content;\n  this.hooks = hooks;\n  this.selfClosing = selfClosing;\n  this.notClosed = notClosed;\n  this.ns = ns;\n\n  this.endTag = getEndTag(tagName, selfClosing, notClosed);\n  this.startClose = getStartClose(selfClosing);\n  var lowerTagName = tagName && tagName.toLowerCase();\n  this.unescapedContent = (lowerTagName === 'script' || lowerTagName === 'style');\n  this.bindContentToValue = (lowerTagName === 'textarea');\n}\nElement.prototype = Object.create(Template.prototype);\nElement.prototype.constructor = Element;\nElement.prototype.getTagName = function() {\n  return this.tagName;\n};\nElement.prototype.getEndTag = function() {\n  return this.endTag;\n};\nElement.prototype.get = function(context) {\n  var tagName = this.getTagName(context);\n  var endTag = this.getEndTag(tagName);\n  var tagItems = [tagName];\n  for (var key in this.attributes) {\n    var value = this.attributes[key].get(context);\n    if (value === true) {\n      tagItems.push(key);\n    } else if (value !== false && value != null) {\n      tagItems.push(key + '=\"' + escapeAttribute(value) + '\"');\n    }\n  }\n  var startTag = '<' + tagItems.join(' ') + this.startClose;\n  if (this.content) {\n    var inner = contentHtml(this.content, context, this.unescapedContent);\n    return startTag + inner + endTag;\n  }\n  return startTag + endTag;\n};\nElement.prototype.appendTo = function(parent, context) {\n  var tagName = this.getTagName(context);\n  var element = (this.ns) ?\n    document.createElementNS(this.ns, tagName) :\n    document.createElement(tagName);\n  for (var key in this.attributes) {\n    var attribute = this.attributes[key];\n    var value = attribute.getBound(context, element, key, this.ns);\n    if (value === false || value == null) continue;\n    var propertyName = !this.ns && CREATE_PROPERTIES[key];\n    if (propertyName) {\n      element[propertyName] = value;\n      continue;\n    }\n    if (value === true) value = key;\n    if (attribute.ns) {\n      element.setAttributeNS(attribute.ns, key, value);\n    } else {\n      element.setAttribute(key, value);\n    }\n  }\n  if (this.content) {\n    this._bindContent(context, element);\n    appendContent(element, this.content, context);\n  }\n  parent.appendChild(element);\n  emitHooks(this.hooks, context, element);\n};\nElement.prototype.attachTo = function(parent, node, context) {\n  var tagName = this.getTagName(context);\n  if (\n    !node ||\n    node.nodeType !== 1 ||\n    node.tagName.toLowerCase() !== tagName.toLowerCase()\n  ) {\n    throw attachError(parent, node);\n  }\n  for (var key in this.attributes) {\n    // Get each attribute to create bindings\n    this.attributes[key].getBound(context, node, key, this.ns);\n    // TODO: Ideally, this would also check that the node's current attributes\n    // are equivalent, but there are some tricky edge cases\n  }\n  if (this.content) {\n    this._bindContent(context, node);\n    attachContent(node, node.firstChild, this.content, context);\n  }\n  emitHooks(this.hooks, context, node);\n  return node.nextSibling;\n};\nElement.prototype._bindContent = function(context, element) {\n  // For textareas with dynamic text content, bind to the value property\n  var child = this.bindContentToValue &&\n    this.content.length === 1 &&\n    this.content[0];\n  if (child instanceof DynamicText) {\n    child.unbound = true;\n    var template = new DynamicAttribute(child.expression);\n    context.addBinding(new AttributeBinding(template, context, element, 'value'));\n  }\n};\nElement.prototype.type = 'Element';\nElement.prototype.serialize = function() {\n  return serializeObject.instance(\n    this\n  , this.tagName\n  , this.attributes\n  , this.content\n  , this.hooks\n  , this.selfClosing\n  , this.notClosed\n  , this.ns\n  );\n};\n\nfunction DynamicElement(tagName, attributes, content, hooks, selfClosing, notClosed, ns) {\n  this.tagName = tagName;\n  this.attributes = attributes;\n  this.content = content;\n  this.hooks = hooks;\n  this.selfClosing = selfClosing;\n  this.notClosed = notClosed;\n  this.ns = ns;\n\n  this.startClose = getStartClose(selfClosing);\n  this.unescapedContent = false;\n}\nDynamicElement.prototype = Object.create(Element.prototype);\nDynamicElement.prototype.constructor = DynamicElement;\nDynamicElement.prototype.getTagName = function(context) {\n  return getUnescapedValue(this.tagName, context);\n};\nDynamicElement.prototype.getEndTag = function(tagName) {\n  return getEndTag(tagName, this.selfClosing, this.notClosed);\n};\nDynamicElement.prototype.type = 'DynamicElement';\n\nfunction getStartClose(selfClosing) {\n  return (selfClosing) ? ' />' : '>';\n}\n\nfunction getEndTag(tagName, selfClosing, notClosed) {\n  var lowerTagName = tagName && tagName.toLowerCase();\n  var isVoid = VOID_ELEMENTS[lowerTagName];\n  return (isVoid || selfClosing || notClosed) ? '' : '</' + tagName + '>';\n}\n\nfunction getAttributeValue(element, name) {\n  var propertyName = UPDATE_PROPERTIES[name];\n  return (propertyName) ? element[propertyName] : element.getAttribute(name);\n}\n\nfunction emitHooks(hooks, context, value) {\n  if (!hooks) return;\n  context.queue(function queuedHooks() {\n    for (var i = 0, len = hooks.length; i < len; i++) {\n      hooks[i].emit(context, value);\n    }\n  });\n}\n\nfunction Block(expression, content) {\n  this.expression = expression;\n  this.ending = '/' + expression;\n  this.content = content;\n}\nBlock.prototype = Object.create(Template.prototype);\nBlock.prototype.constructor = Block;\nBlock.prototype.get = function(context, unescaped) {\n  var blockContext = context.child(this.expression);\n  return contentHtml(this.content, blockContext, unescaped);\n};\nBlock.prototype.appendTo = function(parent, context, binding) {\n  var blockContext = context.child(this.expression);\n  var start = document.createComment(this.expression);\n  var end = document.createComment(this.ending);\n  var condition = this.getCondition(context);\n  parent.appendChild(start);\n  appendContent(parent, this.content, blockContext);\n  parent.appendChild(end);\n  updateRange(context, binding, this, start, end, null, condition);\n};\nBlock.prototype.attachTo = function(parent, node, context) {\n  var blockContext = context.child(this.expression);\n  var start = document.createComment(this.expression);\n  var end = document.createComment(this.ending);\n  var condition = this.getCondition(context);\n  parent.insertBefore(start, node || null);\n  node = attachContent(parent, node, this.content, blockContext);\n  parent.insertBefore(end, node || null);\n  updateRange(context, null, this, start, end, null, condition);\n  return node;\n};\nBlock.prototype.type = 'Block';\nBlock.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression, this.content);\n};\nBlock.prototype.update = function(context, binding) {\n  if (!binding.start.parentNode) return;\n  var condition = this.getCondition(context);\n  // Cancel update if prior condition is equivalent to current value\n  if (equalConditions(condition, binding.condition)) return;\n  binding.condition = condition;\n  // Get start and end in advance, since binding is mutated in getFragment\n  var start = binding.start;\n  var end = binding.end;\n  var fragment = this.getFragment(context, binding);\n  replaceRange(context, start, end, fragment, binding);\n};\nBlock.prototype.getCondition = function(context) {\n  // We do an identity check to see if the value has changed before updating.\n  // With objects, the object would still be the same, so this identity check\n  // would fail to update enough. Thus, return NaN, which never equals anything\n  // including itself, so that we always update on objects.\n  //\n  // We could also JSON stringify or use some other hashing approach. However,\n  // that could be really expensive on gets of things that never change, and\n  // is probably not a good tradeoff. Perhaps there should be a separate block\n  // type that is only used in the case of dynamic updates\n  var value = this.expression.get(context);\n  return (typeof value === 'object') ? NaN : value;\n};\nDynamicText.prototype._blockUpdate = Block.prototype.update;\n\nfunction ConditionalBlock(expressions, contents) {\n  this.expressions = expressions;\n  this.beginning = expressions.join('; ');\n  this.ending = '/' + this.beginning;\n  this.contents = contents;\n}\nConditionalBlock.prototype = Object.create(Block.prototype);\nConditionalBlock.prototype.constructor = ConditionalBlock;\nConditionalBlock.prototype.get = function(context, unescaped) {\n  var condition = this.getCondition(context);\n  if (condition == null) return '';\n  var expression = this.expressions[condition];\n  var blockContext = context.child(expression);\n  return contentHtml(this.contents[condition], blockContext, unescaped);\n};\nConditionalBlock.prototype.appendTo = function(parent, context, binding) {\n  var start = document.createComment(this.beginning);\n  var end = document.createComment(this.ending);\n  parent.appendChild(start);\n  var condition = this.getCondition(context);\n  if (condition != null) {\n    var expression = this.expressions[condition];\n    var blockContext = context.child(expression);\n    appendContent(parent, this.contents[condition], blockContext);\n  }\n  parent.appendChild(end);\n  updateRange(context, binding, this, start, end, null, condition);\n};\nConditionalBlock.prototype.attachTo = function(parent, node, context) {\n  var start = document.createComment(this.beginning);\n  var end = document.createComment(this.ending);\n  parent.insertBefore(start, node || null);\n  var condition = this.getCondition(context);\n  if (condition != null) {\n    var expression = this.expressions[condition];\n    var blockContext = context.child(expression);\n    node = attachContent(parent, node, this.contents[condition], blockContext);\n  }\n  parent.insertBefore(end, node || null);\n  updateRange(context, null, this, start, end, null, condition);\n  return node;\n};\nConditionalBlock.prototype.type = 'ConditionalBlock';\nConditionalBlock.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expressions, this.contents);\n};\nConditionalBlock.prototype.update = function(context, binding) {\n  if (!binding.start.parentNode) return;\n  var condition = this.getCondition(context);\n  // Cancel update if prior condition is equivalent to current value\n  if (equalConditions(condition, binding.condition)) return;\n  binding.condition = condition;\n  // Get start and end in advance, since binding is mutated in getFragment\n  var start = binding.start;\n  var end = binding.end;\n  var fragment = this.getFragment(context, binding);\n  replaceRange(context, start, end, fragment, binding);\n};\nConditionalBlock.prototype.getCondition = function(context) {\n  for (var i = 0, len = this.expressions.length; i < len; i++) {\n    if (this.expressions[i].truthy(context)) {\n      return i;\n    }\n  }\n};\n\nfunction EachBlock(expression, content, elseContent) {\n  this.expression = expression;\n  this.ending = '/' + expression;\n  this.content = content;\n  this.elseContent = elseContent;\n}\nEachBlock.prototype = Object.create(Block.prototype);\nEachBlock.prototype.constructor = EachBlock;\nEachBlock.prototype.get = function(context, unescaped) {\n  var items = this.expression.get(context);\n  if (items && items.length) {\n    var html = '';\n    for (var i = 0, len = items.length; i < len; i++) {\n      var itemContext = context.eachChild(this.expression, i);\n      html += contentHtml(this.content, itemContext, unescaped);\n    }\n    return html;\n  } else if (this.elseContent) {\n    return contentHtml(this.elseContent, context, unescaped);\n  }\n  return '';\n};\nEachBlock.prototype.appendTo = function(parent, context, binding) {\n  var items = this.expression.get(context);\n  var start = document.createComment(this.expression);\n  var end = document.createComment(this.ending);\n  parent.appendChild(start);\n  if (items && items.length) {\n    for (var i = 0, len = items.length; i < len; i++) {\n      var itemContext = context.eachChild(this.expression, i);\n      this.appendItemTo(parent, itemContext, start);\n    }\n  } else if (this.elseContent) {\n    appendContent(parent, this.elseContent, context);\n  }\n  parent.appendChild(end);\n  updateRange(context, binding, this, start, end);\n};\nEachBlock.prototype.appendItemTo = function(parent, context, itemFor, binding) {\n  var before = parent.lastChild;\n  var start, end;\n  appendContent(parent, this.content, context);\n  if (before === parent.lastChild) {\n    start = end = document.createComment('empty');\n    parent.appendChild(start);\n  } else {\n    start = (before && before.nextSibling) || parent.firstChild;\n    end = parent.lastChild;\n  }\n  updateRange(context, binding, this, start, end, itemFor);\n};\nEachBlock.prototype.attachTo = function(parent, node, context) {\n  var items = this.expression.get(context);\n  var start = document.createComment(this.expression);\n  var end = document.createComment(this.ending);\n  parent.insertBefore(start, node || null);\n  if (items && items.length) {\n    for (var i = 0, len = items.length; i < len; i++) {\n      var itemContext = context.eachChild(this.expression, i);\n      node = this.attachItemTo(parent, node, itemContext, start);\n    }\n  } else if (this.elseContent) {\n    node = attachContent(parent, node, this.elseContent, context);\n  }\n  parent.insertBefore(end, node || null);\n  updateRange(context, null, this, start, end);\n  return node;\n};\nEachBlock.prototype.attachItemTo = function(parent, node, context, itemFor) {\n  var start, end;\n  var oldPrevious = node && node.previousSibling;\n  var nextNode = attachContent(parent, node, this.content, context);\n  if (nextNode === node) {\n    start = end = document.createComment('empty');\n    parent.insertBefore(start, node || null);\n  } else {\n    start = (oldPrevious && oldPrevious.nextSibling) || parent.firstChild;\n    end = (nextNode && nextNode.previousSibling) || parent.lastChild;\n  }\n  updateRange(context, null, this, start, end, itemFor);\n  return nextNode;\n};\nEachBlock.prototype.update = function(context, binding) {\n  if (!binding.start.parentNode) return;\n  var start = binding.start;\n  var end = binding.end;\n  if (binding.itemFor) {\n    var fragment = document.createDocumentFragment();\n    this.appendItemTo(fragment, context, binding.itemFor, binding);\n  } else {\n    var fragment = this.getFragment(context, binding);\n  }\n  replaceRange(context, start, end, fragment, binding);\n};\nEachBlock.prototype.insert = function(context, binding, index, howMany) {\n  var parent = binding.start.parentNode;\n  if (!parent) return;\n  // In case we are inserting all of the items, update instead. This is needed\n  // when we were previously rendering elseContent so that it is replaced\n  if (index === 0 && this.expression.get(context).length === howMany) {\n    return this.update(context, binding);\n  }\n  var node = indexStartNode(binding, index);\n  var fragment = document.createDocumentFragment();\n  for (var i = index, len = index + howMany; i < len; i++) {\n    var itemContext = context.eachChild(this.expression, i);\n    this.appendItemTo(fragment, itemContext, binding.start);\n  }\n  parent.insertBefore(fragment, node || null);\n};\nEachBlock.prototype.remove = function(context, binding, index, howMany) {\n  var parent = binding.start.parentNode;\n  if (!parent) return;\n  // In case we are removing all of the items, update instead. This is needed\n  // when elseContent should be rendered\n  if (index === 0 && this.expression.get(context).length === 0) {\n    return this.update(context, binding);\n  }\n  var node = indexStartNode(binding, index);\n  var i = 0;\n  while (node) {\n    if (node === binding.end) return;\n    if (node.$bindItemStart && node.$bindItemStart.itemFor === binding.start) {\n      if (howMany === i++) return;\n    }\n    var nextNode = node.nextSibling;\n    parent.removeChild(node);\n    emitRemoved(context, node, binding);\n    node = nextNode;\n  }\n};\nEachBlock.prototype.move = function(context, binding, from, to, howMany) {\n  var parent = binding.start.parentNode;\n  if (!parent) return;\n  var node = indexStartNode(binding, from);\n  var fragment = document.createDocumentFragment();\n  var i = 0;\n  while (node) {\n    if (node === binding.end) break;\n    if (node.$bindItemStart && node.$bindItemStart.itemFor === binding.start) {\n      if (howMany === i++) break;\n    }\n    var nextNode = node.nextSibling;\n    fragment.appendChild(node);\n    node = nextNode;\n  }\n  node = indexStartNode(binding, to);\n  parent.insertBefore(fragment, node || null);\n};\nEachBlock.prototype.type = 'EachBlock';\nEachBlock.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression, this.content, this.elseContent);\n};\n\nfunction indexStartNode(binding, index) {\n  var node = binding.start;\n  var i = 0;\n  while (node = node.nextSibling) {\n    if (node === binding.end) return node;\n    if (node.$bindItemStart && node.$bindItemStart.itemFor === binding.start) {\n      if (index === i) return node;\n      i++;\n    }\n  }\n}\n\nfunction updateRange(context, binding, template, start, end, itemFor, condition) {\n  if (binding) {\n    binding.start = start;\n    binding.end = end;\n    binding.condition = condition;\n    setNodeBounds(binding, start, itemFor);\n  } else {\n    context.addBinding(new RangeBinding(template, context, start, end, itemFor, condition));\n  }\n}\nfunction setNodeBounds(binding, start, itemFor) {\n  if (itemFor) {\n    setNodeProperty(start, '$bindItemStart', binding);\n  } else {\n    setNodeProperty(start, '$bindStart', binding);\n  }\n}\n\nfunction appendContent(parent, content, context) {\n  for (var i = 0, len = content.length; i < len; i++) {\n    content[i].appendTo(parent, context);\n  }\n}\nfunction attachContent(parent, node, content, context) {\n  for (var i = 0, len = content.length; i < len; i++) {\n    while (node && node.hasAttribute && node.hasAttribute('data-no-attach')) {\n      node = node.nextSibling;\n    }\n    node = content[i].attachTo(parent, node, context);\n  }\n  return node;\n}\nfunction contentHtml(content, context, unescaped) {\n  var html = '';\n  for (var i = 0, len = content.length; i < len; i++) {\n    html += content[i].get(context, unescaped);\n  }\n  return html;\n}\nfunction replaceRange(context, start, end, fragment, binding, innerOnly) {\n  // Note: the calling function must make sure to check that there is a parent\n  var parent = start.parentNode;\n  // Copy item binding from old start to fragment being inserted\n  if (start.$bindItemStart && fragment.firstChild) {\n    setNodeProperty(fragment.firstChild, '$bindItemStart', start.$bindItemStart);\n    start.$bindItemStart.start = fragment.firstChild;\n  }\n  // Fast path for single node replacements\n  if (start === end) {\n    parent.replaceChild(fragment, start);\n    emitRemoved(context, start, binding);\n    return;\n  }\n  // Remove all nodes from start to end\n  var node = (innerOnly) ? start.nextSibling : start;\n  var nextNode;\n  while (node) {\n    nextNode = node.nextSibling;\n    emitRemoved(context, node, binding);\n    if (innerOnly && node === end) {\n      nextNode = end;\n      break;\n    }\n    parent.removeChild(node);\n    if (node === end) break;\n    node = nextNode;\n  }\n  // This also works if nextNode is null, by doing an append\n  parent.insertBefore(fragment, nextNode || null);\n}\nfunction emitRemoved(context, node, ignore) {\n  context.removeNode(node);\n  emitRemovedBinding(context, ignore, node, '$bindNode');\n  emitRemovedBinding(context, ignore, node, '$bindStart');\n  emitRemovedBinding(context, ignore, node, '$bindItemStart');\n  var attributes = node.$bindAttributes;\n  if (attributes) {\n    node.$bindAttributes = null;\n    for (var key in attributes) {\n      context.removeBinding(attributes[key]);\n    }\n  }\n  for (node = node.firstChild; node; node = node.nextSibling) {\n    emitRemoved(context, node, ignore);\n  }\n}\nfunction emitRemovedBinding(context, ignore, node, property) {\n  var binding = node[property];\n  if (binding) {\n    node[property] = null;\n    if (binding !== ignore) {\n      context.removeBinding(binding);\n    }\n  }\n}\n\nfunction attachError(parent, node) {\n  if (typeof console !== 'undefined') {\n    console.error('Attach failed for', node, 'within', parent);\n  }\n  return new Error('Attaching bindings failed, because HTML structure ' +\n    'does not match client rendering.'\n  );\n}\n\nfunction Binding() {\n  this.meta = null;\n}\nBinding.prototype.type = 'Binding';\nBinding.prototype.update = function() {\n  this.context.pause();\n  this.template.update(this.context, this);\n  this.context.unpause();\n};\nBinding.prototype.insert = function() {\n  this.update();\n};\nBinding.prototype.remove = function() {\n  this.update();\n};\nBinding.prototype.move = function() {\n  this.update();\n};\n\nfunction NodeBinding(template, context, node) {\n  this.template = template;\n  this.context = context;\n  this.node = node;\n  this.meta = null;\n  setNodeProperty(node, '$bindNode', this);\n}\nNodeBinding.prototype = Object.create(Binding.prototype);\nNodeBinding.prototype.constructor = NodeBinding;\nNodeBinding.prototype.type = 'NodeBinding';\n\nfunction AttributeBindingsMap() {}\nfunction AttributeBinding(template, context, element, name) {\n  this.template = template;\n  this.context = context;\n  this.element = element;\n  this.name = name;\n  this.meta = null;\n  var map = element.$bindAttributes ||\n    (element.$bindAttributes = new AttributeBindingsMap());\n  map[name] = this;\n}\nAttributeBinding.prototype = Object.create(Binding.prototype);\nAttributeBinding.prototype.constructor = AttributeBinding;\nAttributeBinding.prototype.type = 'AttributeBinding';\n\nfunction RangeBinding(template, context, start, end, itemFor, condition) {\n  this.template = template;\n  this.context = context;\n  this.start = start;\n  this.end = end;\n  this.itemFor = itemFor;\n  this.condition = condition;\n  this.meta = null;\n  setNodeBounds(this, start, itemFor);\n}\nRangeBinding.prototype = Object.create(Binding.prototype);\nRangeBinding.prototype.constructor = RangeBinding;\nRangeBinding.prototype.type = 'RangeBinding';\nRangeBinding.prototype.insert = function(index, howMany) {\n  this.context.pause();\n  if (this.template.insert) {\n    this.template.insert(this.context, this, index, howMany);\n  } else {\n    this.template.update(this.context, this);\n  }\n  this.context.unpause();\n};\nRangeBinding.prototype.remove = function(index, howMany) {\n  this.context.pause();\n  if (this.template.remove) {\n    this.template.remove(this.context, this, index, howMany);\n  } else {\n    this.template.update(this.context, this);\n  }\n  this.context.unpause();\n};\nRangeBinding.prototype.move = function(from, to, howMany) {\n  this.context.pause();\n  if (this.template.move) {\n    this.template.move(this.context, this, from, to, howMany);\n  } else {\n    this.template.update(this.context, this);\n  }\n  this.context.unpause();\n};\n\n\n//// Utility functions ////\n\nfunction noop() {}\n\nfunction mergeInto(from, to) {\n  for (var key in from) {\n    to[key] = from[key];\n  }\n}\n\nfunction escapeHtml(string) {\n  string = string + '';\n  return string.replace(/[&<]/g, function(match) {\n    return (match === '&') ? '&amp;' : '&lt;';\n  });\n}\n\nfunction escapeAttribute(string) {\n  string = string + '';\n  return string.replace(/[&\"]/g, function(match) {\n    return (match === '&') ? '&amp;' : '&quot;';\n  });\n}\n\nfunction equalConditions(a, b) {\n  // First, test for strict equality\n  if (a === b) return true;\n  // Failing that, allow for template objects used as a condition to define a\n  // custom `equals()` method to indicate equivalence\n  return (a instanceof Template) && a.equals(b);\n}\n\n\n//// Shims & workarounds ////\n\n// General notes:\n//\n// In all cases, Node.insertBefore should have `|| null` after its second\n// argument. IE works correctly when the argument is ommitted or equal\n// to null, but it throws and error if it is equal to undefined.\n\nif (!Array.isArray) {\n  Array.isArray = function(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  };\n}\n\n// Equivalent to textNode.splitText, which is buggy in IE <=9\nfunction splitData(node, index) {\n  var newNode = node.cloneNode(false);\n  newNode.deleteData(0, index);\n  node.deleteData(index, node.length - index);\n  node.parentNode.insertBefore(newNode, node.nextSibling || null);\n  return newNode;\n}\n\n// Defined so that it can be overriden in IE <=8\nfunction setNodeProperty(node, key, value) {\n  return node[key] = value;\n}\n\nfunction normalizeLineBreaks(string) {\n  return string;\n}\n\n(function() {\n  // Don't try to shim in Node.js environment\n  if (typeof document === 'undefined') return;\n\n  var div = document.createElement('div');\n  div.innerHTML = '\\r\\n<br>\\n'\n  var windowsLength = div.firstChild.data.length;\n  var unixLength = div.lastChild.data.length;\n  if (windowsLength === 1 && unixLength === 1) {\n    normalizeLineBreaks = function(string) {\n      return string.replace(/\\r\\n/g, '\\n');\n    };\n  } else if (windowsLength === 2 && unixLength === 2) {\n    normalizeLineBreaks = function(string) {\n      return string.replace(/(^|[^\\r])(\\n+)/g, function(match, value, newLines) {\n        for (var i = newLines.length; i--;) {\n          value += '\\r\\n';\n        }\n        return value;\n      });\n    };\n  }\n\n  // TODO: Shim createHtmlFragment for old IE\n\n  // TODO: Shim setAttribute('style'), which doesn't work in IE <=7\n  // http://webbugtrack.blogspot.com/2007/10/bug-245-setattribute-style-does-not.html\n\n  // TODO: Investigate whether input name attribute works in IE <=7. We could\n  // override Element::appendTo to use IE's alternative createElement syntax:\n  // document.createElement('<input name=\"xxx\">')\n  // http://webbugtrack.blogspot.com/2007/10/bug-235-createelement-is-broken-in-ie.html\n\n  // In IE, input.defaultValue doesn't work correctly, so use input.value,\n  // which mistakenly but conveniently sets both the value property and attribute.\n  //\n  // Surprisingly, in IE <=7, input.defaultChecked must be used instead of\n  // input.checked before the input is in the document.\n  // http://webbugtrack.blogspot.com/2007/11/bug-299-setattribute-checked-does-not.html\n  var input = document.createElement('input');\n  input.defaultValue = 'x';\n  if (input.value !== 'x') {\n    CREATE_PROPERTIES.value = 'value';\n  }\n\n  try {\n    // TextNodes are not expando in IE <=8\n    document.createTextNode('').$try = 0;\n  } catch (err) {\n    setNodeProperty = function(node, key, value) {\n      // If trying to set a property on a TextNode, create a proxy CommentNode\n      // and set the property on that node instead. Put the proxy after the\n      // TextNode if marking the end of a range, and before otherwise.\n      if (node.nodeType === 3) {\n        var proxyNode = node.previousSibling;\n        if (!proxyNode || proxyNode.$bindProxy !== node) {\n          proxyNode = document.createComment('proxy');\n          proxyNode.$bindProxy = node;\n          node.parentNode.insertBefore(proxyNode, node || null);\n        }\n        return proxyNode[key] = value;\n      }\n      // Set the property directly on other node types\n      return node[key] = value;\n    };\n  }\n})();\n",
    "\nexports.concat = function(a, b) {\n  if (!a) return b;\n  if (!b) return a;\n  return a.concat(b);\n};\n\nexports.hasKeys = function(value) {\n  if (!value) return false;\n  for (var key in value) {\n    return true;\n  }\n  return false;\n};\n\nexports.traverseAndCreate = function(node, segments) {\n  var len = segments.length;\n  if (!len) return node;\n  for (var i = 0; i < len; i++) {\n    var segment = segments[i];\n    node = node[segment] || (node[segment] = {});\n  }\n  return node;\n};\n",
    "var serializeObject = require('serialize-object');\nvar operatorFns = require('./operatorFns');\nvar templates = require('./templates');\nvar Template = templates.Template;\nvar util = require('./util');\nvar concat = util.concat;\n\nexports.lookup = lookup;\nexports.templateTruthy = templateTruthy;\nexports.pathSegments = pathSegments;\nexports.renderValue = renderValue;\nexports.renderTemplate = renderTemplate;\nexports.ExpressionMeta = ExpressionMeta;\n\nexports.Expression = Expression;\nexports.LiteralExpression = LiteralExpression;\nexports.PathExpression = PathExpression;\nexports.RelativePathExpression = RelativePathExpression;\nexports.AliasPathExpression = AliasPathExpression;\nexports.AttributePathExpression = AttributePathExpression;\nexports.BracketsExpression = BracketsExpression;\nexports.DeferRenderExpression = DeferRenderExpression;\nexports.ArrayExpression = ArrayExpression;\nexports.ObjectExpression = ObjectExpression;\nexports.FnExpression = FnExpression;\nexports.OperatorExpression = OperatorExpression;\nexports.NewExpression = NewExpression;\nexports.SequenceExpression = SequenceExpression;\nexports.ViewParentExpression = ViewParentExpression;\nexports.ScopedModelExpression = ScopedModelExpression;\n\nfunction lookup(segments, value) {\n  if (!segments) return value;\n\n  for (var i = 0, len = segments.length; i < len; i++) {\n    if (value == null) return value;\n    value = value[segments[i]];\n  }\n  return value;\n}\n\n// Unlike JS, `[]` is falsey. Otherwise, truthiness is the same as JS\nfunction templateTruthy(value) {\n  return (Array.isArray(value)) ? value.length > 0 : !!value;\n}\n\nfunction pathSegments(segments) {\n  var result = [];\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    result[i] = (typeof segment === 'object') ? segment.item : segment;\n  }\n  return result;\n}\n\nfunction renderValue(value, context) {\n  return (typeof value !== 'object') ? value :\n    (value instanceof Template) ? renderTemplate(value, context) :\n    (Array.isArray(value)) ? renderArray(value, context) :\n    renderObject(value, context);\n}\nfunction renderTemplate(value, context) {\n  var i = 1000;\n  while (value instanceof Template) {\n    if (--i < 0) throw new Error('Maximum template render passes exceeded');\n    value = value.get(context, true);\n  }\n  return value;\n}\nfunction renderArray(array, context) {\n  for (var i = 0; i < array.length; i++) {\n    if (hasTemplateProperty(array[i])) {\n      return renderArrayProperties(array, context);\n    }\n  }\n  return array;\n}\nfunction renderObject(object, context) {\n  return (hasTemplateProperty(object)) ?\n    renderObjectProperties(object, context) : object;\n}\nfunction hasTemplateProperty(object) {\n  if (!object) return false;\n  if (object.constructor !== Object) return false;\n  for (var key in object) {\n    if (object[key] instanceof Template) return true;\n  }\n  return false;\n}\nfunction renderArrayProperties(array, context) {\n  var out = new Array(array.length);\n  for (var i = 0; i < array.length; i++) {\n    out[i] = renderValue(array[i], context);\n  }\n  return out;\n}\nfunction renderObjectProperties(object, context) {\n  var out = {};\n  for (var key in object) {\n    out[key] = renderValue(object[key], context);\n  }\n  return out;\n}\n\nfunction ExpressionMeta(source, blockType, isEnd, as, keyAs, unescaped, bindType, valueType) {\n  this.source = source;\n  this.blockType = blockType;\n  this.isEnd = isEnd;\n  this.as = as;\n  this.keyAs = keyAs;\n  this.unescaped = unescaped;\n  this.bindType = bindType;\n  this.valueType = valueType;\n}\nExpressionMeta.prototype.module = 'expressions';\nExpressionMeta.prototype.type = 'ExpressionMeta';\nExpressionMeta.prototype.serialize = function() {\n  return serializeObject.instance(\n    this\n  , this.source\n  , this.blockType\n  , this.isEnd\n  , this.as\n  , this.keyAs\n  , this.unescaped\n  , this.bindType\n  , this.valueType\n  );\n};\n\nfunction Expression(meta) {\n  this.meta = meta;\n}\nExpression.prototype.module = 'expressions';\nExpression.prototype.type = 'Expression';\nExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.meta);\n};\nExpression.prototype.toString = function() {\n  return this.meta && this.meta.source;\n};\nExpression.prototype.truthy = function(context) {\n  var blockType = this.meta.blockType;\n  if (blockType === 'else') return true;\n  var value = this.get(context, true);\n  var truthy = templateTruthy(value);\n  return (blockType === 'unless') ? !truthy : truthy;\n};\nExpression.prototype.get = function() {};\n// Return the expression's segment list with context objects\nExpression.prototype.resolve = function() {};\n// Return a list of segment lists or null\nExpression.prototype.dependencies = function() {};\n// Return the pathSegments that the expression currently resolves to or null\nExpression.prototype.pathSegments = function(context) {\n  var segments = this.resolve(context);\n  return segments && pathSegments(segments);\n};\nExpression.prototype.set = function(context, value) {\n  var segments = this.pathSegments(context);\n  if (!segments) throw new Error('Expression does not support setting');\n  context.controller.model._set(segments, value);\n};\nExpression.prototype._resolvePatch = function(context, segments) {\n  return (context && context.expression === this && context.item != null) ?\n    segments.concat(context) : segments;\n};\nExpression.prototype.isUnbound = function(context) {\n  // If the template being rendered has an explicit bindType keyword, such as:\n  // {{unbound #item.text}}\n  var bindType = this.meta && this.meta.bindType;\n  if (bindType === 'unbound') return true;\n  if (bindType === 'bound') return false;\n  // Otherwise, inherit from the context\n  return context.unbound;\n};\nExpression.prototype._lookupAndContextifyValue = function(value, context) {\n  if (this.segments && this.segments.length) {\n    // If expression has segments, e.g. `bar.baz` in `#foo.bar.baz`, then\n    // render the base value (e.g. `#foo`) if it's a template and look up the\n    // value at the indicated path.\n    value = renderTemplate(value, context);\n    value = lookup(this.segments, value);\n  }\n  if (value instanceof Template && !(value instanceof templates.ContextClosure)) {\n    // If we're not immediately rendering the template, then create a ContextClosure\n    // so that the value renders with the correct context later.\n    value = new templates.ContextClosure(value, context);\n  }\n  return value;\n};\n\n\nfunction LiteralExpression(value, meta) {\n  this.value = value;\n  this.meta = meta;\n}\nLiteralExpression.prototype = Object.create(Expression.prototype);\nLiteralExpression.prototype.constructor = LiteralExpression;\nLiteralExpression.prototype.type = 'LiteralExpression';\nLiteralExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.value, this.meta);\n};\nLiteralExpression.prototype.get = function() {\n  return this.value;\n};\n\nfunction PathExpression(segments, meta) {\n  this.segments = segments;\n  this.meta = meta;\n}\nPathExpression.prototype = Object.create(Expression.prototype);\nPathExpression.prototype.constructor = PathExpression;\nPathExpression.prototype.type = 'PathExpression';\nPathExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.segments, this.meta);\n};\nPathExpression.prototype.get = function(context) {\n  // See View::dependencies. This is needed in order to handle the case of\n  // getting dependencies within a component template, in which case we cannot\n  // access model data separate from rendering.\n  if (!context.controller) return;\n  return lookup(this.segments, context.controller.model.data);\n};\nPathExpression.prototype.resolve = function(context) {\n  // See View::dependencies. This is needed in order to handle the case of\n  // getting dependencies within a component template, in which case we cannot\n  // access model data separate from rendering.\n  if (!context.controller) return;\n  var segments = concat(context.controller._scope, this.segments);\n  return this._resolvePatch(context, segments);\n};\nPathExpression.prototype.dependencies = function(context, options) {\n  // See View::dependencies. This is needed in order to handle the case of\n  // getting dependencies within a component template, in which case we cannot\n  // access model data separate from rendering.\n  if (!context.controller) return;\n  var value = lookup(this.segments, context.controller.model.data);\n  var dependencies = getDependencies(value, context, options);\n  return appendDependency(dependencies, this, context);\n};\n\nfunction RelativePathExpression(segments, meta) {\n  this.segments = segments;\n  this.meta = meta;\n}\nRelativePathExpression.prototype = Object.create(Expression.prototype);\nRelativePathExpression.prototype.constructor = RelativePathExpression;\nRelativePathExpression.prototype.type = 'RelativePathExpression';\nRelativePathExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.segments, this.meta);\n};\nRelativePathExpression.prototype.get = function(context) {\n  var relativeContext = context.forRelative(this);\n  var value = relativeContext.get();\n  return this._lookupAndContextifyValue(value, relativeContext);\n};\nRelativePathExpression.prototype.resolve = function(context) {\n  var relativeContext = context.forRelative(this);\n  var base = (relativeContext.expression) ?\n    relativeContext.expression.resolve(relativeContext) :\n    [];\n  if (!base) return;\n  var segments = base.concat(this.segments);\n  return this._resolvePatch(context, segments);\n};\nRelativePathExpression.prototype.dependencies = function(context, options) {\n  // Return inner dependencies from our ancestor\n  // (e.g., {{ with foo[bar] }} ... {{ this.x }} has 'bar' as a dependency.)\n  var relativeContext = context.forRelative(this);\n  var dependencies = relativeContext.expression &&\n    relativeContext.expression.dependencies(relativeContext, options);\n  return swapLastDependency(dependencies, this, context);\n};\n\nfunction AliasPathExpression(alias, segments, meta) {\n  this.alias = alias;\n  this.segments = segments;\n  this.meta = meta;\n}\nAliasPathExpression.prototype = Object.create(Expression.prototype);\nAliasPathExpression.prototype.constructor = AliasPathExpression;\nAliasPathExpression.prototype.type = 'AliasPathExpression';\nAliasPathExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.alias, this.segments, this.meta);\n};\nAliasPathExpression.prototype.get = function(context) {\n  var aliasContext = context.forAlias(this.alias);\n  if (!aliasContext) return;\n  if (aliasContext.keyAlias === this.alias) {\n    return aliasContext.item;\n  }\n  var value = aliasContext.get();\n  return this._lookupAndContextifyValue(value, aliasContext);\n};\nAliasPathExpression.prototype.resolve = function(context) {\n  var aliasContext = context.forAlias(this.alias);\n  if (!aliasContext) return;\n  if (aliasContext.keyAlias === this.alias) return;\n  var base = aliasContext.expression.resolve(aliasContext);\n  if (!base) return;\n  var segments = base.concat(this.segments);\n  return this._resolvePatch(context, segments);\n};\nAliasPathExpression.prototype.dependencies = function(context, options) {\n  var aliasContext = context.forAlias(this.alias);\n  if (!aliasContext) return;\n  if (aliasContext.keyAlias === this.alias) {\n    // For keyAliases, use a dependency of the entire list, so that it will\n    // always update when the list itself changes. This is over-binding, but\n    // would otherwise be much more complex\n    var base = aliasContext.expression.resolve(aliasContext.parent);\n    if (!base) return;\n    return [base];\n  }\n\n  var dependencies = aliasContext.expression.dependencies(aliasContext, options);\n  return swapLastDependency(dependencies, this, context);\n};\n\nfunction AttributePathExpression(attribute, segments, meta) {\n  this.attribute = attribute;\n  this.segments = segments;\n  this.meta = meta;\n}\nAttributePathExpression.prototype = Object.create(Expression.prototype);\nAttributePathExpression.prototype.constructor = AttributePathExpression;\nAttributePathExpression.prototype.type = 'AttributePathExpression';\nAttributePathExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.attribute, this.segments, this.meta);\n};\nAttributePathExpression.prototype.get = function(context) {\n  var attributeContext = context.forAttribute(this.attribute);\n  if (!attributeContext) return;\n  var value = attributeContext.attributes[this.attribute];\n  if (value instanceof Expression) {\n    value = value.get(attributeContext);\n  }\n  return this._lookupAndContextifyValue(value, attributeContext);\n};\nAttributePathExpression.prototype.resolve = function(context) {\n  var attributeContext = context.forAttribute(this.attribute);\n  if (!attributeContext) return;\n  // Attributes may be a template, an expression, or a literal value\n  var base;\n  var value = attributeContext.attributes[this.attribute];\n  if (value instanceof Expression || value instanceof Template) {\n    base = value.resolve(attributeContext);\n  }\n  if (!base) return;\n  var segments = base.concat(this.segments);\n  return this._resolvePatch(context, segments);\n};\nAttributePathExpression.prototype.dependencies = function(context, options) {\n  var attributeContext = context.forAttribute(this.attribute);\n  if (!attributeContext) return;\n\n  // Attributes may be a template, an expression, or a literal value\n  var value = attributeContext.attributes[this.attribute];\n  var dependencies = getDependencies(value, attributeContext, options);\n  return swapLastDependency(dependencies, this, context);\n};\n\nfunction BracketsExpression(before, inside, afterSegments, meta) {\n  this.before = before;\n  this.inside = inside;\n  this.afterSegments = afterSegments;\n  this.meta = meta;\n}\nBracketsExpression.prototype = Object.create(Expression.prototype);\nBracketsExpression.prototype.constructor = BracketsExpression;\nBracketsExpression.prototype.type = 'BracketsExpression';\nBracketsExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.before, this.inside, this.afterSegments, this.meta);\n};\nBracketsExpression.prototype.get = function(context) {\n  var inside = this.inside.get(context);\n  if (inside == null) return;\n  var before = this.before.get(context);\n  if (!before) return;\n  var base = before[inside];\n  return (this.afterSegments) ? lookup(this.afterSegments, base) : base;\n};\nBracketsExpression.prototype.resolve = function(context) {\n  // Get and split the current value of the expression inside the brackets\n  var inside = this.inside.get(context);\n  if (inside == null) return;\n\n  // Concat the before, inside, and optional after segments\n  var base = this.before.resolve(context);\n  if (!base) return;\n  var segments = (this.afterSegments) ?\n    base.concat(inside, this.afterSegments) :\n    base.concat(inside);\n  return this._resolvePatch(context, segments);\n};\nBracketsExpression.prototype.dependencies = function(context, options) {\n  var before = this.before.dependencies(context, options);\n  if (before) before.pop();\n  var inner = this.inside.dependencies(context, options);\n  var dependencies = concat(before, inner);\n  return appendDependency(dependencies, this, context);\n};\n\n// This Expression is used to wrap a template so that when its containing\n// Expression--such as an ObjectExpression or ArrayExpression--is evaluated,\n// it returns the template unrendered and wrapped in the current context.\n// Separating evaluation of the containing expression from template rendering\n// is used to support array attributes of views. This way, we can evaluate an\n// array and iterate through it separately from rendering template content\nfunction DeferRenderExpression(template, meta) {\n  if (!(template instanceof Template)) {\n    throw new Error('DeferRenderExpression requires a Template argument');\n  }\n  this.template = template;\n  this.meta = meta;\n}\nDeferRenderExpression.prototype = Object.create(Expression.prototype);\nDeferRenderExpression.prototype.constructor = DeferRenderExpression;\nDeferRenderExpression.prototype.type = 'DeferRenderExpression';\nDeferRenderExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.template, this.meta);\n};\nDeferRenderExpression.prototype.get = function(context) {\n  return new templates.ContextClosure(this.template, context);\n};\n\nfunction ArrayExpression(items, afterSegments, meta) {\n  this.items = items;\n  this.afterSegments = afterSegments;\n  this.meta = meta;\n}\nArrayExpression.prototype = Object.create(Expression.prototype);\nArrayExpression.prototype.constructor = ArrayExpression;\nArrayExpression.prototype.type = 'ArrayExpression';\nArrayExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.items, this.afterSegments, this.meta);\n};\nArrayExpression.prototype.get = function(context) {\n  var items = new Array(this.items.length);\n  for (var i = 0; i < this.items.length; i++) {\n    var value = this.items[i].get(context);\n    items[i] = value;\n  }\n  return (this.afterSegments) ? lookup(this.afterSegments, items) : items;\n};\nArrayExpression.prototype.dependencies = function(context, options) {\n  if (!this.items) return;\n  var dependencies;\n  for (var i = 0; i < this.items.length; i++) {\n    var itemDependencies = this.items[i].dependencies(context, options);\n    dependencies = concat(dependencies, itemDependencies);\n  }\n  return dependencies;\n};\n\nfunction ObjectExpression(properties, afterSegments, meta) {\n  this.properties = properties;\n  this.afterSegments = afterSegments;\n  this.meta = meta;\n}\nObjectExpression.prototype = Object.create(Expression.prototype);\nObjectExpression.prototype.constructor = ObjectExpression;\nObjectExpression.prototype.type = 'ObjectExpression';\nObjectExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.properties, this.afterSegments, this.meta);\n};\nObjectExpression.prototype.get = function(context) {\n  var object = {};\n  for (var key in this.properties) {\n    var value = this.properties[key].get(context);\n    object[key] = value;\n  }\n  return (this.afterSegments) ? lookup(this.afterSegments, object) : object;\n};\nObjectExpression.prototype.dependencies = function(context, options) {\n  if (!this.properties) return;\n  var dependencies;\n  for (var key in this.properties) {\n    var propertyDependencies = this.properties[key].dependencies(context, options);\n    dependencies = concat(dependencies, propertyDependencies);\n  }\n  return dependencies;\n};\n\nfunction FnExpression(segments, args, afterSegments, meta) {\n  this.segments = segments;\n  this.args = args;\n  this.afterSegments = afterSegments;\n  this.meta = meta;\n  var parentSegments = segments && segments.slice();\n  this.lastSegment = parentSegments && parentSegments.pop();\n  this.parentSegments = (parentSegments && parentSegments.length) ? parentSegments : null;\n}\nFnExpression.prototype = Object.create(Expression.prototype);\nFnExpression.prototype.constructor = FnExpression;\nFnExpression.prototype.type = 'FnExpression';\nFnExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.segments, this.args, this.afterSegments, this.meta);\n};\nFnExpression.prototype.get = function(context) {\n  var value = this.apply(context);\n  // Lookup property underneath computed value if needed\n  return (this.afterSegments) ? lookup(this.afterSegments, value) : value;\n};\nFnExpression.prototype.apply = function(context, extraInputs) {\n  // See View::dependencies. This is needed in order to handle the case of\n  // getting dependencies within a component template, in which case we cannot\n  // access model data separate from rendering.\n  if (!context.controller) return;\n  var parent = this._lookupParent(context);\n  var fn = parent[this.lastSegment];\n  var getFn = fn.get || fn;\n  var out = this._applyFn(getFn, context, extraInputs, parent);\n  return out;\n};\nFnExpression.prototype._lookupParent = function(context) {\n  // Lookup function on current controller\n  var controller = context.controller;\n  var segments = this.parentSegments;\n  var parent = (segments) ? lookup(segments, controller) : controller;\n  if (parent && parent[this.lastSegment]) return parent;\n  // Otherwise lookup function on page\n  var page = controller.page;\n  if (controller !== page) {\n    parent = (segments) ? lookup(segments, page) : page;\n    if (parent && parent[this.lastSegment]) return parent;\n  }\n  // Otherwise lookup function on global\n  parent = (segments) ? lookup(segments, global) : global;\n  if (parent && parent[this.lastSegment]) return parent;\n  // Throw if not found\n  throw new Error('Function not found for: ' + this.segments.join('.'));\n};\nFnExpression.prototype._getInputs = function(context) {\n  var inputs = [];\n  for (var i = 0, len = this.args.length; i < len; i++) {\n    var value = this.args[i].get(context);\n    inputs.push(renderValue(value, context));\n  }\n  return inputs;\n};\nFnExpression.prototype._applyFn = function(fn, context, extraInputs, thisArg) {\n  // Apply if there are no path inputs\n  if (!this.args) {\n    return (extraInputs) ?\n      fn.apply(thisArg, extraInputs) :\n      fn.call(thisArg);\n  }\n  // Otherwise, get the current value for path inputs and apply\n  var inputs = this._getInputs(context);\n  if (extraInputs) {\n    for (var i = 0, len = extraInputs.length; i < len; i++) {\n      inputs.push(extraInputs[i]);\n    }\n  }\n  return fn.apply(thisArg, inputs);\n};\nFnExpression.prototype.dependencies = function(context, options) {\n  var dependencies = [];\n  if (!this.args) return dependencies;\n  for (var i = 0, len = this.args.length; i < len; i++) {\n    var argDependencies = this.args[i].dependencies(context, options);\n    if (!argDependencies || argDependencies.length < 1) continue;\n    var end = argDependencies.length - 1;\n    for (var j = 0; j < end; j++) {\n      dependencies.push(argDependencies[j]);\n    }\n    var last = argDependencies[end];\n    if (last[last.length - 1] !== '*') {\n      last = last.concat('*');\n    }\n    dependencies.push(last);\n  }\n  return dependencies;\n};\nFnExpression.prototype.set = function(context, value) {\n  var controller = context.controller;\n  var fn, parent;\n  while (controller) {\n    parent = (this.parentSegments) ?\n      lookup(this.parentSegments, controller) :\n      controller;\n    fn = parent && parent[this.lastSegment];\n    if (fn) break;\n    controller = controller.parent;\n  }\n  var setFn = fn && fn.set;\n  if (!setFn) throw new Error('No setter function for: ' + this.segments.join('.'));\n  var inputs = this._getInputs(context);\n  inputs.unshift(value);\n  var out = setFn.apply(parent, inputs);\n  for (var i in out) {\n    this.args[i].set(context, out[i]);\n  }\n};\n\nfunction NewExpression(segments, args, afterSegments, meta) {\n  FnExpression.call(this, segments, args, afterSegments, meta);\n}\nNewExpression.prototype = Object.create(FnExpression.prototype);\nNewExpression.prototype.constructor = NewExpression;\nNewExpression.prototype.type = 'NewExpression';\nNewExpression.prototype._applyFn = function(Fn, context) {\n  // Apply if there are no path inputs\n  if (!this.args) return new Fn();\n  // Otherwise, get the current value for path inputs and apply\n  var inputs = this._getInputs(context);\n  inputs.unshift(null);\n  return new (Fn.bind.apply(Fn, inputs))();\n};\n\nfunction OperatorExpression(name, args, afterSegments, meta) {\n  this.name = name;\n  this.args = args;\n  this.afterSegments = afterSegments;\n  this.meta = meta;\n  this.getFn = operatorFns.get[name];\n  this.setFn = operatorFns.set[name];\n}\nOperatorExpression.prototype = Object.create(FnExpression.prototype);\nOperatorExpression.prototype.constructor = OperatorExpression;\nOperatorExpression.prototype.type = 'OperatorExpression';\nOperatorExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.name, this.args, this.afterSegments, this.meta);\n};\nOperatorExpression.prototype.apply = function(context) {\n  var inputs = this._getInputs(context);\n  return this.getFn.apply(null, inputs);\n};\nOperatorExpression.prototype.set = function(context, value) {\n  var inputs = this._getInputs(context);\n  inputs.unshift(value);\n  var out = this.setFn.apply(null, inputs);\n  for (var i in out) {\n    this.args[i].set(context, out[i]);\n  }\n};\n\nfunction SequenceExpression(args, afterSegments, meta) {\n  this.args = args;\n  this.afterSegments = afterSegments;\n  this.meta = meta;\n}\nSequenceExpression.prototype = Object.create(OperatorExpression.prototype);\nSequenceExpression.prototype.constructor = SequenceExpression;\nSequenceExpression.prototype.type = 'SequenceExpression';\nSequenceExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.args, this.afterSegments, this.meta);\n};\nSequenceExpression.prototype.name = ',';\nSequenceExpression.prototype.getFn = operatorFns.get[','];\nSequenceExpression.prototype.resolve = function(context) {\n  var last = this.args[this.args.length - 1];\n  return last.resolve(context);\n};\nSequenceExpression.prototype.dependencies = function(context, options) {\n  var dependencies = [];\n  for (var i = 0, len = this.args.length; i < len; i++) {\n    var argDependencies = this.args[i].dependencies(context, options);\n    for (var j = 0, jLen = argDependencies.length; j < jLen; j++) {\n      dependencies.push(argDependencies[j]);\n    }\n  }\n  return dependencies;\n};\n\n// For each method that takes a context argument, get the nearest parent view\n// context, then delegate methods to the inner expression\nfunction ViewParentExpression(expression, meta) {\n  this.expression = expression;\n  this.meta = meta;\n}\nViewParentExpression.prototype = Object.create(Expression.prototype);\nViewParentExpression.prototype.constructor = ViewParentExpression;\nViewParentExpression.prototype.type = 'ViewParentExpression';\nViewParentExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression, this.meta);\n};\nViewParentExpression.prototype.get = function(context) {\n  var parentContext = context.forViewParent();\n  return this.expression.get(parentContext);\n};\nViewParentExpression.prototype.resolve = function(context) {\n  var parentContext = context.forViewParent();\n  return this.expression.resolve(parentContext);\n};\nViewParentExpression.prototype.dependencies = function(context, options) {\n  var parentContext = context.forViewParent();\n  return this.expression.dependencies(parentContext, options);\n};\nViewParentExpression.prototype.pathSegments = function(context) {\n  var parentContext = context.forViewParent();\n  return this.expression.pathSegments(parentContext);\n};\nViewParentExpression.prototype.set = function(context, value) {\n  var parentContext = context.forViewParent();\n  return this.expression.set(parentContext, value);\n};\n\nfunction ScopedModelExpression(expression, meta) {\n  this.expression = expression;\n  this.meta = meta;\n}\nScopedModelExpression.prototype = Object.create(Expression.prototype);\nScopedModelExpression.prototype.constructor = ScopedModelExpression;\nScopedModelExpression.prototype.type = 'ScopedModelExpression';\nScopedModelExpression.prototype.serialize = function() {\n  return serializeObject.instance(this, this.expression, this.meta);\n};\n// Return a scoped model instead of the value\nScopedModelExpression.prototype.get = function(context) {\n  var segments = this.pathSegments(context);\n  if (!segments) return;\n  return context.controller.model.scope(segments.join('.'));\n};\n// Delegate other methods to the inner expression\nScopedModelExpression.prototype.resolve = function(context) {\n  return this.expression.resolve(context);\n};\nScopedModelExpression.prototype.dependencies = function(context, options) {\n  return this.expression.dependencies(context, options);\n};\nScopedModelExpression.prototype.pathSegments = function(context) {\n  return this.expression.pathSegments(context);\n};\nScopedModelExpression.prototype.set = function(context, value) {\n  return this.expression.set(context, value);\n};\n\nfunction getDependencies(value, context, options) {\n  if (value instanceof Expression || value instanceof Template) {\n    return value.dependencies(context, options);\n  }\n}\n\nfunction appendDependency(dependencies, expression, context) {\n  var segments = expression.resolve(context);\n  if (!segments) return dependencies;\n  if (dependencies) {\n    dependencies.push(segments);\n    return dependencies;\n  }\n  return [segments];\n}\n\nfunction swapLastDependency(dependencies, expression, context) {\n  if (!expression.segments.length) {\n    return dependencies;\n  }\n  var segments = expression.resolve(context);\n  if (!segments) return dependencies;\n  if (dependencies) {\n    dependencies.pop();\n    dependencies.push(segments);\n    return dependencies;\n  }\n  return [segments];\n}\n",
    "exports.contexts = require('./lib/contexts');\nexports.expressions = require('./lib/expressions');\nexports.operatorFns = require('./lib/operatorFns');\nexports.options = require('./lib/options');\nexports.templates = require('./lib/templates');\n",
    "module.exports = Dom;\n\nfunction Dom(controller) {\n  this.controller = controller;\n  this._listeners = null;\n}\n\nDom.prototype._initListeners = function() {\n  var dom = this;\n  this.controller.on('destroy', function domOnDestroy() {\n    var listeners = dom._listeners;\n    if (!listeners) return;\n    for (var i = listeners.length; i--;) {\n      listeners[i].remove();\n    }\n    dom._listeners = null;\n  });\n  return this._listeners = [];\n};\n\nDom.prototype._listenerIndex = function(domListener) {\n  var listeners = this._listeners;\n  if (!listeners) return -1;\n  for (var i = listeners.length; i--;) {\n    if (listeners[i].equals(domListener)) return i;\n  }\n  return -1;\n};\n\nDom.prototype.addListener = function(type, target, listener, useCapture) {\n  if (typeof target === 'function') {\n    useCapture = listener;\n    listener = target;\n    target = document;\n  }\n  var domListener =\n    (type === 'destroy') ? new DestroyListener(target, listener) :\n    new DomListener(type, target, listener, useCapture);\n  if (-1 === this._listenerIndex(domListener)) {\n    var listeners = this._listeners || this._initListeners();\n    listeners.push(domListener);\n  }\n  domListener.add();\n};\nDom.prototype.on = Dom.prototype.addListener;\n\nDom.prototype.once = function(type, target, listener, useCapture) {\n  if (typeof target === 'function') {\n    useCapture = listener;\n    listener = target;\n    target = document;\n  }\n  this.addListener(type, target, wrappedListener, useCapture);\n  var dom = this;\n  function wrappedListener() {\n    dom.removeListener(type, target, wrappedListener, useCapture);\n    return listener.apply(this, arguments);\n  }\n};\n\nDom.prototype.removeListener = function(type, target, listener, useCapture) {\n  if (typeof target === 'function') {\n    useCapture = listener;\n    listener = target;\n    target = document;\n  }\n  var domListener = new DomListener(type, target, listener, useCapture);\n  domListener.remove();\n  var i = this._listenerIndex(domListener);\n  if (i > -1) this._listeners.splice(i, 1);\n};\n\nfunction DomListener(type, target, listener, useCapture) {\n  this.type = type;\n  this.target = target;\n  this.listener = listener;\n  this.useCapture = !!useCapture;\n}\nDomListener.prototype.equals = function(domListener) {\n  return this.listener === domListener.listener &&\n    this.target === domListener.target &&\n    this.type === domListener.type &&\n    this.useCapture === domListener.useCapture;\n};\nDomListener.prototype.add = function() {\n  this.target.addEventListener(this.type, this.listener, this.useCapture);\n};\nDomListener.prototype.remove = function() {\n  this.target.removeEventListener(this.type, this.listener, this.useCapture);\n};\n\nfunction DestroyListener(target, listener) {\n  DomListener.call(this, 'destroy', target, listener);\n}\nDestroyListener.prototype = new DomListener();\nDestroyListener.prototype.add = function() {\n  var listeners = this.target.$destroyListeners || (this.target.$destroyListeners = []);\n  if (listeners.indexOf(this.listener) === -1) {\n    listeners.push(this.listener);\n  }\n};\nDestroyListener.prototype.remove = function() {\n  var listeners = this.target.$destroyListeners;\n  if (!listeners) return;\n  var index = listeners.indexOf(this.listener);\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n};\n",
    "var EventEmitter = require('events').EventEmitter;\nvar util = require('racer/lib/util');\nvar Dom = require('./Dom');\n\nmodule.exports = Controller;\n\nfunction Controller(app, page, model) {\n  EventEmitter.call(this);\n  this.dom = new Dom(this);\n  this.app = app;\n  this.page = page;\n  this.model = model;\n  model.data.$controller = this;\n}\n\nutil.mergeInto(Controller.prototype, EventEmitter.prototype);\n\nController.prototype.emitCancellable = function() {\n  var cancelled = false;\n  function cancel() {\n    cancelled = true;\n  }\n\n  var args = Array.prototype.slice.call(arguments);\n  args.push(cancel);\n  this.emit.apply(this, args);\n\n  return cancelled;\n};\n\nController.prototype.emitDelayable = function() {\n  var args = Array.prototype.slice.call(arguments);\n  var callback = args.pop();\n\n  var delayed = false;\n  function delay() {\n    delayed = true;\n    return callback;\n  }\n\n  args.push(delay);\n  this.emit.apply(this, args);\n  if (!delayed) callback();\n\n  return delayed;\n};\n",
    "/*\n * components.js\n *\n * Components associate custom script functionality with a view. They can be\n * distributed as standalone modules containing templates, scripts, and styles.\n * They can also be used to modularize application functionality.\n *\n */\n\nvar util = require('racer/lib/util');\nvar derbyTemplates = require('derby-templates');\nvar templates = derbyTemplates.templates;\nvar expressions = derbyTemplates.expressions;\nvar Controller = require('./Controller');\nvar slice = [].slice;\n\nexports.Component = Component;\nexports.ComponentAttribute = ComponentAttribute;\nexports.ComponentAttributeBinding = ComponentAttributeBinding;\nexports.ComponentFactory = ComponentFactory;\nexports.SingletonComponentFactory = SingletonComponentFactory;\nexports.createFactory = createFactory;\nexports.extendComponent = extendComponent;\n\nfunction Component(context, data) {\n  var parent = context.controller;\n  var id = context.id();\n  var scope = ['$components', id];\n  var model = parent.model.root.eventContext(id);\n  model._at = scope.join('.');\n  data.id = id;\n  model._set(scope, data);\n  // Store a reference to the component's scope such that the expression\n  // getters are relative to the component\n  model.data = data;\n\n  Controller.call(this, parent.app, parent.page, model);\n  this.parent = parent;\n  this.context = context.componentChild(this);\n  this.id = id;\n  this._scope = scope;\n\n  // Add reference to this component on the page so that all components\n  // associated with a page can be destroyed when the page transitions\n  this.page._components[id] = this;\n  this.isDestroyed = false;\n}\n\nutil.mergeInto(Component.prototype, Controller.prototype);\n\nComponent.prototype.destroy = function() {\n  this.emit('destroy');\n  this.model.removeContextListeners();\n  this.model.destroy();\n  delete this.page._components[this.id];\n  var components = this.page._eventModel.object.$components;\n  if (components) delete components.object[this.id];\n  this.isDestroyed = true;\n};\n\n// Apply calls to the passed in function with the component as the context.\n// Stop calling back once the component is destroyed, which avoids possible bugs\n// and memory leaks.\nComponent.prototype.bind = function(callback) {\n  var component = this;\n  this.on('destroy', function() {\n    // Reduce potential for memory leaks by removing references to the component\n    // and the passed in callback, which could have closure references\n    component = null;\n    // Cease calling back after component is removed from the DOM\n    callback = null;\n  });\n  return function componentBindWrapper() {\n    if (!callback) return;\n    return callback.apply(component, arguments);\n  };\n};\n\n// When passing in a numeric delay, calls the function at most once per that\n// many milliseconds. Like Underscore, the function will be called on the\n// leading and the trailing edge of the delay as appropriate. Unlike Underscore,\n// calls are consistently called via setTimeout and are never synchronous. This\n// should be used for reducing the frequency of ongoing updates, such as scroll\n// events or other continuous streams of events.\n//\n// Additionally, implements an interface intended to be used with\n// window.requestAnimationFrame or process.nextTick. If one of these is passed,\n// it will be used to create a single async call following any number of\n// synchronous calls. This mode is typically used to coalesce many synchronous\n// events (such as multiple model events) into a single async event.\n//\n// Like component.bind(), will no longer call back once the component is\n// destroyed, which avoids possible bugs and memory leaks.\nComponent.prototype.throttle = function(callback, delayArg) {\n  var component = this;\n  this.on('destroy', function() {\n    // Reduce potential for memory leaks by removing references to the component\n    // and the passed in callback, which could have closure references\n    component = null;\n    // Cease calling back after component is removed from the DOM\n    callback = null;\n  });\n\n  // throttle(callback)\n  // throttle(callback, 150)\n  if (delayArg == null || typeof delayArg === 'number') {\n    var delay = delayArg || 0;\n    var nextArgs;\n    var previous;\n    var boundCallback = function() {\n      var args = nextArgs;\n      nextArgs = null;\n      previous = +new Date();\n      if (callback && args) {\n        callback.apply(component, args);\n      }\n    };\n    return function componentThrottleWrapper() {\n      var queueCall = !nextArgs;\n      nextArgs = slice.call(arguments);\n      if (queueCall) {\n        var now = +new Date();\n        var remaining = Math.max(previous + delay - now, 0);\n        setTimeout(boundCallback, remaining);\n      }\n    };\n  }\n\n  // throttle(callback, window.requestAnimationFrame)\n  // throttle(callback, process.nextTick)\n  if (typeof delayArg === 'function') {\n    var nextArgs;\n    var boundCallback = function() {\n      var args = nextArgs;\n      nextArgs = null;\n      if (callback && args) {\n        callback.apply(component, args);\n      }\n    };\n    return function componentThrottleWrapper() {\n      var queueCall = !nextArgs;\n      nextArgs = slice.call(arguments);\n      if (queueCall) delayArg(boundCallback);\n    };\n  }\n\n  throw new Error('Second argument must be a delay function or number');\n};\n\n// Suppresses calls until the function is no longer called for that many\n// milliseconds. This should be used for delaying updates triggered by user\n// input, such as window resizing, or typing text that has a live preview or\n// client-side validation. This should not be used for inputs that trigger\n// server requests, such as search autocomplete; use debounceAsync for those\n// cases instead.\n//\n// Like component.bind(), will no longer call back once the component is\n// destroyed, which avoids possible bugs and memory leaks.\nComponent.prototype.debounce = function(callback, delay) {\n  delay = delay || 0;\n  if (typeof delay !== 'number') {\n    throw new Error('Second argument must be a number');\n  }\n  var component = this;\n  this.on('destroy', function() {\n    // Reduce potential for memory leaks by removing references to the component\n    // and the passed in callback, which could have closure references\n    component = null;\n    // Cease calling back after component is removed from the DOM\n    callback = null;\n  });\n  var nextArgs;\n  var timeout;\n  var boundCallback = function() {\n    var args = nextArgs;\n    nextArgs = null;\n    timeout = null;\n    if (callback && args) {\n      callback.apply(component, args);\n    }\n  };\n  return function componentDebounceWrapper() {\n    nextArgs = slice.call(arguments);\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(boundCallback, delay);\n  };\n};\n\n// Forked from: https://github.com/juliangruber/async-debounce\n//\n// Like debounce(), suppresses calls until the function is no longer called for\n// that many milliseconds. In addition, suppresses calls while the callback\n// function is running. In other words, the callback will not be called again\n// until the supplied done() argument is called. When the debounced function is\n// called while the callback is running, the callback will be called again\n// immediately after done() is called. Thus, the callback will always receive\n// the last value passed to the debounced function.\n//\n// This avoids the potential for multiple callbacks to execute in parallel and\n// complete out of order. It also acts as an adaptive rate limiter. Use this\n// method to debounce any field that triggers an async call as the user types.\n//\n// Like component.bind(), will no longer call back once the component is\n// destroyed, which avoids possible bugs and memory leaks.\nComponent.prototype.debounceAsync = function(callback, delay) {\n  var applyArguments = callback.length !== 1;\n  delay = delay || 0;\n  if (typeof delay !== 'number') {\n    throw new Error('Second argument must be a number');\n  }\n  var component = this;\n  this.on('destroy', function() {\n    // Reduce potential for memory leaks by removing references to the component\n    // and the passed in callback, which could have closure references\n    component = null;\n    // Cease calling back after component is removed from the DOM\n    callback = null;\n  });\n  var running = false;\n  var nextArgs;\n  var timeout;\n  function done() {\n    var args = nextArgs;\n    nextArgs = null;\n    timeout = null;\n    if (callback && args) {\n      running = true;\n      args.push(done);\n      callback.apply(component, args);\n    } else {\n      running = false;\n    }\n  }\n  return function componentDebounceAsyncWrapper() {\n    nextArgs = (applyArguments) ? slice.call(arguments) : [];\n    if (timeout) clearTimeout(timeout);\n    if (running) return;\n    timeout = setTimeout(done, delay);\n  };\n};\n\nComponent.prototype.get = function(viewName, unescaped) {\n  var view = this.getView(viewName);\n  return view.get(this.context, unescaped);\n};\n\nComponent.prototype.getFragment = function(viewName) {\n  var view = this.getView(viewName);\n  return view.getFragment(this.context);\n};\n\nComponent.prototype.getView = function(viewName) {\n  var contextView = this.context.getView();\n  return (viewName) ?\n    this.app.views.find(viewName, contextView.namespace) : contextView;\n};\n\nComponent.prototype.getAttribute = function(key) {\n  var attributeContext = this.context.forAttribute(key);\n  if (!attributeContext) return;\n  var value = attributeContext.attributes[key];\n  if (value instanceof expressions.Expression) {\n    value = value.get(attributeContext);\n  }\n  return expressions.renderValue(value, this.context);\n};\n\nComponent.prototype.setAttribute = function(key, value) {\n  this.context.parent.attributes[key] = value;\n};\n\nComponent.prototype.setNullAttribute = function(key, value) {\n  var attributes = this.context.parent.attributes;\n  if (attributes[key] == null) attributes[key] = value;\n};\n\nfunction ComponentAttribute(expression, model, key) {\n  this.expression = expression;\n  this.model = model;\n  this.key = key;\n}\nComponentAttribute.prototype.update = function(context, binding) {\n  var value = this.expression.get(context);\n  binding.condition = value;\n  this.model.setDiff(this.key, value);\n};\nfunction ComponentAttributeBinding(expression, model, key, context) {\n  this.template = new ComponentAttribute(expression, model, key);\n  this.context = context;\n  this.condition = expression.get(context);\n}\nComponentAttributeBinding.prototype = Object.create(templates.Binding.prototype);\nComponentAttributeBinding.prototype.constructor = ComponentAttributeBinding;\n\nfunction setModelAttributes(context, model) {\n  var attributes = context.parent.attributes;\n  if (!attributes) return;\n  // Set attribute values on component model\n  for (var key in attributes) {\n    var value = attributes[key];\n    setModelAttribute(context, model, key, value);\n  }\n}\n\nfunction setModelAttribute(context, model, key, value) {\n  // If an attribute is an Expression, set its current value in the model\n  // and keep it up to date. When it is a resolvable path, use a Racer ref,\n  // which makes it a two-way binding. Otherwise, set to the current value\n  // and create a binding that will set the value in the model as the\n  // expression's dependencies change.\n  if (value instanceof expressions.Expression) {\n    var segments = value.pathSegments(context);\n    if (segments) {\n      model.root.ref(model._at + '.' + key, segments.join('.'), {updateIndices: true});\n    } else {\n      var binding = new ComponentAttributeBinding(value, model, key, context);\n      context.addBinding(binding);\n      model.set(key, binding.condition);\n    }\n    return;\n  }\n\n  // If an attribute is a Template, set a template object in the model.\n  // Eagerly rendering a template can cause excessive rendering when the\n  // developer wants to pass in a complex chunk of HTML, and if we were to\n  // set a string in the model that represents the template value, we'd lose\n  // the ability to use the value in the component's template, since HTML\n  // would be escaped and we'd lose the ability to create proper bindings.\n  //\n  // This may be of surprise to developers, since it may not be intuitive\n  // whether a passed in value will produce an expression or a template. To\n  // get the rendered value consistently, the component's getAttribute(key)\n  // method may be used to get the value that would be rendered.\n  if (value instanceof templates.Template) {\n    var template = new templates.ContextClosure(value, context);\n    model.set(key, template);\n    return;\n  }\n\n  // For all other value types, set the passed in value directly. Passed in\n  // values will only be set initially, so model paths should be used if\n  // bindings are desired.\n  model.set(key, value);\n}\n\nfunction createFactory(constructor) {\n  // DEPRECATED: constructor.prototype.singleton is deprecated. \"singleton\"\n  // static property on the constructor is preferred\n  return (constructor.singleton || constructor.prototype.singleton) ?\n    new SingletonComponentFactory(constructor) :\n    new ComponentFactory(constructor);\n}\n\nfunction emitInitHooks(context, component) {\n  if (!context.initHooks) return;\n  // Run initHooks for `on` listeners immediately before init\n  for (var i = 0, len = context.initHooks.length; i < len; i++) {\n    context.initHooks[i].emit(context, component);\n  }\n}\n\nfunction ComponentModelData() {\n  this.id = null;\n  this.$controller = null;\n}\n\nfunction ComponentFactory(constructor) {\n  this.constructor = constructor;\n}\nComponentFactory.prototype.init = function(context) {\n  var DataConstructor = this.constructor.DataConstructor || ComponentModelData;\n  var data = new DataConstructor();\n  var component = new this.constructor(context, data);\n  // Detect whether the component constructor already called super by checking\n  // for one of the properties it sets. If not, call the Component constructor\n  if (!component.context) {\n    Component.call(component, context, data);\n  }\n\n  setModelAttributes(component.context, component.model);\n\n  // Do the user-specific initialization. The component constructor should be\n  // an empty function and the actual initialization code should be done in the\n  // component's init method. This means that we don't have to rely on users\n  // properly calling the Component constructor method and avoids having to\n  // play nice with how CoffeeScript extends class constructors\n  emitInitHooks(context, component);\n  component.emit('init', component);\n  if (component.init) component.init(component.model);\n\n  return component.context;\n};\nComponentFactory.prototype.create = function(context) {\n  var component = context.controller;\n  component.emit('create', component);\n  // Call the component's create function after its view is rendered\n  if (component.create) {\n    component.create(component.model, component.dom);\n  }\n};\n\nfunction noop() {}\n\nfunction SingletonComponentFactory(constructor) {\n  this.constructor = constructor;\n  this.component = null;\n  // Disable component from being destroyed, since it is intended to\n  // be used multiple times\n  constructor.prototype.destroy = noop;\n}\nSingletonComponentFactory.prototype.isSingleton = true;\nSingletonComponentFactory.prototype.init = function(context) {\n  if (!this.component) this.component = new this.constructor();\n  return context.componentChild(this.component);\n};\n// Don't call the init or create methods for singleton components\nSingletonComponentFactory.prototype.create = noop;\n\nfunction isBasePrototype(object) {\n  return (object === Object.prototype) ||\n    (object === Function.prototype) ||\n    (object === null);\n}\nfunction getRootPrototype(object) {\n  while (true) {\n    var prototype = Object.getPrototypeOf(object);\n    if (isBasePrototype(prototype)) return object;\n    object = prototype;\n  }\n}\nvar _extendComponent = (Object.setPrototypeOf && Object.getPrototypeOf) ?\n  // Modern version, which supports ES6 classes\n  function(constructor) {\n    // Find the end of the prototype chain\n    var rootPrototype = getRootPrototype(constructor.prototype);\n\n    // This guard is a workaroud to a bug that has occurred in Chakra when\n    // app.component() is invoked twice on the same constructor. In that case,\n    // the `instanceof Component` check in extendComponent incorrectly returns\n    // false after the prototype has already been set to `Component.prototype`.\n    // Then, this code proceeds to set the prototype of Component.prototype\n    // to itself, which throws a \"Cyclic __proto__ value\" error.\n    // https://github.com/Microsoft/ChakraCore/issues/5915\n    if (rootPrototype === Component.prototype) return;\n\n    // Establish inheritance with the pattern that Node's util.inherits() uses\n    // if Object.setPrototypeOf() is available (all modern browsers & IE11).\n    // This inhertance pattern is not equivalent to class extends, but it does\n    // work to make instances of the constructor inherit the desired prototype\n    // https://github.com/nodejs/node/issues/4179\n    Object.setPrototypeOf(rootPrototype, Component.prototype);\n  } :\n  // Fallback for older browsers\n  function(constructor) {\n    // In this version, we iterate over all of the properties on the\n    // constructor's prototype and merge them into a new prototype object.\n    // This flattens the prototype chain, meaning that instanceof will not\n    // work for classes from which the current component inherits\n    var prototype = constructor.prototype;\n    // Otherwise, modify constructor.prototype. This won't work with ES6\n    // classes, since their prototype property is non-writeable. However, it\n    // does work in older browsers that don't support Object.setPrototypeOf(),\n    // and those browsers don't support ES6 classes either\n    constructor.prototype = Object.create(Component.prototype);\n    constructor.prototype.constructor = constructor;\n    util.mergeInto(constructor.prototype, prototype);\n  };\nfunction extendComponent(constructor) {\n  // Don't do anything if the constructor already extends Component\n  if (constructor.prototype instanceof Component) return;\n  // Otherwise, append Component.prototype to constructor's prototype chain\n  _extendComponent(constructor);\n}\n",
    "var expressions = require('derby-templates').expressions;\n\n// The many trees of bindings:\n//\n// - Model tree, containing your actual data. Eg:\n//    {users:{fred:{age:40}, wilma:{age:37}}}\n//\n// - Event model tree, whose structure mirrors the model tree. The event model\n//   tree lets us annotate the model tree with listeners which fire when events\n//   change. I think there are three types of listeners:\n//\n//   1. Reference binding binds to whatever is referred to by the path. Eg,\n//   {{each items as item}} binds item by reference as it goes through the\n//   list.\n//   2. Fixed path bindings explicitly bind to whatever is at that path\n//   regardless of how the model changes underneath the event model\n//   3. Listen on a subtree and fire when anything in the subtree changes. This\n//   is used for custom functions.\n//\n// {{foo.id}} would listen on the fixed path ['foo', 'id'].\n//\n//\n// - Context tree represents the changing (embedded) contexts of the templating\n//   engine. This maps to the tree of templates and allows templates to reference\n//   anything in any of their enclosing template scopes.\n//\n\nmodule.exports = EventModel;\n\n// The code here uses object-based set pattern where objects are keyed using\n// sequentially generated IDs.\nvar nextId = 1;\n\n// A binding object is something with update(), insert()/move()/remove() defined.\n\n\n// Given x[y] with model.get(y) == 5:\n//  item = 5\n//  segments = ['y']\n//  outside = the EventModel for x.\n//\n// Note that item could be a Context or another ModelRef - eg:\n//\n// {{ each foo as bar }} ... {{ x[bar] }}  -or-  {{ x[y[z]] }}\nfunction ModelRef(model, item, segments, outside) {\n  this.id = nextId++;\n\n  // We need a reference to the model & our segment list so we can update our\n  // value.\n  this.model = model;\n  this.segments = segments;\n\n  // Our current value.\n  this.item = item;\n\n  // outside is a reference to the EventModel of the thing on the lhs of the\n  // brackets. For example, in x[y].z, outside is the EventModel of x.\n  this.outside = outside;\n\n  // result is the EventModel of the evaluated version of the brackets. In\n  // x[y].z, its the EventModel of x[y].\n  this.result = outside.child(item).refChild(this);\n}\n\nModelRef.prototype.update = function() {\n  var segments = expressions.pathSegments(this.segments);\n  var newItem = expressions.lookup(segments, this.model.data);\n  if (this.item === newItem) return;\n\n  // First remove myself.\n  delete this.outside.child(this.item).refChildren[this.id];\n\n  this.item = newItem;\n\n  var container = this.outside.child(this.item);\n  // I want to just call refChild but that would create a new EM. Instead I\n  // want to just implant my current EM there.\n  if (!container.refChildren) container.refChildren = new RefChildrenMap();\n  container.refChildren[this.id] = this.result;\n\n  // Finally, update all the bindings in the tree.\n  this.result.update();\n};\n\n\nfunction RefOutMap() {}\nfunction RefChildrenMap() {}\nfunction BindingsMap() {}\nfunction ItemContextsMap() {}\nfunction EventModelsMap() {}\n\nfunction EventModel() {\n  this.id = nextId++;\n\n  // Most of these won't ever be filled in, so I'm just leaving them null.\n  //\n  // These contain our EventModel children.\n  this.object = null;\n  this.array = null;\n\n  // This contains any EventModel children which have floating references.\n  this.arrayByReference = null;\n\n  // If the data stored here is ever used to lookup other values, this is an\n  // object mapping remote child ID -> ref.\n  //\n  // Eg given x[y], y.refOut[x.id] = <Binding>\n  this.refOut = null;\n\n  // This is a map from ref id -> event model for events bound to this\n  // EventModel but via a ref. We could just merge them into the main tree, but\n  // this way they're easy to move.\n  //\n  // Eg, given x[y] (y=1), x.1.refChildren[ref id] is an EventModel.\n  this.refChildren = null;\n\n  this.bindings = null;\n\n  // Item contexts are contexts which need their item number changed as this\n  // EventModel object moves around its surrounding list.\n  this.itemContexts = null;\n}\n\nEventModel.prototype.refChild = function(ref) {\n  if (!this.refChildren) this.refChildren = new RefChildrenMap();\n  var id = ref.id;\n\n  if (!this.refChildren[id]) {\n    this.refChildren[id] = new EventModel();\n  }\n  return this.refChildren[id];\n};\n\nEventModel.prototype.arrayLookup = function(model, segmentsBefore, segmentsInside) {\n  var segments = expressions.pathSegments(segmentsInside);\n  var item = expressions.lookup(segments, model.data);\n\n  var source = this.at(segmentsInside);\n\n  // What the array currently resolves to. Given x[y] with y=1, container is\n  // the EM for x\n  var container = this.at(segmentsBefore);\n\n  if (!source.refOut) source.refOut = new RefOutMap();\n\n  var ref = source.refOut[container.id];\n  if (ref == null) {\n    ref = new ModelRef(model, item, segmentsInside, container);\n    source.refOut[container.id] = ref;\n  }\n\n  return ref;\n};\n\n// Returns the EventModel node of the named child.\nEventModel.prototype.child = function(segment) {\n  var container;\n  if (typeof segment === 'string') {\n    // Object\n    if (!this.object) this.object = {};\n    container = this.object;\n\n  } else if (typeof segment === 'number') {\n    // Array by value\n    if (!this.array) this.array = [];\n    container = this.array;\n\n  } else if (segment instanceof ModelRef) {\n    // Array reference. We'll need to lookup the child with the right\n    // value, then look inside its ref children for the right EventModel\n    // (so we can update it later). This is pretty janky, but should be\n    // *correct* even in the face of recursive array accessors.\n    //\n    // This will calculate it based on the current segment values, but refs\n    // cache the EM anyway.\n    //return this.child(segment.item).refChild(segment);\n    return segment.result;\n\n  } else {\n    // Array by reference\n    if (!this.arrayByReference) this.arrayByReference = [];\n    container = this.arrayByReference;\n    segment = segment.item;\n  }\n\n  return container[segment] || (container[segment] = new EventModel());\n};\n\n// Returns the EventModel node at the given segments list. Note that although\n// EventModel nodes are unique, its possible for multiple EventModel nodes to\n// refer to the same section of the model because of references.\n//\n// If you want to update the bindings that refer to a specific path, use\n// each().\n//\n// EventModel objects are created as needed.\nEventModel.prototype.at = function(segments) {\n  // For unbound dependancies.\n  if (segments == null) return this;\n\n  var eventModel = this;\n\n  for (var i = 0; i < segments.length; i++) {\n    eventModel = eventModel.child(segments[i]);\n  }\n\n  return eventModel;\n};\n\nEventModel.prototype.isEmpty = function() {\n  if (hasKeys(this.dependancies)) return false;\n  if (hasKeys(this.itemContexts)) return false;\n\n  if (this.object) {\n    if (hasKeys(this.object)) return false;\n    this.object = null;\n  }\n\n  if (this.arrayByReference) {\n    for (var i = 0; i < this.arrayByReference.length; i++) {\n      if (this.arrayByReference[i] != null) return false;\n    }\n    this.arrayByReference = null;\n  }\n\n  if (this.array) {\n    for (var i = 0; i < this.array.length; i++) {\n      if (this.array[i] != null) return false;\n    }\n    this.array = null;\n  }\n\n  return true;\n};\n\nfunction hasKeys(object) {\n  for (var key in object) {\n    return true;\n  }\n  return false;\n}\n\n\n// **** Updating the EventModel\n\nEventModel.prototype._addItemContext = function(context) {\n  if (!context._id) context._id = nextId++;\n  if (!this.itemContexts) this.itemContexts = new ItemContextsMap();\n  this.itemContexts[context._id] = context;\n};\n\nEventModel.prototype._removeItemContext = function(context) {\n  if (this.itemContexts) {\n    delete this.itemContexts[context._id];\n  }\n};\n\nEventModel.prototype._addBinding = function(binding) {\n  var bindings = this.bindings || (this.bindings = new BindingsMap());\n  binding.eventModels || (binding.eventModels = new EventModelsMap());\n  bindings[binding.id] = binding;\n  binding.eventModels[this.id] = this;\n};\n\n// This is the main hook to add bindings to the event model tree. It should\n// only be called on the root EventModel object.\nEventModel.prototype.addBinding = function(segments, binding) {\n  this.at(segments)._addBinding(binding);\n};\n\n// This is used for objects (contexts in derby's case) that have a .item\n// property which refers to an array index.\nEventModel.prototype.addItemContext = function(segments, context) {\n  this.at(segments)._addItemContext(context);\n};\n\nEventModel.prototype.removeBinding = function(binding) {\n  if (!binding.eventModels) return;\n  for (var id in binding.eventModels) {\n    var eventModel = binding.eventModels[id];\n    if (eventModel.bindings) delete eventModel.bindings[binding.id];\n  }\n  binding.eventModels = null;\n};\n\nEventModel.prototype._each = function(segments, pos, fn) {\n  // Our refChildren are effectively merged into this object.\n  if (this.refChildren) {\n    for (var id in this.refChildren) {\n      var refChild = this.refChildren[id];\n      if (refChild) refChild._each(segments, pos, fn);\n    }\n  }\n\n  if (segments.length === pos) {\n    fn(this);\n    return;\n  }\n\n  var segment = segments[pos];\n  var child;\n  if (typeof segment === 'string') {\n    // Object. Just recurse into our objects set. Its possible to rewrite this\n    // function to simply loop in the case of object lookups, but I don't think\n    // it'll buy us much.\n    child = this.object && this.object[segment];\n    if (child) child._each(segments, pos + 1, fn);\n\n  } else {\n    // Number. Recurse both into the fixed list and the reference list.\n    child = this.array && this.array[segment];\n    if (child) child._each(segments, pos + 1, fn);\n\n    child = this.arrayByReference && this.arrayByReference[segment];\n    if (child) child._each(segments, pos + 1, fn);\n  }\n};\n\n// Called when the scalar value at the path changes. This only calls update()\n// on this node. See update() below if you want to update entire\n// subtrees.\nEventModel.prototype.localUpdate = function(previous, pass) {\n  if (this.bindings) {\n    for (var id in this.bindings) {\n      var binding = this.bindings[id];\n      if (binding) binding.update(previous, pass);\n    }\n  }\n\n  // If our value changed, we also need to update anything that depends on it\n  // via refOut.\n  if (this.refOut) {\n    for (var id in this.refOut) {\n      var ref = this.refOut[id];\n      if (ref) ref.update();\n    }\n  }\n};\n\n// This is used when an object subtree is replaced / removed.\nEventModel.prototype.update = function(previous, pass) {\n  this.localUpdate(previous, pass);\n\n  if (this.object) {\n    for (var key in this.object) {\n      var binding = this.object[key];\n      if (binding) binding.update();\n    }\n  }\n\n  if (this.array) {\n    for (var i = 0; i < this.array.length; i++) {\n      var binding = this.array[i];\n      if (binding) binding.update();\n    }\n  }\n\n  if (this.arrayByReference) {\n    for (var i = 0; i < this.arrayByReference.length; i++) {\n      var binding = this.arrayByReference[i];\n      if (binding) binding.update();\n    }\n  }\n};\n\n// Updates the indexes in itemContexts of our children in the range of\n// [from, to). from and to both optional.\nEventModel.prototype._updateChildItemContexts = function(from, to) {\n  if (!this.arrayByReference) return;\n\n  if (from == null) from = 0;\n  if (to == null) to = this.arrayByReference.length;\n\n  for (var i = from; i < to; i++) {\n    var contexts = this.arrayByReference[i] &&\n      this.arrayByReference[i].itemContexts;\n    if (contexts) {\n      for (var key in contexts) {\n        contexts[key].item = i;\n      }\n    }\n  }\n};\n\n// Updates our array-by-value values. They have to recursively update every\n// binding in their children. Sad.\nEventModel.prototype._updateArray = function(from, to) {\n  if (!this.array) return;\n\n  if (from == null) from = 0;\n  if (to == null) to = this.array.length;\n\n  for (var i = from; i < to; i++) {\n    var binding = this.array[i];\n    if (binding) binding.update();\n  }\n};\n\nEventModel.prototype._updateObject = function() {\n  if (this.object) {\n    for (var key in this.object) {\n      var binding = this.object[key];\n      if (binding) binding.update();\n    }\n  }\n};\n\nEventModel.prototype._set = function(previous, pass) {\n  // This just updates anything thats bound to the whole subtree. An alternate\n  // implementation could be passed in the new value at this node (which we\n  // cache), then compare with the old version and only update parts of the\n  // subtree which are relevant. I don't know if thats an important\n  // optimization - it really depends on your use case.\n  this.update(previous, pass);\n};\n\n// Insert into this EventModel node.\nEventModel.prototype._insert = function(index, howMany) {\n  // Update fixed paths\n  this._updateArray(index);\n\n  // Update relative paths\n  if (this.arrayByReference && this.arrayByReference.length > index) {\n    // Shift the actual items in the array references array.\n\n    // This probably isn't the best way to implement insert. Other options are\n    // using concat() on slices or though constructing a temporary array and\n    // using splice.call. Hopefully if this method is slow it'll come up during\n    // profiling.\n    for (var i = 0; i < howMany; i++) {\n      this.arrayByReference.splice(index, 0, null);\n    }\n\n    // Update the path in the contexts\n    this._updateChildItemContexts(index + howMany);\n  }\n\n  // Finally call our bindings.\n  if (this.bindings) {\n    for (var id in this.bindings) {\n      var binding = this.bindings[id];\n      if (binding) binding.insert(index, howMany);\n    }\n  }\n  this._updateObject();\n};\n\n// Remove howMany child elements from this EventModel at index.\nEventModel.prototype._remove = function(index, howMany) {\n  // Update fixed paths. Both the removed items and items after it may have changed.\n  this._updateArray(index);\n\n  if (this.arrayByReference) {\n    // Update relative paths. First throw away all the children which have been removed.\n    this.arrayByReference.splice(index, howMany);\n\n    this._updateChildItemContexts(index);\n  }\n\n  // Call bindings.\n  if (this.bindings) {\n    for (var id in this.bindings) {\n      var binding = this.bindings[id];\n      if (binding) binding.remove(index, howMany);\n    }\n  }\n  this._updateObject();\n};\n\n// Move howMany items from `from` to `to`.\nEventModel.prototype._move = function(from, to, howMany) {\n  // first points to the first element that was moved. end points to the list\n  // element past the end of the changed region.\n  var first, end;\n  if (from < to) {\n    first = from;\n    end = to + howMany;\n  } else {\n    first = to;\n    end = from + howMany;\n  }\n\n  // Update fixed paths.\n  this._updateArray(first, end);\n\n  // Update relative paths\n  var arr = this.arrayByReference;\n  if (arr && arr.length > first) {\n    // Remove from the old location\n    var values = arr.splice(from, howMany);\n\n    // Insert at the new location\n    arr.splice.apply(arr, [to, 0].concat(values));\n\n    // Update the path in the contexts\n    this._updateChildItemContexts(first, end);\n  }\n\n  // Finally call our bindings.\n  if (this.bindings) {\n    for (var id in this.bindings) {\n      var binding = this.bindings[id];\n      if (binding) binding.move(from, to, howMany);\n    }\n  }\n  this._updateObject();\n};\n\n\n// Helpers.\n\nEventModel.prototype.mutate = function(segments, fn) {\n  // This finds & returns a list of all event models which exist and could match\n  // the specified path. The path cannot contain contexts like derby expression\n  // segment lists (just because I don't think thats a useful feature and its not\n  // implemented)\n  this._each(segments, 0, fn);\n\n  // Also emit all mutations as sets on star paths, which are how dependencies\n  // for view helper functions are represented. They should react to a path\n  // or any child path being modified\n  for (var i = 0, len = segments.length; i++ < len;) {\n    var wildcardSegments = segments.slice(0, i);\n    wildcardSegments.push('*');\n    this._each(wildcardSegments, 0, childSetWildcard);\n  }\n};\n\nfunction childSetWildcard(child) {\n  child._set();\n}\n\nEventModel.prototype.set = function(segments, previous, pass) {\n  this.mutate(segments, function childSet(child) {\n    child._set(previous, pass);\n  });\n};\n\nEventModel.prototype.insert = function(segments, index, howMany) {\n  this.mutate(segments, function childInsert(child) {\n    child._insert(index, howMany);\n  });\n};\n\nEventModel.prototype.remove = function(segments, index, howMany) {\n  this.mutate(segments, function childRemove(child) {\n    child._remove(index, howMany);\n  });\n};\n\nEventModel.prototype.move = function(segments, from, to, howMany) {\n  this.mutate(segments, function childMove(child) {\n    child._move(from, to, howMany);\n  });\n};\n",
    "exports.onStringInsert = onStringInsert;\nexports.onStringRemove = onStringRemove;\nexports.onTextInput = onTextInput;\n\nfunction onStringInsert(el, previous, index, text) {\n  function transformCursor(cursor) {\n    return (index < cursor) ? cursor + text.length : cursor;\n  }\n  previous || (previous = '');\n  var newText = previous.slice(0, index) + text + previous.slice(index);\n  replaceText(el, newText, transformCursor);\n}\n\nfunction onStringRemove(el, previous, index, howMany) {\n  function transformCursor(cursor) {\n    return (index < cursor) ? cursor - Math.min(howMany, cursor - index) : cursor;\n  }\n  previous || (previous = '');\n  var newText = previous.slice(0, index) + previous.slice(index + howMany);\n  replaceText(el, newText, transformCursor);\n}\n\nfunction replaceText(el, newText, transformCursor) {\n  var selectionStart = transformCursor(el.selectionStart);\n  var selectionEnd = transformCursor(el.selectionEnd);\n\n  var scrollTop = el.scrollTop;\n  el.value = newText;\n  if (el.scrollTop !== scrollTop) {\n    el.scrollTop = scrollTop;\n  }\n  if (document.activeElement === el) {\n    el.selectionStart = selectionStart;\n    el.selectionEnd = selectionEnd;\n  }\n}\n\nfunction onTextInput(model, segments, value) {\n  var previous = model._get(segments) || '';\n  if (previous === value) return;\n  var start = 0;\n  while (previous.charAt(start) === value.charAt(start)) {\n    start++;\n  }\n  var end = 0;\n  while (\n    previous.charAt(previous.length - 1 - end) === value.charAt(value.length - 1 - end) &&\n    end + start < previous.length &&\n    end + start < value.length\n  ) {\n    end++;\n  }\n\n  if (previous.length !== start + end) {\n    var howMany = previous.length - start - end;\n    model._stringRemove(segments, start, howMany);\n  }\n  if (value.length !== start + end) {\n    var inserted = value.slice(start, value.length - end);\n    model._stringInsert(segments, start, inserted);\n  }\n}\n",
    "var derbyTemplates = require('derby-templates');\nvar contexts = derbyTemplates.contexts;\nvar expressions = derbyTemplates.expressions;\nvar templates = derbyTemplates.templates;\nvar DependencyOptions = derbyTemplates.options.DependencyOptions;\nvar util = require('racer/lib/util');\nvar components = require('./components');\nvar EventModel = require('./eventmodel');\nvar textDiff = require('./textDiff');\nvar Controller = require('./Controller');\nvar documentListeners = require('./documentListeners');\n\nmodule.exports = Page;\n\nfunction Page(app, model) {\n  Controller.call(this, app, this, model);\n  this.params = null;\n  if (this.init) this.init(model);\n  this.context = this._createContext();\n  this._eventModel = null;\n  this._removeModelListeners = null;\n  this._components = {};\n  this._addListeners();\n}\n\nutil.mergeInto(Page.prototype, Controller.prototype);\n\nPage.prototype.$bodyClass = function(ns) {\n  if (!ns) return;\n  var classNames = [];\n  var segments = ns.split(':');\n  for (var i = 0, len = segments.length; i < len; i++) {\n    var className = segments.slice(0, i + 1).join('-');\n    classNames.push(className);\n  }\n  return classNames.join(' ');\n};\n\nPage.prototype.$preventDefault = function(e) {\n  e.preventDefault();\n};\n\nPage.prototype.$stopPropagation = function(e) {\n  e.stopPropagation();\n};\n\nPage.prototype._setRenderParams = function(ns) {\n  this.model.set('$render.ns', ns);\n  this.model.set('$render.params', this.params);\n  this.model.set('$render.url', this.params && this.params.url);\n  this.model.set('$render.query', this.params && this.params.query);\n};\n\nPage.prototype._setRenderPrefix = function(ns) {\n  var prefix = (ns) ? ns + ':' : '';\n  this.model.set('$render.prefix', prefix);\n};\n\nPage.prototype.get = function(viewName, ns, unescaped) {\n  this._setRenderPrefix(ns);\n  var view = this.getView(viewName, ns);\n  return view.get(this.context, unescaped);\n};\n\nPage.prototype.getFragment = function(viewName, ns) {\n  this._setRenderPrefix(ns);\n  var view = this.getView(viewName, ns);\n  return view.getFragment(this.context);\n};\n\nPage.prototype.getView = function(viewName, ns) {\n  return this.app.views.find(viewName, ns);\n};\n\nPage.prototype.render = function(ns) {\n  this.app.emit('render', this);\n  this.context.pause();\n  this._setRenderParams(ns);\n  var titleFragment = this.getFragment('TitleElement', ns);\n  var bodyFragment = this.getFragment('BodyElement', ns);\n  var titleElement = document.getElementsByTagName('title')[0];\n  titleElement.parentNode.replaceChild(titleFragment, titleElement);\n  document.body.parentNode.replaceChild(bodyFragment, document.body);\n  this.context.unpause();\n  if (this.create) this.create(this.model, this.dom);\n  this.app.emit('routeDone', this, 'render');\n};\n\nPage.prototype.attach = function() {\n  this.context.pause();\n  var ns = this.model.get('$render.ns');\n  var titleView = this.getView('TitleElement', ns);\n  var bodyView = this.getView('BodyElement', ns);\n  var titleElement = document.getElementsByTagName('title')[0];\n  titleView.attachTo(titleElement.parentNode, titleElement, this.context);\n  bodyView.attachTo(document.body.parentNode, document.body, this.context);\n  this.context.unpause();\n  if (this.create) this.create(this.model, this.dom);\n};\n\nPage.prototype._createContext = function() {\n  var contextMeta = new contexts.ContextMeta();\n  contextMeta.views = this.app && this.app.views;\n  var context = new contexts.Context(contextMeta, this);\n  context.expression = new expressions.PathExpression([]);\n  context.alias = '#root';\n  return context;\n};\n\nPage.prototype._addListeners = function() {\n  var eventModel = this._eventModel = new EventModel();\n  this._addModelListeners(eventModel);\n  this._addContextListeners(eventModel);\n};\n\nPage.prototype.destroy = function() {\n  this.emit('destroy');\n  this._removeModelListeners();\n  for (var id in this._components) {\n    var component = this._components[id];\n    component.destroy();\n  }\n  // Remove all data, refs, listeners, and reactive functions\n  // for the previous page\n  var silentModel = this.model.silent();\n  silentModel.destroy('_page');\n  silentModel.destroy('$components');\n  // Unfetch and unsubscribe from all queries and documents\n  silentModel.unloadAll && silentModel.unloadAll();\n};\n\nPage.prototype._addModelListeners = function(eventModel) {\n  var model = this.model;\n  if (!model) return;\n  // Registering model listeners with the *Immediate events helps to prevent\n  // a bug with binding updates where a model listener causes a change to the\n  // path being listened on, directly or indirectly.\n\n  // TODO: Remove this when upgrading Racer to the next major version. Feature\n  // detect which type of event listener to register by emitting a test event\n  if (useLegacyListeners(model)) {\n    return this._addModelListenersLegacy(eventModel);\n  }\n\n  // `util.castSegments(segments)` is needed to cast string segments into\n  // numbers, since EventModel#child does typeof checks against segments. This\n  // could be done once in Racer's Model#emit, instead of in every listener.\n  var changeListener = model.on('changeImmediate', function onChange(segments, event) {\n    // The pass parameter is passed in for special handling of updates\n    // resulting from stringInsert or stringRemove\n    segments = util.castSegments(segments.slice());\n    eventModel.set(segments, event.previous, event.pass);\n  });\n  var loadListener = model.on('loadImmediate', function onLoad(segments) {\n    segments = util.castSegments(segments.slice());\n    eventModel.set(segments);\n  });\n  var unloadListener = model.on('unloadImmediate', function onUnload(segments, event) {\n    segments = util.castSegments(segments.slice());\n    eventModel.set(segments, event.previous);\n  });\n  var insertListener = model.on('insertImmediate', function onInsert(segments, event) {\n    segments = util.castSegments(segments.slice());\n    eventModel.insert(segments, event.index, event.values.length);\n  });\n  var removeListener = model.on('removeImmediate', function onRemove(segments, event) {\n    segments = util.castSegments(segments.slice());\n    eventModel.remove(segments, event.index, event.values.length);\n  });\n  var moveListener = model.on('moveImmediate', function onMove(segments, event) {\n    segments = util.castSegments(segments.slice());\n    eventModel.move(segments, event.from, event.to, event.howMany);\n  });\n\n  this._removeModelListeners = function() {\n    model.removeListener('changeImmediate', changeListener);\n    model.removeListener('loadImmediate', loadListener);\n    model.removeListener('unloadImmediate', unloadListener);\n    model.removeListener('insertImmediate', insertListener);\n    model.removeListener('removeImmediate', removeListener);\n    model.removeListener('moveImmediate', moveListener);\n  };\n};\nfunction useLegacyListeners(model) {\n  var useLegacy = true;\n  // model.once is broken in older racer, so manually remove event\n  var listener = model.on('changeImmediate', function(segments, event) {\n    model.removeListener('changeImmediate', listener);\n    // Older Racer emits an array of eventArgs, whereas newer racer emits an event object\n    useLegacy = Array.isArray(event);\n  });\n  model.set('$derby.testEvent', true);\n  return useLegacy;\n}\nPage.prototype._addModelListenersLegacy = function(eventModel) {\n  var model = this.model;\n  if (!model) return;\n\n  // `util.castSegments(segments)` is needed to cast string segments into\n  // numbers, since EventModel#child does typeof checks against segments. This\n  // could be done once in Racer's Model#emit, instead of in every listener.\n  var changeListener = model.on('changeImmediate', function onChange(segments, eventArgs) {\n    // eventArgs[0] is the new value, which Derby bindings don't use directly.\n    var previous = eventArgs[1];\n    // The pass parameter is passed in for special handling of updates\n    // resulting from stringInsert or stringRemove\n    var pass = eventArgs[2];\n    segments = util.castSegments(segments.slice());\n    eventModel.set(segments, previous, pass);\n  });\n  var loadListener = model.on('loadImmediate', function onLoad(segments) {\n    segments = util.castSegments(segments.slice());\n    eventModel.set(segments);\n  });\n  var unloadListener = model.on('unloadImmediate', function onUnload(segments) {\n    segments = util.castSegments(segments.slice());\n    eventModel.set(segments);\n  });\n  var insertListener = model.on('insertImmediate', function onInsert(segments, eventArgs) {\n    var index = eventArgs[0];\n    var values = eventArgs[1];\n    segments = util.castSegments(segments.slice());\n    eventModel.insert(segments, index, values.length);\n  });\n  var removeListener = model.on('removeImmediate', function onRemove(segments, eventArgs) {\n    var index = eventArgs[0];\n    var values = eventArgs[1];\n    segments = util.castSegments(segments.slice());\n    eventModel.remove(segments, index, values.length);\n  });\n  var moveListener = model.on('moveImmediate', function onMove(segments, eventArgs) {\n    var from = eventArgs[0];\n    var to = eventArgs[1];\n    var howMany = eventArgs[2];\n    segments = util.castSegments(segments.slice());\n    eventModel.move(segments, from, to, howMany);\n  });\n\n  this._removeModelListeners = function() {\n    model.removeListener('changeImmediate', changeListener);\n    model.removeListener('loadImmediate', loadListener);\n    model.removeListener('unloadImmediate', unloadListener);\n    model.removeListener('insertImmediate', insertListener);\n    model.removeListener('removeImmediate', removeListener);\n    model.removeListener('moveImmediate', moveListener);\n  };\n};\n\nPage.prototype._addContextListeners = function(eventModel) {\n  this.context.meta.addBinding = addBinding;\n  this.context.meta.removeBinding = removeBinding;\n  this.context.meta.removeNode = removeNode;\n  this.context.meta.addItemContext = addItemContext;\n  this.context.meta.removeItemContext = removeItemContext;\n\n  function addItemContext(context) {\n    var segments = context.expression.resolve(context);\n    eventModel.addItemContext(segments, context);\n  }\n  function removeItemContext(context) {\n    // TODO\n  }\n  function addBinding(binding) {\n    patchTextBinding(binding);\n    var expressions = binding.template.expressions;\n    if (expressions) {\n      for (var i = 0, len = expressions.length; i < len; i++) {\n        addDependencies(eventModel, expressions[i], binding);\n      }\n    } else {\n      var expression = binding.template.expression;\n      addDependencies(eventModel, expression, binding);\n    }\n  }\n  function removeBinding(binding) {\n    var bindingWrappers = binding.meta;\n    if (!bindingWrappers) return;\n    for (var i = bindingWrappers.length; i--;) {\n      eventModel.removeBinding(bindingWrappers[i]);\n    }\n  }\n  function removeNode(node) {\n    var component = node.$component;\n    if (component) component.destroy();\n    var destroyListeners = node.$destroyListeners;\n    if (destroyListeners) {\n      for (var i = 0; i < destroyListeners.length; i++) {\n        destroyListeners[i]();\n      }\n    }\n  }\n};\n\nfunction addDependencies(eventModel, expression, binding) {\n  var bindingWrapper = new BindingWrapper(eventModel, expression, binding);\n  bindingWrapper.updateDependencies();\n}\n\n// The code here uses object-based set pattern where objects are keyed using\n// sequentially generated IDs.\nvar nextId = 1;\nfunction BindingWrapper(eventModel, expression, binding) {\n  this.eventModel = eventModel;\n  this.expression = expression;\n  this.binding = binding;\n  this.id = nextId++;\n  this.eventModels = null;\n  this.dependencies = null;\n  this.ignoreTemplateDependency = (\n    binding instanceof components.ComponentAttributeBinding\n  ) || (\n    (binding.template instanceof templates.DynamicText) &&\n    (binding instanceof templates.RangeBinding)\n  );\n  if (binding.meta) {\n    binding.meta.push(this);\n  } else {\n    binding.meta = [this];\n  }\n}\nBindingWrapper.prototype.updateDependencies = function() {\n  var dependencyOptions;\n  if (this.ignoreTemplateDependency && this.binding.condition instanceof templates.Template) {\n    dependencyOptions = new DependencyOptions();\n    dependencyOptions.setIgnoreTemplate(this.binding.condition);\n  }\n  var dependencies = this.expression.dependencies(this.binding.context, dependencyOptions);\n  if (this.dependencies) {\n    // Do nothing if dependencies haven't changed\n    if (equalDependencies(this.dependencies, dependencies)) return;\n    // Otherwise, remove current dependencies\n    this.eventModel.removeBinding(this);\n  }\n  // Add new dependencies\n  if (!dependencies) return;\n  this.dependencies = dependencies;\n  for (var i = 0, len = dependencies.length; i < len; i++) {\n    var dependency = dependencies[i];\n    if (dependency) this.eventModel.addBinding(dependency, this);\n  }\n};\nBindingWrapper.prototype.update = function(previous, pass) {\n  this.binding.update(previous, pass);\n  this.updateDependencies();\n};\nBindingWrapper.prototype.insert = function(index, howMany) {\n  this.binding.insert(index, howMany);\n  this.updateDependencies();\n};\nBindingWrapper.prototype.remove = function(index, howMany) {\n  this.binding.remove(index, howMany);\n  this.updateDependencies();\n};\nBindingWrapper.prototype.move = function(from, to, howMany) {\n  this.binding.move(from, to, howMany);\n  this.updateDependencies();\n};\n\nfunction equalDependencies(a, b) {\n  var lenA = a ? a.length : -1;\n  var lenB = b ? b.length : -1;\n  if (lenA !== lenB) return false;\n  for (var i = 0; i < lenA; i++) {\n    var itemA = a[i];\n    var itemB = b[i];\n    var lenItemA = itemA ? itemA.length : -1;\n    var lenItemB = itemB ? itemB.length : -1;\n    if (lenItemA !== lenItemB) return false;\n    for (var j = 0; j < lenItemB; j++) {\n      if (itemA[j] !== itemB[j]) return false;\n    }\n  }\n  return true;\n}\n\nfunction patchTextBinding(binding) {\n  if (\n    binding instanceof templates.AttributeBinding &&\n    binding.name === 'value' &&\n    (binding.element.tagName === 'INPUT' || binding.element.tagName === 'TEXTAREA') &&\n    documentListeners.inputSupportsSelection(binding.element) &&\n    binding.template.expression.resolve(binding.context)\n  ) {\n    binding.update = textInputUpdate;\n  }\n}\n\nfunction textInputUpdate(previous, pass) {\n  textUpdate(this, this.element, previous, pass);\n}\nfunction textUpdate(binding, element, previous, pass) {\n  if (pass) {\n    if (pass.$event && pass.$event.target === element) {\n      return;\n    } else if (pass.$stringInsert) {\n      return textDiff.onStringInsert(\n        element,\n        previous,\n        pass.$stringInsert.index,\n        pass.$stringInsert.text\n      );\n    } else if (pass.$stringRemove) {\n      return textDiff.onStringRemove(\n        element,\n        previous,\n        pass.$stringRemove.index,\n        pass.$stringRemove.howMany\n      );\n    }\n  }\n  binding.template.update(binding.context, binding);\n}\n",
    "/*DERBY_SERIALIZED_VIEWS*/module.exports = function(derbyTemplates, views){var expressions = derbyTemplates.expressions,templates = derbyTemplates.templates;views.deserialize([[function(){return this.template=new templates.Template([new templates.Element('title', void 0, [new templates.Block(new templates.Template([new templates.DynamicText(new expressions.PathExpression(['$render', 'prefix'], new expressions.ExpressionMeta('$render.prefix'))), new templates.Text('Title')], '{{$render.prefix}}Title'), [new templates.DynamicViewInstance(new templates.Template([new templates.DynamicText(new expressions.PathExpression(['$render', 'prefix'], new expressions.ExpressionMeta('$render.prefix'))), new templates.Text('Title')], '{{$render.prefix}}Title'), {})])], void 0, false)])},'TitleElement'],[function(){return this.template=new templates.Template([new templates.Element('body', {'class': new templates.DynamicAttribute(new expressions.FnExpression(['$bodyClass'], [new expressions.PathExpression(['$render', 'ns'])], void 0, new expressions.ExpressionMeta('$bodyClass($render.ns)')))}, [new templates.Block(new templates.Template([new templates.DynamicText(new expressions.PathExpression(['$render', 'prefix'], new expressions.ExpressionMeta('$render.prefix'))), new templates.Text('Body')], '{{$render.prefix}}Body'), [new templates.DynamicViewInstance(new templates.Template([new templates.DynamicText(new expressions.PathExpression(['$render', 'prefix'], new expressions.ExpressionMeta('$render.prefix'))), new templates.Text('Body')], '{{$render.prefix}}Body'), {})])], void 0, false, true)])},'BodyElement'],[function(){return this.template=new templates.Template([new templates.Text('Derby App')])},'Title'],[function(){return this.template=new templates.Template([new templates.Text('Holler: '), new templates.Element('input', {'value': new templates.DynamicAttribute(new expressions.PathExpression(['hello', 'message'], new expressions.ExpressionMeta('hello.message')))}, null, void 0, false), new templates.Element('h2', void 0, [new templates.DynamicText(new expressions.PathExpression(['hello', 'message'], new expressions.ExpressionMeta('hello.message')))], void 0, false)])},'Body'],[function(){return this.template=new templates.Template([])},'Tail']])};/*DERBY_SERIALIZED_VIEWS_END*/",
    "/*\n * App.js\n *\n * Provides the glue between views, controllers, and routes for an\n * application's functionality. Apps are responsible for creating pages.\n *\n */\n\nvar path = require('path');\nvar EventEmitter = require('events').EventEmitter;\nvar tracks = require('tracks');\nvar util = require('racer/lib/util');\nvar derbyTemplates = require('derby-templates');\nvar templates = derbyTemplates.templates;\nvar components = require('./components');\nvar PageBase = require('./Page');\nvar serializedViews = require('./_views');\n\nmodule.exports = App;\n\nfunction App(derby, name, filename, options) {\n  EventEmitter.call(this);\n  this.derby = derby;\n  this.name = name;\n  this.filename = filename;\n  this.scriptHash = '{{DERBY_SCRIPT_HASH}}';\n  this.bundledAt = '{{DERBY_BUNDLED_AT}}';\n  this.Page = createAppPage(derby);\n  this.proto = this.Page.prototype;\n  this.views = new templates.Views();\n  this.tracksRoutes = tracks.setup(this);\n  this.model = null;\n  this.page = null;\n  this._pendingComponentMap = {};\n  this._init(options);\n}\n\nfunction createAppPage(derby) {\n  var Page = (derby && derby.Page) || PageBase;\n  // Inherit from Page/PageForServer so that we can add controller functions as prototype\n  // methods on this app's pages\n  function AppPage() {\n    Page.apply(this, arguments);\n  }\n  AppPage.prototype = Object.create(Page.prototype);\n  return AppPage;\n}\n\nutil.mergeInto(App.prototype, EventEmitter.prototype);\n\n// Overriden on server\nApp.prototype._init = function() {\n  this._waitForAttach = true;\n  this._cancelAttach = false;\n  this.model = new this.derby.Model();\n  serializedViews(derbyTemplates, this.views);\n  // Must init async so that app.on('model') listeners can be added.\n  // Must also wait for content ready so that bundle is fully downloaded.\n  this._contentReady();\n};\nApp.prototype._finishInit = function() {\n  var script = this._getScript();\n  var data = JSON.parse(script.nextSibling.innerHTML);\n  this.model.createConnection(data);\n  this.emit('model', this.model);\n  util.isProduction = data.nodeEnv === 'production';\n  if (!util.isProduction) this._autoRefresh();\n  this.model.unbundle(data);\n  var page = this.createPage();\n  page.params = this.model.get('$render.params');\n  this.emit('ready', page);\n  this._waitForAttach = false;\n  // Instead of attaching, do a route and render if a link was clicked before\n  // the page finished attaching\n  if (this._cancelAttach) {\n    this.history.refresh();\n    return;\n  }\n  // Since an attachment failure is *fatal* and could happen as a result of a\n  // browser extension like AdBlock, an invalid template, or a small bug in\n  // Derby or Saddle, re-render from scratch on production failures\n  if (util.isProduction) {\n    try {\n      page.attach();\n    } catch (err) {\n      this.history.refresh();\n      console.warn('attachment error', err.stack);\n    }\n  } else {\n    page.attach();\n  }\n  this.emit('load', page);\n};\n// Modified from: https://github.com/addyosmani/jquery.parts/blob/master/jquery.documentReady.js\nApp.prototype._contentReady = function() {\n  // Is the DOM ready to be used? Set to true once it occurs.\n  var isReady = false;\n  var app = this;\n\n  // The ready event handler\n  function onDOMContentLoaded() {\n    if (document.addEventListener) {\n      document.removeEventListener('DOMContentLoaded', onDOMContentLoaded, false);\n    } else {\n      // we're here because readyState !== 'loading' in oldIE\n      // which is good enough for us to call the dom ready!\n      document.detachEvent('onreadystatechange', onDOMContentLoaded);\n    }\n    onDOMReady();\n  }\n\n  // Handle when the DOM is ready\n  function onDOMReady() {\n    // Make sure that the DOM is not already loaded\n    if (isReady) return;\n    // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\n    if (!document.body) return setTimeout(onDOMReady, 0);\n    // Remember that the DOM is ready\n    isReady = true;\n    // Make sure this is always async and then finishin init\n    setTimeout(function() {\n      app._finishInit();\n    }, 0);\n  }\n\n  // The DOM ready check for Internet Explorer\n  function doScrollCheck() {\n    if (isReady) return;\n    try {\n      // If IE is used, use the trick by Diego Perini\n      // http://javascript.nwbox.com/IEContentLoaded/\n      document.documentElement.doScroll('left');\n    } catch (err) {\n      setTimeout(doScrollCheck, 0);\n      return;\n    }\n    // and execute any waiting functions\n    onDOMReady();\n  }\n\n  // Catch cases where called after the browser event has already occurred.\n  if (document.readyState !== 'loading') return onDOMReady();\n\n  // Mozilla, Opera and webkit nightlies currently support this event\n  if (document.addEventListener) {\n    // Use the handy event callback\n    document.addEventListener('DOMContentLoaded', onDOMContentLoaded, false);\n    // A fallback to window.onload, that will always work\n    window.addEventListener('load', onDOMContentLoaded, false);\n    // If IE event model is used\n  } else if (document.attachEvent) {\n    // ensure firing before onload,\n    // maybe late but safe also for iframes\n    document.attachEvent('onreadystatechange', onDOMContentLoaded);\n    // A fallback to window.onload, that will always work\n    window.attachEvent('onload', onDOMContentLoaded);\n    // If IE and not a frame\n    // continually check to see if the document is ready\n    var toplevel;\n    try {\n      toplevel = window.frameElement == null;\n    } catch (err) {}\n    if (document.documentElement.doScroll && toplevel) {\n      doScrollCheck();\n    }\n  }\n};\n\nApp.prototype._getScript = function() {\n  return document.querySelector('script[data-derby-app]');\n};\n\nApp.prototype.use = util.use;\nApp.prototype.serverUse = util.serverUse;\n\nApp.prototype.loadViews = function() {};\n\nApp.prototype.loadStyles = function() {};\n\n// This function is overriden by requiring 'derby/parsing'\nApp.prototype.addViews = function() {\n  throw new Error(\n    'Parsing not available. Registering a view from source should not be used ' +\n    'in application code. Instead, specify a filename with view.file.'\n  );\n};\n\nApp.prototype.component = function(name, constructor, isDependency) {\n  if (typeof name === 'function') {\n    constructor = name;\n    name = null;\n  }\n  if (typeof constructor !== 'function') {\n    throw new Error('Missing component constructor argument');\n  }\n\n  var viewProp = constructor.view;\n  var viewIs, viewFilename, viewSource, viewDependencies;\n  // Always using an object for the static `view` property is preferred\n  if (viewProp && typeof viewProp === 'object') {\n    viewIs = viewProp.is;\n    viewFilename = viewProp.file;\n    viewSource = viewProp.source;\n    viewDependencies = viewProp.dependencies;\n  } else {\n    // Ignore other properties when `view` is an object. It is possible that\n    // properties could be inherited from a parent component when extending it.\n    //\n    // DEPRECATED: constructor.prototype.name and constructor.prototype.view\n    // use the equivalent static properties instead\n    viewIs = constructor.is || constructor.prototype.name;\n    viewFilename = constructor.view || constructor.prototype.view;\n  }\n  var viewName = name || viewIs ||\n    (viewFilename && path.basename(viewFilename, '.html'));\n\n  if (!viewName) {\n    throw new Error('No view specified for component');\n  }\n  if (viewFilename && viewSource) {\n    throw new Error('Component may not specify both a view file and source');\n  }\n\n  // TODO: DRY. This is copy-pasted from derby-templates\n  var mapName = viewName.replace(/:index$/, '');\n  var currentView = this.views.nameMap[mapName];\n  var currentConstructor = (currentView && currentView.componentFactory) ?\n    currentView.componentFactory.constructor :\n    this._pendingComponentMap[mapName];\n\n  // Avoid registering the same component twice; we want to avoid the overhead\n  // of loading view files from disk again. This is also what prevents\n  // circular dependencies from infinite looping\n  if (currentConstructor === constructor) return;\n\n  // Calling app.component() overrides existing views or components. Prevent\n  // dependencies from doing this without warning\n  if (isDependency && currentView && !currentView.fromSerialized) {\n    throw new Error('Dependencies cannot override existing views. Already registered \"' + viewName + '\"');\n  }\n\n  // This map is used to prevent infinite loops from circular dependencies\n  this._pendingComponentMap[mapName] = constructor;\n\n  // Recursively register component dependencies\n  if (viewDependencies) {\n    for (var i = 0; i < viewDependencies.length; i++) {\n      var dependency = viewDependencies[i];\n      if (Array.isArray(dependency)) {\n        this.component(dependency[0], dependency[1], true);\n      } else {\n        this.component(null, dependency, true);\n      }\n    }\n  }\n\n  // Register or find views specified by the component\n  var view;\n  if (viewFilename) {\n    this.loadViews(viewFilename, viewName);\n    view = this.views.find(viewName);\n\n  } else if (viewSource) {\n    this.addViews(viewSource, viewName);\n    view = this.views.find(viewName);\n\n  } else if (name) {\n    view = this.views.find(viewName);\n\n  } else {\n    view = this.views.register(viewName, '');\n  }\n  if (!view) {\n    var message = this.views.findErrorMessage(viewName);\n    throw new Error(message);\n  }\n\n  // Inherit from Component\n  components.extendComponent(constructor);\n  // Associate the appropriate view with the component constructor\n  view.componentFactory = components.createFactory(constructor);\n\n  delete this._pendingComponentMap[mapName];\n\n  // Make chainable\n  return this;\n};\n\nApp.prototype.createPage = function() {\n  if (this.page) {\n    this.emit('destroyPage', this.page);\n    this.page.destroy();\n  }\n  var page = new this.Page(this, this.model);\n  this.page = page;\n  return page;\n};\n\nApp.prototype.onRoute = function(callback, page, next, done) {\n  if (this._waitForAttach) {\n    // Cancel any routing before the initial page attachment. Instead, do a\n    // render once derby is ready\n    this._cancelAttach = true;\n    return;\n  }\n  this.emit('route', page);\n  // HACK: To update render in transitional routes\n  page.model.set('$render.params', page.params);\n  page.model.set('$render.url', page.params.url);\n  page.model.set('$render.query', page.params.query);\n  // If transitional\n  if (done) {\n    var app = this;\n    var _done = function() {\n      app.emit('routeDone', page, 'transition');\n      done();\n    };\n    callback.call(page, page, page.model, page.params, next, _done);\n    return;\n  }\n  callback.call(page, page, page.model, page.params, next);\n};\n\nApp.prototype._autoRefresh = function() {\n  var app = this;\n  var connection = this.model.connection;\n  connection.on('connected', function() {\n    connection.send({\n      derby: 'app',\n      name: app.name,\n      hash: app.scriptHash\n    });\n  });\n  connection.on('receive', function(request) {\n    if (request.data.derby) {\n      var message = request.data;\n      request.data = null;\n      app._handleMessage(message.derby, message);\n    }\n  });\n};\n\nApp.prototype._handleMessage = function(action, message) {\n  if (action === 'refreshViews') {\n    var fn = new Function('return ' + message.views)(); // jshint ignore:line\n    fn(derbyTemplates, this.views);\n    var ns = this.model.get('$render.ns');\n    this.page.render(ns);\n\n  } else if (action === 'refreshStyles') {\n    var styleElement = document.querySelector('style[data-filename=\"' +\n      message.filename + '\"]');\n    if (styleElement) styleElement.innerHTML = message.css;\n\n  } else if (action === 'reload') {\n    this.model.whenNothingPending(function() {\n      window.location = window.location;\n    });\n  }\n};\n",
    "/*\n * Derby.js\n * Meant to be the entry point for the framework.\n *\n */\nvar racer = require('racer');\n\nmodule.exports = Derby;\n\nfunction Derby() {}\nDerby.prototype = Object.create(racer);\nDerby.prototype.constructor = Derby;\n\nDerby.prototype.App = require('./App');\nDerby.prototype.Page = require('./Page');\nDerby.prototype.Component = require('./components').Component;\n\nDerby.prototype.createApp = function(name, filename, options) {\n  return new this.App(this, name, filename, options);\n};\n\nif (!racer.util.isServer) {\n  require('./documentListeners').add(document);\n}\n",
    "var serverRequire = require('racer').util.serverRequire;\nvar Derby = serverRequire(module, './lib/DerbyForServer') || require('./lib/Derby');\nmodule.exports = new Derby();\n",
    "\nexposedRequire.m[\"racer\"] = _$lib_racer;\nexposedRequire.m[\"derby\"] = _$derby_derby;\nreturn exposedRequire;\n}(typeof require === 'function' ? require : void 0));",
    "\"use strict\";\n\nvar app = module.exports = require('derby').createApp('hello', __filename);\n\napp.loadViews(__dirname); // Routes render on client as well as server\n\napp.get('/', function (page, model) {\n  // Subscribe specifies the data to sync\n  var message = model.at('hello.message');\n  message.subscribe(function (err) {\n    if (err) return next(err);\n    message.createNull('');\n    page.render();\n  });\n});"
  ],
  "sourceRoot": ""
}