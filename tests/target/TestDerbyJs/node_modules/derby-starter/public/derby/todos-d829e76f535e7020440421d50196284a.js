require=function(require){var exposedRequire=function t(e,n){return t.m.hasOwnProperty(e)?t.m[e]:"function"!=typeof require||n?"function"==typeof t.r?t.r(e,1):void 0:require(e,1)};exposedRequire.m={},exposedRequire.r=require;var createModuleFactory=function(t){var e;return function(n){return e||t(e={exports:{},parent:n},e.exports),e.exports}},_$jqueryUi1103CustomMin_217=createModuleFactory(function(t,e){"use strict";var n,r,i,o,s;!function(t,e){function n(e,n){var i,o,s,a=e.nodeName.toLowerCase();return"area"===a?(o=(i=e.parentNode).name,!(!e.href||!o||"map"!==i.nodeName.toLowerCase())&&(!!(s=t("img[usemap=#"+o+"]")[0])&&r(s))):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a&&e.href||n)&&r(e)}function r(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var i=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,r){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),r&&r.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var r,i,o=t(this[0]);o.length&&o[0]!==document;){if(("absolute"===(r=o.css("position"))||"relative"===r||"fixed"===r)&&(i=parseInt(o.css("zIndex"),10),!isNaN(i)&&0!==i))return i;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,r){return!!t.data(e,r[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var r=t.attr(e,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(e,!i)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,r){function i(e,n,r,i){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,r&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),i&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===r?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+r]=function(n){return n===e?a["inner"+r].call(this):this.each(function(){t(this).css(s,i(this,n)+"px")})},t.fn["outer"+r]=function(e,n){return"number"!=typeof e?a["outer"+r].call(this,e):this.each(function(){t(this).css(s,i(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,r){var i,o=t.ui[e].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(t,e,n){var r,i=t.plugins[e];if(i&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(r=0;i.length>r;r++)t.options[i[r][0]]&&i[r][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return e[r]>0||(e[r]=1,i=e[r]>0,e[r]=0,i)}})}(jQuery),n=jQuery,i=0,o=Array.prototype.slice,s=n.cleanData,n.cleanData=function(t){for(var e,r=0;null!=(e=t[r]);r++)try{n(e).triggerHandler("remove")}catch(t){}s(t)},n.widget=function(t,e,i){var o,s,a,c,l={},u=t.split(".")[0];t=t.split(".")[1],o=u+"-"+t,i||(i=e,e=n.Widget),n.expr[":"][o.toLowerCase()]=function(t){return!!n.data(t,o)},n[u]=n[u]||{},s=n[u][t],a=n[u][t]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),r):new a(t,e)},n.extend(a,s,{version:i.version,_proto:n.extend({},i),_childConstructors:[]}),(c=new e).options=n.widget.extend({},c.options),n.each(i,function(t,i){return n.isFunction(i)?(l[t]=function(){var n=function(){return e.prototype[t].apply(this,arguments)},r=function(n){return e.prototype[t].apply(this,n)};return function(){var t,e=this._super,o=this._superApply;return this._super=n,this._superApply=r,t=i.apply(this,arguments),this._super=e,this._superApply=o,t}}(),r):(l[t]=i,r)}),a.prototype=n.widget.extend(c,{widgetEventPrefix:s?c.widgetEventPrefix:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:o}),s?(n.each(s._childConstructors,function(t,e){var r=e.prototype;n.widget(r.namespace+"."+r.widgetName,a,e._proto)}),delete s._childConstructors):e._childConstructors.push(a),n.widget.bridge(t,a)},n.widget.extend=function(t){for(var e,i,s=o.call(arguments,1),a=0,c=s.length;c>a;a++)for(e in s[a])i=s[a][e],s[a].hasOwnProperty(e)&&i!==r&&(t[e]=n.isPlainObject(i)?n.isPlainObject(t[e])?n.widget.extend({},t[e],i):n.widget.extend({},i):i);return t},n.widget.bridge=function(t,e){var i=e.prototype.widgetFullName||t;n.fn[t]=function(s){var a="string"==typeof s,c=o.call(arguments,1),l=this;return s=!a&&c.length?n.widget.extend.apply(null,[s].concat(c)):s,a?this.each(function(){var e,o=n.data(this,i);return o?n.isFunction(o[s])&&"_"!==s.charAt(0)?(e=o[s].apply(o,c))!==o&&e!==r?(l=e&&e.jquery?l.pushStack(e.get()):e,!1):r:n.error("no such method '"+s+"' for "+t+" widget instance"):n.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var t=n.data(this,i);t?t.option(s||{})._init():n.data(this,i,new e(s,this))}),l}},n.Widget=function(){},n.Widget._childConstructors=[],n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=n(e||this.defaultElement||this)[0],this.element=n(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=n.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=n(),this.hoverable=n(),this.focusable=n(),e!==this&&(n.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=n(e.style?e.ownerDocument:e.document||e),this.window=n(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(t,e){var i,o,s,a=t;if(0===arguments.length)return n.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(o=a[t]=n.widget.extend({},this.options[t]),s=0;i.length-1>s;s++)o[i[s]]=o[i[s]]||{},o=o[i[s]];if(t=i.pop(),e===r)return o[t]===r?null:o[t];o[t]=e}else{if(e===r)return this.options[t]===r?null:this.options[t];a[t]=e}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,e,i){var o,s=this;"boolean"!=typeof t&&(i=e,e=t,t=!1),i?(e=o=n(e),this.bindings=this.bindings.add(e)):(i=e,e=this.element,o=this.widget()),n.each(i,function(i,a){function c(){return t||!0!==s.options.disabled&&!n(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):r}"string"!=typeof a&&(c.guid=a.guid=a.guid||c.guid||n.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+s.eventNamespace,p=l[2];p?o.delegate(p,u,c):e.bind(u,c)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,r){var i,o,s=this.options[t];if(r=r||{},(e=n.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(i in o)i in e||(e[i]=o[i]);return this.element.trigger(e,r),!(n.isFunction(s)&&!1===s.apply(this.element[0],[e].concat(r))||e.isDefaultPrevented())}},n.each({show:"fadeIn",hide:"fadeOut"},function(t,e){n.Widget.prototype["_"+t]=function(r,i,o){"string"==typeof i&&(i={effect:i});var s,a=i?!0===i||"number"==typeof i?e:i.effect||e:t;"number"==typeof(i=i||{})&&(i={duration:i}),s=!n.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),s&&n.effects&&n.effects.effect[a]?r[t](i):a!==t&&r[a]?r[a](i.duration,i.easing,o):r.queue(function(e){n(this)[t](),o&&o.call(r[0]),e()})}}),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(i&&!o&&this._mouseCapture(n))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return r._mouseMove(t)},this._mouseUpDelegate=function(t){return r._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0))}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){function e(t,e,n){return t>e&&e+n>t}function n(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||n(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,n){"disabled"===e?(this.options[e]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,n){var r=null,i=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(r=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(r=t(e.target)),!!r&&(!(this.options.handle&&!n&&(t(this.options.handle,r).find("*").addBack().each(function(){this===e.target&&(i=!0)}),!i))&&(this.currentItem=r,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,n,r){var i,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,r,i,o,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed)),e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=(r=this.items[n]).item[0],(o=this._intersectsWithPointer(r))&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==i&&!t.contains(this.placeholder[0],i)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],i))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(e,r),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var r=this,i=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){r._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),r=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&r.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!r.length&&e.key&&r.push(e.key+"="),r.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),r=[];return e=e||{},n.each(function(){r.push(t(e.item||this).attr(e.attribute||"id")||"")}),r},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,c=a+t.height,l=this.offset.click.top,u=this.offset.click.left,p="x"===this.options.axis||r+l>a&&c>r+l,h="y"===this.options.axis||e+u>o&&s>e+u,f=p&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:e+this.helperProportions.width/2>o&&s>n-this.helperProportions.width/2&&r+this.helperProportions.height/2>a&&c>i-this.helperProportions.height/2},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return!!i&&(this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var n=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&r||"left"===o&&!r:i&&("down"===i&&n||"up"===i&&!n)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,r,i,o,s=[],a=[],c=this._connectWith();if(c&&e)for(n=c.length-1;n>=0;n--)for(r=(i=t(c[n])).length-1;r>=0;r--)(o=t.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&a.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;n>=0;n--)a[n][0].each(function(){s.push(this)});return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;e.length>n;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,r,i,o,s,a,c,l,u=this.items,p=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(r=(i=t(h[n])).length-1;r>=0;r--)(o=t.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&(p.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(n=p.length-1;n>=0;n--)for(s=p[n][1],r=0,l=(a=p[n][0]).length;l>r;r++)(c=t(a[r])).data(this.widgetName+"-item",s),u.push({item:c,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var n,r,i,o;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(r=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?t(this.options.toleranceElement,r.item):r.item,e||(r.width=i.outerWidth(),r.height=i.outerHeight()),o=i.offset(),r.left=o.left,r.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){var n,r=(e=e||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=e.currentItem[0].nodeName.toLowerCase(),i=t("<"+r+">",e.document[0]).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===r?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)}):"img"===r&&i.attr("src",e.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(t,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(r.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),r.placeholder.update(e,e.placeholder)},_contactContainers:function(r){var i,o,s,a,c,l,u,p,h,f,d=null,_=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],_=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",r,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[_].containerCache.over||(this.containers[_]._trigger("over",r,this._uiHash(this)),this.containers[_].containerCache.over=1);else{for(s=1e4,a=null,c=(f=d.floating||n(this.currentItem))?"left":"top",l=f?"width":"height",u=this.positionAbs[c]+this.offset.click[c],o=this.items.length-1;o>=0;o--)t.contains(this.containers[_].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!f||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(p=this.items[o].item.offset()[c],h=!1,Math.abs(p-u)>Math.abs(p+this.items[o][l]-u)&&(h=!0,p+=this.items[o][l]),s>Math.abs(p-u)&&(s=Math.abs(p-u),a=this.items[o],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[_])return;a?this._rearrange(r,a,null,!0):this._rearrange(r,null,this.containers[_].element,!0),this._trigger("change",r,this._uiHash()),this.containers[_]._trigger("change",r,this._uiHash(this)),this.currentContainer=this.containers[_],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[_]._trigger("over",r,this._uiHash(this)),this.containers[_].containerCache.over=1}},_createHelper:function(e){var n=this.options,r=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(e=t(i.containment)[0],n=t(i.containment).offset(),r="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var r="absolute"===e?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*r}},_generatePosition:function(e){var n,r,i=this.options,o=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:a.scrollLeft())}},_rearrange:function(t,e,n,r){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,e){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||r.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),n=0;r.length>n;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(n=0;r.length>n;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})}(jQuery)}),_$jquery191Min_216=createModuleFactory(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){var r,i,o=n(e),s=t.document,a=t.location,c=t.jQuery,l=t.$,u={},p=[],h="1.9.1",f=p.concat,d=p.push,_=p.slice,m=p.indexOf,y=u.toString,g=u.hasOwnProperty,v=h.trim,b=function t(e,n){return new t.fn.init(e,n,i)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,$=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,O=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,D=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,R=/^-ms-/,P=/-([\da-z])/gi,A=function(t,e){return e.toUpperCase()},I=function(t){(s.addEventListener||"load"===t.type||"complete"===s.readyState)&&(N(),b.ready())},N=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",I,!1),t.removeEventListener("load",I,!1)):(s.detachEvent("onreadystatechange",I),t.detachEvent("onload",I))};function M(t){var e=t.length,n=b.type(t);return!b.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)))}b.fn=b.prototype={jquery:h,constructor:b,init:function(t,n,r){var i,o;if(!t)return this;if("string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:w.exec(t))||!i[1]&&n)return!n||n.jquery?(n||r).find(t):this.constructor(n).find(t);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0)),$.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if((o=s.getElementById(i[2]))&&o.parentNode){if(o.id!==i[2])return r.find(t);this.length=1,this[0]=o}return this.context=s,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):b.isFunction(t)?r.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),b.makeArray(t,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return _.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=b.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return b.each(this,t,e)},ready:function(t){return b.ready.promise().done(t),this},slice:function(){return this.pushStack(_.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(b.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var t,r,i,o,s,a,c=arguments[0]||{},l=1,u=arguments.length,p=!1;for("boolean"==typeof c&&(p=c,c=arguments[1]||{},l=2),"object"==n(c)||b.isFunction(c)||(c={}),u===l&&(c=this,--l);u>l;l++)if(null!=(s=arguments[l]))for(o in s)t=c[o],c!==(i=s[o])&&(p&&i&&(b.isPlainObject(i)||(r=b.isArray(i)))?(r?(r=!1,a=t&&b.isArray(t)?t:[]):a=t&&b.isPlainObject(t)?t:{},c[o]=b.extend(p,a,i)):i!==e&&(c[o]=i));return c},b.extend({noConflict:function(e){return t.$===b&&(t.$=l),e&&t.jQuery===b&&(t.jQuery=c),b},isReady:!1,readyWait:1,holdReady:function(t){t?b.readyWait++:b.ready(!0)},ready:function(t){if(!0===t?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,!0!==t&&--b.readyWait>0||(r.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===b.type(t)},isArray:Array.isArray||function(t){return"array"===b.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==n(t)||"function"==typeof t?u[y.call(t)]||"object":n(t)},isPlainObject:function(t){if(!t||"object"!==b.type(t)||t.nodeType||b.isWindow(t))return!1;try{if(t.constructor&&!g.call(t,"constructor")&&!g.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;for(n in t);return n===e||g.call(t,n)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||s;var r=$.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=b.buildFragment([t],e,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return t.JSON&&t.JSON.parse?t.JSON.parse(n):null===n?n:"string"==typeof n&&((n=b.trim(n))&&T.test(n.replace(O,"@").replace(D,"]").replace(C,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),e)},parseXML:function(n){var r;if(!n||"string"!=typeof n)return null;try{t.DOMParser?r=(new DOMParser).parseFromString(n,"text/xml"):((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(n))}catch(t){r=e}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(e){e&&b.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(R,"ms-").replace(P,A)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r=0,i=t.length,o=M(t);if(n){if(o)for(;i>r&&!1!==e.apply(t[r],n);r++);else for(r in t)if(!1===e.apply(t[r],n))break}else if(o)for(;i>r&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:v&&!v.call("\ufeffÂ ")?function(t){return null==t?"":v.call(t)}:function(t){return null==t?"":(t+"").replace(x,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(M(Object(t))?b.merge(n,"string"==typeof t?[t]:t):d.call(n,t)),n},inArray:function(t,e,n){var r;if(e){if(m)return m.call(e,t,n);for(r=e.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var r=n.length,i=t.length,o=0;if("number"==typeof r)for(;r>o;o++)t[i++]=n[o];else for(;n[o]!==e;)t[i++]=n[o++];return t.length=i,t},grep:function(t,e,n){var r=[],i=0,o=t.length;for(n=!!n;o>i;i++)n!==!!e(t[i],i)&&r.push(t[i]);return r},map:function(t,e,n){var r,i=0,o=t.length,s=[];if(M(t))for(;o>i;i++)null!=(r=e(t[i],i,n))&&(s[s.length]=r);else for(i in t)null!=(r=e(t[i],i,n))&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(t,n){var r,i,o;return"string"==typeof n&&(o=t[n],n=t,t=o),b.isFunction(t)?(r=_.call(arguments,2),(i=function(){return t.apply(n||this,r.concat(_.call(arguments)))}).guid=t.guid=t.guid||b.guid++,i):e},access:function(t,n,r,i,o,s,a){var c=0,l=t.length,u=null==r;if("object"===b.type(r))for(c in o=!0,r)b.access(t,n,c,r[c],!0,s,a);else if(i!==e&&(o=!0,b.isFunction(i)||(a=!0),u&&(a?(n.call(t,i),n=null):(u=n,n=function(t,e,n){return u.call(b(t),n)})),n))for(;l>c;c++)n(t[c],r,a?i:i.call(t[c],c,n(t[c],r)));return o?t:u?n.call(t):l?n(t[0],r):s},now:function(){return(new Date).getTime()}}),b.ready.promise=function(e){if(!r)if(r=b.Deferred(),"complete"===s.readyState)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",I,!1),t.addEventListener("load",I,!1);else{s.attachEvent("onreadystatechange",I),t.attachEvent("onload",I);var n=!1;try{n=null==t.frameElement&&s.documentElement}catch(t){}n&&n.doScroll&&function t(){if(!b.isReady){try{n.doScroll("left")}catch(e){return setTimeout(t,50)}N(),b.ready()}}()}return r.promise(e)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){u["[object "+e+"]"]=e.toLowerCase()}),i=b(s);var k={};b.Callbacks=function(t){t="string"==typeof t?k[t]||function(t){var e=k[t]={};return b.each(t.match(S)||[],function(t,n){e[n]=!0}),e}(t):b.extend({},t);var n,r,i,o,s,a,c=[],l=!t.once&&[],u=function e(u){for(r=t.memory&&u,i=!0,s=a||0,a=0,o=c.length,n=!0;c&&o>s;s++)if(!1===c[s].apply(u[0],u[1])&&t.stopOnFalse){r=!1;break}n=!1,c&&(l?l.length&&e(l.shift()):r?c=[]:p.disable())},p={add:function(){if(c){var e=c.length;(function e(n){b.each(n,function(n,r){var i=b.type(r);"function"===i?t.unique&&p.has(r)||c.push(r):r&&r.length&&"string"!==i&&e(r)})})(arguments),n?o=c.length:r&&(a=e,u(r))}return this},remove:function(){return c&&b.each(arguments,function(t,e){for(var r;(r=b.inArray(e,c,r))>-1;)c.splice(r,1),n&&(o>=r&&o--,s>=r&&s--)}),this},has:function(t){return t?b.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],this},disable:function(){return c=l=r=e,this},disabled:function(){return!c},lock:function(){return l=e,r||p.disable(),this},locked:function(){return!l},fireWith:function(t,e){return e=[t,(e=e||[]).slice?e.slice():e],!c||i&&!l||(n?l.push(e):u(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(t){var e=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return b.Deferred(function(n){b.each(e,function(e,o){var s=o[0],a=b.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&b.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?b.extend(t,r):r}},i={};return r.pipe=r.then,b.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=_.call(arguments),s=o.length,a=1!==s||t&&b.isFunction(t.promise)?s:0,c=1===a?t:b.Deferred(),l=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?_.call(arguments):i,r===e?c.notifyWith(n,r):--a||c.resolveWith(n,r)}};if(s>1)for(e=Array(s),n=Array(s),r=Array(s);s>i;i++)o[i]&&b.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(c.reject).progress(l(i,n,e)):--a;return a||c.resolveWith(r,o),c.promise()}}),b.support=function(){var e,r,i,a,c,l,u,p,h,f,d=s.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=d.getElementsByTagName("*"),i=d.getElementsByTagName("a")[0],!r||!i||!r.length)return{};u=(c=s.createElement("select")).appendChild(s.createElement("option")),a=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!a.value,optSelected:u.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,e.noCloneChecked=a.cloneNode(!0).checked,c.disabled=!0,e.optDisabled=!u.disabled;try{delete d.test}catch(t){e.deleteExpando=!1}for(f in(a=s.createElement("input")).setAttribute("value",""),e.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),e.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),(l=s.createDocumentFragment()).appendChild(a),e.appendChecked=a.checked,e.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){e.noCloneEvent=!1}),d.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})d.setAttribute(p="on"+f,"t"),e[f+"Bubbles"]=p in t||!1===d.attributes[p].expando;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var r,i,a,c="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=s.getElementsByTagName("body")[0];l&&((r=s.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(r).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(a=d.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",e.reliableHiddenOffsets=h&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===d.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(d,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(d,null)||{width:"4px"}).width,(i=d.appendChild(s.createElement("div"))).style.cssText=d.style.cssText=c,i.style.marginRight=i.style.width="0",d.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),n(d.style.zoom)!==o&&(d.innerHTML="",d.style.cssText=c+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==d.offsetWidth,e.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(r),r=d=a=i=null)}),r=c=l=u=i=a=null,e}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,L=/([A-Z])/g;function B(t,r,i,o){if(b.acceptData(t)){var s,a,c=b.expando,l="string"==typeof r,u=t.nodeType,h=u?b.cache:t,f=u?t[c]:t[c]&&c;if(f&&h[f]&&(o||h[f].data)||!l||i!==e)return f||(u?t[c]=f=p.pop()||b.guid++:f=c),h[f]||(h[f]={},u||(h[f].toJSON=b.noop)),("object"==n(r)||"function"==typeof r)&&(o?h[f]=b.extend(h[f],r):h[f].data=b.extend(h[f].data,r)),s=h[f],o||(s.data||(s.data={}),s=s.data),i!==e&&(s[b.camelCase(r)]=i),l?null==(a=s[r])&&(a=s[b.camelCase(r)]):a=s,a}}function F(t,e,n){if(b.acceptData(t)){var r,i,o,s=t.nodeType,a=s?b.cache:t,c=s?t[b.expando]:b.expando;if(a[c]){if(e&&(o=n?a[c]:a[c].data)){b.isArray(e)?e=e.concat(b.map(e,b.camelCase)):e in o?e=[e]:e=(e=b.camelCase(e))in o?[e]:e.split(" ");for(r=0,i=e.length;i>r;r++)delete o[e[r]];if(!(n?q:b.isEmptyObject)(o))return}(n||(delete a[c].data,q(a[c])))&&(s?b.cleanData([t],!0):b.support.deleteExpando||a!=a.window?delete a[c]:a[c]=null)}}}function H(t,n,r){if(r===e&&1===t.nodeType){var i="data-"+n.replace(L,"-$1").toLowerCase();if("string"==typeof(r=t.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r)}catch(t){}b.data(t,n,r)}else r=e}return r}function q(t){var e;for(e in t)if(("data"!==e||!b.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}b.extend({cache:{},expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return!!(t=t.nodeType?b.cache[t[b.expando]]:t[b.expando])&&!q(t)},data:function(t,e,n){return B(t,e,n)},removeData:function(t,e){return F(t,e)},_data:function(t,e,n){return B(t,e,n,!0)},_removeData:function(t,e){return F(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&b.noData[t.nodeName.toLowerCase()];return!e||!0!==e&&t.getAttribute("classid")===e}}),b.fn.extend({data:function(t,r){var i,o,s=this[0],a=0,c=null;if(t===e){if(this.length&&(c=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(i=s.attributes;i.length>a;a++)(o=i[a].name).indexOf("data-")||(o=b.camelCase(o.slice(5)),H(s,o,c[o]));b._data(s,"parsedAttrs",!0)}return c}return"object"==n(t)?this.each(function(){b.data(this,t)}):b.access(this,function(n){return n===e?s?H(s,t,b.data(s,t)):null:(this.each(function(){b.data(this,t,n)}),e)},null,r,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){b.removeData(this,t)})}}),b.extend({queue:function(t,n,r){var i;return t?(n=(n||"fx")+"queue",i=b._data(t,n),r&&(!i||b.isArray(r)?i=b._data(t,n,b.makeArray(r)):i.push(r)),i||[]):e},dequeue:function(t,e){e=e||"fx";var n=b.queue(t,e),r=n.length,i=n.shift(),o=b._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){b.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return b._data(t,n)||b._data(t,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(t,e+"queue"),b._removeData(t,n)})})}}),b.fn.extend({queue:function(t,n){var r=2;return"string"!=typeof t&&(n=t,t="fx",r--),r>arguments.length?b.queue(this[0],t):n===e?this:this.each(function(){var e=b.queue(this,t,n);b._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&b.dequeue(this,t)})},dequeue:function(t){return this.each(function(){b.dequeue(this,t)})},delay:function(t,e){return t=b.fx&&b.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var r,i=1,o=b.Deferred(),s=this,a=this.length,c=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)(r=b._data(s[a],t+"queueHooks"))&&r.empty&&(i++,r.empty.add(c));return c(),o.promise(n)}});var U,W,G=/[\t\r\n]/g,V=/\r/g,z=/^(?:input|select|textarea|button|object)$/i,Q=/^(?:a|area)$/i,Y=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,X=/^(?:checked|selected)$/i,K=b.support.getSetAttribute,J=b.support.input;b.fn.extend({attr:function(t,e){return b.access(this,b.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){b.removeAttr(this,t)})},prop:function(t,e){return b.access(this,b.prop,t,e,arguments.length>1)},removeProp:function(t){return t=b.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(t){}})},addClass:function(t){var e,n,r,i,o,s=0,a=this.length,c="string"==typeof t&&t;if(b.isFunction(t))return this.each(function(e){b(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(S)||[];a>s;s++)if(r=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(G," "):" ")){for(o=0;i=e[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(t){var e,n,r,i,o,s=0,a=this.length,c=0===arguments.length||"string"==typeof t&&t;if(b.isFunction(t))return this.each(function(e){b(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(S)||[];a>s;s++)if(r=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(G," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=t?b.trim(r):""}return this},toggleClass:function(t,e){var r=n(t),i="boolean"==typeof e;return b.isFunction(t)?this.each(function(n){b(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===r)for(var n,s=0,a=b(this),c=e,l=t.match(S)||[];n=l[s++];)c=i?c:!a.hasClass(n),a[c?"addClass":"removeClass"](n);else(r===o||"boolean"===r)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||!1===t?"":b._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(G," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,r,i,o=this[0];return arguments.length?(i=b.isFunction(t),this.each(function(n){var o,s=b(this);1===this.nodeType&&(null==(o=i?t.call(this,n,s.val()):t)?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(t){return null==t?"":t+""})),(r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&r.set(this,o,"value")!==e||(this.value=o))})):o?(r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()])&&"get"in r&&(n=r.get(o,"value"))!==e?n:"string"==typeof(n=o.value)?n.replace(V,""):null==n?"":n:void 0}}),b.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,c=0>i?a:o?i:0;a>c;c++)if(!(!(n=r[c]).selected&&c!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(e=b(n).val(),o)return e;s.push(e)}return s},set:function(t,e){var n=b.makeArray(e);return b(t).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attr:function(t,r,i){var s,a,c,l=t.nodeType;if(t&&3!==l&&8!==l&&2!==l)return n(t.getAttribute)===o?b.prop(t,r,i):((a=1!==l||!b.isXMLDoc(t))&&(r=r.toLowerCase(),s=b.attrHooks[r]||(Y.test(r)?W:U)),i===e?s&&a&&"get"in s&&null!==(c=s.get(t,r))?c:(n(t.getAttribute)!==o&&(c=t.getAttribute(r)),null==c?e:c):null!==i?s&&a&&"set"in s&&(c=s.set(t,i,r))!==e?c:(t.setAttribute(r,i+""),i):(b.removeAttr(t,r),e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(S);if(o&&1===t.nodeType)for(;n=o[i++];)r=b.propFix[n]||n,Y.test(n)?!K&&X.test(n)?t[b.camelCase("default-"+n)]=t[r]=!1:t[r]=!1:b.attr(t,n,""),t.removeAttribute(K?n:r)},attrHooks:{type:{set:function(t,e){if(!b.support.radioValue&&"radio"===e&&b.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,r){var i,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return(1!==s||!b.isXMLDoc(t))&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==e?o&&"set"in o&&(i=o.set(t,r,n))!==e?i:t[n]=r:o&&"get"in o&&null!==(i=o.get(t,n))?i:t[n]},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(t.nodeName)||Q.test(t.nodeName)&&t.href?0:e}}}}),W={get:function(t,n){var r=b.prop(t,n),i="boolean"==typeof r&&t.getAttribute(n),o="boolean"==typeof r?J&&K?null!=i:X.test(n)?t[b.camelCase("default-"+n)]:!!i:t.getAttributeNode(n);return o&&!1!==o.value?n.toLowerCase():e},set:function(t,e,n){return!1===e?b.removeAttr(t,n):J&&K||!X.test(n)?t.setAttribute(!K&&b.propFix[n]||n,n):t[b.camelCase("default-"+n)]=t[n]=!0,n}},J&&K||(b.attrHooks.value={get:function(t,n){var r=t.getAttributeNode(n);return b.nodeName(t,"input")?t.defaultValue:r&&r.specified?r.value:e},set:function(t,n,r){return b.nodeName(t,"input")?(t.defaultValue=n,e):U&&U.set(t,n,r)}}),K||(U=b.valHooks.button={get:function(t,n){var r=t.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:e},set:function(t,n,r){var i=t.getAttributeNode(r);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===t.getAttribute(r)?n:e}},b.attrHooks.contenteditable={get:U.get,set:function(t,e,n){U.set(t,""!==e&&e,n)}},b.each(["width","height"],function(t,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(t,r){return""===r?(t.setAttribute(n,"auto"),r):e}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(t,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(t){var r=t.getAttribute(n,2);return null==r?e:r}})}),b.each(["href","src"],function(t,e){b.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}})),b.support.style||(b.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(t,n){return b.isArray(n)?t.checked=b.inArray(b(t).val(),n)>=0:e}})});var Z=/^(?:input|select|textarea)$/i,tt=/^key/,et=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(t,r,i,s,a){var c,l,u,p,h,f,d,_,m,y,g,v=b._data(t);if(v){for(i.handler&&(i=(p=i).handler,a=p.selector),i.guid||(i.guid=b.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||((f=v.handle=function(t){return n(b)===o||t&&b.event.triggered===t.type?e:b.event.dispatch.apply(f.elem,arguments)}).elem=t),u=(r=(r||"").match(S)||[""]).length;u--;)m=g=(c=rt.exec(r[u])||[])[1],y=(c[2]||"").split(".").sort(),h=b.event.special[m]||{},m=(a?h.delegateType:h.bindType)||m,h=b.event.special[m]||{},d=b.extend({type:m,origType:g,data:s,handler:i,guid:i.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:y.join(".")},p),(_=l[m])||((_=l[m]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,s,y,f)||(t.addEventListener?t.addEventListener(m,f,!1):t.attachEvent&&t.attachEvent("on"+m,f))),h.add&&(h.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),a?_.splice(_.delegateCount++,0,d):_.push(d),b.event.global[m]=!0;t=null}},remove:function(t,e,n,r,i){var o,s,a,c,l,u,p,h,f,d,_,m=b.hasData(t)&&b._data(t);if(m&&(u=m.events)){for(l=(e=(e||"").match(S)||[""]).length;l--;)if(f=_=(a=rt.exec(e[l])||[])[1],d=(a[2]||"").split(".").sort(),f){for(p=b.event.special[f]||{},h=u[f=(r?p.delegateType:p.bindType)||f]||[],a=a[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=o=h.length;o--;)s=h[o],!i&&_!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||r&&r!==s.selector&&("**"!==r||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,p.remove&&p.remove.call(t,s));c&&!h.length&&(p.teardown&&!1!==p.teardown.call(t,d,m.handle)||b.removeEvent(t,f,m.handle),delete u[f])}else for(f in u)b.event.remove(t,f+e[l],n,r,!0);b.isEmptyObject(u)&&(delete m.handle,b._removeData(t,"events"))}},trigger:function(r,i,o,a){var c,l,u,p,h,f,d,_=[o||s],m=g.call(r,"type")?r.type:r,y=g.call(r,"namespace")?r.namespace.split("."):[];if(u=f=o=o||s,3!==o.nodeType&&8!==o.nodeType&&!nt.test(m+b.event.triggered)&&(m.indexOf(".")>=0&&(y=m.split("."),m=y.shift(),y.sort()),l=0>m.indexOf(":")&&"on"+m,(r=r[b.expando]?r:new b.Event(m,"object"==n(r)&&r)).isTrigger=!0,r.namespace=y.join("."),r.namespace_re=r.namespace?RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=e,r.target||(r.target=o),i=null==i?[r]:b.makeArray(i,[r]),h=b.event.special[m]||{},a||!h.trigger||!1!==h.trigger.apply(o,i))){if(!a&&!h.noBubble&&!b.isWindow(o)){for(p=h.delegateType||m,nt.test(p+m)||(u=u.parentNode);u;u=u.parentNode)_.push(u),f=u;f===(o.ownerDocument||s)&&_.push(f.defaultView||f.parentWindow||t)}for(d=0;(u=_[d++])&&!r.isPropagationStopped();)r.type=d>1?p:h.bindType||m,(c=(b._data(u,"events")||{})[r.type]&&b._data(u,"handle"))&&c.apply(u,i),(c=l&&u[l])&&b.acceptData(u)&&c.apply&&!1===c.apply(u,i)&&r.preventDefault();if(r.type=m,!(a||r.isDefaultPrevented()||h._default&&!1!==h._default.apply(o.ownerDocument,i)||"click"===m&&b.nodeName(o,"a"))&&b.acceptData(o)&&l&&o[m]&&!b.isWindow(o)){(f=o[l])&&(o[l]=null),b.event.triggered=m;try{o[m]()}catch(t){}b.event.triggered=e,f&&(o[l]=f)}return r.result}},dispatch:function(t){t=b.event.fix(t);var n,r,i,o,s,a=[],c=_.call(arguments),l=(b._data(this,"events")||{})[t.type]||[],u=b.event.special[t.type]||{};if(c[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=b.event.handlers.call(this,t,l),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,s=0;(i=o.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,(r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,c))!==e&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,n){var r,i,o,s,a=[],c=n.delegateCount,l=t.target;if(c&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(o=[],s=0;c>s;s++)o[r=(i=n[s]).selector+" "]===e&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return n.length>c&&a.push({elem:this,handlers:n.slice(c)}),a},fix:function(t){if(t[b.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=et.test(i)?this.mouseHooks:tt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new b.Event(o),e=r.length;e--;)t[n=r[e]]=o[n];return t.target||(t.target=o.srcElement||s),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var r,i,o,a=n.button,c=n.fromElement;return null==t.pageX&&null!=n.clientX&&(o=(i=t.target.ownerDocument||s).documentElement,r=i.body,t.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!t.relatedTarget&&c&&(t.relatedTarget=c===t.target?n.toElement:c),t.which||a===e||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):e}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=b.extend(new b.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,e):b.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,r){var i="on"+e;t.detachEvent&&(n(t[i])===o&&(t[i]=null),t.detachEvent(i,r))},b.Event=function(t,n){return this instanceof b.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||!1===t.returnValue||t.getPreventDefault&&t.getPreventDefault()?it:ot):this.type=t,n&&b.extend(this,n),this.timeStamp=t&&t.timeStamp||b.now(),this[b.expando]=!0,e):new b.Event(t,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=it,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=it,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){b.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return(!r||r!==this&&!b.contains(this,r))&&(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return!b.nodeName(this,"form")&&(b.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:e;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(t){t._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),e)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&b.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return!b.nodeName(this,"form")&&(b.event.remove(this,"._submit"),e)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,t,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(t){var e=t.target;Z.test(e.nodeName)&&!b._data(e,"changeBubbles")&&(b.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||b.event.simulate("change",this.parentNode,t,!0)}),b._data(e,"changeBubbles",!0))}),e)},handle:function(t){var n=t.target;return this!==n||t.isSimulated||t.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?t.handleObj.handler.apply(this,arguments):e},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,r=function(t){b.event.simulate(e,t.target,b.event.fix(t),!0)};b.event.special[e]={setup:function(){0==n++&&s.addEventListener(t,r,!0)},teardown:function(){0==--n&&s.removeEventListener(t,r,!0)}}}),b.fn.extend({on:function(t,r,i,o,s){var a,c;if("object"==n(t)){for(a in"string"!=typeof r&&(i=i||r,r=e),t)this.on(a,r,i,t[a],s);return this}if(null==i&&null==o?(o=r,i=r=e):null==o&&("string"==typeof r?(o=i,i=e):(o=i,i=r,r=e)),!1===o)o=ot;else if(!o)return this;return 1===s&&(c=o,(o=function(t){return b().off(t),c.apply(this,arguments)}).guid=c.guid||(c.guid=b.guid++)),this.each(function(){b.event.add(this,t,o,i,r)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,r,i){var o,s;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,b(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==n(t)){for(s in t)this.off(s,r,t[s]);return this}return(!1===r||"function"==typeof r)&&(i=r,r=e),!1===i&&(i=ot),this.each(function(){b.event.remove(this,t,i,r)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},trigger:function(t,e){return this.each(function(){b.event.trigger(t,e,this)})},triggerHandler:function(t,n){var r=this[0];return r?b.event.trigger(t,n,r,!0):e}}),function(t,e){var r,i,o,s,a,c,l,u,p,h,f,d,_,m,y,g,v,E="sizzle"+-new Date,S=t.document,x={},w=0,$=0,T=rt(),C=rt(),O=rt(),D=n(e),R=1<<31,P=[],A=P.pop,I=P.push,N=P.slice,M=P.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},k="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",L=j.replace("w","w#"),B="\\["+k+"*("+j+")"+k+"*(?:([*^$|!~]?=)"+k+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+L+")|)|)"+k+"*\\]",F=":("+j+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+B.replace(3,8)+")*)|.*)\\)|)",H=RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),q=RegExp("^"+k+"*,"+k+"*"),U=RegExp("^"+k+"*([\\x20\\t\\r\\n\\f>+~])"+k+"*"),W=RegExp(F),G=RegExp("^"+L+"$"),V={ID:RegExp("^#("+j+")"),CLASS:RegExp("^\\.("+j+")"),NAME:RegExp("^\\[name=['\"]?("+j+")['\"]?\\]"),TAG:RegExp("^("+j.replace("w","w*")+")"),ATTR:RegExp("^"+B),PSEUDO:RegExp("^"+F),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),needsContext:RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},z=/[\x20\t\r\n\f]*[+~]/,Q=/^[^{]+\{\s*\[native code/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,tt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,et=function(t,e){var n="0x"+e-65536;return n!=n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{N.call(S.documentElement.childNodes,0)[0].nodeType}catch(t){N=function(t){for(var e,n=[];e=this[t++];)n.push(e);return n}}function nt(t){return Q.test(t+"")}function rt(){var t,e=[];return t=function(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}}function it(t){return t[E]=!0,t}function ot(t){var e=h.createElement("div");try{return t(e)}catch(t){return!1}finally{e=null}}function st(t,e,n,r){var i,o,s,a,c,l,u,f,m,y;if((e?e.ownerDocument||e:S)!==h&&p(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=(e=e||h).nodeType)&&9!==a)return[];if(!d&&!r){if(i=Y.exec(t))if(s=i[1]){if(9===a){if(!(o=e.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&g(e,o)&&o.id===s)return n.push(o),n}else{if(i[2])return I.apply(n,N.call(e.getElementsByTagName(t),0)),n;if((s=i[3])&&x.getByClassName&&e.getElementsByClassName)return I.apply(n,N.call(e.getElementsByClassName(s),0)),n}if(x.qsa&&!_.test(t)){if(u=!0,f=E,m=e,y=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=pt(t),(u=e.getAttribute("id"))?f=u.replace(J,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",c=l.length;c--;)l[c]=f+ht(l[c]);m=z.test(t)&&e.parentNode||e,y=l.join(",")}if(y)try{return I.apply(n,N.call(m.querySelectorAll(y),0)),n}catch(t){}finally{u||e.removeAttribute("id")}}}return vt(t.replace(H,"$1"),e,n,r)}function at(t,e){var n=e&&t,r=n&&(~e.sourceIndex||R)-(~t.sourceIndex||R);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ct(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function lt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ut(t){return it(function(e){return e=+e,it(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}for(r in a=st.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=st.setDocument=function(t){var r=t?t.ownerDocument||t:S;return r!==h&&9===r.nodeType&&r.documentElement?(h=r,f=r.documentElement,d=a(r),x.tagNameNoComments=ot(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),x.attributes=ot(function(t){t.innerHTML="<select></select>";var e=n(t.lastChild.getAttribute("multiple"));return"boolean"!==e&&"string"!==e}),x.getByClassName=ot(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!t.getElementsByClassName||!t.getElementsByClassName("e").length)&&(t.lastChild.className="e",2===t.getElementsByClassName("e").length)}),x.getByName=ot(function(t){t.id=E+0,t.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>",f.insertBefore(t,f.firstChild);var e=r.getElementsByName&&r.getElementsByName(E).length===2+r.getElementsByName(E+0).length;return x.getIdNotName=!r.getElementById(E),f.removeChild(t),e}),o.attrHandle=ot(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&n(t.firstChild.getAttribute)!==D&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},x.getIdNotName?(o.find.ID=function(t,e){if(n(e.getElementById)!==D&&!d){var r=e.getElementById(t);return r&&r.parentNode?[r]:[]}},o.filter.ID=function(t){var e=t.replace(tt,et);return function(t){return t.getAttribute("id")===e}}):(o.find.ID=function(t,r){if(n(r.getElementById)!==D&&!d){var i=r.getElementById(t);return i?i.id===t||n(i.getAttributeNode)!==D&&i.getAttributeNode("id").value===t?[i]:e:[]}},o.filter.ID=function(t){var e=t.replace(tt,et);return function(t){var r=n(t.getAttributeNode)!==D&&t.getAttributeNode("id");return r&&r.value===e}}),o.find.TAG=x.tagNameNoComments?function(t,r){return n(r.getElementsByTagName)!==D?r.getElementsByTagName(t):e}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},o.find.NAME=x.getByName&&function(t,r){return n(r.getElementsByName)!==D?r.getElementsByName(name):e},o.find.CLASS=x.getByClassName&&function(t,r){return n(r.getElementsByClassName)===D||d?e:r.getElementsByClassName(t)},m=[],_=[":focus"],(x.qsa=nt(r.querySelectorAll))&&(ot(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||_.push("\\["+k+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||_.push(":checked")}),ot(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&_.push("[*^$]="+k+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),_.push(",.*:")})),(x.matchesSelector=nt(y=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ot(function(t){x.disconnectedMatch=y.call(t,"div"),y.call(t,"[s!='']:x"),m.push("!=",F)}),_=RegExp(_.join("|")),m=RegExp(m.join("|")),g=nt(f.contains)||f.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},v=f.compareDocumentPosition?function(t,e){var n;return t===e?(l=!0,0):(n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e))?1&n||t.parentNode&&11===t.parentNode.nodeType?t===r||g(S,t)?-1:e===r||g(S,e)?1:0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,i=0,o=t.parentNode,s=e.parentNode,a=[t],c=[e];if(t===e)return l=!0,0;if(!o||!s)return t===r?-1:e===r?1:o?-1:s?1:0;if(o===s)return at(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;a[i]===c[i];)i++;return i?at(a[i],c[i]):a[i]===S?-1:c[i]===S?1:0},l=!1,[0,0].sort(v),x.detectDuplicates=l,h):h},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==h&&p(t),e=e.replace(Z,"='$1']"),!(!x.matchesSelector||d||m&&m.test(e)||_.test(e)))try{var n=y.call(t,e);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return st(e,h,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!==h&&p(t),g(t,e)},st.attr=function(t,e){var n;return(t.ownerDocument||t)!==h&&p(t),d||(e=e.toLowerCase()),(n=o.attrHandle[e])?n(t):d||x.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&!0===t[e]?e:n&&n.specified?n.value:null},st.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],r=1,i=0;if(l=!x.detectDuplicates,t.sort(v),l){for(;e=t[r];r++)e===t[r-1]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},s=st.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=s(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r];r++)n+=s(e);return n},o=st.selectors={cacheLength:50,createPseudo:it,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(tt,et),t[3]=(t[4]||t[5]||"").replace(tt,et),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return V.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&W.test(n)&&(e=pt(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(tt,et).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=T[t+" "];return e||(e=RegExp("(^|"+k+")"+t+"("+k+"|$)"))&&T(t,function(t){return e.test(t.className||n(t.getAttribute)!==D&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,c){var l,u,p,h,f,d,_=o!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),g=!c&&!a;if(m){if(o){for(;_;){for(p=e;p=p[_];)if(a?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;d=_="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&g){for(f=(l=(u=m[E]||(m[E]={}))[t]||[])[0]===w&&l[1],h=l[0]===w&&l[2],p=f&&m.childNodes[f];p=++f&&p&&p[_]||(h=f=0)||d.pop();)if(1===p.nodeType&&++h&&p===e){u[t]=[w,f,h];break}}else if(g&&(l=(e[E]||(e[E]={}))[t])&&l[0]===w)h=l[1];else for(;(p=++f&&p&&p[_]||(h=f=0)||d.pop())&&((a?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++h||(g&&((p[E]||(p[E]={}))[t]=[w,h]),p!==e)););return(h-=i)===r||0==h%r&&h/r>=0}}},PSEUDO:function(t,e){var n,r=o.pseudos[t]||o.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[E]?r(e):r.length>1?(n=[t,t,"",e],o.setFilters.hasOwnProperty(t.toLowerCase())?it(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)t[i=M.call(t,o[s])]=!(n[i]=o[s])}):function(t){return r(t,0,n)}):r}},pseudos:{not:it(function(t){var e=[],n=[],r=c(t.replace(H,"$1"));return r[E]?it(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()}}),has:it(function(t){return function(e){return st(t,e).length>0}}),contains:it(function(t){return function(e){return(e.textContent||e.innerText||s(e)).indexOf(t)>-1}}),lang:it(function(t){return G.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(tt,et).toLowerCase(),function(e){var n;do{if(n=d?e.getAttribute("xml:lang")||e.getAttribute("lang"):e.lang)return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!o.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:ut(function(){return[0]}),last:ut(function(t,e){return[e-1]}),eq:ut(function(t,e,n){return[0>n?n+e:n]}),even:ut(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:ut(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:ut(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:ut(function(t,e,n){for(var r=0>n?n+e:n;e>++r;)t.push(r);return t})}},{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[r]=ct(r);for(r in{submit:!0,reset:!0})o.pseudos[r]=lt(r);function pt(t,e){var n,r,i,s,a,c,l,u=C[t+" "];if(u)return e?0:u.slice(0);for(a=t,c=[],l=o.preFilter;a;){for(s in(!n||(r=q.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),c.push(i=[])),n=!1,(r=U.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(H," ")}),a=a.slice(n.length)),o.filter)!(r=V[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?st.error(t):C(t,c).slice(0)}function ht(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function ft(t,e,n){var r=e.dir,o=n&&"parentNode"===r,s=$++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||o)return t(e,n,i)}:function(e,n,a){var c,l,u,p=w+" "+s;if(a){for(;e=e[r];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||o)if((l=(u=e[E]||(e[E]={}))[r])&&l[0]===p){if(!0===(c=l[1])||c===i)return!0===c}else if((l=u[r]=[p])[1]=t(e,n,a)||i,!0===l[1])return!0}}function dt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function _t(t,e,n,r,i){for(var o,s=[],a=0,c=t.length,l=null!=e;c>a;a++)(o=t[a])&&(!n||n(o,r,i))&&(s.push(o),l&&e.push(a));return s}function mt(t,e,n,r,i,o){return r&&!r[E]&&(r=mt(r)),i&&!i[E]&&(i=mt(i,o)),it(function(o,s,a,c){var l,u,p,h=[],f=[],d=s.length,_=o||function(t,e,n){for(var r=0,i=e.length;i>r;r++)st(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!o&&e?_:_t(_,h,t,a,c),y=n?i||(o?t:d||r)?[]:s:m;if(n&&n(m,y,a,c),r)for(l=_t(y,f),r(l,[],a,c),u=l.length;u--;)(p=l[u])&&(y[f[u]]=!(m[f[u]]=p));if(o){if(i||t){if(i){for(l=[],u=y.length;u--;)(p=y[u])&&l.push(m[u]=p);i(null,y=[],l,c)}for(u=y.length;u--;)(p=y[u])&&(l=i?M.call(o,p):h[u])>-1&&(o[l]=!(s[l]=p))}}else y=_t(y===s?y.splice(d,y.length):y),i?i(null,s,y,c):I.apply(s,y)})}function yt(t){for(var e,n,r,i=t.length,s=o.relative[t[0].type],a=s||o.relative[" "],c=s?1:0,l=ft(function(t){return t===e},a,!0),p=ft(function(t){return M.call(e,t)>-1},a,!0),h=[function(t,n,r){return!s&&(r||n!==u)||((e=n).nodeType?l(t,n,r):p(t,n,r))}];i>c;c++)if(n=o.relative[t[c].type])h=[ft(dt(h),n)];else{if((n=o.filter[t[c].type].apply(null,t[c].matches))[E]){for(r=++c;i>r&&!o.relative[t[r].type];r++);return mt(c>1&&dt(h),c>1&&ht(t.slice(0,c-1)).replace(H,"$1"),n,r>c&&yt(t.slice(c,r)),i>r&&yt(t=t.slice(r)),i>r&&ht(t))}h.push(n)}return dt(h)}function gt(t,e){var n=0,r=e.length>0,s=t.length>0,a=function(a,c,l,p,f){var d,_,m,y=[],g=0,v="0",b=a&&[],E=null!=f,S=u,x=a||s&&o.find.TAG("*",f&&c.parentNode||c),$=w+=null==S?1:Math.random()||.1;for(E&&(u=c!==h&&c,i=n);null!=(d=x[v]);v++){if(s&&d){for(_=0;m=t[_++];)if(m(d,c,l)){p.push(d);break}E&&(w=$,i=++n)}r&&((d=!m&&d)&&g--,a&&b.push(d))}if(g+=v,r&&v!==g){for(_=0;m=e[_++];)m(b,y,c,l);if(a){if(g>0)for(;v--;)b[v]||y[v]||(y[v]=A.call(p));y=_t(y)}I.apply(p,y),E&&!a&&y.length>0&&g+e.length>1&&st.uniqueSort(p)}return E&&(w=$,u=S),b};return r?it(a):a}function vt(t,e,n,r){var i,s,a,l,u,p=pt(t);if(!r&&1===p.length){if((s=p[0]=p[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===e.nodeType&&!d&&o.relative[s[1].type]){if(!(e=o.find.ID(a.matches[0].replace(tt,et),e)[0]))return n;t=t.slice(s.shift().value.length)}for(i=V.needsContext.test(t)?0:s.length;i--&&(a=s[i],!o.relative[l=a.type]);)if((u=o.find[l])&&(r=u(a.matches[0].replace(tt,et),z.test(s[0].type)&&e.parentNode||e))){if(s.splice(i,1),!(t=r.length&&ht(s)))return I.apply(n,N.call(r,0)),n;break}}return c(t,p)(r,e,d,n,z.test(t)),n}function bt(){}c=st.compile=function(t,e){var n,r=[],i=[],o=O[t+" "];if(!o){for(e||(e=pt(t)),n=e.length;n--;)(o=yt(e[n]))[E]?r.push(o):i.push(o);o=O(t,gt(i,r))}return o},o.pseudos.nth=o.pseudos.eq,o.filters=bt.prototype=o.pseudos,o.setFilters=new bt,p(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(t);var st=/Until$/,at=/^(?:parents|prev(?:Until|All))/,ct=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ut={children:!0,contents:!0,next:!0,prev:!0};function pt(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function ht(t,e,n){if(e=e||0,b.isFunction(e))return b.grep(t,function(t,r){return!!e.call(t,r,t)===n});if(e.nodeType)return b.grep(t,function(t){return t===e===n});if("string"==typeof e){var r=b.grep(t,function(t){return 1===t.nodeType});if(ct.test(e))return b.filter(e,r,!n);e=b.filter(e,r)}return b.grep(t,function(t){return b.inArray(t,e)>=0===n})}function ft(t){var e=dt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}b.fn.extend({find:function(t){var e,n,r,i=this.length;if("string"!=typeof t)return r=this,this.pushStack(b(t).filter(function(){for(e=0;i>e;e++)if(b.contains(r[e],this))return!0}));for(n=[],e=0;i>e;e++)b.find(t,this[e],n);return(n=this.pushStack(i>1?b.unique(n):n)).selector=(this.selector?this.selector+" ":"")+t,n},has:function(t){var e,n=b(t,this),r=n.length;return this.filter(function(){for(e=0;r>e;e++)if(b.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(ht(this,t,!1))},filter:function(t){return this.pushStack(ht(this,t,!0))},is:function(t){return!!t&&("string"==typeof t?lt.test(t)?b(t,this.context).index(this[0])>=0:b.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=lt.test(t)||"string"!=typeof t?b(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n.ownerDocument&&n!==e&&11!==n.nodeType;){if(s?s.index(n)>-1:b.find.matchesSelector(n,t)){o.push(n);break}n=n.parentNode}return this.pushStack(o.length>1?b.unique(o):o)},index:function(t){return t?"string"==typeof t?b.inArray(this[0],b(t)):b.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?b(t,e):b.makeArray(t&&t.nodeType?[t]:t),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return b.dir(t,"parentNode")},parentsUntil:function(t,e,n){return b.dir(t,"parentNode",n)},next:function(t){return pt(t,"nextSibling")},prev:function(t){return pt(t,"previousSibling")},nextAll:function(t){return b.dir(t,"nextSibling")},prevAll:function(t){return b.dir(t,"previousSibling")},nextUntil:function(t,e,n){return b.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return b.dir(t,"previousSibling",n)},siblings:function(t){return b.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return b.sibling(t.firstChild)},contents:function(t){return b.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:b.merge([],t.childNodes)}},function(t,e){b.fn[t]=function(n,r){var i=b.map(this,e,n);return st.test(t)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ut[t]?b.unique(i):i,this.length>1&&at.test(t)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?b.find.matchesSelector(e[0],t)?[e[0]]:[]:b.find.matches(t,e)},dir:function(t,n,r){for(var i=[],o=t[n];o&&9!==o.nodeType&&(r===e||1!==o.nodeType||!b(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",_t=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),yt=/^\s+/,gt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,bt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,wt=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^$|\/(?:java|ecma)script/i,Tt=/^true\/(.*)/,Ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Dt=ft(s).appendChild(s.createElement("div"));function Rt(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function Pt(t){var e=t.getAttributeNode("type");return t.type=(e&&e.specified)+"/"+t.type,t}function At(t){var e=Tt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function It(t,e){for(var n,r=0;null!=(n=t[r]);r++)b._data(n,"globalEval",!e||b._data(e[r],"globalEval"))}function Nt(t,e){if(1===e.nodeType&&b.hasData(t)){var n,r,i,o=b._data(t),s=b._data(e,o),a=o.events;if(a)for(n in delete s.handle,s.events={},a)for(r=0,i=a[n].length;i>r;r++)b.event.add(e,n,a[n][r]);s.data&&(s.data=b.extend({},s.data))}}function Mt(t,e){var n,r,i;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!b.support.noCloneEvent&&e[b.expando]){for(r in(i=b._data(e)).events)b.removeEvent(e,r,i.handle);e.removeAttribute(b.expando)}"script"===n&&e.text!==t.text?(Pt(e).text=t.text,At(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),b.support.html5Clone&&t.innerHTML&&!b.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&xt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function kt(t,r){var i,s,a=0,c=n(t.getElementsByTagName)!==o?t.getElementsByTagName(r||"*"):n(t.querySelectorAll)!==o?t.querySelectorAll(r||"*"):e;if(!c)for(c=[],i=t.childNodes||t;null!=(s=i[a]);a++)!r||b.nodeName(s,r)?c.push(s):b.merge(c,kt(s,r));return r===e||r&&b.nodeName(t,r)?b.merge([t],c):c}function jt(t){xt.test(t.type)&&(t.defaultChecked=t.checked)}Ot.optgroup=Ot.option,Ot.tbody=Ot.tfoot=Ot.colgroup=Ot.caption=Ot.thead,Ot.th=Ot.td,b.fn.extend({text:function(t){return b.access(this,function(t){return t===e?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(b.isFunction(t))return this.each(function(e){b(this).wrapAll(t.call(this,e))});if(this[0]){var e=b(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return b.isFunction(t)?this.each(function(e){b(this).wrapInner(t.call(this,e))}):this.each(function(){var e=b(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=b.isFunction(t);return this.each(function(n){b(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=0;null!=(n=this[r]);r++)(!t||b.filter(t,[n]).length>0)&&(e||1!==n.nodeType||b.cleanData(kt(n)),n.parentNode&&(e&&b.contains(n.ownerDocument,n)&&It(kt(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&b.cleanData(kt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&b.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return b.clone(this,t,e)})},html:function(t){return b.access(this,function(t){var n=this[0]||{},r=0,i=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(_t,""):e;if(!("string"!=typeof t||St.test(t)||!b.support.htmlSerialize&&mt.test(t)||!b.support.leadingWhitespace&&yt.test(t)||Ot[(vt.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(gt,"<$1></$2>");try{for(;i>r;r++)1===(n=this[r]||{}).nodeType&&(b.cleanData(kt(n,!1)),n.innerHTML=t);n=0}catch(t){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){return b.isFunction(t)||"string"==typeof t||(t=b(t).not(this).detach()),this.domManip([t],!0,function(t){var e=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(t,e))})},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,r){t=f.apply([],t);var i,o,s,a,c,l,u=0,p=this.length,h=this,d=p-1,_=t[0],m=b.isFunction(_);if(m||!(1>=p||"string"!=typeof _||b.support.checkClone)&&wt.test(_))return this.each(function(i){var o=h.eq(i);m&&(t[0]=_.call(this,i,n?o.html():e)),o.domManip(t,n,r)});if(p&&(i=(l=b.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=(a=b.map(kt(l,"script"),Pt)).length;p>u;u++)o=l,u!==d&&(o=b.clone(o,!0,!0),s&&b.merge(a,kt(o,"script"))),r.call(n&&b.nodeName(this[u],"table")?Rt(this[u],"tbody"):this[u],o,u);if(s)for(c=a[a.length-1].ownerDocument,b.map(a,At),u=0;s>u;u++)o=a[u],$t.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(c,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(Ct,"")));l=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){b.fn[t]=function(t){for(var n,r=0,i=[],o=b(t),s=o.length-1;s>=r;r++)n=r===s?this:this.clone(!0),b(o[r])[e](n),d.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(t,e,n){var r,i,o,s,a,c=b.contains(t.ownerDocument,t);if(b.support.html5Clone||b.isXMLDoc(t)||!mt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Dt.innerHTML=t.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||b.isXMLDoc(t)))for(r=kt(o),a=kt(t),s=0;null!=(i=a[s]);++s)r[s]&&Mt(i,r[s]);if(e)if(n)for(a=a||kt(t),r=r||kt(o),s=0;null!=(i=a[s]);s++)Nt(i,r[s]);else Nt(t,o);return(r=kt(o,"script")).length>0&&It(r,!c&&kt(t,"script")),r=a=i=null,o},buildFragment:function(t,e,n,r){for(var i,o,s,a,c,l,u,p=t.length,h=ft(e),f=[],d=0;p>d;d++)if((o=t[d])||0===o)if("object"===b.type(o))b.merge(f,o.nodeType?[o]:o);else if(Et.test(o)){for(a=a||h.appendChild(e.createElement("div")),c=(vt.exec(o)||["",""])[1].toLowerCase(),u=Ot[c]||Ot._default,a.innerHTML=u[1]+o.replace(gt,"<$1></$2>")+u[2],i=u[0];i--;)a=a.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&f.push(e.createTextNode(yt.exec(o)[0])),!b.support.tbody)for(i=(o="table"!==c||bt.test(o)?"<table>"!==u[1]||bt.test(o)?0:a:a.firstChild)&&o.childNodes.length;i--;)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(b.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(e.createTextNode(o));for(a&&h.removeChild(a),b.support.appendChecked||b.grep(kt(f,"input"),jt),d=0;o=f[d++];)if((!r||-1===b.inArray(o,r))&&(s=b.contains(o.ownerDocument,o),a=kt(h.appendChild(o),"script"),s&&It(a),n))for(i=0;o=a[i++];)$t.test(o.type||"")&&n.push(o);return a=null,h},cleanData:function(t,e){for(var r,i,s,a,c=0,l=b.expando,u=b.cache,h=b.support.deleteExpando,f=b.event.special;null!=(r=t[c]);c++)if((e||b.acceptData(r))&&(a=(s=r[l])&&u[s])){if(a.events)for(i in a.events)f[i]?b.event.remove(r,i):b.removeEvent(r,i,a.handle);u[s]&&(delete u[s],h?delete r[l]:n(r.removeAttribute)!==o?r.removeAttribute(l):r[l]=null,p.push(s))}}});var Lt,Bt,Ft,Ht=/alpha\([^)]*\)/i,qt=/opacity\s*=\s*([^)]*)/,Ut=/^(top|right|bottom|left)$/,Wt=/^(none|table(?!-c[ea]).+)/,Gt=/^margin/,Vt=RegExp("^("+E+")(.*)$","i"),zt=RegExp("^("+E+")(?!px)[a-z%]+$","i"),Qt=RegExp("^([+-])=("+E+")","i"),Yt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Jt=["Top","Right","Bottom","Left"],Zt=["Webkit","O","Moz","ms"];function te(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),r=e,i=Zt.length;i--;)if((e=Zt[i]+n)in t)return e;return r}function ee(t,e){return t=e||t,"none"===b.css(t,"display")||!b.contains(t.ownerDocument,t)}function ne(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)(r=t[s]).style&&(o[s]=b._data(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&ee(r)&&(o[s]=b._data(r,"olddisplay",se(r.nodeName)))):o[s]||(i=ee(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(s=0;a>s;s++)(r=t[s]).style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function re(t,e,n){var r=Vt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function ie(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=b.css(t,n+Jt[o],!0,i)),r?("content"===n&&(s-=b.css(t,"padding"+Jt[o],!0,i)),"margin"!==n&&(s-=b.css(t,"border"+Jt[o]+"Width",!0,i))):(s+=b.css(t,"padding"+Jt[o],!0,i),"padding"!==n&&(s+=b.css(t,"border"+Jt[o]+"Width",!0,i)));return s}function oe(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Bt(t),s=b.support.boxSizing&&"border-box"===b.css(t,"boxSizing",!1,o);if(0>=i||null==i){if((0>(i=Ft(t,e,o))||null==i)&&(i=t.style[e]),zt.test(i))return i;r=s&&(b.support.boxSizingReliable||i===t.style[e]),i=parseFloat(i)||0}return i+ie(t,e,n||(s?"border":"content"),r,o)+"px"}function se(t){var e=s,n=Yt[t];return n||("none"!==(n=ae(t,e))&&n||((e=((Lt=(Lt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement))[0].contentWindow||Lt[0].contentDocument).document).write("<!doctype html><html><body>"),e.close(),n=ae(t,e),Lt.detach()),Yt[t]=n),n}function ae(t,e){var n=b(e.createElement(t)).appendTo(e.body),r=b.css(n[0],"display");return n.remove(),r}b.fn.extend({css:function(t,n){return b.access(this,function(t,n,r){var i,o,s={},a=0;if(b.isArray(n)){for(o=Bt(t),i=n.length;i>a;a++)s[n[a]]=b.css(t,n[a],!1,o);return s}return r!==e?b.style(t,n,r):b.css(t,n)},t,n,arguments.length>1)},show:function(){return ne(this,!0)},hide:function(){return ne(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:ee(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ft(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:b.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,r,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,a,c,l=b.camelCase(r),u=t.style;if(r=b.cssProps[l]||(b.cssProps[l]=te(u,l)),c=b.cssHooks[r]||b.cssHooks[l],i===e)return c&&"get"in c&&(s=c.get(t,!1,o))!==e?s:u[r];if("string"===(a=n(i))&&(s=Qt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(b.css(t,r)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||b.cssNumber[l]||(i+="px"),b.support.clearCloneStyle||""!==i||0!==r.indexOf("background")||(u[r]="inherit"),c&&"set"in c&&(i=c.set(t,i,o))===e)))try{u[r]=i}catch(t){}}},css:function(t,n,r,i){var o,s,a,c=b.camelCase(n);return n=b.cssProps[c]||(b.cssProps[c]=te(t.style,c)),(a=b.cssHooks[n]||b.cssHooks[c])&&"get"in a&&(s=a.get(t,!0,r)),s===e&&(s=Ft(t,n,i)),"normal"===s&&n in Kt&&(s=Kt[n]),""===r||r?(o=parseFloat(s),!0===r||b.isNumeric(o)?o||0:s):s},swap:function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=s[o];return i}}),t.getComputedStyle?(Bt=function(e){return t.getComputedStyle(e,null)},Ft=function(t,n,r){var i,o,s,a=r||Bt(t),c=a?a.getPropertyValue(n)||a[n]:e,l=t.style;return a&&(""!==c||b.contains(t.ownerDocument,t)||(c=b.style(t,n)),zt.test(c)&&Gt.test(n)&&(i=l.width,o=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=a.width,l.width=i,l.minWidth=o,l.maxWidth=s)),c}):s.documentElement.currentStyle&&(Bt=function(t){return t.currentStyle},Ft=function(t,n,r){var i,o,s,a=r||Bt(t),c=a?a[n]:e,l=t.style;return null==c&&l&&l[n]&&(c=l[n]),zt.test(c)&&!Ut.test(n)&&(i=l.left,(s=(o=t.runtimeStyle)&&o.left)&&(o.left=t.currentStyle.left),l.left="fontSize"===n?"1em":c,c=l.pixelLeft+"px",l.left=i,s&&(o.left=s)),""===c?"auto":c}),b.each(["height","width"],function(t,n){b.cssHooks[n]={get:function(t,r,i){return r?0===t.offsetWidth&&Wt.test(b.css(t,"display"))?b.swap(t,Xt,function(){return oe(t,n,i)}):oe(t,n,i):e},set:function(t,e,r){var i=r&&Bt(t);return re(0,e,r?ie(t,n,r,b.support.boxSizing&&"border-box"===b.css(t,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(t,e){return qt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,r=t.currentStyle,i=b.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===b.trim(o.replace(Ht,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||r&&!r.filter)||(n.filter=Ht.test(o)?o.replace(Ht,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(t,n){return n?b.swap(t,{display:"inline-block"},Ft,[t,"marginRight"]):e}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(t,n){b.cssHooks[n]={get:function(t,r){return r?(r=Ft(t,n),zt.test(r)?b(t).position()[n]+"px":r):e}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||b.css(t,"display"))},b.expr.filters.visible=function(t){return!b.expr.filters.hidden(t)}),b.each({margin:"",padding:"",border:"Width"},function(t,e){b.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Jt[r]+e]=o[r]||o[r-2]||o[0];return i}},Gt.test(t)||(b.cssHooks[t+e].set=re)});var ce=/%20/g,le=/\[\]$/,ue=/\r?\n/g,pe=/^(?:submit|button|image|reset|file)$/i,he=/^(?:input|select|textarea|keygen)/i;function fe(t,e,r,i){var o;if(b.isArray(e))b.each(e,function(e,o){r||le.test(t)?i(t,o):fe(t+"["+("object"==n(o)?e:"")+"]",o,r,i)});else if(r||"object"!==b.type(e))i(t,e);else for(o in e)fe(t+"["+o+"]",e[o],r,i)}b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=b.prop(this,"elements");return t?b.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!b(this).is(":disabled")&&he.test(this.nodeName)&&!pe.test(t)&&(this.checked||!xt.test(t))}).map(function(t,e){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(t){return{name:e.name,value:t.replace(ue,"\r\n")}}):{name:e.name,value:n.replace(ue,"\r\n")}}).get()}}),b.param=function(t,n){var r,i=[],o=function(t,e){e=b.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(t)||t.jquery&&!b.isPlainObject(t))b.each(t,function(){o(this.name,this.value)});else for(r in t)fe(r,t[r],n,o);return i.join("&").replace(ce,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){b.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),b.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};var de,_e,me=b.now(),ye=/\?/,ge=/#.*$/,ve=/([?&])_=[^&]*/,be=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ee=/^(?:GET|HEAD)$/,Se=/^\/\//,xe=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,we=b.fn.load,$e={},Te={},Ce="*/".concat("*");try{_e=a.href}catch(t){(_e=s.createElement("a")).href="",_e=_e.href}function Oe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(S)||[];if(b.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function De(t,n,r,i){var o={},s=t===Te;function a(c){var l;return o[c]=!0,b.each(t[c]||[],function(t,c){var u=c(n,r,i);return"string"!=typeof u||s||o[u]?s?!(l=u):e:(n.dataTypes.unshift(u),a(u),!1)}),l}return a(n.dataTypes[0])||!o["*"]&&a("*")}function Re(t,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((o[i]?t:r||(r={}))[i]=n[i]);return r&&b.extend(!0,t,r),t}de=xe.exec(_e.toLowerCase())||[],b.fn.load=function(t,r,i){if("string"!=typeof t&&we)return we.apply(this,arguments);var o,s,a,c=this,l=t.indexOf(" ");return l>=0&&(o=t.slice(l,t.length),t=t.slice(0,l)),b.isFunction(r)?(i=r,r=e):r&&"object"==n(r)&&(a="POST"),c.length>0&&b.ajax({url:t,type:a,dataType:"html",data:r}).done(function(t){s=arguments,c.html(o?b("<div>").append(b.parseHTML(t)).find(o):t)}).complete(i&&function(t,e){c.each(i,s||[t.responseText,e,t])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){b.fn[e]=function(t){return this.on(e,t)}}),b.each(["get","post"],function(t,n){b[n]=function(t,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=e),b.ajax({url:t,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(de[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ce,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Re(Re(t,b.ajaxSettings),e):Re(b.ajaxSettings,t)},ajaxPrefilter:Oe($e),ajaxTransport:Oe(Te),ajax:function(t,r){"object"==n(t)&&(r=t,t=e),r=r||{};var i,o,s,a,c,l,u,p,h=b.ajaxSetup({},r),f=h.context||h,d=h.context&&(f.nodeType||f.jquery)?b(f):b.event,_=b.Deferred(),m=b.Callbacks("once memory"),y=h.statusCode||{},g={},v={},E=0,x="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===E){if(!p)for(p={};e=be.exec(a);)p[e[1].toLowerCase()]=e[2];e=p[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===E?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return E||(t=v[n]=v[n]||t,g[t]=e),this},overrideMimeType:function(t){return E||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>E)for(e in t)y[e]=[y[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||x;return u&&u.abort(e),$(0,e),this}};if(_.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||_e)+"").replace(ge,"").replace(Se,de[1]+"//"),h.type=r.method||r.type||h.method||h.type,h.dataTypes=b.trim(h.dataType||"*").toLowerCase().match(S)||[""],null==h.crossDomain&&(i=xe.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===de[1]&&i[2]===de[2]&&(i[3]||("http:"===i[1]?80:443))==(de[3]||("http:"===de[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=b.param(h.data,h.traditional)),De($e,h,r,w),2===E)return w;for(o in(l=h.global)&&0==b.active++&&b.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ee.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(ye.test(s)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ve.test(s)?s.replace(ve,"$1_="+me++):s+(ye.test(s)?"&":"?")+"_="+me++)),h.ifModified&&(b.lastModified[s]&&w.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&w.setRequestHeader("If-None-Match",b.etag[s])),(h.data&&h.hasContent&&!1!==h.contentType||r.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ce+"; q=0.01":""):h.accepts["*"]),h.headers)w.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(!1===h.beforeSend.call(f,w,h)||2===E))return w.abort();for(o in x="abort",{success:1,error:1,complete:1})w[o](h[o]);if(u=De(Te,h,r,w)){w.readyState=1,l&&d.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(c=setTimeout(function(){w.abort("timeout")},h.timeout));try{E=1,u.send(g,$)}catch(t){if(!(2>E))throw t;$(-1,t)}}else $(-1,"No Transport");function $(t,n,r,i){var o,p,g,v,S,x=n;2!==E&&(E=2,c&&clearTimeout(c),u=e,a=i||"",w.readyState=t>0?4:0,r&&(v=function(t,n,r){var i,o,s,a,c=t.contents,l=t.dataTypes,u=t.responseFields;for(a in u)a in r&&(n[u[a]]=r[a]);for(;"*"===l[0];)l.shift(),o===e&&(o=t.mimeType||n.getResponseHeader("Content-Type"));if(o)for(a in c)if(c[a]&&c[a].test(o)){l.unshift(a);break}if(l[0]in r)s=l[0];else{for(a in r){if(!l[0]||t.converters[a+" "+l[0]]){s=a;break}i||(i=a)}s=s||i}return s?(s!==l[0]&&l.unshift(s),r[s]):e}(h,w,r)),t>=200&&300>t||304===t?(h.ifModified&&((S=w.getResponseHeader("Last-Modified"))&&(b.lastModified[s]=S),(S=w.getResponseHeader("etag"))&&(b.etag[s]=S)),204===t?(o=!0,x="nocontent"):304===t?(o=!0,x="notmodified"):(x=(o=function(t,e){var n,r,i,o,s={},a=0,c=t.dataTypes.slice(),l=c[0];if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c[1])for(i in t.converters)s[i.toLowerCase()]=t.converters[i];for(;r=c[++a];)if("*"!==r){if("*"!==l&&l!==r){if(!(i=s[l+" "+r]||s["* "+r]))for(n in s)if((o=n.split(" "))[1]===r&&(i=s[l+" "+o[0]]||s["* "+o[0]])){!0===i?i=s[n]:!0!==s[n]&&(r=o[0],c.splice(a--,0,r));break}if(!0!==i)if(i&&t.throws)e=i(e);else try{e=i(e)}catch(t){return{state:"parsererror",error:i?t:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:e}}(h,v)).state,p=o.data,o=!(g=o.error))):(g=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(n||x)+"",o?_.resolveWith(f,[p,x,w]):_.rejectWith(f,[w,x,g]),w.statusCode(y),y=e,l&&d.trigger(o?"ajaxSuccess":"ajaxError",[w,h,o?p:g]),m.fireWith(f,[w,x]),l&&(d.trigger("ajaxComplete",[w,h]),--b.active||b.event.trigger("ajaxStop")))}return w},getScript:function(t,n){return b.get(t,e,n,"script")},getJSON:function(t,e,n){return b.get(t,e,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return b.globalEval(t),t}}}),b.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),b.ajaxTransport("script",function(t){if(t.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(e,i){(n=s.createElement("script")).async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(e,!0)}}}});var Pe=[],Ae=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||b.expando+"_"+me++;return this[t]=!0,t}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,s,a,c=!1!==n.jsonp&&(Ae.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ae.test(n.data)&&"data");return c||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,c?n[c]=n[c].replace(Ae,"$1"+o):!1!==n.jsonp&&(n.url+=(ye.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||b.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=r.jsonpCallback,Pe.push(o)),a&&b.isFunction(s)&&s(a[0]),a=s=e}),"script"):e});var Ie,Ne,Me=0,ke=t.ActiveXObject&&function(){var t;for(t in Ie)Ie[t](e,!0)};function je(){try{return new t.XMLHttpRequest}catch(t){}}b.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&je()||function(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:je,Ne=b.ajaxSettings.xhr(),b.support.cors=!!Ne&&"withCredentials"in Ne,(Ne=b.support.ajax=!!Ne)&&b.ajaxTransport(function(n){var r;if(!n.crossDomain||b.support.cors)return{send:function(i,o){var s,a,c=n.xhr();if(n.username?c.open(n.type,n.url,n.async,n.username,n.password):c.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)c[a]=n.xhrFields[a];n.mimeType&&c.overrideMimeType&&c.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(a in i)c.setRequestHeader(a,i[a])}catch(t){}c.send(n.hasContent&&n.data||null),r=function(t,i){var a,l,u,p;try{if(r&&(i||4===c.readyState))if(r=e,s&&(c.onreadystatechange=b.noop,ke&&delete Ie[s]),i)4!==c.readyState&&c.abort();else{p={},a=c.status,l=c.getAllResponseHeaders(),"string"==typeof c.responseText&&(p.text=c.responseText);try{u=c.statusText}catch(t){u=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=p.text?200:404}}catch(t){i||o(-1,t)}p&&o(a,u,p,l)},n.async?4===c.readyState?setTimeout(r):(s=++Me,ke&&(Ie||(Ie={},b(t).unload(ke)),Ie[s]=r),c.onreadystatechange=r):r()},abort:function(){r&&r(e,!0)}}});var Le,Be,Fe=/^(?:toggle|show|hide)$/,He=RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),qe=/queueHooks$/,Ue=[function(t,e,n){var r,i,o,s,a,c,l,u,p,h=this,f=t.style,d={},_=[],m=t.nodeType&&ee(t);for(i in n.queue||(null==(u=b._queueHooks(t,"fx")).unqueued&&(u.unqueued=0,p=u.empty.fire,u.empty.fire=function(){u.unqueued||p()}),u.unqueued++,h.always(function(){h.always(function(){u.unqueued--,b.queue(t,"fx").length||u.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===b.css(t,"display")&&"none"===b.css(t,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==se(t.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(s=e[i],Fe.exec(s)){if(delete e[i],c=c||"toggle"===s,s===(m?"hide":"show"))continue;_.push(i)}if(o=_.length){"hidden"in(a=b._data(t,"fxshow")||b._data(t,"fxshow",{}))&&(m=a.hidden),c&&(a.hidden=!m),m?b(t).show():h.done(function(){b(t).hide()}),h.done(function(){var e;for(e in b._removeData(t,"fxshow"),d)b.style(t,e,d[e])});for(i=0;o>i;i++)r=_[i],l=h.createTween(r,m?a[r]:0),d[r]=a[r]||b.style(t,r),r in a||(a[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}],We={"*":[function(t,e){var n,r,i=this.createTween(t,e),o=He.exec(e),s=i.cur(),a=+s||0,c=1,l=20;if(o){if(n=+o[2],"px"!==(r=o[3]||(b.cssNumber[t]?"":"px"))&&a){a=b.css(i.elem,t,!0)||n||1;do{a/=c=c||".5",b.style(i.elem,t,a+r)}while(c!==(c=i.cur()/s)&&1!==c&&--l)}i.unit=r,i.start=a,i.end=o[1]?a+(o[1]+1)*n:n}return i}]};function Ge(){return setTimeout(function(){Le=e}),Le=b.now()}function Ve(t,e,n){var r,i,o=0,s=Ue.length,a=b.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var e=Le||Ge(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),o=0,s=l.tweens.length;s>o;o++)l.tweens[o].run(r);return a.notifyWith(t,[l,r,n]),1>r&&s?n:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:b.extend({},e),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Le||Ge(),duration:n.duration,tweens:[],createTween:function(e,n){var r=b.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),u=l.props;for(function(t,e){var n,r,i,o,s;for(i in t)if(r=b.camelCase(i),o=e[r],n=t[i],b.isArray(n)&&(o=n[1],n=t[i]=n[0]),i!==r&&(t[r]=n,delete t[i]),(s=b.cssHooks[r])&&"expand"in s)for(i in n=s.expand(n),delete t[r],n)i in t||(t[i]=n[i],e[i]=o);else e[r]=o}(u,l.opts.specialEasing);s>o;o++)if(r=Ue[o].call(l,t,u,l.opts))return r;return function(t,e){b.each(e,function(e,n){for(var r=(We[e]||[]).concat(We["*"]),i=0,o=r.length;o>i;i++)if(r[i].call(t,e,n))return})}(l,u),b.isFunction(l.opts.start)&&l.opts.start.call(t,l),b.fx.timer(b.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function ze(t,e,n,r,i){return new ze.prototype.init(t,e,n,r,i)}function Qe(t,e){var n,r={height:t},i=0;for(e=e?1:0;4>i;i+=2-e)r["margin"+(n=Jt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function Ye(t){return b.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}b.Animation=b.extend(Ve,{tweener:function(t,e){b.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],We[n]=We[n]||[],We[n].unshift(e)},prefilter:function(t,e){e?Ue.unshift(t):Ue.push(t)}}),b.Tween=ze,ze.prototype={constructor:ze,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var t=ze.propHooks[this.prop];return t&&t.get?t.get(this):ze.propHooks._default.get(this)},run:function(t){var e,n=ze.propHooks[this.prop];return this.pos=e=this.options.duration?b.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ze.propHooks._default.set(this),this}},ze.prototype.init.prototype=ze.prototype,ze.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=b.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){b.fx.step[t.prop]?b.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[b.cssProps[t.prop]]||b.cssHooks[t.prop])?b.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},ze.propHooks.scrollTop=ze.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},b.each(["toggle","show","hide"],function(t,e){var n=b.fn[e];b.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Qe(e,!0),t,r,i)}}),b.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ee).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=b.isEmptyObject(t),o=b.speed(e,n,r),s=function e(){var n=Ve(this,b.extend({},t),o);e.finish=function(){n.stop(!0)},(i||b._data(this,"finish"))&&n.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,n,r){var i=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof t&&(r=n,n=t,t=e),n&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=b.timers,s=b._data(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&qe.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(r),e=!1,o.splice(n,1));(e||!r)&&b.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=b._data(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=b.timers,s=r?r.length:0;for(n.finish=!0,b.queue(this,t,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),b.each({slideDown:Qe("show"),slideUp:Qe("hide"),slideToggle:Qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){b.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),b.speed=function(t,e,r){var i=t&&"object"==n(t)?b.extend({},t):{complete:r||!r&&e||b.isFunction(t)&&t,duration:t,easing:r&&e||e&&!b.isFunction(e)&&e};return i.duration=b.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in b.fx.speeds?b.fx.speeds[i.duration]:b.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){b.isFunction(i.old)&&i.old.call(this),i.queue&&b.dequeue(this,i.queue)},i},b.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},b.timers=[],b.fx=ze.prototype.init,b.fx.tick=function(){var t,n=b.timers,r=0;for(Le=b.now();n.length>r;r++)(t=n[r])()||n[r]!==t||n.splice(r--,1);n.length||b.fx.stop(),Le=e},b.fx.timer=function(t){t()&&b.timers.push(t)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Be||(Be=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Be),Be=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(t){return b.grep(b.timers,function(e){return t===e.elem}).length}),b.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){b.offset.setOffset(this,t,e)});var r,i,s={top:0,left:0},a=this[0],c=a&&a.ownerDocument;return c?(r=c.documentElement,b.contains(r,a)?(n(a.getBoundingClientRect)!==o&&(s=a.getBoundingClientRect()),i=Ye(c),{top:s.top+(i.pageYOffset||r.scrollTop)-(r.clientTop||0),left:s.left+(i.pageXOffset||r.scrollLeft)-(r.clientLeft||0)}):s):void 0},b.offset={setOffset:function(t,e,n){var r=b.css(t,"position");"static"===r&&(t.style.position="relative");var i,o,s=b(t),a=s.offset(),c=b.css(t,"top"),l=b.css(t,"left"),u={},p={};("absolute"===r||"fixed"===r)&&b.inArray("auto",[c,l])>-1?(i=(p=s.position()).top,o=p.left):(i=parseFloat(c)||0,o=parseFloat(l)||0),b.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(u.top=e.top-a.top+i),null!=e.left&&(u.left=e.left-a.left+o),"using"in e?e.using.call(t,u):s.css(u)}},b.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?e=r.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),b.nodeName(t[0],"html")||(n=t.offset()),n.top+=b.css(t[0],"borderTopWidth",!0),n.left+=b.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-b.css(r,"marginTop",!0),left:e.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||s.documentElement;t&&!b.nodeName(t,"html")&&"static"===b.css(t,"position");)t=t.offsetParent;return t||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r=/Y/.test(n);b.fn[t]=function(i){return b.access(this,function(t,i,o){var s=Ye(t);return o===e?s?n in s?s[n]:s.document.documentElement[i]:t[i]:(s?s.scrollTo(r?b(s).scrollLeft():o,r?o:b(s).scrollTop()):t[i]=o,e)},t,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(t,n){b.each({padding:"inner"+t,content:n,"":"outer"+t},function(r,i){b.fn[i]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===o?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):i===e?b.css(n,r,a):b.style(n,r,i,a)},n,s?i:e,s,null)}})}),t.jQuery=t.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window)}),_$documentListeners_145=createModuleFactory(function(t,e){function n(t){var e=t.type;return"text"===e||"textarea"===e||"search"===e||"url"===e||"tel"===e||"password"===e}function r(t){var e=t.type;return"number"===e||"range"===e&&!t.multiple}e.add=function(t){t.addEventListener("input",o,!0),t.addEventListener("change",s,!0),parseFloat(window.navigator.appVersion.split("MSIE ")[1])<=9&&t.addEventListener("selectionchange",function(t){document.activeElement&&o({target:document.activeElement})},!0);var e=document.createElement("input");if(e.type="number",e.value="7",e.valueAsNumber!=e.valueAsNumber){var n=i;i=function(t){return"number"===t.type?r(t)?parseFloat(t.value):t.value:n.apply(this,arguments)}}},e.inputSupportsSelection=n;var i=function(t){return r(t)?t.valueAsNumber:t.value};function o(t){var e=t.target;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||c(t,e)}function s(t){var e=t.target;"INPUT"===e.tagName?(a(e,"checked"),c(t,e)):"SELECT"===e.tagName?function t(e){for(var n=e.firstChild;n;n=n.nextSibling)"OPTION"===n.tagName?a(n,"selected"):n.hasChildNodes()&&t(n)}(e):"TEXTAREA"===e.tagName&&c(t,e)}function a(t,e){var n=t.$bindAttributes&&t.$bindAttributes[e];if(n&&!n.isUnbound()){var r=t[e];n.template.expression.set(n.context,r)}}function c(t,e){var r=e.$bindAttributes&&e.$bindAttributes.value;if(r&&!r.isUnbound())if(n(e)){var o={$event:t};!function(t,e,n){var r=t.template.expression,i=r.pathSegments(t.context);if(i){var o=t.context.controller.model.pass(n);_$textDiff_147.onTextInput(o,i,e)}else r.set&&r.set(t.context,e)}(r,e.value,o)}else{var s=i(e);r.template.expression.set(r.context,s)}}}),_$templates_136=createModuleFactory(function(t,e){var n=_$serializeObject_191({}),r=_$options_135({}).DependencyOptions,i=_$util_137.concat,o=_$util_137.hasKeys,s=_$util_137.traverseAndCreate;function a(t,e,n,r){for(var i=0;i<e.length;i++)t=c(t,e[i],n,r);return t}function c(t,e,n,r){var o=l(e,n,r);return i(t,o)}function l(t,e,n){return t.dependencies(e,n)}!function(){for(var t in _$saddle_190)e[t]=_$saddle_190[t]}(),e.Marker=p,e.View=d,e.ViewInstance=_,e.DynamicViewInstance=m,e.ViewParent=y,e.ContextClosure=g,e.Views=b,e.MarkupHook=E,e.ElementOn=S,e.ComponentOn=x,e.AsProperty=w,e.AsObject=$,e.AsObjectComponent=T,e.AsArray=C,e.AsArrayComponent=O,e.emptyTemplate=new _$saddle_190.Template([]),_$saddle_190.Template.prototype.isUnbound=function(t){return t.unbound},_$saddle_190.Binding.prototype.isUnbound=function(){return this.template.expression.isUnbound(this.context)},_$saddle_190.Template.prototype.resolve=function(){},_$saddle_190.Template.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e))return a(null,this.content,t,e)},_$saddle_190.Doctype.prototype.dependencies=function(){},_$saddle_190.Text.prototype.dependencies=function(){},_$saddle_190.DynamicText.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e))return l(this.expression,t,e)},_$saddle_190.Comment.prototype.dependencies=function(){},_$saddle_190.DynamicComment.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e))return l(this.expression,t,e)},_$saddle_190.Html.prototype.dependencies=function(){},_$saddle_190.DynamicHtml.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e))return l(this.expression,t,e)},_$saddle_190.Element.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=function(t,e,n,r){for(var i in e)t=c(t,e[i],n,r);return t}(null,this.attributes,t,e);return this.content?a(n,this.content,t,e):n}},_$saddle_190.DynamicElement.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e))return c(_$saddle_190.Element.prototype.dependencies(t,e),this.tagName,t,e)},_$saddle_190.Block.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=this.expression.meta&&"on"===this.expression.meta.blockType?l(this.expression,t,e):null,i=t.child(this.expression);return a(n,this.content,i,e)}},_$saddle_190.ConditionalBlock.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=this.getCondition(t);if(null==n)return l(this.expressions[0],t,e);var i=function(t,e,n,r,i){for(var o=0;o<=i;o++)t=c(t,e[o],n,r);return t}(null,this.expressions,t,e,n),o=this.expressions[n];return a(i,this.contents[n],t.child(o),e)}},_$saddle_190.EachBlock.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=l(this.expression,t,e),i=this.expression.get(t);if(i&&i.length)for(var o=0;o<i.length;o++){var s=t.eachChild(this.expression,o);n=a(n,this.content,s,e)}else this.elseContent&&(n=a(n,this.elseContent,t,e));return n}},_$saddle_190.Attribute.prototype.dependencies=function(){},_$saddle_190.DynamicAttribute.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e))return l(this.expression,t,e)};var u=[{emit:function(t,e){e.$component=t.controller,t.controller.markerNode=e}}];function p(t){_$saddle_190.Comment.call(this,t,u)}function h(t){for(var e=t.split(/\s+/),n=0,r=e.length;n<r;n++)this[e[n]]=!0}function f(t){for(var e=t.split(/\s+/),n=0,r=e.length;n<r;n++){var i=e[n].split("/");this[i[0]]=i[1]||i[0]}}function d(t,e,n,r){this.views=t,this.name=e,this.source=n,this.options=r;var i=(this.name||"").split(":"),o=i.pop();this.namespace=i.join(":"),this.registeredName="index"===o?this.namespace:this.name,this.attributesMap=r&&r.attributes&&new h(r.attributes),this.arraysMap=r&&r.arrays&&new f(r.arrays),this.unminified=r&&(r.unminified||""===r.unminified),this.string=r&&(r.string||""===r.string),this.literal=r&&(r.literal||""===r.literal),this.template=null,this.componentFactory=null,this.fromSerialized=!1}function _(t,e,n,r){this.name=t,this.attributes=e,this.hooks=n,this.initHooks=r,this.view=null}function m(t,e,n,r){this.nameExpression=t,this.attributes=e,this.hooks=n,this.initHooks=r}function y(t){this.template=t}function g(t,e){this.template=t,this.context=e}function v(){}function b(){this.nameMap=new v,this.tagMap=new v,this.elementMap=this.tagMap}function E(){}function S(t,e){this.name=t,this.expression=e}function x(t,e){this.name=t,this.expression=e}function w(t){this.segments=t,this.lastSegment=t.pop()}function $(t,e){w.call(this,t),this.keyExpression=e}function T(t,e){$.call(this,t,e)}function C(t){w.call(this,t)}function O(t){C.call(this,t)}p.prototype=Object.create(_$saddle_190.Comment.prototype),p.prototype.constructor=p,p.prototype.type="Marker",p.prototype.serialize=function(){return n.instance(this,this.data)},p.prototype.get=function(){return""},d.prototype=Object.create(_$saddle_190.Template.prototype),d.prototype.constructor=d,d.prototype.type="View",d.prototype.serialize=function(){return null},d.prototype._isComponent=function(t){return!!this.componentFactory&&(!t.attributes||!t.attributes.extend)},d.prototype._initComponent=function(t){return this._isComponent(t)?this.componentFactory.init(t):t},d.prototype._queueCreate=function(t,e){if(this._isComponent(t)){var n=this.componentFactory;if(t.queue(function(){n.create(e)}),!t.hooks)return;t.queue(function(){for(var n=0,r=t.hooks.length;n<r;n++)t.hooks[n].emit(t,e.controller)})}},d.prototype.get=function(t,e){var n=this._initComponent(t);return(this.template||this.parse()).get(n,e)},d.prototype.getFragment=function(t,e){var n=this._initComponent(t),r=(this.template||this.parse()).getFragment(n,e);return this._queueCreate(t,n),r},d.prototype.appendTo=function(t,e){var n=this._initComponent(e);(this.template||this.parse()).appendTo(t,n),this._queueCreate(e,n)},d.prototype.attachTo=function(t,e,n){var r=this._initComponent(n);e=(this.template||this.parse()).attachTo(t,e,r);return this._queueCreate(n,r),e},d.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=this.template||this.parse(),i=this._isComponent(t)?t.componentChild(null):t;return n.dependencies(i,e)}},d.prototype.parse=function(){if(this._parse(),this.componentFactory){var t=new p(this.name);this.template.content.unshift(t)}return this.template},d.prototype._parse=function(){throw new Error("View parsing not available")},_.prototype=Object.create(_$saddle_190.Template.prototype),_.prototype.constructor=_,_.prototype.type="ViewInstance",_.prototype.serialize=function(){return n.instance(this,this.name,this.attributes,this.hooks,this.initHooks)},_.prototype.get=function(t,e){var n=this._find(t),r=t.viewChild(n,this.attributes,this.hooks,this.initHooks);return n.get(r,e)},_.prototype.getFragment=function(t,e){var n=this._find(t),r=t.viewChild(n,this.attributes,this.hooks,this.initHooks);return n.getFragment(r,e)},_.prototype.appendTo=function(t,e){var n=this._find(e),r=e.viewChild(n,this.attributes,this.hooks,this.initHooks);n.appendTo(t,r)},_.prototype.attachTo=function(t,e,n){var r=this._find(n),i=n.viewChild(r,this.attributes,this.hooks,this.initHooks);return r.attachTo(t,e,i)},_.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=this._find(t),i=t.viewChild(n,this.attributes,this.hooks,this.initHooks);return n.dependencies(i,e)}},_.prototype._find=function(t){if(this.view)return this.view;var e=t.getView(),n=e&&e.namespace;if(this.view=t.meta.views.find(this.name,n),!this.view){var r=t.meta.views.findErrorMessage(this.name,e);throw new Error(r)}return this.view},m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.prototype.type="DynamicViewInstance",m.prototype.serialize=function(){return n.instance(this,this.nameExpression,this.attributes,this.hooks,this.initHooks)},m.prototype._find=function(t){var n=this.nameExpression.get(t),r=t.getView(),i=r&&r.namespace;return n&&t.meta.views.find(n,i)||e.emptyTemplate},m.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=this.nameExpression.dependencies(t),o=_.prototype.dependencies.call(this,t,e);return i(n,o)}},y.prototype=Object.create(_$saddle_190.Template.prototype),y.prototype.constructor=y,y.prototype.type="ViewParent",y.prototype.serialize=function(){return n.instance(this,this.template)},y.prototype.get=function(t,e){var n=t.forViewParent();return this.template.get(n,e)},y.prototype.getFragment=function(t,e){var n=t.forViewParent();return this.template.getFragment(n,e)},y.prototype.appendTo=function(t,e){var n=e.forViewParent();this.template.appendTo(t,n)},y.prototype.attachTo=function(t,e,n){var r=n.forViewParent();return this.template.attachTo(t,e,r)},y.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this,e)){var n=t.forViewParent();return this.template.dependencies(n,e)}},g.prototype=Object.create(_$saddle_190.Template.prototype),g.prototype.constructor=g,g.prototype.serialize=function(){throw new Error("ContextClosure cannot be serialized")},g.prototype.get=function(t,e){var n=t.closureChild(this.context);return this.template.get(n,e)},g.prototype.getFragment=function(t,e){var n=t.closureChild(this.context);return this.template.getFragment(n,e)},g.prototype.appendTo=function(t,e){var n=e.closureChild(this.context);this.template.appendTo(t,n)},g.prototype.attachTo=function(t,e,n){var r=n.closureChild(this.context);return this.template.attachTo(t,e,r)},g.prototype.dependencies=function(t,e){if(!r.shouldIgnoreTemplate(this.template,e)){var n=t.closureChild(this.context);return this.template.dependencies(n,e)}},g.prototype.equals=function(t){return t instanceof g&&this.context===t.context&&this.template.equals(t.template)},b.prototype.find=function(t,e){var n=this.nameMap;if(s=n[e?e+":"+t:t])return s;var r=t.split(":"),i=r.length;for(e&&(r=e.split(":").concat(r));i>0;){for(var o=r.slice();o.length>i;){var s;if(o.splice(-1-i,1),s=n[o.join(":")])return s}i--}},b.prototype.register=function(t,e,n){var r=t.replace(/:index$/,""),i=this.nameMap[r];if(i){var o=i.componentFactory;d.call(i,this,t,e,n),i.componentFactory=o}else i=new d(this,t,e,n);this.nameMap[r]=i;var s=n&&(n.tag||n.element);return s&&(this.tagMap[s]=i),i},b.prototype.deserialize=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n[0],i=n[1],o=n[2],s=n[3],a=this.register(i,o,s);a.parse=r,a.fromSerialized=!0}},b.prototype.serialize=function(t){var r=t&&t.server,i=t&&t.minify,s=[];for(var a in this.nameMap){var c=this.nameMap[a],l=c.template||c.parse();if(!r&&c.options){if(c.options.serverOnly)continue;c.options.server&&(l=e.emptyTemplate)}s.push("[function(){return this.template="+l.serialize()+"},"+n.args([c.name,i?null:c.source,o(c.options)?c.options:null])+"]")}return"function(derbyTemplates, views){var expressions = derbyTemplates.expressions,templates = derbyTemplates.templates;views.deserialize(["+s.join(",")+"])}"},b.prototype.findErrorMessage=function(t,e){var n=Object.keys(this.nameMap),r='Cannot find view "'+t+'" in'+[""].concat(n).join("\n  ")+"\n";return e&&(r+='\nWithin template "'+e.name+'":\n'+e.source),r},E.prototype.module=_$saddle_190.Template.prototype.module,S.prototype=Object.create(E.prototype),S.prototype.constructor=S,S.prototype.type="ElementOn",S.prototype.serialize=function(){return n.instance(this,this.name,this.expression)},S.prototype.emit=function(t,e){var n=this;if("create"===this.name)this.apply(t,e);else if("destroy"===this.name){(e.$destroyListeners||(e.$destroyListeners=[])).push(function(){n.apply(t,e)})}else e.addEventListener(this.name,function(r){return n.apply(t,e,r)},!1)},S.prototype.apply=function(t,e,n){var r=t.controller.model.data;r.$event=n,r.$element=e;var i=this.expression.apply(t);return delete r.$event,delete r.$element,i},x.prototype=Object.create(E.prototype),x.prototype.constructor=x,x.prototype.type="ComponentOn",x.prototype.serialize=function(){return n.instance(this,this.name,this.expression)},x.prototype.emit=function(t,e){var n=this.expression;e.on(this.name,function(){var e=arguments.length&&Array.prototype.slice.call(arguments);return n.apply(t,e)})},w.prototype=Object.create(E.prototype),w.prototype.constructor=w,w.prototype.type="AsProperty",w.prototype.serialize=function(){var t=this.segments.concat(this.lastSegment);return n.instance(this,t)},w.prototype.emit=function(t,e){s(t.controller,this.segments)[this.lastSegment]=e},$.prototype=Object.create(w.prototype),$.prototype.constructor=$,$.prototype.type="AsObject",$.prototype.serialize=function(){var t=this.segments.concat(this.lastSegment);return n.instance(this,t,this.keyExpression)},$.prototype.emit=function(t,e){var n=s(t.controller,this.segments),r=n[this.lastSegment]||(n[this.lastSegment]={}),i=this.keyExpression.get(t);r[i]=e,this.addListeners(e,r,i)},$.prototype.addListeners=function(t,e,n){this.addDestroyListener(t,function(){delete e[n]})},$.prototype.addDestroyListener=function(t,e){(t.$destroyListeners||(t.$destroyListeners=[])).push(e)},T.prototype=Object.create($.prototype),T.prototype.constructor=T,T.prototype.type="AsObjectComponent",T.prototype.addDestroyListener=function(t,e){t.on("destroy",e)},C.prototype=Object.create(w.prototype),C.prototype.constructor=C,C.prototype.type="AsArray",C.prototype.emit=function(t,e){for(var n=s(t.controller,this.segments),r=n[this.lastSegment]||(n[this.lastSegment]=[]),i=r.length;i--;){var o=r[i];if(o===e)return;if(4&this.comparePosition(e,o))return r.splice(i+1,0,e),void this.addListeners(e,r)}r.unshift(e),this.addListeners(e,r)},C.prototype.addListeners=function(t,e){this.addDestroyListener(t,function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})},C.prototype.comparePosition=function(t,e){return e.compareDocumentPosition(t)},C.prototype.addDestroyListener=$.prototype.addDestroyListener,O.prototype=Object.create(C.prototype),O.prototype.constructor=O,O.prototype.type="AsArrayComponent",O.prototype.comparePosition=function(t,e){return e.markerNode.compareDocumentPosition(t.markerNode)},O.prototype.addDestroyListener=T.prototype.addDestroyListener}),_$options_135=createModuleFactory(function(t,e){var n=_$templates_136({});function r(t){this.setIgnoreTemplate(t&&t.ignoreTemplate)}e.DependencyOptions=r,r.shouldIgnoreTemplate=function(t,e){return!!e&&e.ignoreTemplate===t},r.prototype.setIgnoreTemplate=function(t){for(;t instanceof n.ContextClosure;)t=t.template;this.ignoreTemplate=t}}),_$serializeObject_191=createModuleFactory(function(t,e){function n(t){for(var e=[],n=t.length;n--;){var i=r(t[n]);e.unshift(i)}for(n=e.length;n--;){if("void 0"!==(i=e[n])&&"null"!==i)break;e.pop()}return e.join(", ")}function r(t){if(t&&t.serialize)return t.serialize();if(void 0===t)return"void 0";if(null===t)return"null";if("string"==typeof t)return i(t);if("number"==typeof t||"boolean"==typeof t)return t+"";if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++){var o=r(t[n]);e.push(o)}return"["+e.join(", ")+"]"}if("object"==typeof t){e=[];for(var s in t){o=r(t[s]);e.push(i(s)+": "+o)}return"{"+e.join(", ")+"}"}}function i(t){return"'"+t.replace(/['\r\n\\]/g,function(t){return"'"===t?"\\'":"\r"===t?"\\r":"\n"===t?"\\n":"\\"===t?"\\\\":""})+"'"}e.instance=function(t){var e=Array.prototype.slice.call(arguments,1);return"new "+t.module+"."+t.type+"("+n(e)+")"},e.args=n}),objectCreate=Object.create||objectCreatePolyfill,objectKeys=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}var _$EventEmitter_148=EventEmitter;EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10,hasDefineProperty;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(t){hasDefineProperty=!1}function $getMaxListeners(t){return void 0===t._maxListeners?EventEmitter.defaultMaxListeners:t._maxListeners}function emitNone(t,e,n){if(e)t.call(n);else for(var r=t.length,i=arrayClone(t,r),o=0;o<r;++o)i[o].call(n)}function emitOne(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=arrayClone(t,i),s=0;s<i;++s)o[s].call(n,r)}function emitTwo(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=arrayClone(t,o),a=0;a<o;++a)s[a].call(n,r,i)}function emitThree(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,a=arrayClone(t,s),c=0;c<s;++c)a[c].call(n,r,i,o)}function emitMany(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=arrayClone(t,i),s=0;s<i;++s)o[s].apply(n,r)}function _addListener(t,e,n,r){var i,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=objectCreate(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=$getMaxListeners(t))&&i>0&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else s=o[e]=n,++t._eventsCount;return t}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function _onceWrap(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=bind.call(onceWrapper,r);return i.listener=n,r.wrapFn=i,i}function _listeners(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?unwrapListeners(i):arrayClone(i,i.length):[]}function listenerCount(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function spliceOne(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function arrayClone(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function unwrapListeners(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function objectCreatePolyfill(t){var e=function(){};return e.prototype=t,new e}function objectKeysPolyfill(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n}function functionBindPolyfill(t){var e=this;return function(){return e.apply(t,arguments)}}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=t}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(t){var e,n,r,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var c=new Error('Unhandled "error" event. ('+e+")");throw c.context=e,c}if(!(n=s[t]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:emitNone(n,l,this);break;case 2:emitOne(n,l,this,arguments[1]);break;case 3:emitTwo(n,l,this,arguments[1],arguments[2]);break;case 4:emitThree(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];emitMany(n,l,this,i)}return!0},EventEmitter.prototype.addListener=function(t,e){return _addListener(this,t,e,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(t,e){return _addListener(this,t,e,!0)},EventEmitter.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,_onceWrap(this,t,e)),this},EventEmitter.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_onceWrap(this,t,e)),this},EventEmitter.prototype.removeListener=function(t,e){var n,r,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=objectCreate(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():spliceOne(n,i),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,s||e)}return this},EventEmitter.prototype.removeAllListeners=function(t){var e,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=objectCreate(null):delete n[t]),this;if(0===arguments.length){var i,o=objectKeys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},EventEmitter.prototype.listeners=function(t){return _listeners(this,t,!0)},EventEmitter.prototype.rawListeners=function(t){return _listeners(this,t,!1)},EventEmitter.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):listenerCount.call(t,e)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var _$rng_213={};(function(t){var e,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);e=function(){return n.getRandomValues(r),r}}if(!e){var i=new Array(16);e=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}_$rng_213=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});for(var _byteToHex=[],_hexToByte={},i=0;i<256;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;function parse(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){i<16&&(e[r+i++]=_hexToByte[t])});i<16;)e[r+i++]=0;return e}function unparse(t,e){var n=e||0,r=_byteToHex;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}var _seedBytes=_$rng_213(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0;function v1(t,e,n){var r=e&&n||0,i=e||[],o=void 0!==(t=t||{}).clockseq?t.clockseq:_clockseq,s=void 0!==t.msecs?t.msecs:(new Date).getTime(),a=void 0!==t.nsecs?t.nsecs:_lastNSecs+1,c=s-_lastMSecs+(a-_lastNSecs)/1e4;if(c<0&&void 0===t.clockseq&&(o=o+1&16383),(c<0||s>_lastMSecs)&&void 0===t.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=s,_lastNSecs=a,_clockseq=o;var l=(1e4*(268435455&(s+=122192928e5))+a)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=255&l;var u=s/4294967296*1e4&268435455;i[r++]=u>>>8&255,i[r++]=255&u,i[r++]=u>>>24&15|16,i[r++]=u>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var p=t.node||_nodeId,h=0;h<6;h++)i[r+h]=p[h];return e||unparse(i)}function v4(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||_$rng_213)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var o=0;o<16;o++)e[r+o]=i[o];return e||unparse(i)}var uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse;var _$uuid_214=uuid;Model.INITS=[];var _$Model_170=Model;function Model(t){this.root=this;var e=Model.INITS;t||(t={}),this.debug=t.debug||{};for(var n=0;n<e.length;n++)e[n](this,t)}function ChildModel(t){this.root=t.root,this._events=t._events,this._maxListeners=t._maxListeners,this._context=t._context,this._at=t._at,this._pass=t._pass,this._silent=t._silent,this._eventContext=t._eventContext,this._preventCompose=t._preventCompose}Model.prototype.id=function(){return _$uuid_214.v4()},Model.prototype._child=function(){return new ChildModel(this)},Model.ChildModel=ChildModel,ChildModel.prototype=new Model;var isArray=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,_$equal_149=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var r,i,o,s=isArray(e),a=isArray(n);if(s&&a){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(s!=a)return!1;var c=e instanceof Date,l=n instanceof Date;if(c!=l)return!1;if(c&&l)return e.getTime()==n.getTime();var u=e instanceof RegExp,p=n instanceof RegExp;if(u!=p)return!1;if(u&&p)return e.toString()==n.toString();var h=keyList(e);if((i=h.length)!==keyList(n).length)return!1;for(r=i;0!=r--;)if(!hasProp.call(n,h[r]))return!1;for(r=i;0!=r--;)if(!t(e[o=h[r]],n[o]))return!1;return!0}return e!=e&&n!=n},_$browser_155={},process=_$browser_155={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch(e){try{return cachedSetTimeout.call(null,t,0)}catch(e){return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch(e){try{return cachedClearTimeout.call(null,t)}catch(e){return cachedClearTimeout.call(this,t)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}process.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue.push(new Item(t,e)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(t){return[]},process.binding=function(t){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(t){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var _$util_189={};(function(t){var e="browser"!==t.title;function n(t){this.cb=t,this.isDone=!1,this.count=0}function r(t){var e=new t.constructor;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(t){return t!=t}function o(t){return/^[0-9]+$/.test(t)}function s(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}_$util_189.isServer=e,_$util_189.asyncGroup=function(t){var e=new n(t);return function(){return e.add()}},_$util_189.castSegments=function(t){for(var e=t.length;e--;){var n=t[e];"string"==typeof n&&o(n)&&(t[e]=+n)}return t},_$util_189.contains=function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},_$util_189.copy=function(t){if(t instanceof Date)return new Date(t);if("object"==typeof t)return null===t?null:Array.isArray(t)?t.slice():r(t);return t},_$util_189.copyObject=r,_$util_189.deepCopy=function t(e){if(e instanceof Date)return new Date(e);if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}var i=new e.constructor;for(var o in e)e.hasOwnProperty(o)&&(i[o]=t(e[o]));return i}return e},_$util_189.deepEqual=_$equal_149,_$util_189.equal=function(t,e){return t===e||i(t)&&i(e)},_$util_189.equalsNaN=i,_$util_189.isArrayIndex=o,_$util_189.lookup=function(t,e){if(!t)return e;for(var n=0,r=t.length;n<r;n++){if(null==e)return e;e=e[t[n]]}return e},_$util_189.mergeInto=function(t,e){for(var n in e)t[n]=e[n];return t},_$util_189.mayImpact=s,_$util_189.mayImpactAny=function(t,e){for(var n=0,r=t.length;n<r;n++)if(s(t[n],e))return!0;return!1},_$util_189.serverRequire=function(t,n){if(!e)return;return t.require(n)},_$util_189.serverUse=function(t,n,r){if(!e)return this;var i=t.require(n);return this.use(i,r)},_$util_189.use=function(t,e){var n=this._plugins||(this._plugins=[]);-1===n.indexOf(t)&&(n.push(t),t(this,e));return this},n.prototype.add=function(){this.count++;var t=this;return function(e){if(t.count--,!t.isDone)return e?(t.isDone=!0,void t.cb(e)):void(t.count>0||(t.isDone=!0,t.cb()))}}}).call(this,_$browser_155);var _$unbundle_187={};_$Model_170.prototype.unbundle=function(t){for(var e in this.connection&&this.connection.startBulk(),this._initQueries(t.queries),t.collections){var n=t.collections[e];for(var r in n)this.getOrCreateDoc(e,r,n[r])}for(var i in t.contexts){var o=t.contexts[i],s=this.context(i);for(var e in o.fetchedDocs){n=o.fetchedDocs[e];for(var r in n)for(var a=n[r];a--;)s._context.fetchDoc(e,r),this._fetchedDocs.increment(e,r)}for(var e in o.subscribedDocs){n=o.subscribedDocs[e];for(var r in n)for(a=n[r];a--;)s.subscribeDoc(e,r)}for(var e in o.createdDocs){n=o.createdDocs[e];for(var r in n)s._context.createDoc(e,r)}}this.connection&&this.connection.endBulk();for(var c=0;c<t.refs.length;c++){var l=t.refs[c];this.ref(l[0],l[1])}for(c=0;c<t.refLists.length;c++){l=t.refLists[c];this.refList(l[0],l[1],l[2],l[3])}for(c=0;c<t.fns.length;c++){l=t.fns[c];this.start.apply(this,l)}for(c=0;c<t.filters.length;c++){l=t.filters[c];this._filters.add(l[1],l[2],l[3],l[4],l[5]).ref(l[0])}};var _$events_177={},__EventEmitter_177=_$EventEmitter_148.EventEmitter;function patternContained(t,e,n){var r=n.patternSegments;if(!r)return!1;if(t===n.pattern||"**"===t)return!0;var i=e.length;if(i>r.length)return!1;for(var o=0;o<i;o++)if(e[o]!==r[o])return!1;return!0}function Passed(t,e){for(var n in t)this[n]=t[n];for(var n in e)this[n]=e[n]}function eventListener(t,e,n,r,i){var o,s,a;if(i?(o=n,s=r,a=i):r?(a=r,t.isPath(n)?o=n:s=n):a=n,s&&s.useEventObjects)var c=!0;if(o){var l=t.path(o);return c?modelEventListener(e,l,a,t._eventContext):modelEventListenerLegacy(l,a,t._eventContext)}var u=t.path();return u?c?modelEventListener(e,u,a,t._eventContext):modelEventListenerLegacy(u,a,t._eventContext):a}function modelEventListenerLegacy(t,e,n){var r=_$util_189.castSegments(t.split(".")),i=testPatternFn(t,r);function o(t,n){var r=i(t);if(r){var o=r.length?r.concat(n):n;return e.apply(null,o),!0}}return o.pattern=t,o.patternSegments=r,o.eventContext=n,o}function modelEventListener(t,e,n,r){var i=_$util_189.castSegments(e.split(".")),o=testPatternFn(e,i),s=getEventFactory(t);function a(t,e){var r=o(t);if(r){var i=s(e);return n(i,r),!0}}return a.pattern=e,a.patternSegments=i,a.eventContext=r,a}function getEventFactory(t){switch(t){case"change":return function(t){return new ChangeEvent(t)};case"insert":return function(t){return new InsertEvent(t)};case"remove":return function(t){return new RemoveEvent(t)};case"move":return function(t){return new MoveEvent(t)};case"load":return function(t){return new LoadEvent(t)};case"unload":return function(t){return new UnloadEvent(t)};case"all":return function(t){return getEventFactory(t[0])(t.slice(1))};default:throw new Error("Unknown event: "+t)}}function ChangeEvent(t){this.value=t[0],this.previous=t[1],this.passed=t[2]}function InsertEvent(t){this.index=t[0],this.values=t[1],this.passed=t[2]}function RemoveEvent(t){this.index=t[0],this.removed=t[1],this.passed=t[2]}function MoveEvent(t){this.from=t[0],this.to=t[1],this.howMany=t[2],this.passed=t[3]}function LoadEvent(t){this.document=t[0],this.passed=t[1]}function UnloadEvent(t){this.previousDocument=t[0],this.passed=t[1]}function testPatternFn(t,e){if("**"===t)return function(t){return[t.join(".")]};var n=stripRestWildcard(e);return function(t){var r=e.length;if(!(r>t.length)&&(r===t.length||n)){for(var i=[],o=0;o<r;o++){var s=e[o],a=t[o];if("*"!==s&&"**"!==s){if(s!==a)return}else i.push(a)}if(n){var c=t.slice(o).join(".");i.push(c)}return i}}}function stripRestWildcard(t){var e=t.length-1,n=t[e];if("**"===n)return t.pop(),!0;if("string"!=typeof n)return!1;var r=/^([^\*]+)\*\*$/.exec(n);return!!r&&(t[e]=r[1],!0)}_$Model_170.MUTATOR_EVENTS={change:!0,insert:!0,remove:!0,move:!0,load:!0,unload:!0},_$Model_170.INITS.push(function(t){__EventEmitter_177.call(this),t.setMaxListeners(0),t.root._defaultCallback=function(e){e&&t._emitError(e)},t.root._mutatorEventQueue=null,t.root._pass=new Passed({},{}),t.root._silent=null,t.root._eventContext=null}),_$util_189.mergeInto(_$Model_170.prototype,__EventEmitter_177.prototype),_$Model_170.prototype.wrapCallback=function(t){if(!t)return this.root._defaultCallback;var e=this;return function(){try{return t.apply(this,arguments)}catch(t){e._emitError(t)}}},_$Model_170.prototype._emitError=function(t,e){var n=t.message?t.message:"string"==typeof t?t:"Unknown model error";if(e&&(n+=" "+e),t.data)try{n+=" "+JSON.stringify(t.data)}catch(t){}t instanceof Error?t.message=n:t=new Error(n),this.emit("error",t)},_$Model_170.prototype._emit=__EventEmitter_177.prototype.emit,_$Model_170.prototype.emit=function(t){if("error"===t)return this._emit.apply(this,arguments);if(_$Model_170.MUTATOR_EVENTS[t]){if(this._silent)return this;var e=arguments[1],n=arguments[2];if(this._emit(t+"Immediate",e,n),this.root._mutatorEventQueue)return this.root._mutatorEventQueue.push([t,e,n]),this;for(this.root._mutatorEventQueue=[],this._emit(t,e,n),this._emit("all",e,[t].concat(n));this.root._mutatorEventQueue.length;){var r=this.root._mutatorEventQueue.shift();t=r[0],e=r[1],n=r[2],this._emit(t,e,n),this._emit("all",e,[t].concat(n))}return this.root._mutatorEventQueue=null,this}return this._emit.apply(this,arguments)},_$Model_170.prototype._on=__EventEmitter_177.prototype.on,_$Model_170.prototype.addListener=_$Model_170.prototype.on=function(t,e,n,r){var i=eventListener(this,t,e,n,r);return this._on(t,i),i},_$Model_170.prototype.once=function(t,e,n,r){var i=eventListener(this,t,e,n,r);function o(){i.apply(null,arguments)&&this.removeListener(t,o)}return this._on(t,o),o},_$Model_170.prototype._removeAllListeners=__EventEmitter_177.prototype.removeAllListeners,_$Model_170.prototype.removeAllListeners=function(t,e){if(!t){for(var n in this._events)this.removeAllListeners(n,e);return this}var r=this.path(e);if(!r)return 0===arguments.length?this._removeAllListeners():this._removeAllListeners(t);for(var i=this.listeners(t),o=r.split("."),s=i.length;s--;){var a=i[s];patternContained(r,o,a)&&this.removeListener(t,a)}return this},_$Model_170.prototype.pass=function(t,e){var n=this._child();return n._pass=e?new Passed(t,this._pass):new Passed(this._pass,t),n},_$Model_170.prototype.silent=function(t){var e=this._child();return e._silent=null==t||t,e},_$Model_170.prototype.eventContext=function(t){var e=this._child();return e._eventContext=t,e},_$Model_170.prototype.removeContextListeners=function(t){for(var e in 0===arguments.length&&(t=this._eventContext),this._events)for(var n=this.listeners(e),r=n.length;r--;){var i=n[r];i.eventContext===t&&this.removeListener(e,i)}return this},ChangeEvent.prototype.type="change",InsertEvent.prototype.type="insert",RemoveEvent.prototype.type="remove",MoveEvent.prototype.type="move",LoadEvent.prototype.type="load",UnloadEvent.prototype.type="unload";var _$paths_182={};function createScoped(t,e){var n=t._child();return n._at=e,n}_$paths_182.mixin={},_$Model_170.prototype._splitPath=function(t){var e=this.path(t);return e&&e.split(".")||[]},_$Model_170.prototype.path=function(t){return null==t||""===t?this._at?this._at:"":"string"==typeof t||"number"==typeof t?this._at?this._at+"."+t:""+t:"function"==typeof t.path?t.path():void 0},_$Model_170.prototype.isPath=function(t){return null!=this.path(t)},_$Model_170.prototype.scope=function(t){if(arguments.length>1)for(var e=1;e<arguments.length;e++)t=t+"."+arguments[e];return createScoped(this,t)},_$Model_170.prototype.at=function(t){if(arguments.length>1)for(var e=1;e<arguments.length;e++)t=t+"."+arguments[e];return createScoped(this,this.path(t))},_$Model_170.prototype.parent=function(t){null==t&&(t=1);var e=this._splitPath(),n=Math.max(0,e.length-t),r=e.slice(0,n).join(".");return this.scope(r)},_$Model_170.prototype.leaf=function(t){t||(t=this.path());var e=t.lastIndexOf(".");return t.slice(e+1)};var _$Doc_168=Doc;function Doc(t,e,n){this.collectionName=e,this.id=n,this.collectionData=t&&t.data[e]}Doc.prototype.path=function(t){var e=this.collectionName+"."+this.id;return t&&t.length&&(e+="."+t.join(".")),e},Doc.prototype._errorMessage=function(t,e,n){return t+" at "+this.path(e)+": "+JSON.stringify(n,null,2)};var _$LocalDoc_169=LocalDoc;function LocalDoc(t,e,n,r){_$Doc_168.call(this,t,e,n),this.data=r,this._updateCollectionData()}function nodeCreateArray(t,e){return t=t[e]||(t[e]=[])}LocalDoc.prototype=new _$Doc_168,LocalDoc.prototype._updateCollectionData=function(){this.collectionData[this.id]=this.data},LocalDoc.prototype.create=function(t,e){if(void 0!==this.data){var n=this._errorMessage("create on local document with data",null,this.data);return e(new Error(n))}this.data=t,this._updateCollectionData(),e()},LocalDoc.prototype.set=function(t,e,n){return this._apply(t,function(t,n){var r=t[n];return t[n]=e,r},n)},LocalDoc.prototype.del=function(t,e){var n=this.get(t);if(void 0!==n)return this._apply(t,function(t,e){return delete t[e],n},e);e()},LocalDoc.prototype.increment=function(t,e,n){var r=this;return this._validatedApply(t,function(e){if("number"!=typeof e&&null!=e)return new TypeError(r._errorMessage("increment on non-number",t,e))},function(t,n){var r=(t[n]||0)+e;return t[n]=r,r},n)},LocalDoc.prototype.push=function(t,e,n){return this._arrayApply(t,function(t){return t.push(e)},n)},LocalDoc.prototype.unshift=function(t,e,n){return this._arrayApply(t,function(t){return t.unshift(e)},n)},LocalDoc.prototype.insert=function(t,e,n,r){return this._arrayApply(t,function(t){return t.splice.apply(t,[e,0].concat(n)),t.length},r)},LocalDoc.prototype.pop=function(t,e){return this._arrayApply(t,function(t){return t.pop()},e)},LocalDoc.prototype.shift=function(t,e){return this._arrayApply(t,function(t){return t.shift()},e)},LocalDoc.prototype.remove=function(t,e,n,r){return this._arrayApply(t,function(t){return t.splice(e,n)},r)},LocalDoc.prototype.move=function(t,e,n,r,i){return this._arrayApply(t,function(t){var i=t.splice(e,r);return t.splice.apply(t,[n,0].concat(i)),i},i)},LocalDoc.prototype.stringInsert=function(t,e,n,r){var i=this;return this._validatedApply(t,function(e){if("string"!=typeof e&&null!=e)return new TypeError(i._errorMessage("stringInsert on non-string",t,e))},function(t,r){var i=t[r];return null==i?(t[r]=n,i):(t[r]=i.slice(0,e)+n+i.slice(e),i)},r)},LocalDoc.prototype.stringRemove=function(t,e,n,r){var i=this;return this._validatedApply(t,function(e){if("string"!=typeof e&&null!=e)return new TypeError(i._errorMessage("stringRemove on non-string",t,e))},function(t,r){var i=t[r];return null==i?i:(e<0&&(e+=i.length),t[r]=i.slice(0,e)+i.slice(e+n),i)},r)},LocalDoc.prototype.get=function(t){return _$util_189.lookup(t,this.data)},LocalDoc.prototype._createImplied=function(t,e){for(var n=this,r="data",i=0,o=t[i++];null!=o;)n=n[r]||(n[r]=/^\d+$/.test(o)?[]:{}),r=o,o=t[i++];return e(n,r)},LocalDoc.prototype._apply=function(t,e,n){var r=this._createImplied(t,e);return this._updateCollectionData(),n(),r},LocalDoc.prototype._validatedApply=function(t,e,n,r){var i=this._createImplied(t,function(t,i){var o=e(t[i]);return o?r(o):n(t,i)});return this._updateCollectionData(),r(),i},LocalDoc.prototype._arrayApply=function(t,e,n){var r=this._createImplied(t,nodeCreateArray);if(!Array.isArray(r)){var i=this._errorMessage(e.name+" on non-array",t,r);return n(new TypeError(i))}var o=e(r);return this._updateCollectionData(),n(),o};var _$collections_173={};function CollectionMap(){}function ModelData(){}function DocMap(){}function CollectionData(){}function Collection(t,e,n){this.model=t,this.name=e,this.Doc=n,this.docs=new DocMap,this.data=t.data[e]=new CollectionData}function noKeys(t){for(var e in t)return!1;return!0}_$Model_170.INITS.push(function(t){t.root.collections=new CollectionMap,t.root.data=new ModelData}),_$Model_170.prototype.getCollection=function(t){return this.root.collections[t]},_$Model_170.prototype.getDoc=function(t,e){var n=this.root.collections[t];return n&&n.docs[e]},_$Model_170.prototype.get=function(t){var e=this._splitPath(t);return this._get(e)},_$Model_170.prototype._get=function(t){return _$util_189.lookup(t,this.root.data)},_$Model_170.prototype.getCopy=function(t){var e=this._splitPath(t);return this._getCopy(e)},_$Model_170.prototype._getCopy=function(t){var e=this._get(t);return _$util_189.copy(e)},_$Model_170.prototype.getDeepCopy=function(t){var e=this._splitPath(t);return this._getDeepCopy(e)},_$Model_170.prototype._getDeepCopy=function(t){var e=this._get(t);return _$util_189.deepCopy(e)},_$Model_170.prototype.getOrCreateCollection=function(t){var e=this.root.collections[t];if(e)return e;var n=this._getDocConstructor(t);return e=new Collection(this.root,t,n),this.root.collections[t]=e,e},_$Model_170.prototype._getDocConstructor=function(){return _$LocalDoc_169},_$Model_170.prototype.getOrCreateDoc=function(t,e,n){var r=this.getOrCreateCollection(t);return r.docs[e]||r.add(e,n)},_$Model_170.prototype.destroy=function(t){var e=this._splitPath(t),n=this.silent();if(n.removeAllListeners(null,t),n._removeAllRefs(e),n._stopAll(e),n._removeAllFilters(e),0===e.length){this.root.collections=new CollectionMap;var r=this.root.data;for(var i in r)delete r[i]}else if(1===e.length){var o=this.getCollection(e[0]);o&&o.destroy()}else n._del(e)},Collection.prototype.add=function(t,e){var n=new this.Doc(this.model,this.name,t,e,this);return this.docs[t]=n,n},Collection.prototype.destroy=function(){delete this.model.collections[this.name],delete this.model.data[this.name]},Collection.prototype.remove=function(t){delete this.docs[t],delete this.data[t],noKeys(this.docs)&&this.destroy()},Collection.prototype.get=function(){return this.data};var _$mutators_181={};_$Model_170.prototype._mutate=function(t,e,n){n=this.wrapCallback(n);var r=t[0],i=t[1];if(!r||!i){var o=e.name+" must be performed under a collection and document id. Invalid path: "+t.join(".");return n(new Error(o))}var s=this.getOrCreateDoc(r,i),a=t.slice(2);if(this._preventCompose&&s.shareDoc){var c=s.shareDoc.preventCompose;s.shareDoc.preventCompose=!0;var l=e(s,a,n);return s.shareDoc.preventCompose=c,l}return e(s,a,n)},_$Model_170.prototype.set=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._set(r,e,n)},_$Model_170.prototype._set=function(t,e,n){t=this._dereference(t);var r=this;return this._mutate(t,function(n,i,o){var s=n.set(i,e,o);return 0===i.length&&(e=n.get(i)),r.emit("change",t,[e,s,r._pass]),s},n)},_$Model_170.prototype.setNull=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._setNull(r,e,n)},_$Model_170.prototype._setNull=function(t,e,n){t=this._dereference(t);var r=this;return this._mutate(t,function(n,i,o){var s=n.get(i);return null!=s?(o(),s):(n.set(i,e,o),r.emit("change",t,[e,s,r._pass]),e)},n)},_$Model_170.prototype.setEach=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._setEach(r,e,n)},_$Model_170.prototype._setEach=function(t,e,n){t=this._dereference(t);var r=_$util_189.asyncGroup(this.wrapCallback(n));for(var i in e){var o=e[i];this._set(t.concat(i),o,r())}},_$Model_170.prototype.create=function(){var t,e,n;0===arguments.length?e={}:1===arguments.length?"function"==typeof arguments[0]?(e={},n=arguments[0]):e=arguments[0]:2===arguments.length?"function"==typeof arguments[1]?(e=arguments[0],n=arguments[1]):(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._create(r,e,n)},_$Model_170.prototype._create=function(t,e,n){if(2!==(t=this._dereference(t)).length){var r="create may only be used on a document path. Invalid path: "+t.join(".");return(n=this.wrapCallback(n))(new Error(r))}var i=this;this._mutate(t,function(n,r,o){n.create(e,o),e=n.get(),i.emit("change",t,[e,void 0,i._pass])},n)},_$Model_170.prototype.createNull=function(){var t,e,n;0===arguments.length?e={}:1===arguments.length?"function"==typeof arguments[0]?(e={},n=arguments[0]):e=arguments[0]:2===arguments.length?"function"==typeof arguments[1]?(e=arguments[0],n=arguments[1]):(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._createNull(r,e,n)},_$Model_170.prototype._createNull=function(t,e,n){t=this._dereference(t);var r=this.getDoc(t[0],t[1]);r&&null!=r.get()||this._create(t,e,n)},_$Model_170.prototype.add=function(){var t,e,n;0===arguments.length?e={}:1===arguments.length?"function"==typeof arguments[0]?(e={},n=arguments[0]):e=arguments[0]:2===arguments.length?"function"==typeof arguments[1]?(e=arguments[0],n=arguments[1]):(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._add(r,e,n)},_$Model_170.prototype._add=function(t,e,n){if("object"!=typeof e){var r="add requires an object value. Invalid value: "+e;return(n=this.wrapCallback(n))(new Error(r))}var i=e.id||this.id();e.id=i,t=this._dereference(t.concat(i));var o=this;return this._mutate(t,function(n,r,i){var s;r.length?s=n.set(r,e,i):(n.create(e,i),e=n.get()),o.emit("change",t,[e,s,o._pass])},n),i},_$Model_170.prototype.del=function(){var t,e;1===arguments.length?"function"==typeof arguments[0]?e=arguments[0]:t=arguments[0]:(t=arguments[0],e=arguments[1]);var n=this._splitPath(t);return this._del(n,e)},_$Model_170.prototype._del=function(t,e){t=this._dereference(t);var n=this;return this._mutate(t,function(e,r,i){var o=e.del(r,i);if(2===t.length){var s=t[0],a=t[1];n.root.collections[s].remove(a)}return n.emit("change",t,[void 0,o,n._pass]),o},e)},_$Model_170.prototype.increment=function(){var t,e,n;1===arguments.length?"function"==typeof arguments[0]?n=arguments[0]:"number"==typeof arguments[0]?e=arguments[0]:t=arguments[0]:2===arguments.length?"function"==typeof arguments[1]?(n=arguments[1],"number"==typeof arguments[0]?e=arguments[0]:t=arguments[0]):(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._increment(r,e,n)},_$Model_170.prototype._increment=function(t,e,n){t=this._dereference(t),null==e&&(e=1);var r=this;return this._mutate(t,function(n,i,o){var s=n.increment(i,e,o),a=s-e;return r.emit("change",t,[s,a,r._pass]),s},n)},_$Model_170.prototype.push=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._push(r,e,n)},_$Model_170.prototype._push=function(t,e,n){t=this._dereference(t,!0);var r=this;return this._mutate(t,function(n,i,o){var s=n.push(i,e,o);return r.emit("insert",t,[s-1,[e],r._pass]),s},n)},_$Model_170.prototype.unshift=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._unshift(r,e,n)},_$Model_170.prototype._unshift=function(t,e,n){t=this._dereference(t,!0);var r=this;return this._mutate(t,function(n,i,o){var s=n.unshift(i,e,o);return r.emit("insert",t,[0,[e],r._pass]),s},n)},_$Model_170.prototype.insert=function(){var t,e,n,r;if(arguments.length<2)throw new Error("Not enough arguments for insert");2===arguments.length?(e=arguments[0],n=arguments[1]):3===arguments.length?(t=arguments[0],e=arguments[1],n=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]);var i=this._splitPath(t);return this._insert(i,+e,n,r)},_$Model_170.prototype._insert=function(t,e,n,r){t=this._dereference(t,!0);var i=this;return this._mutate(t,function(r,o,s){var a=Array.isArray(n)?n:[n],c=r.insert(o,e,a,s);return i.emit("insert",t,[e,a,i._pass]),c},r)},_$Model_170.prototype.pop=function(){var t,e;1===arguments.length?"function"==typeof arguments[0]?e=arguments[0]:t=arguments[0]:(t=arguments[0],e=arguments[1]);var n=this._splitPath(t);return this._pop(n,e)},_$Model_170.prototype._pop=function(t,e){t=this._dereference(t,!0);var n=this;return this._mutate(t,function(e,r,i){var o=e.get(r),s=o&&o.length;if(s){var a=e.pop(r,i);return n.emit("remove",t,[s-1,[a],n._pass]),a}i()},e)},_$Model_170.prototype.shift=function(){var t,e;1===arguments.length?"function"==typeof arguments[0]?e=arguments[0]:t=arguments[0]:(t=arguments[0],e=arguments[1]);var n=this._splitPath(t);return this._shift(n,e)},_$Model_170.prototype._shift=function(t,e){t=this._dereference(t,!0);var n=this;return this._mutate(t,function(e,r,i){var o=e.get(r);if(o&&o.length){var s=e.shift(r,i);return n.emit("remove",t,[0,[s],n._pass]),s}i()},e)},_$Model_170.prototype.remove=function(){var t,e,n,r;arguments.length<2?e=arguments[0]:2===arguments.length?"function"==typeof arguments[1]?(r=arguments[1],"number"==typeof arguments[0]?e=arguments[0]:t=arguments[0]):"number"==typeof arguments[0]?(e=arguments[0],n=arguments[1]):(t=arguments[0],e=arguments[1]):3===arguments.length?"function"==typeof arguments[2]?(r=arguments[2],"number"==typeof arguments[0]?(e=arguments[0],n=arguments[1]):(t=arguments[0],e=arguments[1])):(t=arguments[0],e=arguments[1],n=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]);var i=this._splitPath(t);return null==e&&(e=i.pop()),this._remove(i,+e,n,r)},_$Model_170.prototype._remove=function(t,e,n,r){t=this._dereference(t,!0),null==n&&(n=1);var i=this;return this._mutate(t,function(r,o,s){var a=r.remove(o,e,n,s);return i.emit("remove",t,[e,a,i._pass]),a},r)},_$Model_170.prototype.move=function(){var t,e,n,r,i;if(arguments.length<2)throw new Error("Not enough arguments for move");2===arguments.length?(e=arguments[0],n=arguments[1]):3===arguments.length?"function"==typeof arguments[2]?(e=arguments[0],n=arguments[1],i=arguments[2]):"number"==typeof arguments[0]?(e=arguments[0],n=arguments[1],r=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2]):4===arguments.length?"function"==typeof arguments[3]?(i=arguments[3],"number"==typeof arguments[0]?(e=arguments[0],n=arguments[1],r=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2])):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[4]);var o=this._splitPath(t);return this._move(o,e,n,r,i)},_$Model_170.prototype._move=function(t,e,n,r,i){t=this._dereference(t,!0),null==r&&(r=1);var o=this;return this._mutate(t,function(i,s,a){if(n=+n,(e=+e)<0||n<0){var c=i.get(s).length;e<0&&(e+=c),n<0&&(n+=c)}var l=i.move(s,e,n,r,a);return o.emit("move",t,[e,n,l.length,o._pass]),l},i)},_$Model_170.prototype.stringInsert=function(){var t,e,n,r;if(arguments.length<2)throw new Error("Not enough arguments for stringInsert");2===arguments.length?(e=arguments[0],n=arguments[1]):3===arguments.length?"function"==typeof arguments[2]?(e=arguments[0],n=arguments[1],r=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]);var i=this._splitPath(t);return this._stringInsert(i,e,n,r)},_$Model_170.prototype._stringInsert=function(t,e,n,r){t=this._dereference(t);var i=this;return this._mutate(t,function(r,o,s){var a=r.stringInsert(o,e,n,s),c=r.get(o),l=i.pass({$stringInsert:{index:e,text:n}})._pass;i.emit("change",t,[c,a,l])},r)},_$Model_170.prototype.stringRemove=function(){var t,e,n,r;if(arguments.length<2)throw new Error("Not enough arguments for stringRemove");2===arguments.length?(e=arguments[0],n=arguments[1]):3===arguments.length?"function"==typeof arguments[2]?(e=arguments[0],n=arguments[1],r=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]);var i=this._splitPath(t);return this._stringRemove(i,e,n,r)},_$Model_170.prototype._stringRemove=function(t,e,n,r){t=this._dereference(t);var i=this;return this._mutate(t,function(r,o,s){var a=r.stringRemove(o,e,n,s),c=r.get(o),l=i.pass({$stringRemove:{index:e,howMany:n}})._pass;i.emit("change",t,[c,a,l])},r)},_$Model_170.prototype.subtypeSubmit=function(){var t,e,n,r;if(arguments.length<2)throw new Error("Not enough arguments for subtypeSubmit");2===arguments.length?(e=arguments[0],n=arguments[1]):3===arguments.length?"function"==typeof arguments[2]?(e=arguments[0],n=arguments[1],r=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]);var i=this._splitPath(t);return this._subtypeSubmit(i,e,n,r)},_$Model_170.prototype._subtypeSubmit=function(t,e,n,r){t=this._dereference(t);var i=this;return this._mutate(t,function(r,o,s){var a=r.subtypeSubmit(o,e,n,s),c=r.get(o),l=i.pass({$subtype:{type:e,op:n}})._pass;return i.emit("change",t,[c,void 0,l]),a},r)};var _$arrayDiff_126=arrayDiff;function InsertDiff(t,e){this.index=t,this.values=e}function RemoveDiff(t,e){this.index=t,this.howMany=e}function MoveDiff(t,e,n){this.from=t,this.to=e,this.howMany=n}function strictEqual(t,e){return t===e}function arrayDiff(t,e,n){n||(n=strictEqual);for(var r=t.length,i=e.length,o=[],s={},a={},c=0;c<r;c++)for(var l=t[c],u=0;u<i;u++)if(!a[u]&&n(l,e[u])){var p=c,h=u,f=0;do{s[c++]=a[u++]=!0,f++}while(c<r&&u<i&&n(t[c],e[u])&&!a[u]);o.push(new MoveDiff(p,h,f)),c--;break}var d=[];for(c=0;c<r;)if(s[c])c++;else{var _=c;for(f=0;c<r&&!s[c++];)f++;d.push(new RemoveDiff(_,f))}var m=[];for(u=0;u<i;)if(a[u])u++;else{for(_=u,f=0;u<i&&!a[u++];)f++;var y=e.slice(_,_+f);m.push(new InsertDiff(_,y))}var g,v,b=m.length,E=d.length,S=o.length,x=0;for(g=0;g<E;g++){var w=d[g];for(w.index-=x,x+=w.howMany,v=0;v<S;v++){(O=o[v]).from>=w.index&&(O.from-=w.howMany)}}for(g=b;g--;){var $=m[g];f=$.values.length;for(v=S;v--;){(O=o[v]).to>=$.index&&(O.to-=f)}}for(g=S;g-- >1;){if((O=o[g]).to!==O.from)for(v=g;v--;){var T=o[v];T.to>=O.to&&(T.to-=O.howMany),T.to>=O.from&&(T.to+=O.howMany)}}var C=[];for(g=0;g<S;g++){var O;if((O=o[g]).to!==O.from)for(C.push(O),v=g+1;v<S;v++){var D=o[v];D.from>=O.from&&(D.from-=O.howMany),D.from>=O.to&&(D.from+=O.howMany)}}return d.concat(C,m)}arrayDiff.InsertDiff=InsertDiff,arrayDiff.RemoveDiff=RemoveDiff,arrayDiff.MoveDiff=MoveDiff,InsertDiff.prototype.type="insert",InsertDiff.prototype.toJSON=function(){return{type:this.type,index:this.index,values:this.values}},RemoveDiff.prototype.type="remove",RemoveDiff.prototype.toJSON=function(){return{type:this.type,index:this.index,howMany:this.howMany}},MoveDiff.prototype.type="move",MoveDiff.prototype.toJSON=function(){return{type:this.type,from:this.from,to:this.to,howMany:this.howMany}};var _$setDiff_185={};function diffDeep(t,e,n,r,i){if("object"==typeof n&&n&&"object"==typeof r&&r)if(Array.isArray(n)&&Array.isArray(r)){var o=_$arrayDiff_126(n,r,_$util_189.deepEqual);if(!o.length)return;if(2===o.length&&o[0].index===o[1].index&&o[0]instanceof _$arrayDiff_126.RemoveDiff&&1===o[0].howMany&&o[1]instanceof _$arrayDiff_126.InsertDiff&&1===o[1].values.length){var s=o[0].index;return void diffDeep(t,c=e.concat(s),n[s],r[s],i)}t._applyArrayDiff(e,o,i())}else{for(var a in n)if(!(a in r)){var c=e.concat(a);t._del(c,i())}for(var a in r){if(!_$util_189.deepEqual(n[a],r[a]))diffDeep(t,c=e.concat(a),n[a],r[a],i)}}else t._setDiff(e,r,i())}_$Model_170.prototype.setDiff=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._setDiff(r,e,n)},_$Model_170.prototype._setDiff=function(t,e,n){t=this._dereference(t);var r=this;return this._mutate(t,function(n,i,o){var s=n.get(i);return _$util_189.equal(s,e)?(o(),s):(n.set(i,e,o),r.emit("change",t,[e,s,r._pass]),s)},n)},_$Model_170.prototype.setDiffDeep=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._setDiffDeep(r,e,n)},_$Model_170.prototype._setDiffDeep=function(t,e,n){var r=this._get(t);n=this.wrapCallback(n);var i=_$util_189.asyncGroup(n),o=i();diffDeep(this,t,r,e,i),o()},_$Model_170.prototype.setArrayDiff=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._setArrayDiff(r,e,n)},_$Model_170.prototype.setArrayDiffDeep=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this._splitPath(t);return this._setArrayDiffDeep(r,e,n)},_$Model_170.prototype._setArrayDiffDeep=function(t,e,n){return this._setArrayDiff(t,e,n,_$util_189.deepEqual)},_$Model_170.prototype._setArrayDiff=function(t,e,n,r){var i=this._get(t);if(i===e)return this.wrapCallback(n)();if(Array.isArray(i)&&Array.isArray(e)){var o=_$arrayDiff_126(i,e,r);this._applyArrayDiff(t,o,n)}else this._set(t,e,n)},_$Model_170.prototype._applyArrayDiff=function(t,e,n){if(!e.length)return this.wrapCallback(n)();t=this._dereference(t);var r=this;return this._mutate(t,function(n,i,o){for(var s=_$util_189.asyncGroup(o),a=0,c=e.length;a<c;a++){var l=e[a];if(l instanceof _$arrayDiff_126.InsertDiff)n.insert(i,l.index,l.values,s()),r.emit("insert",t,[l.index,l.values,r._pass]);else if(l instanceof _$arrayDiff_126.RemoveDiff){var u=n.remove(i,l.index,l.howMany,s());r.emit("remove",t,[l.index,u,r._pass])}else if(l instanceof _$arrayDiff_126.MoveDiff){var p=n.move(i,l.from,l.to,l.howMany,s());r.emit("move",t,[l.from,l.to,p.length,r._pass])}}},n)};var _$emitter_199={},__EventEmitter_199=_$EventEmitter_148.EventEmitter;function mixin(t){for(var e in __EventEmitter_199.prototype)t.prototype[e]=__EventEmitter_199.prototype[e]}_$emitter_199.EventEmitter=__EventEmitter_199,_$emitter_199.mixin=mixin;var SUPPORTED_METHODS=["info","warn","error"];function Logger(){var t={};SUPPORTED_METHODS.forEach(function(e){t[e]=console[e].bind(console)}),this.setMethods(t)}var _$Logger_202=Logger;Logger.prototype.setMethods=function(t){t=t||{};var e=this;SUPPORTED_METHODS.forEach(function(n){"function"==typeof t[n]&&(e[n]=t[n])})};var logger=new _$Logger_202,_$logger_201=logger;function ShareDBError(t,e){this.code=t,this.message=e||"",Error.captureStackTrace?Error.captureStackTrace(this,ShareDBError):this.stack=(new Error).stack}ShareDBError.prototype=Object.create(Error.prototype),ShareDBError.prototype.constructor=ShareDBError,ShareDBError.prototype.name="ShareDBError",ShareDBError.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"};var _$ShareDBError_200=ShareDBError,_$bootstrapTransform_150=bootstrapTransform;function bootstrapTransform(t,e,n,r){var i=t.transformX=function(t,o){n(t),n(o);for(var s,a,c,l=[],u=0;u<o.length;u++){for(var p=o[u],h=[],f=0;f<t.length;){var d=[];if(s=t[f],c=d,e(h,s,a=p,"left"),e(c,a,s,"right"),f++,1!==d.length){if(0===d.length){for(var _=f;_<t.length;_++)r(h,t[_]);p=null;break}for(var m=i(t.slice(f),d),y=0;y<m[0].length;y++)r(h,m[0][y]);for(var g=0;g<m[1].length;g++)r(l,m[1][g]);p=null;break}p=d[0]}null!=p&&r(l,p),t=h}return[t,l]};t.transform=function(t,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?t:1===t.length&&1===n.length?e([],t[0],n[0],r):"left"===r?i(t,n)[0]:i(n,t)[1]}}var _$text0_153={},text=_$text0_153={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(t){if(null!=t&&"string"!=typeof t)throw new Error("Initial data must be a string");return t||""}},strInject=function(t,e,n){return t.slice(0,e)+n+t.slice(e)},checkValidComponent=function(t){if("number"!=typeof t.p)throw new Error("component missing position field");if("string"==typeof t.i==("string"==typeof t.d))throw new Error("component needs an i or d field");if(t.p<0)throw new Error("position cannot be negative")},checkValidOp=function(t){for(var e=0;e<t.length;e++)checkValidComponent(t[e])};text.apply=function(t,e){var n;checkValidOp(e);for(var r=0;r<e.length;r++){var i=e[r];if(null!=i.i)t=strInject(t,i.p,i.i);else{if(n=t.slice(i.p,i.p+i.d.length),i.d!==n)throw new Error("Delete component '"+i.d+"' does not match deleted text '"+n+"'");t=t.slice(0,i.p)+t.slice(i.p+i.d.length)}}return t};var append=text._append=function(t,e){if(""!==e.i&&""!==e.d)if(0===t.length)t.push(e);else{var n=t[t.length-1];null!=n.i&&null!=e.i&&n.p<=e.p&&e.p<=n.p+n.i.length?t[t.length-1]={i:strInject(n.i,e.p-n.p,e.i),p:n.p}:null!=n.d&&null!=e.d&&e.p<=n.p&&n.p<=e.p+e.d.length?t[t.length-1]={d:strInject(e.d,n.p-e.p,n.d),p:e.p}:t.push(e)}};text.compose=function(t,e){checkValidOp(t),checkValidOp(e);for(var n=t.slice(),r=0;r<e.length;r++)append(n,e[r]);return n},text.normalize=function(t){var e=[];null==t.i&&null==t.p||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];null==r.p&&(r.p=0),append(e,r)}return e};var transformPosition=function(t,e,n){return null!=e.i?e.p<t||e.p===t&&n?t+e.i.length:t:t<=e.p?t:t<=e.p+e.d.length?e.p:t-e.d.length};text.transformCursor=function(t,e,n){for(var r="right"===n,i=0;i<e.length;i++)t=transformPosition(t,e[i],r);return t};var transformComponent=text._tc=function(t,e,n,r){if(checkValidComponent(e),checkValidComponent(n),null!=e.i)append(t,{i:e.i,p:transformPosition(e.p,n,"right"===r)});else if(null!=n.i){var i=e.d;e.p<n.p&&(append(t,{d:i.slice(0,n.p-e.p),p:e.p}),i=i.slice(n.p-e.p)),""!==i&&append(t,{d:i,p:e.p+n.i.length})}else if(e.p>=n.p+n.d.length)append(t,{d:e.d,p:e.p-n.d.length});else if(e.p+e.d.length<=n.p)append(t,e);else{var o={d:"",p:e.p};e.p<n.p&&(o.d=e.d.slice(0,n.p-e.p)),e.p+e.d.length>n.p+n.d.length&&(o.d+=e.d.slice(n.p+n.d.length-e.p));var s=Math.max(e.p,n.p),a=Math.min(e.p+e.d.length,n.p+n.d.length);if(e.d.slice(s-e.p,a-e.p)!==n.d.slice(s-n.p,a-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==o.d&&(o.p=transformPosition(o.p,n),append(t,o))}return t},invertComponent=function(t){return null!=t.i?{d:t.i,p:t.p}:{i:t.d,p:t.p}};text.invert=function(t){t=t.slice().reverse();for(var e=0;e<t.length;e++)t[e]=invertComponent(t[e]);return t},_$bootstrapTransform_150(text,transformComponent,checkValidOp,append);var __isArray_152=function(t){return"[object Array]"==Object.prototype.toString.call(t)},isObject=function(t){return!!t&&t.constructor===Object},clone=function(t){return JSON.parse(JSON.stringify(t))},json={name:"json0",uri:"http://sharejs.org/types/JSONv0"},subtypes={};function convertFromText(t){t.t="text0";var e={p:t.p.pop()};null!=t.si&&(e.i=t.si),null!=t.sd&&(e.d=t.sd),t.o=[e]}function convertToText(t){t.p.push(t.o[0].p),null!=t.o[0].i&&(t.si=t.o[0].i),null!=t.o[0].d&&(t.sd=t.o[0].d),delete t.t,delete t.o}json.registerSubtype=function(t){subtypes[t.name]=t},json.create=function(t){return void 0===t?null:clone(t)},json.invertComponent=function(t){var e={p:t.p};return t.t&&subtypes[t.t]&&(e.t=t.t,e.o=subtypes[t.t].invert(t.o)),void 0!==t.si&&(e.sd=t.si),void 0!==t.sd&&(e.si=t.sd),void 0!==t.oi&&(e.od=t.oi),void 0!==t.od&&(e.oi=t.od),void 0!==t.li&&(e.ld=t.li),void 0!==t.ld&&(e.li=t.ld),void 0!==t.na&&(e.na=-t.na),void 0!==t.lm&&(e.lm=t.p[t.p.length-1],e.p=t.p.slice(0,t.p.length-1).concat([t.lm])),e},json.invert=function(t){for(var e=t.slice().reverse(),n=[],r=0;r<e.length;r++)n.push(json.invertComponent(e[r]));return n},json.checkValidOp=function(t){for(var e=0;e<t.length;e++)if(!__isArray_152(t[e].p))throw new Error("Missing path")},json.checkList=function(t){if(!__isArray_152(t))throw new Error("Referenced element not a list")},json.checkObj=function(t){if(!isObject(t))throw new Error("Referenced element not an object (it was "+JSON.stringify(t)+")")},json.apply=function(t,e){json.checkValidOp(e),e=clone(e);for(var n={data:t},r=0;r<e.length;r++){var i=e[r];null==i.si&&null==i.sd||convertFromText(i);for(var o=null,s=n,a="data",c=0;c<i.p.length;c++){var l=i.p[c];if(o=s,a,s=s[a],a=l,null==o)throw new Error("Path invalid")}if(i.t&&void 0!==i.o&&subtypes[i.t])s[a]=subtypes[i.t].apply(s[a],i.o);else if(void 0!==i.na){if("number"!=typeof s[a])throw new Error("Referenced element not a number");s[a]+=i.na}else if(void 0!==i.li&&void 0!==i.ld)json.checkList(s),s[a]=i.li;else if(void 0!==i.li)json.checkList(s),s.splice(a,0,i.li);else if(void 0!==i.ld)json.checkList(s),s.splice(a,1);else if(void 0!==i.lm){if(json.checkList(s),i.lm!=a){var u=s[a];s.splice(a,1),s.splice(i.lm,0,u)}}else if(void 0!==i.oi)json.checkObj(s),s[a]=i.oi;else{if(void 0===i.od)throw new Error("invalid / missing instruction in op");json.checkObj(s),delete s[a]}}return n.data},json.shatter=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n]]);return e},json.incrementalApply=function(t,e,n){for(var r=0;r<e.length;r++){var i=[e[r]];n(i,t=json.apply(t,i))}return t};var pathMatches=json.pathMatches=function(t,e,n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r]&&(!n||r!==t.length-1))return!1;return!0};json.append=function(t,e){if(e=clone(e),0!==t.length){var n=t[t.length-1];if(null==e.si&&null==e.sd||null==n.si&&null==n.sd||(convertFromText(e),convertFromText(n)),pathMatches(e.p,n.p))if(e.t&&n.t&&e.t===n.t&&subtypes[e.t]){if(n.o=subtypes[e.t].compose(n.o,e.o),null!=e.si||null!=e.sd){for(var r=e.p,i=0;i<n.o.length-1;i++)e.o=[n.o.pop()],e.p=r.slice(),convertToText(e),t.push(e);convertToText(n)}}else null!=n.na&&null!=e.na?t[t.length-1]={p:n.p,na:n.na+e.na}:void 0!==n.li&&void 0===e.li&&e.ld===n.li?void 0!==n.ld?delete n.li:t.pop():void 0!==n.od&&void 0===n.oi&&void 0!==e.oi&&void 0===e.od?n.oi=e.oi:void 0!==n.oi&&void 0!==e.od?void 0!==e.oi?n.oi=e.oi:void 0!==n.od?delete n.oi:t.pop():void 0!==e.lm&&e.p[e.p.length-1]===e.lm||t.push(e);else null==e.si&&null==e.sd||null==n.si&&null==n.sd||(convertToText(e),convertToText(n)),t.push(e)}else t.push(e)},json.compose=function(t,e){json.checkValidOp(t),json.checkValidOp(e);for(var n=clone(t),r=0;r<e.length;r++)json.append(n,e[r]);return n},json.normalize=function(t){var e=[];t=__isArray_152(t)?t:[t];for(var n=0;n<t.length;n++){var r=t[n];null==r.p&&(r.p=[]),json.append(e,r)}return e},json.commonLengthForOps=function(t,e){var n=t.p.length,r=e.p.length;if((null!=t.na||t.t)&&n++,(null!=e.na||e.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var i=0;i<n;i++){var o=t.p[i];if(i>=r||o!==e.p[i])return null}return n},json.canOpAffectPath=function(t,e){return null!=json.commonLengthForOps({p:e},t)},json.transformComponent=function(t,e,n,r){e=clone(e);var i=json.commonLengthForOps(n,e),o=json.commonLengthForOps(e,n),s=e.p.length,a=n.p.length;if((null!=e.na||e.t)&&s++,(null!=n.na||n.t)&&a++,null!=o&&a>s&&e.p[o]==n.p[o])if(void 0!==e.ld)(l=clone(n)).p=l.p.slice(s),e.ld=json.apply(clone(e.ld),[l]);else if(void 0!==e.od){(l=clone(n)).p=l.p.slice(s),e.od=json.apply(clone(e.od),[l])}if(null!=i){var c=s==a,l=n;if(null==e.si&&null==e.sd||null==n.si&&null==n.sd||(convertFromText(e),convertFromText(l=clone(n))),l.t&&subtypes[l.t]){if(e.t&&e.t===l.t){var u=subtypes[e.t].transform(e.o,l.o,r);if(null!=e.si||null!=e.sd)for(var p=e.p,h=0;h<u.length;h++)e.o=[u[h]],e.p=p.slice(),convertToText(e),json.append(t,e);else(!__isArray_152(u)||u.length>0)&&(e.o=u,json.append(t,e));return t}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[i]===e.p[i]){if(!c)return t;if(void 0!==e.ld){if(void 0===e.li||"left"!==r)return t;e.ld=clone(n.li)}}}else if(void 0!==n.li)void 0!==e.li&&void 0===e.ld&&c&&e.p[i]===n.p[i]?"right"===r&&e.p[i]++:n.p[i]<=e.p[i]&&e.p[i]++,void 0!==e.lm&&c&&n.p[i]<=e.lm&&e.lm++;else if(void 0!==n.ld){if(void 0!==e.lm&&c){if(n.p[i]===e.p[i])return t;p=n.p[i];var f=e.p[i];(p<(d=e.lm)||p===d&&f<d)&&e.lm--}if(n.p[i]<e.p[i])e.p[i]--;else if(n.p[i]===e.p[i]){if(a<s)return t;if(void 0!==e.ld){if(void 0===e.li)return t;delete e.ld}}}else if(void 0!==n.lm)if(void 0!==e.lm&&s===a){f=e.p[i];var d=e.lm,_=n.p[i],m=n.lm;if(_!==m)if(f===_){if("left"!==r)return t;e.p[i]=m,f===d&&(e.lm=m)}else f>_&&e.p[i]--,f>m?e.p[i]++:f===m&&_>m&&(e.p[i]++,f===d&&e.lm++),d>_?e.lm--:d===_&&d>f&&e.lm--,d>m?e.lm++:d===m&&(m>_&&d>f||m<_&&d<f?"right"===r&&e.lm++:d>f?e.lm++:d===_&&e.lm--)}else if(void 0!==e.li&&void 0===e.ld&&c){f=n.p[i],d=n.lm;(p=e.p[i])>f&&e.p[i]--,p>d&&e.p[i]++}else{f=n.p[i],d=n.lm;(p=e.p[i])===f?e.p[i]=d:(p>f&&e.p[i]--,p>d?e.p[i]++:p===d&&f>d&&e.p[i]++)}else if(void 0!==n.oi&&void 0!==n.od){if(e.p[i]===n.p[i]){if(void 0===e.oi||!c)return t;if("right"===r)return t;e.od=n.oi}}else if(void 0!==n.oi){if(void 0!==e.oi&&e.p[i]===n.p[i]){if("left"!==r)return t;json.append(t,{p:e.p,od:n.oi})}}else if(void 0!==n.od&&e.p[i]==n.p[i]){if(!c)return t;if(void 0===e.oi)return t;delete e.od}}return json.append(t,e),t},_$bootstrapTransform_150(json,json.transformComponent,json.checkValidOp,json.append),json.registerSubtype(_$text0_153);var _$json_152=json,_$lib_151={type:_$json_152},_$types_204={};_$types_204.defaultType=_$lib_151.type,_$types_204.map={},_$types_204.register=function(t){t.name&&(_$types_204.map[t.name]=t),t.uri&&(_$types_204.map[t.uri]=t)},_$types_204.register(_$types_204.defaultType);var _$Doc_193={};(function(t){var e=_$ShareDBError_200.CODES;function n(t,e,n){_$emitter_199.EventEmitter.call(this),this.connection=t,this.collection=e,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function r(t,e,n){if(e){var r=t.pop();t.push(function(t){r&&r(t),n&&n(t)})}else t.push(n)}function i(t,n){if(t.del)return delete(r=n).op,delete r.create,void delete r.del;var r;if(n.del)return new _$ShareDBError_200(e.ERR_DOC_WAS_DELETED,"Document was deleted");if(n.create)return new _$ShareDBError_200(e.ERR_DOC_ALREADY_CREATED,"Document already created");if(n.op){if(t.create)return new _$ShareDBError_200(e.ERR_DOC_ALREADY_CREATED,"Document already created");if(t.type.transformX){var i=t.type.transformX(t.op,n.op);t.op=i[0],n.op=i[1]}else{var o=t.type.transform(t.op,n.op,"left"),s=t.type.transform(n.op,t.op,"right");t.op=o,n.op=s}}}function o(t,e){for(var n=!1,r=0;r<t.length;r++){var i=t[r];i&&(i(e),n=!0)}return n}_$Doc_193=n,_$emitter_199.mixin(n),n.prototype.destroy=function(t){var e=this;e.whenNothingPending(function(){e.wantSubscribe?e.unsubscribe(function(n){if(n)return t?t(n):e.emit("error",n);e.connection._destroyDoc(e),t&&t()}):(e.connection._destroyDoc(e),t&&t())})},n.prototype._setType=function(t){if("string"==typeof t&&(t=_$types_204.map[t]),t)this.type=t;else{if(null!==t){var n=new _$ShareDBError_200(e.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+t);return this.emit("error",n)}this.type=t,this.data=void 0}},n.prototype.ingestSnapshot=function(t,n){if(!t)return n&&n();if("number"!=typeof t.v){var r=new _$ShareDBError_200(e.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return n?n(r):this.emit("error",r)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return n&&this.once("no write pending",n);r=new _$ShareDBError_200(e.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return n?n(r):this.emit("error",r)}return t.v>this.version?this.fetch(n):n&&n()}if(this.version>t.v)return n&&n();this.version=t.v;var i=void 0===t.type?_$types_204.defaultType:t.type;this._setType(i),this.data=this.type&&this.type.deserialize?this.type.deserialize(t.data):t.data,this.emit("load"),n&&n()},n.prototype.whenNothingPending=function(e){var n=this;t.nextTick(function(){n.hasPending()?n.once("nothing pending",e):e()})},n.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},n.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},n.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},n.prototype._emitResponseError=function(t,n){return t&&t.code===e.ERR_SNAPSHOT_READ_SILENT_REJECTION?(this.wantSubscribe=!1,n&&n(),void this._emitNothingPending()):n?(n(t),void this._emitNothingPending()):(this._emitNothingPending(),void this.emit("error",t))},n.prototype._handleFetch=function(t,e){var n=this.inflightFetch.shift();if(t)return this._emitResponseError(t,n);this.ingestSnapshot(e,n),this._emitNothingPending()},n.prototype._handleSubscribe=function(t,e){var n=this.inflightSubscribe.shift();if(t)return this._emitResponseError(t,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(e,n),this._emitNothingPending()},n.prototype._handleUnsubscribe=function(t){var e=this.inflightUnsubscribe.shift();if(t)return this._emitResponseError(t,e);e&&e(),this._emitNothingPending()},n.prototype._handleOp=function(t,n){if(t)return this.inflightOp?(t.code===e.ERR_OP_SUBMIT_REJECTED&&(t=null),this._rollback(t)):this.emit("error",t);if(this.inflightOp&&n.src===this.inflightOp.src&&n.seq===this.inflightOp.seq)this._opAcknowledged(n);else if(null==this.version||n.v>this.version)this.fetch();else if(!(n.v<this.version)){if(this.inflightOp)if(o=i(this.inflightOp,n))return this._hardRollback(o);for(var r=0;r<this.pendingOps.length;r++){var o;if(o=i(this.pendingOps[r],n))return this._hardRollback(o)}this.version++;try{this._otApply(n,!1)}catch(t){return this._hardRollback(t)}}},n.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var t=this.inflightUnsubscribe;this.inflightUnsubscribe=[],o(t)}},n.prototype._resubscribe=function(){var t=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return t.length?void this.subscribe(function(e){o(t,e)}):void this.subscribe();t.length&&this.fetch(function(e){o(t,e)})},n.prototype.fetch=function(t){if(this.connection.canSend){var e=this.connection.sendFetch(this);r(this.inflightFetch,e,t)}else this.pendingFetch.push(t)},n.prototype.subscribe=function(t){if(this.wantSubscribe=!0,this.connection.canSend){var e=this.connection.sendSubscribe(this);r(this.inflightSubscribe,e,t)}else this.pendingFetch.push(t)},n.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);r(this.inflightUnsubscribe,n,e)}else e&&t.nextTick(e)},n.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},n.prototype._otApply=function(t,n){if(t.op){if(!this.type)throw new _$ShareDBError_200(e.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(!n&&this.type===_$types_204.defaultType&&t.op.length>1){this.applyStack||(this.applyStack=[]);for(var r=this.applyStack.length,o=0;o<t.op.length;o++){for(var s={op:[t.op[o]]},a=r;a<this.applyStack.length;a++){var c=i(this.applyStack[a],s);if(c)return this._hardRollback(c)}this.emit("before op",s.op,n),this.data=this.type.apply(this.data,s.op),this.emit("op",s.op,n)}return void this._popApplyStack(r)}return this.emit("before op",t.op,n),this.data=this.type.apply(this.data,t.op),void this.emit("op",t.op,n)}if(t.create)return this._setType(t.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(t.create.data):this.type.deserialize(this.type.create(t.create.data)):this.type.create(t.create.data),void this.emit("create",n);if(t.del){var l=this.data;return this._setType(null),void this.emit("del",l,n)}},n.prototype._sendOp=function(){var t=this.connection.id;if(t){this.inflightOp||(this.inflightOp=this.pendingOps.shift());var n=this.inflightOp;if(!n){var r=new _$ShareDBError_200(e.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",r)}n.sentAt=Date.now(),n.retries=null==n.retries?0:n.retries+1,null==n.seq&&(n.seq=this.connection.seq++),this.connection.sendOp(this,n),null==n.src&&(n.src=t)}},n.prototype._submit=function(n,r,i){if(r||(r=!0),n.op){if(!this.type){var o=new _$ShareDBError_200(e.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return i?i(o):this.emit("error",o)}this.type.normalize&&(n.op=this.type.normalize(n.op))}try{this._pushOp(n,i),this._otApply(n,r)}catch(t){return this._hardRollback(t)}var s=this;t.nextTick(function(){s.flush()})},n.prototype._pushOp=function(t,e){if(this.applyStack)this.applyStack.push(t);else{var n=this._tryCompose(t);if(n)return void n.callbacks.push(e)}t.type=this.type,t.callbacks=[e],this.pendingOps.push(t)},n.prototype._popApplyStack=function(t){if(t>0)this.applyStack.length=t;else{var e=this.applyStack[0];if(this.applyStack=null,e)if(-1!==(r=this.pendingOps.indexOf(e)))for(var n=this.pendingOps.splice(r),r=0;r<n.length;r++){e=n[r];var i=this._tryCompose(e);i?i.callbacks=i.callbacks.concat(e.callbacks):this.pendingOps.push(e)}}},n.prototype._tryCompose=function(t){if(!this.preventCompose){var e=this.pendingOps[this.pendingOps.length-1];if(e&&!e.sentAt)return e.create&&t.op?(e.create.data=this.type.apply(e.create.data,t.op),e):e.op&&t.op&&this.type.compose?(e.op=this.type.compose(e.op,t.op),e):void 0}},n.prototype.submitOp=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r={op:t},i=e&&e.source;this._submit(r,i,n)},n.prototype.create=function(t,n,r,i){if("function"==typeof n?(i=n,r=null,n=null):"function"==typeof r&&(i=r,r=null),n||(n=_$types_204.defaultType.uri),this.type){var o=new _$ShareDBError_200(e.ERR_DOC_ALREADY_CREATED,"Document already exists");return i?i(o):this.emit("error",o)}var s={create:{type:n,data:t}},a=r&&r.source;this._submit(s,a,i)},n.prototype.del=function(t,n){if("function"==typeof t&&(n=t,t=null),!this.type){var r=new _$ShareDBError_200(e.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return n?n(r):this.emit("error",r)}var i=t&&t.source;this._submit({del:!0},i,n)},n.prototype.pause=function(){this.paused=!0},n.prototype.resume=function(){this.paused=!1,this.flush()},n.prototype._opAcknowledged=function(t){if(this.inflightOp.create)this.version=t.v;else if(t.v!==this.version)return _$logger_201.warn("Invalid version from server. Expected: "+this.version+" Received: "+t.v,t),this.fetch();this.version++,this._clearInflightOp()},n.prototype._rollback=function(t){var e=this.inflightOp;if(e.op&&e.type.invert){e.op=e.type.invert(e.op);for(var n=0;n<this.pendingOps.length;n++){var r=i(this.pendingOps[n],e);if(r)return this._hardRollback(r)}try{this._otApply(e,!1)}catch(t){return this._hardRollback(t)}this._clearInflightOp(t)}else this._hardRollback(t)},n.prototype._hardRollback=function(t){var e=[];this.inflightOp&&e.push(this.inflightOp),e=e.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var n=this;this.fetch(function(){for(var r=!!e.length,i=0;i<e.length;i++)r=o(e[i].callbacks,t)&&r;if(t&&!r)return n.emit("error",t)})},n.prototype._clearInflightOp=function(t){var e=this.inflightOp;this.inflightOp=null;var n=o(e.callbacks,t);if(this.flush(),this._emitNothingPending(),t&&!n)return this.emit("error",t)}}).call(this,_$browser_155);var _$Query_195={};(function(t){function e(t,e,n,r,i,o,s){_$emitter_199.EventEmitter.call(this),this.action=t,this.connection=e,this.id=n,this.collection=r,this.query=i,this.results=null,o&&o.results&&(this.results=o.results,delete o.results),this.extra=void 0,this.options=o,this.callback=s,this.ready=!1,this.sent=!1}_$Query_195=e,_$emitter_199.mixin(e),e.prototype.hasPending=function(){return!this.ready},e.prototype.send=function(){if(this.connection.canSend){var t={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(t.o=this.options),this.results){for(var e=[],n=0;n<this.results.length;n++){var r=this.results[n];e.push([r.id,r.version])}t.r=e}this.connection.send(t),this.sent=!0}},e.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&t.nextTick(e)},e.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},e.prototype._handleFetch=function(t,e,n){this.connection._destroyQuery(this),this._handleResponse(t,e,n)},e.prototype._handleSubscribe=function(t,e,n){this._handleResponse(t,e,n)},e.prototype._handleResponse=function(t,e,n){var r=this.callback;if(this.callback=null,t)return this._finishResponse(t,r);if(!e)return this._finishResponse(null,r);var i=this,o=1,s=function(t){if(t)return i._finishResponse(t,r);--o||i._finishResponse(null,r)};if(Array.isArray(e))o+=e.length,this.results=this._ingestSnapshots(e,s),this.extra=n;else for(var a in e){o++;var c=e[a];this.connection.get(c.c||this.collection,a).ingestSnapshot(c,s)}s()},e.prototype._ingestSnapshots=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=this.connection.get(i.c||this.collection,i.d);o.ingestSnapshot(i,e),n.push(o)}return n},e.prototype._finishResponse=function(t,e){if(this.emit("ready"),this.ready=!0,t)return this.connection._destroyQuery(this),e?e(t):this.emit("error",t);e&&e(null,this.results,this.extra)},e.prototype._handleError=function(t){this.emit("error",t)},e.prototype._handleDiff=function(t){for(var e=0;e<t.length;e++){"insert"===(n=t[e]).type&&(n.values=this._ingestSnapshots(n.values))}for(e=0;e<t.length;e++){var n;switch((n=t[e]).type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var i=n.howMany||1,o=this.results.splice(n.index,i);this.emit("remove",o,n.index);break;case"move":i=n.howMany||1;var s=this.results.splice(n.from,i);Array.prototype.splice.apply(this.results,[n.to,0].concat(s)),this.emit("move",s,n.from,n.to)}}this.emit("changed",this.results)},e.prototype._handleExtra=function(t){this.extra=t,this.emit("extra",t)}}).call(this,_$browser_155);var _$Snapshot_203=Snapshot;function Snapshot(t,e,n,r,i){this.id=t,this.v=e,this.type=n,this.data=r,this.m=i}var _$SnapshotRequest_196=SnapshotRequest;function SnapshotRequest(t,e,n,r,i){if(_$emitter_199.EventEmitter.call(this),"function"!=typeof i)throw new Error("Callback is required for SnapshotRequest");this.requestId=e,this.connection=t,this.id=r,this.collection=n,this.callback=i,this.sent=!1}_$emitter_199.mixin(SnapshotRequest),SnapshotRequest.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},SnapshotRequest.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},SnapshotRequest.prototype._handleResponse=function(t,e){if(this.emit("ready"),t)return this.callback(t);var n=e.meta?e.meta:null,r=new _$Snapshot_203(this.id,e.v,e.type,e.data,n);this.callback(null,r)};var _$util_205={};function doNothing(){}_$util_205.hasKeys=function(t){for(var e in t)return!0;return!1},_$util_205.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},_$util_205.isValidVersion=function(t){return null===t||_$util_205.isInteger(t)&&t>=0},_$util_205.isValidTimestamp=function(t){return _$util_205.isValidVersion(t)};var _$SnapshotVersionRequest_198=SnapshotVersionRequest;function SnapshotVersionRequest(t,e,n,r,i,o){if(_$SnapshotRequest_196.call(this,t,e,n,r,o),!_$util_205.isValidVersion(i))throw new Error("Snapshot version must be a positive integer or null");this.version=i}SnapshotVersionRequest.prototype=Object.create(_$SnapshotRequest_196.prototype),SnapshotVersionRequest.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}};var _$SnapshotTimestampRequest_197=SnapshotTimestampRequest;function SnapshotTimestampRequest(t,e,n,r,i,o){if(_$SnapshotRequest_196.call(this,t,e,n,r,o),!_$util_205.isValidTimestamp(i))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=i}SnapshotTimestampRequest.prototype=Object.create(_$SnapshotRequest_196.prototype),SnapshotTimestampRequest.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}};var _$Connection_192={};(function(t){var e=_$ShareDBError_200.CODES;function n(t){return 0===t.readyState||1===t.readyState?"connecting":"disconnected"}function r(t){_$emitter_199.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=n(t),this.bindToSocket(t)}function i(t,e){var n=new Error(t.message);return n.code=t.code,e&&(n.data=e),n}function o(t){return t.hasPending()}function s(t){return t.hasWritePending()}_$Connection_192=r,_$emitter_199.mixin(r),r.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var r=n(e);this._setState(r),this.canSend=!1;var i=this;e.onmessage=function(e){try{var n="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void _$logger_201.warn("Failed to parse message",e)}i.debug&&_$logger_201.info("RECV",JSON.stringify(n));var r={data:n};if(i.emit("receive",r),r.data)try{i.handleMessage(r.data)}catch(e){t.nextTick(function(){i.emit("error",e)})}},e.onopen=function(){i._setState("connecting")},e.onerror=function(t){i.emit("connection error",t)},e.onclose=function(t){"closed"===t||"Closed"===t?i._setState("closed",t):"stopped"===t||"Stopped by server"===t?i._setState("stopped",t):i._setState("disconnected",t)}},r.prototype.handleMessage=function(t){var n=null;switch(t.error&&(n=i(t.error,t),delete t.error),t.a){case"init":return 1!==t.protocol?(n=new _$ShareDBError_200(e.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+t.protocol),this.emit("error",n)):_$types_204.map[t.type]!==_$types_204.defaultType?(n=new _$ShareDBError_200(e.ERR_DEFAULT_TYPE_MISMATCH,t.type+" does not match the server default type"),this.emit("error",n)):"string"!=typeof t.id?(n=new _$ShareDBError_200(e.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string"),this.emit("error",n)):(this.id=t.id,void this._setState("connected"));case"qf":return void((r=this.queries[t.id])&&r._handleFetch(n,t.data,t.extra));case"qs":return void((r=this.queries[t.id])&&r._handleSubscribe(n,t.data,t.extra));case"qu":return;case"q":var r;if(!(r=this.queries[t.id]))return;return n?r._handleError(n):(t.diff&&r._handleDiff(t.diff),void(t.hasOwnProperty("extra")&&r._handleExtra(t.extra)));case"bf":return this._handleBulkMessage(n,t,"_handleFetch");case"bs":return this._handleBulkMessage(n,t,"_handleSubscribe");case"bu":return this._handleBulkMessage(n,t,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(n,t);case"f":return void((o=this.getExisting(t.c,t.d))&&o._handleFetch(n,t.data));case"s":return void((o=this.getExisting(t.c,t.d))&&o._handleSubscribe(n,t.data));case"u":return void((o=this.getExisting(t.c,t.d))&&o._handleUnsubscribe(n));case"op":var o;return void((o=this.getExisting(t.c,t.d))&&o._handleOp(n,t));default:_$logger_201.warn("Ignoring unrecognized message",t)}},r.prototype._handleBulkMessage=function(t,e,n){if(e.data)for(var r in e.data){var o=e.data[r];(a=this.getExisting(e.c,r))&&(t?a[n](t):o.error?a[n](i(o.error)):a[n](null,o))}else if(Array.isArray(e.b))for(var s=0;s<e.b.length;s++){r=e.b[s];(a=this.getExisting(e.c,r))&&a[n](t)}else if(e.b)for(var r in e.b){var a;(a=this.getExisting(e.c,r))&&a[n](t)}else _$logger_201.error("Invalid bulk message",e)},r.prototype._reset=function(){this.seq=1,this.id=null,this.agent=null},r.prototype._setState=function(t,n){if(this.state!==t){if("connecting"===t&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===t&&"connecting"!==this.state){var r=new _$ShareDBError_200(e.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+t);return this.emit("error",r)}for(var i in this.state=t,this.canSend="connected"===t,"disconnected"!==t&&"stopped"!==t&&"closed"!==t||this._reset(),this.startBulk(),this.queries){this.queries[i]._onConnectionStateChanged()}for(var o in this.collections){var s=this.collections[o];for(var i in s)s[i]._onConnectionStateChanged()}for(var i in this._snapshotRequests){this._snapshotRequests[i]._onConnectionStateChanged()}this.endBulk(),this.emit(t,n),this.emit("state",t,n)}},r.prototype.startBulk=function(){this.bulk||(this.bulk={})},r.prototype.endBulk=function(){if(this.bulk)for(var t in this.bulk){var e=this.bulk[t];this._sendBulk("f",t,e.f),this._sendBulk("s",t,e.s),this._sendBulk("u",t,e.u)}this.bulk=null},r.prototype._sendBulk=function(t,e,n){if(n){var r,i=[],o={},s=0;for(var a in n){var c=n[a];null==c?i.push(a):(o[a]=c,r=a,s++)}if(1===i.length){a=i[0];this.send({a:t,c:e,d:a})}else i.length&&this.send({a:"b"+t,c:e,b:i});if(1===s){var l=o[r];this.send({a:t,c:e,d:r,v:l})}else s&&this.send({a:"b"+t,c:e,b:o})}},r.prototype._sendAction=function(t,e,n){if(this._addDoc(e),this.bulk){var r=this.bulk[e.collection]||(this.bulk[e.collection]={}),i=r[t]||(r[t]={}),o=i.hasOwnProperty(e.id);return i[e.id]=n,o}var s={a:t,c:e.collection,d:e.id,v:n};this.send(s)},r.prototype.sendFetch=function(t){return this._sendAction("f",t,t.version)},r.prototype.sendSubscribe=function(t){return this._sendAction("s",t,t.version)},r.prototype.sendUnsubscribe=function(t){return this._sendAction("u",t)},r.prototype.sendOp=function(t,e){this._addDoc(t);var n={a:"op",c:t.collection,d:t.id,v:t.version,src:e.src,seq:e.seq};e.op&&(n.op=e.op),e.create&&(n.create=e.create),e.del&&(n.del=e.del),this.send(n)},r.prototype.send=function(t){this.debug&&_$logger_201.info("SEND",JSON.stringify(t)),this.emit("send",t),this.socket.send(JSON.stringify(t))},r.prototype.close=function(){this.socket.close()},r.prototype.getExisting=function(t,e){if(this.collections[t])return this.collections[t][e]},r.prototype.get=function(t,e){var n=this.collections[t]||(this.collections[t]={}),r=n[e];return r||(r=n[e]=new _$Doc_193(this,t,e),this.emit("doc",r)),r},r.prototype._destroyDoc=function(t){var e=this.collections[t.collection];e&&(delete e[t.id],_$util_205.hasKeys(e)||delete this.collections[t.collection])},r.prototype._addDoc=function(t){var e=this.collections[t.collection];e||(e=this.collections[t.collection]={}),e[t.id]!==t&&(e[t.id]=t)},r.prototype._createQuery=function(t,e,n,r,i){var o=this.nextQueryId++,s=new _$Query_195(t,this,o,e,n,r,i);return this.queries[o]=s,s.send(),s},r.prototype._destroyQuery=function(t){delete this.queries[t.id]},r.prototype.createFetchQuery=function(t,e,n,r){return this._createQuery("qf",t,e,n,r)},r.prototype.createSubscribeQuery=function(t,e,n,r){return this._createQuery("qs",t,e,n,r)},r.prototype.hasPending=function(){return!!(this._firstDoc(o)||this._firstQuery(o)||this._firstSnapshotRequest())},r.prototype.hasWritePending=function(){return!!this._firstDoc(s)},r.prototype.whenNothingPending=function(e){var n=this._firstDoc(o);if(n)n.once("nothing pending",this._nothingPendingRetry(e));else{var r=this._firstQuery(o);if(r)r.once("ready",this._nothingPendingRetry(e));else{var i=this._firstSnapshotRequest();i?i.once("ready",this._nothingPendingRetry(e)):t.nextTick(e)}}},r.prototype._nothingPendingRetry=function(e){var n=this;return function(){t.nextTick(function(){n.whenNothingPending(e)})}},r.prototype._firstDoc=function(t){for(var e in this.collections){var n=this.collections[e];for(var r in n){var i=n[r];if(t(i))return i}}},r.prototype._firstQuery=function(t){for(var e in this.queries){var n=this.queries[e];if(t(n))return n}},r.prototype._firstSnapshotRequest=function(){for(var t in this._snapshotRequests)return this._snapshotRequests[t]},r.prototype.fetchSnapshot=function(t,e,n,r){"function"==typeof n&&(r=n,n=null);var i=this.nextSnapshotRequestId++,o=new _$SnapshotVersionRequest_198(this,i,t,e,n,r);this._snapshotRequests[o.requestId]=o,o.send()},r.prototype.fetchSnapshotByTimestamp=function(t,e,n,r){"function"==typeof n&&(r=n,n=null);var i=this.nextSnapshotRequestId++,o=new _$SnapshotTimestampRequest_197(this,i,t,e,n,r);this._snapshotRequests[o.requestId]=o,o.send()},r.prototype._handleSnapshotFetch=function(t,e){var n=this._snapshotRequests[e.id];n&&(delete this._snapshotRequests[e.id],n._handleResponse(t,e))}}).call(this,_$browser_155);var _$client_194={};_$client_194.Connection=_$Connection_192,_$client_194.types=_$types_204;var _$RemoteDoc_172=RemoteDoc;function RemoteDoc(t,e,n,r,i){i&&(i.docs[n]=this),_$Doc_168.call(this,t,e,n),this.model=t.pass({$remote:!0}),this.debugMutations=t.root.debug.remoteMutations,this.shareDoc=t.root.connection.get(e,n),this.shareDoc.ingestSnapshot(r),this._initShareDoc()}function createInsertOp(t,e,n){if(!Array.isArray(n))return[new ListInsertOp(t,e,n)];for(var r=[],i=0,o=n.length;i<o;i++)r.push(new ListInsertOp(t,e++,n[i]));return r}function ImpliedOp(t,e){this.op=t,this.value=e}function ObjectReplaceOp(t,e,n){this.p=_$util_189.castSegments(t),this.od=e,this.oi=void 0===n?null:n}function ObjectInsertOp(t,e){this.p=_$util_189.castSegments(t),this.oi=void 0===e?null:e}function ObjectDeleteOp(t,e){this.p=_$util_189.castSegments(t),this.od=void 0===e?null:e}function ListReplaceOp(t,e,n,r){this.p=_$util_189.castSegments(t.concat(e)),this.ld=n,this.li=void 0===r?null:r}function ListInsertOp(t,e,n){this.p=_$util_189.castSegments(t.concat(e)),this.li=void 0===n?null:n}function ListRemoveOp(t,e,n){this.p=_$util_189.castSegments(t.concat(e)),this.ld=void 0===n?null:n}function ListMoveOp(t,e,n){this.p=_$util_189.castSegments(t.concat(e)),this.lm=n}function StringInsertOp(t,e,n){this.p=_$util_189.castSegments(t.concat(e)),this.si=n}function StringRemoveOp(t,e,n){this.p=_$util_189.castSegments(t.concat(e)),this.sd=n}function IncrementOp(t,e){this.p=_$util_189.castSegments(t),this.na=e}function SubtypeOp(t,e,n){this.p=_$util_189.castSegments(t),this.t=e,this.o=n}function defined(t){return void 0!==t}RemoteDoc.prototype=new _$Doc_168,RemoteDoc.prototype._initShareDoc=function(){var t=this,e=this.model,n=this.collectionName,r=this.id,i=this.shareDoc;e.root.debug.disableSubmit&&(i.submitOp=function(){},i.create=function(){},i.del=function(){}),i.on("op",function(e,n){n||(t._updateCollectionData(),t._onOp(e))}),i.on("del",function(i,o){o||(delete t.collectionData[r],e.emit("change",[n,r],[void 0,i,e._pass]))}),i.on("create",function(o){if(!o){t._updateCollectionData();var s=i.data;e.emit("change",[n,r],[s,void 0,e._pass])}}),i.on("error",function(t){e._emitError(t,n+"."+r)}),i.on("load",function(){t._updateCollectionData();var o=i.data;void 0!==o&&e.emit("load",[n,r],[o,e._pass])}),this._updateCollectionData()},RemoteDoc.prototype._updateCollectionData=function(){var t=this.shareDoc.data;"object"!=typeof t||Array.isArray(t)||null===t||(t.id=this.id),this.collectionData[this.id]=t},RemoteDoc.prototype.create=function(t,e){this.debugMutations&&console.log("RemoteDoc create",this.path(),t);var n=_$util_189.deepCopy(t);n&&delete n.id,this.shareDoc.create(n,e),this.shareDoc.data=t,this._updateCollectionData(),this.model._context.createDoc(this.collectionName,this.id)},RemoteDoc.prototype.set=function(t,e,n){this.debugMutations&&console.log("RemoteDoc set",this.path(t),e);var r=this._createImplied(t),i=t[t.length-1];if(r instanceof ImpliedOp)return r.value[i]=e,this.shareDoc.submitOp(r.op,n),void this._updateCollectionData();var o=_$util_189.isArrayIndex(i)?[new ListReplaceOp(t.slice(0,-1),i,r,e)]:[new ObjectReplaceOp(t,r,e)];return this.shareDoc.submitOp(o,n),this._updateCollectionData(),r},RemoteDoc.prototype.del=function(t,e){if(this.debugMutations&&console.log("RemoteDoc del",this.path(t)),0===t.length){var n=this.get();return this.shareDoc.del(e),delete this.collectionData[this.id],n}if(void 0!==(n=this.get(t))){var r=[new ObjectDeleteOp(t,n)];return this.shareDoc.submitOp(r,e),this._updateCollectionData(),n}e()},RemoteDoc.prototype.increment=function(t,e,n){this.debugMutations&&console.log("RemoteDoc increment",this.path(t),e);var r=this._createImplied(t);if(r instanceof ImpliedOp){var i=t[t.length-1];return r.value[i]=e,this.shareDoc.submitOp(r.op,n),this._updateCollectionData(),e}if(null==r){i=t[t.length-1];var o=_$util_189.isArrayIndex(i)?[new ListInsertOp(t.slice(0,-1),i,e)]:[new ObjectInsertOp(t,e)];return this.shareDoc.submitOp(o,n),this._updateCollectionData(),e}o=[new IncrementOp(t,e)];return this.shareDoc.submitOp(o,n),this._updateCollectionData(),r+e},RemoteDoc.prototype.push=function(t,e,n){this.debugMutations&&console.log("RemoteDoc push",this.path(t),e);var r=this.shareDoc;return this._arrayApply(t,function(n,i){var o=[new ListInsertOp(t,n.length,e)];return r.submitOp(o,i),n.length},n)},RemoteDoc.prototype.unshift=function(t,e,n){this.debugMutations&&console.log("RemoteDoc unshift",this.path(t),e);var r=this.shareDoc;return this._arrayApply(t,function(n,i){var o=[new ListInsertOp(t,0,e)];return r.submitOp(o,i),n.length},n)},RemoteDoc.prototype.insert=function(t,e,n,r){this.debugMutations&&console.log("RemoteDoc insert",this.path(t),e,n);var i=this.shareDoc;return this._arrayApply(t,function(r,o){var s=createInsertOp(t,e,n);return i.submitOp(s,o),r.length},r)},RemoteDoc.prototype.pop=function(t,e){this.debugMutations&&console.log("RemoteDoc pop",this.path(t));var n=this.shareDoc;return this._arrayApply(t,function(e,r){var i=e.length-1,o=e[i],s=[new ListRemoveOp(t,i,o)];return n.submitOp(s,r),o},e)},RemoteDoc.prototype.shift=function(t,e){this.debugMutations&&console.log("RemoteDoc shift",this.path(t));var n=this.shareDoc;return this._arrayApply(t,function(e,r){var i=e[0],o=[new ListRemoveOp(t,0,i)];return n.submitOp(o,r),i},e)},RemoteDoc.prototype.remove=function(t,e,n,r){this.debugMutations&&console.log("RemoteDoc remove",this.path(t),e,n);var i=this.shareDoc;return this._arrayApply(t,function(r,o){for(var s=r.slice(e,e+n),a=[],c=0,l=s.length;c<l;c++)a.push(new ListRemoveOp(t,e,s[c]));return i.submitOp(a,o),s},r)},RemoteDoc.prototype.move=function(t,e,n,r,i){this.debugMutations&&console.log("RemoteDoc move",this.path(t),e,n,r);var o=this.shareDoc;return this._arrayApply(t,function(i,s){for(var a=i.slice(e,e+r),c=[],l=0;l<r;l++)c.push(new ListMoveOp(t,e<n?e:e+r-1,e<n?n+r-1:n));return o.submitOp(c,s),a},i)},RemoteDoc.prototype.stringInsert=function(t,e,n,r){this.debugMutations&&console.log("RemoteDoc stringInsert",this.path(t),e,n);var i=this._createImplied(t);if(i instanceof ImpliedOp){var o=t[t.length-1];return i.value[o]=n,this.shareDoc.submitOp(i.op,r),void this._updateCollectionData()}if(null==i){o=t[t.length-1];var s=_$util_189.isArrayIndex(o)?[new ListInsertOp(t.slice(0,-1),o,n)]:[new ObjectInsertOp(t,n)];return this.shareDoc.submitOp(s,r),this._updateCollectionData(),i}s=[new StringInsertOp(t,e,n)];return this.shareDoc.submitOp(s,r),this._updateCollectionData(),i},RemoteDoc.prototype.stringRemove=function(t,e,n,r){this.debugMutations&&console.log("RemoteDoc stringRemove",this.path(t),e,n);var i=this._createImplied(t);if(!(i instanceof ImpliedOp)){if(null==i)return i;var o=[new StringRemoveOp(t,e,i.slice(e,e+n))];return this.shareDoc.submitOp(o,r),this._updateCollectionData(),i}},RemoteDoc.prototype.subtypeSubmit=function(t,e,n,r){this.debugMutations&&console.log("RemoteDoc subtypeSubmit",this.path(t),e,n);var i=this._createImplied(t);i instanceof ImpliedOp&&(this.shareDoc.submitOp(i.op),i=void 0);var o=new SubtypeOp(t,e,n);return this.shareDoc.submitOp(o,r),this._updateCollectionData(),i},RemoteDoc.prototype.get=function(t){return _$util_189.lookup(t,this.shareDoc.data)},RemoteDoc.prototype._createImplied=function(t){if(!this.shareDoc.type)throw new Error("Mutation on uncreated remote document");for(var e,n,r=this.shareDoc,i="data",o=r[i],s=0,a=t[s++];null!=a;)o||(e?n=n[i]=_$util_189.isArrayIndex(a)?[]:{}:(n=_$util_189.isArrayIndex(a)?[]:{},e=Array.isArray(r)?i>=r.length?new ListInsertOp(t.slice(0,s-2),i,n):new ListReplaceOp(t.slice(0,s-2),i,o,n):new ObjectInsertOp(t.slice(0,s-1),n)),o=n),o=(r=o)[i=a],a=t[s++];return e?new ImpliedOp(e,n):o},RemoteDoc.prototype._arrayApply=function(t,e,n){var r=this._createImplied(t);if(r instanceof ImpliedOp&&(this.shareDoc.submitOp(r.op),r=this.get(t)),null==r){var i=t[t.length-1],o=_$util_189.isArrayIndex(i)?[new ListInsertOp(t.slice(0,-1),i,[])]:[new ObjectInsertOp(t,[])];this.shareDoc.submitOp(o),r=this.get(t)}if(!Array.isArray(r)){var s=this._errorMessage(e.name+" on non-array",t,r);return n(new TypeError(s))}var a=e(r,n);return this._updateCollectionData(),a},RemoteDoc.prototype._onOp=function(t){var e;if(1!==t.length){if(0===t.length)return;try{t=JSON.stringify(t)}catch(t){}throw new Error("Received op with multiple components from ShareDB "+t)}e=t[0];var n=[this.collectionName,this.id].concat(e.p),r=this.model;if(defined(e.oi)||defined(e.od)){var i=e.oi,o=e.od;r.emit("change",n,[i,o,r._pass])}else if(defined(e.li)&&defined(e.ld)){i=e.li,o=e.ld;r.emit("change",n,[i,o,r._pass])}else if(defined(e.li)){var s=n[n.length-1],a=[e.li];r.emit("insert",n.slice(0,-1),[s,a,r._pass])}else if(defined(e.ld)){s=n[n.length-1];var c=[e.ld];r.emit("remove",n.slice(0,-1),[s,c,r._pass])}else if(defined(e.lm)){var l=n[n.length-1],u=e.lm,p=1;r.emit("move",n.slice(0,-1),[l,u,p,r._pass])}else if(defined(e.si)){s=n[n.length-1];var h=e.si;n=n.slice(0,-1);o=(i=r._get(n)).slice(0,s)+i.slice(s+h.length);var f=r.pass({$stringInsert:{index:s,text:h}})._pass;r.emit("change",n,[i,o,f])}else if(defined(e.sd)){s=n[n.length-1],p=(h=e.sd).length;n=n.slice(0,-1);o=(i=r._get(n)).slice(0,s)+h+i.slice(s),f=r.pass({$stringRemove:{index:s,howMany:p}})._pass;r.emit("change",n,[i,o,f])}else if(defined(e.na)){o=(i=this.get(e.p))-e.na;r.emit("change",n,[i,o,r._pass])}else if(defined(e.t)){i=this.get(e.p),o=void 0;var d=e.t;t=e.o,f=r.pass({$subtype:{type:d,op:t}})._pass;r.emit("change",n,[i,o,f])}};var _$connection_174={},Connection=_$client_194.Connection;_$Model_170.INITS.push(function(t){t.root._preventCompose=!1}),_$Model_170.prototype.preventCompose=function(){var t=this._child();return t._preventCompose=!0,t},_$Model_170.prototype.allowCompose=function(){var t=this._child();return t._preventCompose=!1,t},_$Model_170.prototype.createConnection=function(t){this.root.socket=this._createSocket(t);var e=this;this.root.connection=new Connection(this.root.socket),this.root.connection.on("state",function(t,n){e._setDiff(["$connection","state"],t),e._setDiff(["$connection","reason"],n)}),this._set(["$connection","state"],"connected"),this._finishCreateConnection()},_$Model_170.prototype._finishCreateConnection=function(){var t=this;this.root.connection.on("error",function(e){t._emitError(e)}),this.root.connection.on("doc",function(e){t.getOrCreateDoc(e.collection,e.id)})},_$Model_170.prototype.connect=function(){this.root.socket.open()},_$Model_170.prototype.disconnect=function(){this.root.socket.close()},_$Model_170.prototype.reconnect=function(){this.disconnect(),this.connect()},_$Model_170.prototype.close=function(t){t=this.wrapCallback(t);var e=this;this.whenNothingPending(function(){e.root.socket.close(),t()})},_$Model_170.prototype.getAgent=function(){return this.root.connection.agent},_$Model_170.prototype._isLocal=function(t){var e=t.charAt(0);return"_"===e||"$"===e},_$Model_170.prototype._getDocConstructor=function(t){return this._isLocal(t)?_$LocalDoc_169:_$RemoteDoc_172},_$Model_170.prototype.hasPending=function(){return this.root.connection.hasPending()},_$Model_170.prototype.hasWritePending=function(){return this.root.connection.hasWritePending()},_$Model_170.prototype.whenNothingPending=function(t){return this.root.connection.whenNothingPending(t)};var _$Query_171={};(function(t){var e=_$client_194.types.defaultType;function n(){this.map={},this.collections={}}function r(t,e,n,r){this.model=t.pass({$query:this}),this.collectionName=e,this.expression=n,this.options=r,this.hash=i(e,n,r),this.segments=["$queries",this.hash],this.idsSegments=["$queries",this.hash,"ids"],this.extraSegments=["$queries",this.hash,"extra"],this._pendingSubscribeCallbacks=[],this.subscribeCount=0,this.fetchCount=0,this.created=!1,this.shareQuery=null,this.idMap={}}function i(t,e,n){var r=[t,e,n];return JSON.stringify(r).replace(/\./g,"|")}function o(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.id)}return e}_$Query_171=r,_$Model_170.INITS.push(function(t){t.root._queries=new n}),_$Model_170.prototype.query=function(t,e,n){return"string"==typeof n&&(n={db:n}),this._getOrCreateQuery(t,e,n,r)},_$Model_170.prototype._getOrCreateQuery=function(t,e,n,r){e=this.sanitizeQuery(e);var i=this.root._queries.get(t,e,n);return i||(i=new r(this,t,e,n),this.root._queries.add(i),i)},_$Model_170.prototype.sanitizeQuery=function(t){if(t&&"object"==typeof t)for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];void 0===n?t[e]=null:this.sanitizeQuery(n)}return t},_$Model_170.prototype._initQueries=function(t){for(var e=this.root._queries,n=0;n<t.length;n++){var i=t[n],o=i[0],s=i[1],a=i[2],c=i[3]||[],l=i[4],u=i[5],p=this.root._queries.get(s,a,l);p||(p=new r(this,s,a,l),e.add(p)),p._setExtra(u);for(var h=[],f=0;f<c.length;f++){var d=c[f];if("string"!=typeof d){var _=d[0],m=d[1],y=d[2]||_.id,g=d[3];h.push(y);var v={data:_,v:m,type:g};this.getOrCreateDoc(s,y,v)}else h.push(d)}p._addMapIds(h),this._set(p.idsSegments,h);for(var b=0;b<o.length;b++){var E=o[b],S=E[0]||0,x=E[1]||0,w=E[2];for(w&&p.model.setContext(w);S--;)p.subscribe();for(p.fetchCount+=x;x--;)p.model._context.fetchQuery(p)}}},n.prototype.add=function(t){this.map[t.hash]=t,(this.collections[t.collectionName]||(this.collections[t.collectionName]={}))[t.hash]=t},n.prototype.remove=function(t){delete this.map[t.hash];var e=this.collections[t.collectionName];if(e){for(var n in delete e[t.hash],e)return;delete this.collections[t.collectionName]}},n.prototype.get=function(t,e,n){var r=i(t,e,n);return this.map[r]},n.prototype.toJSON=function(){var t=[];for(var e in this.map){var n=this.map[e];(n.subscribeCount||n.fetchCount)&&t.push(n.serialize())}return t},r.prototype.create=function(){this.created=!0,this.model.root._queries.add(this)},r.prototype.destroy=function(){var t=this.getIds();this.created=!1,this.shareQuery&&(this.shareQuery.destroy(),this.shareQuery=null),this.model.root._queries.remove(this),this.idMap={},this.model._del(this.segments),this._maybeUnloadDocs(t)},r.prototype.fetch=function(t){t=this.model.wrapCallback(t),this.model._context.fetchQuery(this),this.fetchCount++,this.created||this.create();var e=this;return this.model.root.connection.createFetchQuery(this.collectionName,this.expression,this.options,function(n,r,i){if(n)return t(n);e._setExtra(i),e._setResults(r),t()}),this},r.prototype.subscribe=function(e){if(e=this.model.wrapCallback(e),this.model._context.subscribeQuery(this),this.subscribeCount++){var n=this;return t.nextTick(function(){n.model._get(n.segments)?e():n._pendingSubscribeCallbacks.push(e)}),this}this.created||this.create();var r=this.options?_$util_189.copy(this.options):{};return r.results=this._getShareResults(),this.model.root.fetchOnly?this._shareFetchedSubscribe(r,e):this._shareSubscribe(r,e),this},r.prototype._subscribeCb=function(t){var e=this;return function(n,r,i){if(n)return e._flushSubscribeCallbacks(n,t);e._setExtra(i),e._setResults(r),e._flushSubscribeCallbacks(null,t)}},r.prototype._shareFetchedSubscribe=function(t,e){this.model.root.connection.createFetchQuery(this.collectionName,this.expression,t,this._subscribeCb(e))},r.prototype._shareSubscribe=function(t,e){var n=this;this.shareQuery&&this.shareQuery.destroy(),this.shareQuery=this.model.root.connection.createSubscribeQuery(this.collectionName,this.expression,t,this._subscribeCb(e)),this.shareQuery.on("insert",function(t,e){var r=o(t);n._addMapIds(r),n.model._insert(n.idsSegments,e,r)}),this.shareQuery.on("remove",function(t,e){var r=o(t);n._removeMapIds(r),n.model._remove(n.idsSegments,e,t.length)}),this.shareQuery.on("move",function(t,e,r){n.model._move(n.idsSegments,e,r,t.length)}),this.shareQuery.on("extra",function(t){n.model._setDiffDeep(n.extraSegments,t)}),this.shareQuery.on("error",function(t){n.model._emitError(t,n.hash)})},r.prototype._removeMapIds=function(t){for(var e=t.length;e--;){var n=t[e];this.idMap[n]>1?this.idMap[n]--:delete this.idMap[n]}if(this.model.root.unloadDelay){var r=this;setTimeout(function(){r._maybeUnloadDocs(t)},this.model.root.unloadDelay)}else this._maybeUnloadDocs(t)},r.prototype._addMapIds=function(t){for(var e=t.length;e--;){var n=t[e];this.idMap[n]=(this.idMap[n]||0)+1}},r.prototype._diffMapIds=function(t){for(var e=[],n=[],r={},i=t.length;i--;){r[o=t[i]]=!0,this.idMap[o]||e.push(o)}for(var o in this.idMap)r[o]||n.push(o);e.length&&this._addMapIds(e),n.length&&this._removeMapIds(n)},r.prototype._setExtra=function(t){void 0!==t&&this.model._setDiffDeep(this.extraSegments,t)},r.prototype._setResults=function(t){var e=o(t);this._setResultIds(e)},r.prototype._setResultIds=function(t){this._diffMapIds(t),this.model._setArrayDiff(this.idsSegments,t)},r.prototype._maybeUnloadDocs=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.model._maybeUnloadDoc(this.collectionName,n)}},r.prototype._flushSubscribeCallbacks=function(t,e){var n;for(e(t);n=this._pendingSubscribeCallbacks.shift();)n(t)},r.prototype.unfetch=function(t){if(t=this.model.wrapCallback(t),this.model._context.unfetchQuery(this),!this.fetchCount)return t(),this;var e=this;function n(){var n=--e.fetchCount;if(n)return t(null,n);e.subscribeCount||e.destroy(),t(null,0)}return this.model.root.unloadDelay?setTimeout(n,this.model.root.unloadDelay):n(),this},r.prototype.unsubscribe=function(t){if(t=this.model.wrapCallback(t),this.model._context.unsubscribeQuery(this),!this.subscribeCount)return t(),this;var e=this;function n(){var n=--e.subscribeCount;if(n)return t(null,n);e.shareQuery&&(e.shareQuery.destroy(),e.shareQuery=null),function(n){if(n)return t(n);e.fetchCount||e.destroy();t(null,0)}()}return this.model.root.unloadDelay?setTimeout(n,this.model.root.unloadDelay):n(),this},r.prototype._getShareResults=function(){var t=this.model._get(this.idsSegments);if(t){var e=this.model.getCollection(this.collectionName);if(e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=e.docs[i];n.push(o&&o.shareDoc)}return n}}},r.prototype.get=function(){var t=[],e=this.model._get(this.segments);if(!e)return console.warn("You must fetch or subscribe to a query before getting its results."),t;var n=e.ids;if(!n)return t;for(var r=this.model.getCollection(this.collectionName),i=0,o=n.length;i<o;i++){var s=n[i],a=r&&r.docs[s];t.push(a&&a.get())}return t},r.prototype.getIds=function(){return this.model._get(this.idsSegments)||[]},r.prototype.getExtra=function(){return this.model._get(this.extraSegments)},r.prototype.ref=function(t){var e=this.idsSegments.join(".");return this.model.refList(t,this.collectionName,e)},r.prototype.refIds=function(t){var e=this.idsSegments.join(".");return this.model.root.ref(t,e)},r.prototype.refExtra=function(t,e){var n=this.extraSegments.join(".");return e&&(n+="."+e),this.model.root.ref(t,n)},r.prototype.serialize=function(){var t,n=this.getIds(),r=this.model.getCollection(this.collectionName);if(r){t=[];for(var i=0;i<n.length;i++){var o=n[i],s=r.docs[o];if(s){delete r.docs[o];var a=s.shareDoc.data,c=[a,s.shareDoc.version];a&&a.id===o||(c[2]=o),s.shareDoc.type!==e&&(c[3]=s.shareDoc.type&&s.shareDoc.type.name),t.push(c)}else t.push(o)}}var l=[],u=this.model.root._contexts;for(var p in u){var h=u[p],f=h.subscribedQueries[this.hash]||0,d=h.fetchedQueries[this.hash]||0;(f||d)&&("root"!==p?l.push([f,d,p]):d?l.push([f,d]):l.push([f]))}for(var _=[l,this.collectionName,this.expression,t,this.options,this.getExtra()];null==_[_.length-1];)_.pop();return _}}).call(this,_$browser_155);var _$CollectionCounter_167=CollectionCounter;function CollectionCounter(){this.reset()}CollectionCounter.prototype.reset=function(){this.collections={}},CollectionCounter.prototype.get=function(t,e){var n=this.collections[t];return n&&n[e]},CollectionCounter.prototype.increment=function(t,e){var n=this.collections[t]||(this.collections[t]={}),r=(n[e]||0)+1;return n[e]=r,r},CollectionCounter.prototype.decrement=function(t,e){var n=this.collections[t],r=n&&n[e];if(null!=r){if(r>1)return r--,n[e]=r,r;for(var i in delete n[e],n)return 0;return delete this.collections[t],0}},CollectionCounter.prototype.toJSON=function(){for(var t in this.collections)return this.collections};var _$subscriptions_186={};(function(t){_$Model_170.INITS.push(function(t,e){t.root.fetchOnly=e.fetchOnly,t.root.unloadDelay=e.unloadDelay||_$util_189.isServer?0:1e3,t.root._fetchedDocs=new _$CollectionCounter_167,t.root._subscribedDocs=new _$CollectionCounter_167}),_$Model_170.prototype.fetch=function(){return this._forSubscribable(arguments,"fetch"),this},_$Model_170.prototype.unfetch=function(){return this._forSubscribable(arguments,"unfetch"),this},_$Model_170.prototype.subscribe=function(){return this._forSubscribable(arguments,"subscribe"),this},_$Model_170.prototype.unsubscribe=function(){return this._forSubscribable(arguments,"unsubscribe"),this},_$Model_170.prototype._forSubscribable=function(e,n){var r,i;if(e.length)if("function"==typeof e[0])r=[null],i=e[0];else if(Array.isArray(e[0]))r=e[0],i=e[1];else{"function"==typeof(r=Array.prototype.slice.call(e))[r.length-1]&&(i=r.pop())}else r=[null];var o=_$util_189.asyncGroup(this.wrapCallback(i)),s=o(),a=n+"Doc";this.root.connection.startBulk();for(var c=0;c<r.length;c++){var l=r[c];if(l instanceof _$Query_171)l[n](o());else{var u=this._dereference(this._splitPath(l));if(2===u.length)this[a](u[0],u[1],o());else{var p="Cannot "+n+" to path: "+u.join(".");o()(new Error(p))}}}this.root.connection.endBulk(),t.nextTick(s)},_$Model_170.prototype.fetchDoc=function(t,e,n){n=this.wrapCallback(n),this._context.fetchDoc(t,e),this.root._fetchedDocs.increment(t,e),this.getOrCreateDoc(t,e).shareDoc.fetch(n)},_$Model_170.prototype.subscribeDoc=function(t,e,n){n=this.wrapCallback(n),this._context.subscribeDoc(t,e),this.root._subscribedDocs.increment(t,e);var r=this.getOrCreateDoc(t,e);if(r.shareDoc.subscribed)return n();this.root.fetchOnly?r.shareDoc.fetch(n):r.shareDoc.subscribe(n)},_$Model_170.prototype.unfetchDoc=function(t,e,n){if(n=this.wrapCallback(n),this._context.unfetchDoc(t,e),!this.root._fetchedDocs.get(t,e))return n();var r=this;function i(){var i=r.root._fetchedDocs.decrement(t,e);if(i)return n(null,i);r._maybeUnloadDoc(t,e),n(null,0)}this.root.unloadDelay?setTimeout(i,this.root.unloadDelay):i()},_$Model_170.prototype.unsubscribeDoc=function(t,e,n){if(n=this.wrapCallback(n),this._context.unsubscribeDoc(t,e),!this.root._subscribedDocs.get(t,e))return n();var r=this;function i(){var i=r.root._subscribedDocs.decrement(t,e);if(i)return n(null,i);if(r.root.fetchOnly)o();else{var s=r.getDoc(t,e),a=s&&s.shareDoc;if(!a)return o();a.unsubscribe(o)}}function o(i){if(r._maybeUnloadDoc(t,e),i)return n(i);n(null,0)}this.root.unloadDelay?setTimeout(i,this.root.unloadDelay):i()},_$Model_170.prototype._maybeUnloadDoc=function(t,e){var n=this.getDoc(t,e);if(n&&!(this._hasDocReferences(t,e)||n.shareDoc&&n.shareDoc.hasPending())){var r=n.get();this.root.collections[t].remove(e),n.shareDoc&&n.shareDoc.destroy(),this.emit("unload",[t,e],[r,this._pass])}},_$Model_170.prototype._hasDocReferences=function(t,e){var n=this.root._queries.collections[t];if(n)for(var r in n){var i=n[r];if((i.subscribeCount||i.fetchCount)&&i.idMap[e]>0)return!0}return!(!this.root._fetchedDocs.get(t,e)&&!this.root._subscribedDocs.get(t,e))}}).call(this,_$browser_155);var _$contexts_175={};function Contexts(){}function FetchedQueries(){}function SubscribedQueries(){}function Context(t,e){this.model=t,this.id=e,this.fetchedDocs=new _$CollectionCounter_167,this.subscribedDocs=new _$CollectionCounter_167,this.createdDocs=new _$CollectionCounter_167,this.fetchedQueries=new FetchedQueries,this.subscribedQueries=new SubscribedQueries}function mapIncrement(t,e){t[e]=(t[e]||0)+1}function mapDecrement(t,e){t[e]&&t[e]--,t[e]||delete t[e]}_$Model_170.INITS.push(function(t){t.root._contexts=new Contexts,t.root.setContext("root")}),_$Model_170.prototype.context=function(t){var e=this._child();return e.setContext(t),e},_$Model_170.prototype.setContext=function(t){this._context=this.getOrCreateContext(t)},_$Model_170.prototype.getOrCreateContext=function(t){return this.root._contexts[t]||(this.root._contexts[t]=new Context(this,t))},_$Model_170.prototype.unload=function(t){var e=t?this.root._contexts[t]:this._context;e&&e.unload()},_$Model_170.prototype.unloadAll=function(){var t=this.root._contexts;for(var e in t)t[e].unload()},Context.prototype.toJSON=function(){var t=this.fetchedDocs.toJSON(),e=this.subscribedDocs.toJSON(),n=this.createdDocs.toJSON();if(t||e||n)return{fetchedDocs:t,subscribedDocs:e,createdDocs:n}},Context.prototype.fetchDoc=function(t,e){this.fetchedDocs.increment(t,e)},Context.prototype.subscribeDoc=function(t,e){this.subscribedDocs.increment(t,e)},Context.prototype.unfetchDoc=function(t,e){this.fetchedDocs.decrement(t,e)},Context.prototype.unsubscribeDoc=function(t,e){this.subscribedDocs.decrement(t,e)},Context.prototype.createDoc=function(t,e){this.createdDocs.increment(t,e)},Context.prototype.fetchQuery=function(t){mapIncrement(this.fetchedQueries,t.hash)},Context.prototype.subscribeQuery=function(t){mapIncrement(this.subscribedQueries,t.hash)},Context.prototype.unfetchQuery=function(t){mapDecrement(this.fetchedQueries,t.hash)},Context.prototype.unsubscribeQuery=function(t){mapDecrement(this.subscribedQueries,t.hash)},Context.prototype.unload=function(){var t=this.model;for(var e in this.fetchedQueries){if(r=t.root._queries.map[e])for(var n=this.fetchedQueries[e];n--;)r.unfetch()}for(var e in this.subscribedQueries){var r;if(r=t.root._queries.map[e])for(n=this.subscribedQueries[e];n--;)r.unsubscribe()}for(var i in this.fetchedDocs.collections){var o=this.fetchedDocs.collections[i];for(var s in o)for(n=o[s];n--;)t.unfetchDoc(i,s)}for(var i in this.subscribedDocs.collections){o=this.subscribedDocs.collections[i];for(var s in o)for(n=o[s];n--;)t.unsubscribeDoc(i,s)}for(var i in this.createdDocs.collections){o=this.createdDocs.collections[i];for(var s in o)t._maybeUnloadDoc(i,s)}this.createdDocs.reset()};var _$defaultFns_176={},defaultFns=_$defaultFns_176=new DefaultFns;function DefaultFns(){}function FnPair(t,e){this.get=t,this.set=e}function getReverse(t){return t&&t.slice().reverse()}function setReverse(t){return{0:getReverse(t)}}function asc(t,e){return t<e?-1:t>e?1:0}function desc(t,e){return t>e?-1:t<e?1:0}defaultFns.reverse=new FnPair(getReverse,setReverse),defaultFns.asc=asc,defaultFns.desc=desc;var _$fn_179={};(function(t){function e(){}function n(t,e,n){var r,i,o,s,a,c=e.pop();"string"==typeof c?i=c:r=c,n&&(o=t.path(e.shift())),c=e[e.length-1],Array.isArray(c)||t.isPath(c)||(s=e.pop());for(var l=(a=1===e.length&&Array.isArray(e[0])?e[0]:e).length;l--;)a[l]=t.path(a[l]);return{name:i,path:o,inputPaths:a,fns:r,options:s}}function r(){}function i(t){this.model=t,this.nameMap=t.root._namedFns,this.fromMap=new r}function o(t,e,n,r,i,o){if(this.model=t.pass({$fn:this}),this.name=e,this.from=n,this.inputPaths=r,this.options=o,!i)throw new TypeError("Model function not found: "+e);this.getFn=i.get||i,this.setFn=i.set,this.fromSegments=n&&n.split("."),this.inputsSegments=[];for(var s=0;s<this.inputPaths.length;s++){var a=this.inputPaths[s].split(".");this.inputsSegments.push(a)}var c=o&&o.copy||"output";this.copyInput="input"===c||"both"===c,this.copyOutput="output"===c||"both"===c,this.mode=o&&o.mode||"diffDeep",this.async=!(!o||!o.async),this.eventPending=!1}_$Model_170.INITS.push(function(t){t.root._namedFns=new e,t.root._fns=new i(t),t.on("all",function(e,n){var r=n[n.length-1],i=t.root._fns.fromMap;for(var o in i){var s=i[o];r.$fn!==s&&(_$util_189.mayImpactAny(s.inputsSegments,e)?s.onInput(r):_$util_189.mayImpact(s.fromSegments,e)&&s.onOutput(r))}})}),_$Model_170.prototype.fn=function(t,e){this.root._namedFns[t]=e},_$Model_170.prototype.evaluate=function(){var t=n(this,Array.prototype.slice.call(arguments),!1);return this.root._fns.get(t.name,t.inputPaths,t.fns,t.options)},_$Model_170.prototype.start=function(){var t=n(this,Array.prototype.slice.call(arguments),!0);return this.root._fns.start(t.name,t.path,t.inputPaths,t.fns,t.options)},_$Model_170.prototype.stop=function(t){var e=this.path(t);this._stop(e)},_$Model_170.prototype._stop=function(t){this.root._fns.stop(t)},_$Model_170.prototype.stopAll=function(t){var e=this._splitPath(t);this._stopAll(e)},_$Model_170.prototype._stopAll=function(t){var e=this.root._fns.fromMap;for(var n in e){var r=e[n].fromSegments;_$util_189.contains(t,r)&&this._stop(n)}},i.prototype.get=function(t,e,n,r){return n||(n=this.nameMap[t]||_$defaultFns_176[t]),new o(this.model,t,null,e,n,r).get()},i.prototype.start=function(t,e,n,r,i){r||(r=this.nameMap[t]||_$defaultFns_176[t]);var s=new o(this.model,t,e,n,r,i);return this.fromMap[e]=s,s._onInput()},i.prototype.stop=function(t){var e=this.fromMap[t];return delete this.fromMap[t],e},i.prototype.toJSON=function(){var t=[];for(var e in this.fromMap){var n=this.fromMap[e];if(n.name){var r=[n.from].concat(n.inputPaths);n.options&&r.push(n.options),r.push(n.name),t.push(r)}}return t},o.prototype.apply=function(t,e){for(var n=0,r=this.inputsSegments.length;n<r;n++){var i=this.model._get(this.inputsSegments[n]);e.push(this.copyInput?_$util_189.deepCopy(i):i)}return t.apply(this.model,e)},o.prototype.get=function(){return this.apply(this.getFn,[])},o.prototype.set=function(t,e){if(this.setFn){var n=this.apply(this.setFn,[t]);if(n){var r=this.inputsSegments,i=this.model.pass(e,!0);for(var o in n){t=this.copyOutput?_$util_189.deepCopy(n[o]):n[o];this._setValue(i,r[o],t)}}}},o.prototype.onInput=function(e){if(!this.async)return this._onInput(e);if(!this.eventPending){this.eventPending=!0;var n=this;t.nextTick(function(){n._onInput(e),n.eventPending=!1})}},o.prototype._onInput=function(t){var e=this.copyOutput?_$util_189.deepCopy(this.get()):this.get();return this._setValue(this.model.pass(t,!0),this.fromSegments,e),e},o.prototype.onOutput=function(t){var e=this.model._get(this.fromSegments);return this.set(e,t)},o.prototype._setValue=function(t,e,n){"diffDeep"===this.mode?t._setDiffDeep(e,n):"arrayDeep"===this.mode?t._setArrayDiffDeep(e,n):"array"===this.mode?t._setArrayDiff(e,n):t._setDiff(e,n)}}).call(this,_$browser_155);var _$filter_178={};function parseFilterArguments(t,e){var n,r=e.pop();t.isPath(e[e.length-1])||(n=e.pop());for(var i=t.path(e.shift()),o=e.length;o--;)e[o]=t.path(e[o]);return{path:i,inputPaths:e.length?e:null,options:n,fn:r}}function FromMap(){}function Filters(t){this.model=t,this.fromMap=new FromMap}function Filter(t,e,n,r,i,o){if(this.filters=t,this.model=t.model.pass({$filter:this}),this.path=e,this.segments=e.split("."),this.filterName=null,this.sortName=null,this.bundle=!0,this.filterFn=null,this.sortFn=null,this.inputPaths=i,this.inputsSegments=null,i){this.inputsSegments=[];for(var s=0;s<this.inputPaths.length;s++){var a=this.inputPaths[s].split(".");this.inputsSegments.push(a)}}this.options=o,this.skip=o&&o.skip,this.limit=o&&o.limit,n&&this.filter(n),r&&this.sort(r),this.idsSegments=null,this.from=null,this.fromSegments=null}_$Model_170.INITS.push(function(t){t.root._filters=new Filters(t),t.on("all",function(e,n){var r=n[n.length-1],i=t.root._filters.fromMap;for(var o in i){var s=i[o];r.$filter!==s&&((_$util_189.mayImpact(s.segments,e)||s.inputsSegments&&_$util_189.mayImpactAny(s.inputsSegments,e))&&s.update(r))}})}),_$Model_170.prototype.filter=function(){var t=parseFilterArguments(this,Array.prototype.slice.call(arguments));return this.root._filters.add(t.path,t.fn,null,t.inputPaths,t.options)},_$Model_170.prototype.sort=function(){var t=parseFilterArguments(this,Array.prototype.slice.call(arguments));return this.root._filters.add(t.path,null,t.fn||"asc",t.inputPaths,t.options)},_$Model_170.prototype.removeAllFilters=function(t){var e=this._splitPath(t);this._removeAllFilters(e)},_$Model_170.prototype._removeAllFilters=function(t){var e=this.root._filters.fromMap;for(var n in e)_$util_189.contains(t,e[n].fromSegments)&&e[n].destroy()},Filters.prototype.add=function(t,e,n,r,i){return new Filter(this,t,e,n,r,i)},Filters.prototype.toJSON=function(){var t=[];for(var e in this.fromMap){var n=this.fromMap[e];if(n.bundle){var r=[e,n.path,n.filterName,n.sortName,n.inputPaths];n.options&&r.push(n.options),t.push(r)}}return t},Filter.prototype.filter=function(t){if("function"==typeof t)return this.filterFn=t,this.bundle=!1,this;if("string"==typeof t&&(this.filterName=t,this.filterFn=this.model.root._namedFns[t]||_$defaultFns_176[t],!this.filterFn))throw new TypeError("Filter function not found: "+t);return this},Filter.prototype.sort=function(t){if(t||(t="asc"),"function"==typeof t)return this.sortFn=t,this.bundle=!1,this;if("string"==typeof t&&(this.sortName=t,this.sortFn=this.model.root._namedFns[t]||_$defaultFns_176[t],!this.sortFn))throw new TypeError("Sort function not found: "+t);return this},Filter.prototype._slice=function(t){if(null==this.skip&&null==this.limit)return t;var e,n=this.skip||0;return this.limit&&(e=n+this.limit),t.slice(n,e)},Filter.prototype.getInputs=function(){if(this.inputsSegments){for(var t=[],e=0,n=this.inputsSegments.length;e<n;e++){var r=this.model._get(this.inputsSegments[e]);t.push(r)}return t}},Filter.prototype.callFilter=function(t,e,n){var r=t[e];return n?this.filterFn.apply(this.model,[r,e,t].concat(n)):this.filterFn.call(this.model,r,e,t)},Filter.prototype.ids=function(){var t=this.model._get(this.segments),e=[];if(!t)return e;if(Array.isArray(t))throw new Error("model.filter is not currently supported on arrays");if(this.filterFn){var n=this.getInputs();for(var r in t)t.hasOwnProperty(r)&&this.callFilter(t,r,n)&&e.push(r)}else e=Object.keys(t);var i=this.sortFn;return i&&e.sort(function(e,n){return i(t[e],t[n])}),this._slice(e)},Filter.prototype.get=function(){var t=this.model._get(this.segments),e=[];if(Array.isArray(t))throw new Error("model.filter is not currently supported on arrays");if(this.filterFn){var n=this.getInputs();for(var r in t)t.hasOwnProperty(r)&&this.callFilter(t,r,n)&&e.push(t[r])}else for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);return this.sortFn&&e.sort(this.sortFn),this._slice(e)},Filter.prototype.update=function(t){var e=this.ids();this.model.pass(t,!0)._setArrayDiff(this.idsSegments,e)},Filter.prototype.ref=function(t){return t=this.model.path(t),this.from=t,this.fromSegments=t.split("."),this.filters.fromMap[t]=this,this.idsSegments=["$filters",t.replace(/\./g,"|")],this.update(),this.model.refList(t,this.path,this.idsSegments.join("."))},Filter.prototype.destroy=function(){delete this.filters.fromMap[this.from],this.model._removeRef(this.idsSegments),this.model._del(this.idsSegments)};var _$refList_184={};function addListener(t,e){t.on(e+"Immediate",function(n,r){var i=r[r.length-1],o=t._refLists.fromMap;for(var s in o){var a=o[s];i.$refList!==a&&a.onMutation(e,n,r)}})}function patchFromEvent(t,e,n,r){var i=r.fromSegments.length,o=e.length,s=n[n.length-1],a=r.model.pass(s,!0);if(o!==i)if(o<i)a._setArrayDiff(r.fromSegments,r.get());else{u=e[i];var c=a._get(r.fromSegments.concat(u)),l=r.toSegmentsByItem(c);if(o>i+1)throw new Error("Mutation on descendant of refList `from` should have been dereferenced: "+e.join("."));if("change"===t)return a._set(l,c),void updateIdForValue(a,r,u,c);if("insert"===t||"remove"===t||"move"===t)throw new Error("Array mutation on child of refList `from`should have been dereferenced: "+e.join("."))}else{if("insert"===t){var u=n[0],p=setNewToValues(a,r,y=n[1]);return void a._insert(r.idsSegments,u,p)}if("remove"===t){var u=n[0],h=n[1].length;p=a._remove(r.idsSegments,u,h);if(r.deleteRemoved)for(var f=0;f<p.length;f++){var d=r.itemById(p[f]);a._del(r.toSegmentsByItem(d))}return}if("move"===t){var _=n[0],m=n[1];h=n[2];return void a._move(r.idsSegments,_,m,h)}var y;if(!(y="change"===t?n[0]:a._get(r.fromSegments)))return void a._set(r.idsSegments,[]);p=setNewToValues(a,r,y);a._set(r.idsSegments,p)}}function setNewToValues(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=e.idByItem(o);void 0===s&&"object"==typeof o&&(s=o.id=t.id());var a=e.toSegmentsByItem(o);if(void 0===s||void 0===a)throw new Error("Unable to add item to refList: "+o);t._get(a)!==o&&t._set(a,o),r.push(s)}return r}function updateIdForValue(t,e,n,r){var i=e.idByItem(r),o=e.idsSegments.concat(n);t._set(o,i)}function patchToEvent(t,e,n,r){var i=r.toSegments.length,o=e.length,s=n[n.length-1],a=r.model.pass(s,!0);if(o===i){if("insert"===t){for(var c=n[1],l=0;l<c.length;l++){var u=c[l];if(v=r.indicesByItem(u))for(var p=0;p<v.length;p++){var h=r.fromSegments.concat(v[p]);a._set(h,u)}}return}if("remove"===t){for(var f=n[0],d=(l=f,f+(c=n[1]).length);l<d;l++){if(v=r.indicesByItem(c[l])){p=0;for(var _=v.length;p<_;p++){h=r.fromSegments.concat(v[p]);a._set(h,void 0)}}}return}if("move"===t)return}if(o<=i)a._setArrayDiff(r.fromSegments,r.get());else if(o>i+1){u=a._get(e.slice(0,i+1));if(!(v=r.indicesByItem(u)))return;var m=e.slice(i+1);for(l=0;l<v.length;l++){var y=v[l],g=r.fromSegments.concat(y,m);g=a._dereference(g,null,r),(n=n.slice())[n.length-1]=a._pass,a.emit(t,g,n)}}else if("change"!==t&&"load"!==t&&"unload"!==t){var v;u=a._get(e.slice(0,i+1));if((v=r.indicesByItem(u))&&("insert"===t||"remove"===t||"move"===t))for(l=0;l<v.length;l++){g=r.fromSegments.concat(v[l]);g=a._dereference(g,null,r),(n=n.slice())[n.length-1]=a._pass,a.emit(t,g,n)}}else{var b;"change"===t?(u=n[0],b=n[1]):"load"===t?(u=n[0],b=void 0):"unload"===t&&(u=void 0,b=n[0]);var E=r.indicesByItem(u),S=r.indicesByItem(b);if(!E&&!S)return;if(S&&!equivalentArrays(S,E))for(var l=0;l<S.length;l++){h=r.fromSegments.concat(S[l]);a._set(h,void 0)}if(E)for(l=0;l<E.length;l++){h=r.fromSegments.concat(E[l]);a._set(h,u)}}}function equivalentArrays(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function patchIdsEvent(t,e,n,r){var i=r.idsSegments.length,o=e.length,s=n[n.length-1],a=r.model.pass(s,!0);if(o===i){if("insert"===t){for(var c=n[0],l=n[1],u=[],p=0;p<l.length;p++){var h=r.itemById(l[p]);u.push(h)}return void a._insert(r.fromSegments,c,u)}if("remove"===t){c=n[0];var f=n[1].length;return void a._remove(r.fromSegments,c,f)}if("move"===t){var d=n[0],_=n[1];f=n[2];return void a._move(r.fromSegments,d,_,f)}}if(o<=i)a._setArrayDiff(r.fromSegments,r.get());else{c=e[i];var m=r.idByIndex(c),y=r.itemById(m),g=r.fromSegments.concat(c);a._get(g)!==y&&a._set(g,y)}}function RefList(t,e,n,r,i){this.model=t&&t.pass({$refList:this}),this.from=e,this.to=n,this.ids=r,this.fromSegments=e&&e.split("."),this.toSegments=n&&n.split("."),this.idsSegments=r&&r.split("."),this.options=i,this.deleteRemoved=i&&i.deleteRemoved}function __FromMap_184(){}function RefLists(){this.fromMap=new __FromMap_184}_$Model_170.INITS.push(function(t){var e=t.root;for(var n in e._refLists=new RefLists,_$Model_170.MUTATOR_EVENTS)addListener(e,n)}),_$Model_170.prototype.refList=function(){var t,e,n,r;2===arguments.length?(e=arguments[0],n=arguments[1]):3===arguments.length?this.isPath(arguments[2])?(t=arguments[0],e=arguments[1],n=arguments[2]):(e=arguments[0],n=arguments[1],r=arguments[2]):(t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3]);var i,o=this.path(t);if(Array.isArray(e)){i=[];for(var s=0;s<e.length;s++)i.push(this.path(e[s]))}else i=this.path(e);var a=this.path(n),c=new RefList(this.root,o,i,a,r);return this.root._refLists.remove(o),c.model._setArrayDiff(c.fromSegments,c.get()),this.root._refLists.add(c),this.scope(o)},RefList.prototype.get=function(){var t=this.model._get(this.idsSegments);if(!t)return[];for(var e=this.model._get(this.toSegments),n=[],r=0;r<t.length;r++){var i=t[r];n.push(e&&e[i])}return n},RefList.prototype.dereference=function(t,e){var n=t.slice(e+1),r=this.idByIndex(n[0]);return null==r?[]:(n[0]=r,this.toSegments.concat(n))},RefList.prototype.toSegmentsByItem=function(t){var e=this.idByItem(t);if(void 0!==e)return this.toSegments.concat(e)},RefList.prototype.idByItem=function(t){if(t&&t.id)return t.id;var e=this.model._get(this.toSegments);for(var n in e)if(t===e[n])return n},RefList.prototype.indicesByItem=function(t){var e=this.idByItem(t),n=this.model._get(this.idsSegments);if(n){for(var r,i=-1;-1!==(i=n.indexOf(e,i+1));)r?r.push(i):r=[i];return r}},RefList.prototype.itemById=function(t){return this.model._get(this.toSegments.concat(t))},RefList.prototype.idByIndex=function(t){return this.model._get(this.idsSegments.concat(t))},RefList.prototype.onMutation=function(t,e,n){_$util_189.mayImpact(this.toSegments,e)?patchToEvent(t,e,n,this):_$util_189.mayImpact(this.idsSegments,e)?patchIdsEvent(t,e,n,this):_$util_189.mayImpact(this.fromSegments,e)&&patchFromEvent(t,e,n,this)},RefLists.prototype.add=function(t){this.fromMap[t.from]=t},RefLists.prototype.remove=function(t){var e=this.fromMap[t];return delete this.fromMap[t],e},RefLists.prototype.toJSON=function(){var t=[];for(var e in this.fromMap){var n=this.fromMap[e];t.push([n.from,n.to,n.ids,n.options])}return t};var _$ref_183={};function addIndexListeners(t){function e(e,n){var r=t._refs.fromMap;for(var i in r){var o=r[i];if(o.updateIndices&&_$util_189.contains(e,o.toSegments)&&o.toSegments.length>e.length){var s=+o.toSegments[e.length],a=n(s);s!==a&&(t._refs.remove(i),o.toSegments[e.length]=""+a,o.to=o.toSegments.join("."),t._refs.add(o))}}}t.on("insertImmediate",function(t,n){var r=n[0],i=n[1].length;e(t,function(t){return r<=t?t+i:t})}),t.on("removeImmediate",function(t,n){var r=n[0],i=n[1].length;e(t,function(t){return r<=t?t-i:t})}),t.on("moveImmediate",function(t,n){var r=n[0],i=n[1],o=n[2];e(t,function(t){return r<=t&&t<r+o?t+i-r:(r<=t&&(t-=o),i<=t&&(t+=o),t)})})}function refChange(t,e,n,r){var i=n[0];if(void 0===i){var o=r.slice(),s=o.pop(),a=t._get(o);if(!(a&&s in a))return void t._del(e)}t._set(e,i)}function refLoad(t,e,n){var r=n[0];t._set(e,r)}function refUnload(t,e){t._del(e)}function refInsert(t,e,n){var r=n[0],i=n[1];t._insert(e,r,i)}function refRemove(t,e,n){var r=n[0],i=n[1].length;t._remove(e,r,i)}function refMove(t,e,n){var r=n[0],i=n[1],o=n[2];t._move(e,r,i,o)}function __addListener_183(t,e,n){t.on(e+"Immediate",function(r,i){for(var o,s=i[i.length-1],a=t._refs.toMap,c=0,l=r.length;c<l;c++){o=o?o+"."+r[c]:r[c];var u=a[o];if(u){u=u.slice();for(var p=r.slice(c+1),h=0,f=u.length;h<f;h++){var d=u[h],_=d.fromSegments.concat(p);if(t._get(_)===t._get(r))t.emit(e,_,i);else{var m=d.model.pass(s,!0);m._dereference=noopDereference,n(m,_,i,r)}}}}var y=t._refs.parentToMap;if(!(u=y[o]))return;for(var h=0,f=u.length;h<f;h++){var d=u[h],g=t._get(d.toSegments),v=t._get(d.fromSegments);if(v!==g){var m=d.model.pass(s,!0);m._dereference=noopDereference,m._set(d.fromSegments,g)}}})}function noopDereference(t){return t}function Ref(t,e,n,r){this.model=t&&t.pass({$ref:this}),this.from=e,this.to=n,this.fromSegments=e.split("."),this.toSegments=n.split("."),this.parentTos=[];for(var i=1,o=this.toSegments.length;i<o;i++){var s=this.toSegments.slice(0,i).join(".");this.parentTos.push(s)}this.updateIndices=r&&r.updateIndices}function __FromMap_183(){}function ToMap(){}function Refs(){this.fromMap=new __FromMap_183,this.toMap=new ToMap,this.parentToMap=new ToMap}function listMapAdd(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function listMapRemove(t,e,n){var r=t[e];if(r){var i=r.indexOf(n);-1!==i&&(r.splice(i,1),r.length||delete t[e])}}_$Model_170.INITS.push(function(t){var e=t.root;e._refs=new Refs,addIndexListeners(e),__addListener_183(e,"change",refChange),__addListener_183(e,"load",refLoad),__addListener_183(e,"unload",refUnload),__addListener_183(e,"insert",refInsert),__addListener_183(e,"remove",refRemove),__addListener_183(e,"move",refMove)}),_$Model_170.prototype._canRefTo=function(t){return this.isPath(t)||t&&"function"==typeof t.ref},_$Model_170.prototype.ref=function(){var t,e,n;1===arguments.length?e=arguments[0]:2===arguments.length?this._canRefTo(arguments[1])?(t=arguments[0],e=arguments[1]):(e=arguments[0],n=arguments[1]):(t=arguments[0],e=arguments[1],n=arguments[2]);var r=this.path(t),i=this.path(e);if(!i)return e.ref(r);var o=new Ref(this.root,r,i,n);if(o.fromSegments.length<2)throw new Error("ref must be performed under a collection and document id. Invalid path: "+r);this.root._refs.remove(r),this.root._refLists.remove(r);var s=this.get(e);return o.model._set(o.fromSegments,s),this.root._refs.add(o),this.scope(r)},_$Model_170.prototype.removeRef=function(t){var e=this._splitPath(t),n=e.join(".");this._removeRef(e,n)},_$Model_170.prototype._removeRef=function(t,e){this.root._refs.remove(e),this.root._refLists.remove(e),this._del(t)},_$Model_170.prototype.removeAllRefs=function(t){var e=this._splitPath(t);this._removeAllRefs(e)},_$Model_170.prototype._removeAllRefs=function(t){this._removeMapRefs(t,this.root._refs.fromMap),this._removeMapRefs(t,this.root._refLists.fromMap)},_$Model_170.prototype._removeMapRefs=function(t,e){for(var n in e){var r=e[n].fromSegments;_$util_189.contains(t,r)&&this._removeRef(r,n)}},_$Model_170.prototype.dereference=function(t){var e=this._splitPath(t);return this._dereference(e).join(".")},_$Model_170.prototype._dereference=function(t,e,n){if(0===t.length)return t;var r,i=this.root._refs.fromMap,o=this.root._refLists.fromMap;do{var s="";r=!1;for(var a=0,c=t.length;a<c;a++){var l=i[s=s?s+"."+t[a]:t[a]];if(l){var u=t.slice(a+1);t=l.toSegments.concat(u),r=!0;break}var p=o[s];if(p&&p!==n){if(!(a+2<c||e&&a+1<c))continue;t=p.dereference(t,a),r=!0;break}}}while(r);return 0===t.length?["$null"]:t},Refs.prototype.add=function(t){this.fromMap[t.from]=t,listMapAdd(this.toMap,t.to,t);for(var e=0,n=t.parentTos.length;e<n;e++)listMapAdd(this.parentToMap,t.parentTos[e],t)},Refs.prototype.remove=function(t){var e=this.fromMap[t];if(e){delete this.fromMap[t],listMapRemove(this.toMap,e.to,e);for(var n=0,r=e.parentTos.length;n<r;n++)listMapRemove(this.parentToMap,e.parentTos[n],e);return e}},Refs.prototype.toJSON=function(){var t=[];for(var e in this.fromMap){var n=this.fromMap[e];t.push([n.from,n.to])}return t};var _$Model_180={exports:{}};_$Model_180.exports=_$Model_170,_$util_189.serverRequire(_$Model_180,"./bundle"),_$util_189.serverRequire(_$Model_180,"./connection.server"),_$Model_180=_$Model_180.exports;var _$Racer_188={exports:{}},__EventEmitter_188=_$EventEmitter_148.EventEmitter;function Racer(){__EventEmitter_188.call(this)}_$Racer_188.exports=Racer,_$util_189.mergeInto(Racer.prototype,__EventEmitter_188.prototype),Racer.prototype.Model=_$Model_180,Racer.prototype.util=_$util_189,Racer.prototype.use=_$util_189.use,Racer.prototype.serverUse=_$util_189.serverUse,Racer.prototype.createModel=function(t){var e=new _$Model_180;return t&&(e.createConnection(t),e.unbundle(t)),e},_$util_189.serverRequire(_$Racer_188,"./Racer.server"),_$Racer_188=_$Racer_188.exports;var _$lib_racer=new _$Racer_188,_$bcsocketUncompressed_127={};!function(){var f,aa=aa||{},l=this;function ba(t){t=t.split(".");for(var e,n=l;e=t.shift();){if(null==n[e])return null;n=n[e]}return n}function ca(){}function da(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function m(t){return"array"==da(t)}function ea(t){var e=da(t);return"array"==e||"object"==e&&"number"==typeof t.length}function n(t){return"string"==typeof t}function fa(t){return"function"==da(t)}var ga="closure_uid_"+(1e9*Math.random()>>>0),ha=0;function ia(t,e,n){return t.call.apply(t.bind,arguments)}function ja(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function p(t,e,n){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja).apply(null,arguments)}var q=Date.now||function(){return+new Date};function s(t,e){function n(){}n.prototype=e.prototype,t.pa=e.prototype,t.prototype=new n,t.Hc=function(t,n,r){var i=Array.prototype.slice.call(arguments,2);return e.prototype[n].apply(t,i)}}function ka(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function la(t){return ma.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(na,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(oa,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(pa,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(qa,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ra,"&#39;")),t):t}var na=/&/g,oa=/</g,pa=/>/g,qa=/"/g,ra=/'/g,ma=/[&<>"']/,x,ua,va,wa,ya;function sa(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)}function ta(t,e){return t<e?-1:t>e?1:0}function xa(){return l.navigator?l.navigator.userAgent:null}if(wa=va=ua=x=!1,ya=xa()){var za=l.navigator;x=0==ya.lastIndexOf("Opera",0),ua=!x&&(-1!=ya.indexOf("MSIE")||-1!=ya.indexOf("Trident")),va=!x&&-1!=ya.indexOf("WebKit"),wa=!x&&!va&&!ua&&"Gecko"==za.product}var Aa=x,y=ua,Ba=wa,z=va,Da;function Ca(){var t=l.document;return t?t.documentMode:void 0}t:{var Ea="",Fa;if(Aa&&l.opera)var Ga=l.opera.version,Ea="function"==typeof Ga?Ga():Ga;else if(Ba?Fa=/rv\:([^\);]+)(\)|;)/:y?Fa=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:z&&(Fa=/WebKit\/(\S+)/),Fa)var Ha=Fa.exec(xa()),Ea=Ha?Ha[1]:"";if(y){var Ia=Ca();if(Ia>parseFloat(Ea)){Da=String(Ia);break t}}Da=Ea}var Ja={};function A(t){var e;if(!(e=Ja[t])){e=0;for(var n=String(Da).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),r=String(t).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"",c=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var u=c.exec(s)||["","",""],p=l.exec(a)||["","",""];if(0==u[0].length&&0==p[0].length)break;e=ta(0==u[1].length?0:parseInt(u[1],10),0==p[1].length?0:parseInt(p[1],10))||ta(0==u[2].length,0==p[2].length)||ta(u[2],p[2])}while(0==e)}e=Ja[t]=0<=e}return e}var La=l.document,Ma=La&&y?Ca()||("CSS1Compat"==La.compatMode?parseInt(Da,10):5):void 0;function Na(t){Error.captureStackTrace?Error.captureStackTrace(this,Na):this.stack=Error().stack||"",t&&(this.message=String(t))}function Oa(t,e){e.unshift(t),Na.call(this,ka.apply(null,e)),e.shift()}function Pa(t,e){throw new Oa("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}s(Na,Error),Na.prototype.name="CustomError",s(Oa,Na),Oa.prototype.name="AssertionError";var Qa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Ra(t){if(Sa){Sa=!1;var e=l.location;if(e){var n=e.href;if(n&&(n=(n=Ra(n)[3]||null)&&decodeURIComponent(n))&&n!=e.hostname)throw Sa=!0,Error()}}return t.match(Qa)}var Sa=z;function Ta(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Ua(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}var Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wa(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Va.length;o++)n=Va[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}var B=Array.prototype,Xa=B.indexOf?function(t,e,n){return B.indexOf.call(t,e,n)}:function(t,e,r){if(r=null==r?0:0>r?Math.max(0,t.length+r):r,n(t))return n(e)&&1==e.length?t.indexOf(e,r):-1;for(;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},Ya=B.forEach?function(t,e,n){B.forEach.call(t,e,n)}:function(t,e,r){for(var i=t.length,o=n(t)?t.split(""):t,s=0;s<i;s++)s in o&&e.call(r,o[s],s,t)};function Za(t){var e;t:{e=$a;for(var r=t.length,i=n(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&e.call(void 0,i[o],o,t)){e=o;break t}e=-1}return 0>e?null:n(t)?t.charAt(e):t[e]}function ab(t){return B.concat.apply(B,arguments)}function bb(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function cb(t,e){this.O={},this.j=[],this.o=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){t instanceof cb?(n=t.ca(),r=t.N()):(n=Ua(t),r=Ta(t));for(var i=0;i<n.length;i++)this.set(n[i],r[i])}}function db(t){if(t.o!=t.j.length){for(var e=0,n=0;e<t.j.length;){var r=t.j[e];C(t.O,r)&&(t.j[n++]=r),e++}t.j.length=n}if(t.o!=t.j.length){var i={};for(n=e=0;e<t.j.length;)C(i,r=t.j[e])||(t.j[n++]=r,i[r]=1),e++;t.j.length=n}}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function eb(t){if("function"==typeof t.N)return t.N();if(n(t))return t.split("");if(ea(t)){for(var e=[],r=t.length,i=0;i<r;i++)e.push(t[i]);return e}return Ta(t)}function D(t,e,r){if("function"==typeof t.forEach)t.forEach(e,r);else if(ea(t)||n(t))Ya(t,e,r);else{var i;if("function"==typeof t.ca)i=t.ca();else if("function"!=typeof t.N)if(ea(t)||n(t)){i=[];for(var o=t.length,s=0;s<o;s++)i.push(s)}else i=Ua(t);else i=void 0;s=(o=eb(t)).length;for(var a=0;a<s;a++)e.call(r,o[a],i&&i[a],t)}}function E(t,e){var n;if(t instanceof E)this.D=void 0!==e?e:t.D,fb(this,t.oa),n=t.eb,F(this),this.eb=n,gb(this,t.ja),hb(this,t.Ca),ib(this,t.I),jb(this,t.R.n()),n=t.Na,F(this),this.Na=n;else if(t&&(n=Ra(String(t)))){this.D=!!e,fb(this,n[1]||"",!0);var r=n[2]||"";F(this),this.eb=r?decodeURIComponent(r):"",gb(this,n[3]||"",!0),hb(this,n[4]),ib(this,n[5]||"",!0),jb(this,n[6]||"",!0),n=n[7]||"",F(this),this.Na=n?decodeURIComponent(n):""}else this.D=!!e,this.R=new kb(null,0,this.D)}function fb(t,e,n){F(t),t.oa=n?e?decodeURIComponent(e):"":e,t.oa&&(t.oa=t.oa.replace(/:$/,""))}function gb(t,e,n){F(t),t.ja=n?e?decodeURIComponent(e):"":e}function hb(t,e){if(F(t),e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.Ca=e}else t.Ca=null}function ib(t,e,n){F(t),t.I=n?e?decodeURIComponent(e):"":e}function jb(t,e,n){F(t),e instanceof kb?(t.R=e,t.R.ub(t.D)):(n||(e=lb(e,qb)),t.R=new kb(e,0,t.D))}function G(t,e,n){F(t),t.R.set(e,n)}function rb(t,e,n){F(t),m(n)||(n=[String(n)]),sb(t.R,e,n)}function H(t){return F(t),G(t,"zx",sa()),t}function F(t){if(t.oc)throw Error("Tried to modify a read-only Uri")}function tb(t){return t instanceof E?t.n():new E(t,void 0)}function ub(t,e,n,r){var i=new E(null,void 0);return t&&fb(i,t),e&&gb(i,e),n&&hb(i,n),r&&ib(i,r),i}function lb(t,e){return n(t)?encodeURI(t).replace(e,vb):null}function vb(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}f=cb.prototype,f.N=function(){db(this);for(var t=[],e=0;e<this.j.length;e++)t.push(this.O[this.j[e]]);return t},f.ca=function(){return db(this),this.j.concat()},f.wa=function(t){return C(this.O,t)},f.remove=function(t){return!!C(this.O,t)&&(delete this.O[t],this.o--,this.j.length>2*this.o&&db(this),!0)},f.get=function(t,e){return C(this.O,t)?this.O[t]:e},f.set=function(t,e){C(this.O,t)||(this.o++,this.j.push(t)),this.O[t]=e},f.n=function(){return new cb(this)},f=E.prototype,f.oa="",f.eb="",f.ja="",f.Ca=null,f.I="",f.Na="",f.oc=!1,f.D=!1,f.toString=function(){var t=[],e=this.oa;if(e&&t.push(lb(e,mb),":"),e=this.ja){t.push("//");var n=this.eb;n&&t.push(lb(n,mb),"@"),t.push(encodeURIComponent(String(e))),null!=(e=this.Ca)&&t.push(":",String(e))}return(e=this.I)&&(this.ja&&"/"!=e.charAt(0)&&t.push("/"),t.push(lb(e,"/"==e.charAt(0)?nb:ob))),(e=this.R.toString())&&t.push("?",e),(e=this.Na)&&t.push("#",lb(e,pb)),t.join("")},f.n=function(){return new E(this)},f.ub=function(t){return this.D=t,this.R&&this.R.ub(t),this};var mb=/[#\/\?@]/g,ob=/[\#\?:]/g,nb=/[\#\?]/g,qb=/[\#\?@]/g,pb=/#/g;function kb(t,e,n){this.C=t||null,this.D=!!n}function I(t){if(!t.h&&(t.h=new cb,t.o=0,t.C))for(var e=t.C.split("&"),n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null,o=null;0<=r?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],i=J(t,i=decodeURIComponent(i.replace(/\+/g," "))),t.add(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}function sb(t,e,n){t.remove(e),0<n.length&&(t.C=null,t.h.set(J(t,e),bb(n)),t.o+=n.length)}function J(t,e){var n=String(e);return t.D&&(n=n.toLowerCase()),n}function wb(a){if(a=String(a),!/^\s*$/.test(a)&&/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function xb(a){return eval("("+a+")")}function yb(t){var e=[];return zb(new Ab,t,e),e.join("")}function Ab(){this.Ya=void 0}function zb(t,e,n){switch(typeof e){case"string":Bb(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?e:"null");break;case"boolean":n.push(e);break;case"undefined":n.push("null");break;case"object":if(null==e){n.push("null");break}if(m(e)){var r=e.length;n.push("[");for(var i="",o=0;o<r;o++)n.push(i),i=e[o],zb(t,t.Ya?t.Ya.call(e,String(o),i):i,n),i=",";n.push("]");break}for(o in n.push("{"),r="",e)Object.prototype.hasOwnProperty.call(e,o)&&("function"!=typeof(i=e[o])&&(n.push(r),Bb(o,n),n.push(":"),zb(t,t.Ya?t.Ya.call(e,o,i):i,n),r=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof e)}}f=kb.prototype,f.h=null,f.o=null,f.add=function(t,e){I(this),this.C=null,t=J(this,t);var n=this.h.get(t);return n||this.h.set(t,n=[]),n.push(e),this.o++,this},f.remove=function(t){return I(this),t=J(this,t),!!this.h.wa(t)&&(this.C=null,this.o-=this.h.get(t).length,this.h.remove(t))},f.wa=function(t){return I(this),t=J(this,t),this.h.wa(t)},f.ca=function(){I(this);for(var t=this.h.N(),e=this.h.ca(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},f.N=function(t){I(this);var e=[];if(n(t))this.wa(t)&&(e=ab(e,this.h.get(J(this,t))));else{t=this.h.N();for(var r=0;r<t.length;r++)e=ab(e,t[r])}return e},f.set=function(t,e){return I(this),this.C=null,t=J(this,t),this.wa(t)&&(this.o-=this.h.get(t).length),this.h.set(t,[e]),this.o++,this},f.get=function(t,e){var n=t?this.N(t):[];return 0<n.length?String(n[0]):e},f.toString=function(){if(this.C)return this.C;if(!this.h)return"";for(var t=[],e=this.h.ca(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.N(r),0);o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.C=t.join("&")},f.n=function(){var t=new kb;return t.C=this.C,this.h&&(t.h=this.h.n(),t.o=this.o),t},f.ub=function(t){t&&!this.D&&(I(this),this.C=null,D(this.h,function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),sb(this,n,t))},this)),this.D=t};var Cb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Db=/\uffff/.test("ï¿¿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Bb(t,e){e.push('"',t.replace(Db,function(t){if(t in Cb)return Cb[t];var e=t.charCodeAt(0),n="\\u";return 16>e?n+="000":256>e?n+="00":4096>e&&(n+="0"),Cb[t]=n+e.toString(16)}),'"')}function Eb(t){return Fb(t||arguments.callee.caller,[])}function Fb(t,e){var n=[];if(0<=Xa(e,t))n.push("[...circular reference...]");else if(t&&50>e.length){n.push(Gb(t)+"(");for(var r=t.arguments,i=0;i<r.length;i++){var o;switch(0<i&&n.push(", "),typeof(o=r[i])){case"object":o=o?"object":"null";break;case"string":break;case"number":o=String(o);break;case"boolean":o=o?"true":"false";break;case"function":o=(o=Gb(o))?o:"[fn]";break;default:o=typeof o}40<o.length&&(o=o.substr(0,40)+"..."),n.push(o)}e.push(t),n.push(")\n");try{n.push(Fb(t.caller,e))}catch(t){n.push("[exception trying to get caller]\n")}}else t?n.push("[...long stack...]"):n.push("[end]");return n.join("")}function Gb(t){if(Hb[t])return Hb[t];if(t=String(t),!Hb[t]){var e=/function ([^\(]+)/.exec(t);Hb[t]=e?e[1]:"[Anonymous]"}return Hb[t]}var Hb={};function Ib(t,e,n,r,i){this.reset(t,e,n,r,i)}Ib.prototype.Fb=null,Ib.prototype.Eb=null;var Jb=0;function L(t){this.rc=t}function Kb(t,e){this.name=t,this.value=e}Ib.prototype.reset=function(t,e,n,r,i){"number"==typeof i||Jb++,r||q(),this.Aa=t,this.qc=e,delete this.Fb,delete this.Eb},Ib.prototype.$b=function(t){this.Aa=t},L.prototype.Sa=null,L.prototype.Aa=null,L.prototype.jb=null,L.prototype.Jb=null,Kb.prototype.toString=function(){return this.name};var Lb=new Kb("SEVERE",1e3),Mb=new Kb("WARNING",900),Nb=new Kb("INFO",800),Ob=new Kb("CONFIG",700),Pb=new Kb("FINE",500);function Qb(t){return t.Aa?t.Aa:t.Sa?Qb(t.Sa):(Pa("Root logger has no level set."),null)}f=L.prototype,f.getParent=function(){return this.Sa},f.$b=function(t){this.Aa=t},f.log=function(t,e,n){if(t.value>=Qb(this).value)for(fa(e)&&(e=e()),e="log:"+(t=this.mc(t,e,n)).qc,l.console&&(l.console.timeStamp?l.console.timeStamp(e):l.console.markTimeline&&l.console.markTimeline(e)),l.msWriteProfilerMark&&l.msWriteProfilerMark(e),e=this;e;){var r=t;if((n=e).Jb)for(var i=0,o=void 0;o=n.Jb[i];i++)o(r);e=e.getParent()}},f.mc=function(t,e,r){var i=new Ib(t,String(e),this.rc);if(r){var o;i.Fb=r;var s=arguments.callee.caller;try{var a,c=ba("window.location.href");if(n(r))a={message:r,name:"Unknown error",lineNumber:"Not available",fileName:c,stack:"Not available"};else{var u,p,h=!1;try{u=r.lineNumber||r.Ic||"Not available"}catch(t){u="Not available",h=!0}try{p=r.fileName||r.filename||r.sourceURL||l.$googDebugFname||c}catch(t){p="Not available",h=!0}a=!h&&r.lineNumber&&r.fileName&&r.stack&&r.message&&r.name?r:{message:r.message||"Not available",name:r.name||"UnknownError",lineNumber:u,fileName:p,stack:r.stack||"Not available"}}o="Message: "+la(a.message)+'\nUrl: <a href="view-source:'+a.fileName+'" target="_new">'+a.fileName+"</a>\nLine: "+a.lineNumber+"\n\nBrowser stack:\n"+la(a.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+la(Eb(s)+"-> ")}catch(t){o="Exception trying to expose exception! You win, we lose. "+t}i.Eb=o}return i},f.J=function(t,e){this.log(Lb,t,e)},f.Z=function(t,e){this.log(Mb,t,e)},f.info=function(t,e){this.log(Nb,t,e)};var Rb={},Sb=null;function Tb(t){var e;if(Sb||(Sb=new L(""),Rb[""]=Sb,Sb.$b(Ob)),!(e=Rb[t])){e=new L(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Tb(t.substr(0,n))).jb||(n.jb={}),n.jb[r]=e,e.Sa=n,Rb[t]=e}return e}function M(t,e){t&&t.log(Pb,e,void 0)}function N(){this.r=Tb("goog.net.BrowserChannel")}function Ub(t,e,n,r){t.info("XMLHTTP TEXT ("+e+"): "+Vb(t,n)+(r?" "+r:""))}function Wb(t,e,n){t.J((n||"Exception")+e)}function Vb(t,e){if(!e||e==Xb)return e;try{var n=xb(e);if(n)for(var r=0;r<n.length;r++)if(m(n[r])){var i=n[r];if(!(2>i.length)){var o=i[1];if(m(o)&&!(1>o.length)){var s=o[0];if("noop"!=s&&"stop"!=s)for(var a=1;a<o.length;a++)o[a]=""}}}return yb(n)}catch(n){return t.debug("Exception parsing expected JS array - probably was not JS"),e}}function Yb(t,e){this.P=e?xb:wb}function O(){0!=Zb&&($b[this[ga]||(this[ga]=++ha)]=this)}N.prototype.debug=function(t){this.info(t)},N.prototype.info=function(t){var e=this.r;e&&e.info(t,void 0)},N.prototype.Z=function(t){var e=this.r;e&&e.Z(t,void 0)},N.prototype.J=function(t){var e=this.r;e&&e.J(t,void 0)},Yb.prototype.parse=function(t){return this.P(t)};var Zb=0,$b={};O.prototype.mb=!1,O.prototype.Ja=function(){if(!this.mb&&(this.mb=!0,this.u(),0!=Zb)){var t=this[ga]||(this[ga]=++ha);delete $b[t]}},O.prototype.u=function(){if(this.Pb)for(;this.Pb.length;)this.Pb.shift()()};var ac="closure_listenable_"+(1e6*Math.random()|0);function bc(t){try{return!(!t||!t[ac])}catch(t){return!1}}var cc=0;function dc(t,e,n,r,i){this.fa=t,this.Ua=null,this.src=e,this.type=n,this.capture=!!r,this.Oa=i,this.key=++cc,this.na=this.Ia=!1}function ec(t){t.na=!0,t.fa=null,t.Ua=null,t.src=null,t.Oa=null}function P(t){this.src=t,this.s={},this.Ga=0}function gc(t,e){var n=e.type;if(!(n in t.s))return!1;var r,i=t.s[n],o=Xa(i,e);return(r=0<=o)&&B.splice.call(i,o,1),r&&(ec(e),0==t.s[n].length&&(delete t.s[n],t.Ga--)),r}function fc(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.na&&o.fa==e&&o.capture==!!n&&o.Oa==r)return i}return-1}P.prototype.add=function(t,e,n,r,i){var o=this.s[t];o||(o=this.s[t]=[],this.Ga++);var s=fc(o,e,r,i);return-1<s?(t=o[s],n||(t.Ia=!1)):((t=new dc(e,this.src,t,!!r,i)).Ia=n,o.push(t)),t},P.prototype.remove=function(t,e,n,r){if(!(t in this.s))return!1;var i=this.s[t];return-1<(e=fc(i,e,n,r))&&(ec(i[e]),B.splice.call(i,e,1),0==i.length&&(delete this.s[t],this.Ga--),!0)},P.prototype.Xa=function(t){var e,n=0;for(e in this.s)if(!t||e==t){for(var r=this.s[e],i=0;i<r.length;i++)++n,ec(r[i]);delete this.s[e],this.Ga--}return n},P.prototype.ya=function(t,e,n,r){var i=-1;return(t=this.s[t])&&(i=fc(t,e,n,r)),-1<i?t[i]:null};var hc=!y||y&&9<=Ma,ic=y&&!A("9");function Q(t,e){this.type=t,this.currentTarget=this.target=e}function jc(t){return jc[" "](t),t}function kc(t,e){if(Q.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.Db=this.state=null,t){var n=this.type=t.type;this.target=t.target||t.srcElement,this.currentTarget=e;var r=t.relatedTarget;if(r){if(Ba){var i;t:{try{jc(r.nodeName),i=!0;break t}catch(t){}i=!1}i||(r=null)}}else"mouseover"==n?r=t.fromElement:"mouseout"==n&&(r=t.toElement);this.relatedTarget=r,this.offsetX=z||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=z||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0,this.button=t.button,this.keyCode=t.keyCode||0,this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.state=t.state,this.Db=t,t.defaultPrevented&&this.preventDefault(),delete this.ga}}!z||A("528"),Ba&&A("1.9b")||y&&A("8")||Aa&&A("9.5")||z&&A("528"),Ba&&!A("8")||y&&A("9"),f=Q.prototype,f.u=function(){},f.Ja=function(){},f.ga=!1,f.defaultPrevented=!1,f.Yb=!0,f.preventDefault=function(){this.defaultPrevented=!0,this.Yb=!1},jc[" "]=ca,s(kc,Q),kc.prototype.preventDefault=function(){kc.pa.preventDefault.call(this);var t=this.Db;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ic)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},kc.prototype.u=function(){};var lc="closure_lm_"+(1e6*Math.random()|0),mc={},nc=0;function oc(t,e,n,r,i){if(m(e)){for(var o=0;o<e.length;o++)oc(t,e[o],n,r,i);return null}if(n=pc(n),bc(t))t=t.Ra(e,n,r,i);else{if(!e)throw Error("Invalid event type");o=!!r;var s=qc(t);s||(t[lc]=s=new P(t)),(n=s.add(e,n,!1,r,i)).Ua||(r=rc(),n.Ua=r,r.src=t,r.fa=n,t.addEventListener?t.addEventListener(e,r,o):t.attachEvent(e in mc?mc[e]:mc[e]="on"+e,r),nc++),t=n}return t}function rc(){var t=sc,e=hc?function(n){return t.call(e.src,e.fa,n)}:function(n){if(!(n=t.call(e.src,e.fa,n)))return n};return e}function tc(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)tc(t,e[o],n,r,i);else n=pc(n),bc(t)?t.vb(e,n,r,i):t&&(t=qc(t))&&(e=t.ya(e,n,!!r,i))&&uc(e)}function uc(t){if("number"==typeof t||!t||t.na)return!1;var e=t.src;if(bc(e))return gc(e.W,t);var n=t.type,r=t.Ua;return e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent&&e.detachEvent(n in mc?mc[n]:mc[n]="on"+n,r),nc--,(n=qc(e))?(gc(n,t),0==n.Ga&&(n.src=null,e[lc]=null)):ec(t),!0}function vc(t,e,n,r){var i=1;if((t=qc(t))&&(e=t.s[e]))for(e=bb(e),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.na&&(i&=!1!==wc(o,r))}return Boolean(i)}function wc(t,e){var n=t.fa,r=t.Oa||t.src;return t.Ia&&uc(t),n.call(r,e)}function sc(t,e){if(t.na)return!0;if(!hc){var n=e||ba("window.event"),r=new kc(n,this),i=!0;if(!(0>n.keyCode||null!=n.returnValue)){t:{var o=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){o=!0}(o||null==n.returnValue)&&(n.returnValue=!0)}for(n=[],o=r.currentTarget;o;o=o.parentNode)n.push(o);o=t.type;for(var s=n.length-1;!r.ga&&0<=s;s--)r.currentTarget=n[s],i&=vc(n[s],o,!0,r);for(s=0;!r.ga&&s<n.length;s++)r.currentTarget=n[s],i&=vc(n[s],o,!1,r)}return i}return wc(t,new kc(e,this))}function qc(t){return(t=t[lc])instanceof P?t:null}var xc="__closure_events_fn_"+(1e9*Math.random()>>>0);function pc(t){return fa(t)?t:t[xc]||(t[xc]=function(e){return t.handleEvent(e)})}function R(){O.call(this),this.W=new P(this),this.fc=this}function yc(t,e,n,r){if(!(e=t.W.s[String(e)]))return!0;e=bb(e);for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.na&&s.capture==n){var a=s.fa,c=s.Oa||s.src;s.Ia&&gc(t.W,s),i=!1!==a.call(c,r)&&i}}return i&&0!=r.Yb}function zc(t,e){R.call(this),this.ea=t||1,this.ra=e||l,this.ib=p(this.Gc,this),this.sb=q()}s(R,O),R.prototype[ac]=!0,f=R.prototype,f.tb=null,f.addEventListener=function(t,e,n,r){oc(this,t,e,n,r)},f.removeEventListener=function(t,e,n,r){tc(this,t,e,n,r)},f.dispatchEvent=function(t){var e;if(r=this.tb)for(e=[];r;r=r.tb)e.push(r);var r=this.fc,i=t.type||t;if(n(t))t=new Q(t,r);else if(t instanceof Q)t.target=t.target||r;else{var o=t;Wa(t=new Q(i,r),o)}var s;o=!0;if(e)for(var a=e.length-1;!t.ga&&0<=a;a--)o=yc(s=t.currentTarget=e[a],i,!0,t)&&o;if(t.ga||(o=yc(s=t.currentTarget=r,i,!0,t)&&o,t.ga||(o=yc(s,i,!1,t)&&o)),e)for(a=0;!t.ga&&a<e.length;a++)o=yc(s=t.currentTarget=e[a],i,!1,t)&&o;return o},f.u=function(){R.pa.u.call(this),this.W&&this.W.Xa(void 0),this.tb=null},f.Ra=function(t,e,n,r){return this.W.add(String(t),e,!1,n,r)},f.vb=function(t,e,n,r){return this.W.remove(String(t),e,n,r)},f.ya=function(t,e,n,r){return this.W.ya(String(t),e,n,r)},s(zc,R),f=zc.prototype,f.enabled=!1,f.l=null,f.setInterval=function(t){this.ea=t,this.l&&this.enabled?(this.stop(),this.start()):this.l&&this.stop()},f.Gc=function(){if(this.enabled){var t=q()-this.sb;0<t&&t<.8*this.ea?this.l=this.ra.setTimeout(this.ib,this.ea-t):(this.l&&(this.ra.clearTimeout(this.l),this.l=null),this.dispatchEvent(Ac),this.enabled&&(this.l=this.ra.setTimeout(this.ib,this.ea),this.sb=q()))}},f.start=function(){this.enabled=!0,this.l||(this.l=this.ra.setTimeout(this.ib,this.ea),this.sb=q())},f.stop=function(){this.enabled=!1,this.l&&(this.ra.clearTimeout(this.l),this.l=null)},f.u=function(){zc.pa.u.call(this),this.stop(),delete this.ra};var Ac="tick",Fc;function Bc(t,e,n){if(fa(t))n&&(t=p(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=p(t.handleEvent,t)}return 2147483647<e?-1:l.setTimeout(t,e||0)}function Cc(){}function Dc(t){var e;return(e=t.Ab)||(e={},Ec(t)&&(e[0]=!0,e[1]=!0),e=t.Ab=e),e}function Gc(){}function Hc(t){return(t=Ec(t))?new ActiveXObject(t):new XMLHttpRequest}function Ec(t){if(!t.Kb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.Kb=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.Kb}function Ic(t){R.call(this),this.headers=new cb,this.gb=t||null,this.T=!1,this.fb=this.f=null,this.Mb=this.Qa="",this.ka=0,this.q="",this.da=this.qb=this.Pa=this.nb=!1,this.Fa=0,this.bb=null,this.Xb=Jc,this.cb=this.dc=!1}Cc.prototype.Ab=null,s(Gc,Cc),Fc=new Gc,s(Ic,R);var Jc="";Ic.prototype.r=Tb("goog.net.XhrIo");var Kc=/^https?$/i,Lc=["POST","PUT"];function Oc(t){return y&&A(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function $a(t){return"content-type"==t.toLowerCase()}function Mc(t,e){t.T=!1,t.f&&(t.da=!0,t.f.abort(),t.da=!1),t.q=e,t.ka=5,Pc(t),Qc(t)}function Pc(t){t.nb||(t.nb=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Rc(t){if(t.T&&void 0!==aa)if(t.fb[1]&&4==T(t)&&2==Sc(t))M(t.r,S(t,"Local request error detected and ignored"));else if(t.Pa&&4==T(t))Bc(t.Qb,0,t);else if(t.dispatchEvent("readystatechange"),4==T(t)){M(t.r,S(t,"Request complete")),t.T=!1;try{var e,n,r=Sc(t);t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:n=!0;break t;default:n=!1}if(!(e=n)){var i;if(i=0===r){if(!(s=Ra(String(t.Qa))[1]||null)&&self.location)var o=self.location.protocol,s=o.substr(0,o.length-1);i=!Kc.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{var a;t.ka=6;try{a=2<T(t)?t.f.statusText:""}catch(e){M(t.r,"Can not get status: "+e.message),a=""}t.q=a+" ["+Sc(t)+"]",Pc(t)}}finally{Qc(t)}}}function Qc(t,e){if(t.f){Nc(t);var n=t.f,r=t.fb[0]?ca:null;t.f=null,t.fb=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(n=t.r)&&n.J("Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Nc(t){t.f&&t.cb&&(t.f.ontimeout=null),"number"==typeof t.bb&&(l.clearTimeout(t.bb),t.bb=null)}function T(t){return t.f?t.f.readyState:0}function Sc(t){try{return 2<T(t)?t.f.status:-1}catch(e){return(t=t.r)&&t.Z("Can not get status: "+e.message,void 0),-1}}function Tc(t){try{return t.f?t.f.responseText:""}catch(e){return M(t.r,"Can not get responseText: "+e.message),""}}function S(t,e){return e+" ["+t.Mb+" "+t.Qa+" "+Sc(t)+"]"}function Uc(){this.Wb=q()}function Vc(t){O.call(this),this.e=t,this.j={}}f=Ic.prototype,f.send=function(t,e,n,r){if(this.f)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Qa+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Qa=t,this.q="",this.ka=0,this.Mb=e,this.nb=!1,this.T=!0,this.f=this.gb?Hc(this.gb):Hc(Fc),this.fb=this.gb?Dc(this.gb):Dc(Fc),this.f.onreadystatechange=p(this.Qb,this);try{M(this.r,S(this,"Opening Xhr")),this.qb=!0,this.f.open(e,t,!0),this.qb=!1}catch(t){return M(this.r,S(this,"Error opening Xhr: "+t.message)),void Mc(this,t)}t=n||"";var i=this.headers.n();r&&D(r,function(t,e){i.set(e,t)}),r=Za(i.ca()),n=l.FormData&&t instanceof l.FormData,!(0<=Xa(Lc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),D(i,function(t,e){this.f.setRequestHeader(e,t)},this),this.Xb&&(this.f.responseType=this.Xb),"withCredentials"in this.f&&(this.f.withCredentials=this.dc);try{Nc(this),0<this.Fa&&(this.cb=Oc(this.f),M(this.r,S(this,"Will abort after "+this.Fa+"ms if incomplete, xhr2 "+this.cb)),this.cb?(this.f.timeout=this.Fa,this.f.ontimeout=p(this.qa,this)):this.bb=Bc(this.qa,this.Fa,this)),M(this.r,S(this,"Sending request")),this.Pa=!0,this.f.send(t),this.Pa=!1}catch(t){M(this.r,S(this,"Send error: "+t.message)),Mc(this,t)}},f.qa=function(){void 0!==aa&&this.f&&(this.q="Timed out after "+this.Fa+"ms, aborting",this.ka=8,M(this.r,S(this,this.q)),this.dispatchEvent("timeout"),this.abort(8))},f.abort=function(t){this.f&&this.T&&(M(this.r,S(this,"Aborting")),this.T=!1,this.da=!0,this.f.abort(),this.da=!1,this.ka=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Qc(this))},f.u=function(){this.f&&(this.T&&(this.T=!1,this.da=!0,this.f.abort(),this.da=!1),Qc(this,!0)),Ic.pa.u.call(this)},f.Qb=function(){this.mb||(this.qb||this.Pa||this.da?Rc(this):this.uc())},f.uc=function(){Rc(this)},f.isActive=function(){return!!this.f},f.Ib=function(){return n(this.q)?this.q:String(this.q)},new Uc,Uc.prototype.set=function(t){this.Wb=t},Uc.prototype.reset=function(){this.set(q())},Uc.prototype.get=function(){return this.Wb},s(Vc,O);var Wc=[];function Xc(t,e,n){O.call(this),this.pc=t,this.ea=e,this.e=n,this.jc=p(this.vc,this)}function Yc(t){t.l=Bc(t.jc,t.ea),t.pc.call(t.e)}function U(t,e,n,r,i){this.b=t,this.a=e,this.Y=n,this.B=r,this.Ea=i||1,this.qa=Zc,this.ob=new Vc(this),this.Ta=new zc,this.Ta.setInterval($c)}f=Vc.prototype,f.Ra=function(t,e,n,r){m(e)||(Wc[0]=e,e=Wc);for(var i=0;i<e.length;i++){var o=oc(t,e[i],n||this.handleEvent,r||!1,this.e||this);if(!o)break;this.j[o.key]=o}return this},f.vb=function(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)this.vb(t,e[o],n,r,i);else n=n||this.handleEvent,i=i||this.e||this,n=pc(n),r=!!r,(e=bc(t)?t.ya(e,n,r,i):t&&(t=qc(t))?t.ya(e,n,r,i):null)&&(uc(e),delete this.j[e.key]);return this},f.Xa=function(){var t,e=this.j,n=uc;for(t in e)n.call(void 0,e[t],t,e);this.j={}},f.u=function(){Vc.pa.u.call(this),this.Xa()},f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},s(Xc,O),f=Xc.prototype,f.Za=!1,f.Vb=0,f.l=null,f.stop=function(){this.l&&(l.clearTimeout(this.l),this.l=null,this.Za=!1)},f.u=function(){Xc.pa.u.call(this),this.stop()},f.vc=function(){this.l=null,this.Za&&!this.Vb&&(this.Za=!1,Yc(this))},f=U.prototype,f.v=null,f.F=!1,f.ua=null,f.xb=null,f.Da=null,f.sa=null,f.U=null,f.w=null,f.X=null,f.k=null,f.Ha=0,f.K=null,f.ta=null,f.q=null,f.g=-1,f.Zb=!0,f.$=!1,f.ma=0,f.Va=null;var Zc=45e3,$c=250;function ad(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}var bd={},dd={};function ed(){return!y||y&&10<=Ma}function fd(t,e,n){t.sa=1,t.U=H(e.n()),t.X=n,t.Cb=!0,gd(t,null)}function hd(t,e,n,r,i){t.sa=1,t.U=H(e.n()),t.X=null,t.Cb=n,i&&(t.Zb=!1),gd(t,r)}function gd(t,e){var n;if(t.Da=q(),id(t),t.w=t.U.n(),rb(t.w,"t",t.Ea),t.Ha=0,t.k=t.b.lb(t.b.$a()?e:null),0<t.ma&&(t.Va=new Xc(p(t.ec,t,t.k),t.ma)),t.ob.Ra(t.k,"readystatechange",t.Bc),t.v){n=t.v;var r,i={};for(r in n)i[r]=n[r];n=i}else n={};if(t.X?(t.ta="POST",n["Content-Type"]="application/x-www-form-urlencoded",t.k.send(t.w,t.ta,t.X,n)):(t.ta="GET",t.Zb&&!z&&(n.Connection="close"),t.k.send(t.w,t.ta,null,n)),t.b.H(jd),i=t.X)for(n="",i=i.split("&"),r=0;r<i.length;r++){if(1<(s=i[r].split("=")).length){var o=s[0],s=s[1],a=o.split("_");n=2<=a.length&&"type"==a[1]?n+(o+"=")+s+"&":n+(o+"=redacted&")}}else n=null;t.a.info("XMLHTTP REQ ("+t.B+") [attempt "+t.Ea+"]: "+t.ta+"\n"+t.w+"\n"+n)}function nd(t,e,n){for(var r=!0;!t.$&&t.Ha<n.length;){var i=qd(t,n);if(i==dd){4==e&&(t.q=4,W(),r=!1),Ub(t.a,t.B,null,"[Incomplete Response]");break}if(i==bd){t.q=4,W(),Ub(t.a,t.B,n,"[Invalid Chunk]"),r=!1;break}Ub(t.a,t.B,i,null),od(t,i)}4==e&&0==n.length&&(t.q=1,W(),r=!1),t.F=t.F&&r,r||(Ub(t.a,t.B,n,"[Invalid Chunked Response]"),V(t),pd(t))}function qd(t,e){var n=t.Ha,r=e.indexOf("\n",n);if(-1==r)return dd;if(n=Number(e.substring(n,r)),isNaN(n))return bd;if((r+=1)+n>e.length)return dd;var i=e.substr(r,n);return t.Ha=r+n,i}function rd(t,e){t.Da=q(),id(t);var n=e?window.location.hostname:"";t.w=t.U.n(),G(t.w,"DOMAIN",n),G(t.w,"t",t.Ea);try{t.K=new ActiveXObject("htmlfile")}catch(e){return t.a.J("ActiveX blocked"),V(t),t.q=7,W(),void pd(t)}var r="<html><body>";e&&(r+='<script>document.domain="'+n+'"<\/script>'),r+="</body></html>",t.K.open(),t.K.write(r),t.K.close(),t.K.parentWindow.m=p(t.yc,t),t.K.parentWindow.d=p(t.Ub,t,!0),t.K.parentWindow.rpcClose=p(t.Ub,t,!1),n=t.K.createElement("div"),t.K.parentWindow.document.body.appendChild(n),n.innerHTML='<iframe src="'+t.w+'"></iframe>',t.a.info("TRIDENT REQ ("+t.B+") [ attempt "+t.Ea+"]: GET\n"+t.w),t.b.H(jd)}function id(t){t.xb=q()+t.qa,td(t,t.qa)}function td(t,e){if(null!=t.ua)throw Error("WatchDog timer not null");t.ua=Y(p(t.zc,t),e)}function md(t){t.ua&&(l.clearTimeout(t.ua),t.ua=null)}function pd(t){t.b.Lb()||t.$||t.b.la(t)}function V(t){md(t);var e=t.Va;e&&"function"==typeof e.Ja&&e.Ja(),t.Va=null,t.Ta.stop(),t.ob.Xa(),t.k&&(e=t.k,t.k=null,e.abort(),e.Ja()),t.K&&(t.K=null)}function od(t,e){try{t.b.Rb(t,e),t.b.H(sd)}catch(e){Wb(t.a,e,"Error in httprequest callback")}}function ud(t,e,n,r,i){if((new N).debug("TestLoadImageWithRetries: "+i),0==r)n(!1);else{var o=i||0;r--,vd(t,e,function(i){i?n(!0):l.setTimeout(function(){ud(t,e,n,r,o)},o)})}}function vd(t,e,n){function r(t,e){return function(){try{i.debug("TestLoadImage: "+e),o.onload=null,o.onerror=null,o.onabort=null,o.ontimeout=null,l.clearTimeout(s),n(t)}catch(t){Wb(i,t)}}}var i=new N;i.debug("TestLoadImage: loading "+t);var o=new Image,s=null;o.onload=r(!0,"loaded"),o.onerror=r(!1,"error"),o.onabort=r(!1,"abort"),o.ontimeout=r(!1,"timeout"),s=l.setTimeout(function(){o.ontimeout&&o.ontimeout()},e),o.src=t}function wd(t,e){this.b=t,this.a=e,this.P=new Yb(0,!0)}function yd(t){var e=Ad(t.b,t.va,"/mail/images/cleardot.gif");H(e),ud(e.toString(),5e3,p(t.kc,t),3,2e3),t.H(jd)}function zd(t){t.a.debug("TestConnection: starting stage 2");var e=t.b.Dc;if(null!=e)t.a.debug("Buffered"),W(),e?(W(),Bd(t.b,t,!1)):(W(),Bd(t.b,t,!0));else if(t.A=new U(t,t.a,void 0,void 0,void 0),t.A.S(t.v),e=Cd(t.b,t.L,t.I),W(),ed())rb(e,"TYPE","xmlhttp"),hd(t.A,e,!1,t.L,!1);else{rb(e,"TYPE","html");var n=t.A;t=Boolean(t.L),n.sa=3,n.U=H(e.n()),rd(n,t)}}function Ed(t,e,n){this.Bb=t||null,this.c=Fd,this.t=[],this.Q=[],this.a=new N,this.P=new Yb(0,!0),this.Gb=e||null,this.Dc=null!=n?n:null}function Gd(t,e){this.Ob=t,this.map=e}f=U.prototype,f.S=function(t){this.v=t},f.setTimeout=function(t){this.qa=t},f.bc=function(t){this.ma=t},f.Bc=function(t){t=t.target;var e=this.Va;e&&3==T(t)?(this.a.debug("Throttling readystatechange."),e.l||e.Vb?e.Za=!0:Yc(e)):this.ec(t)},f.ec=function(t){try{if(t==this.k)t:{var e=T(this.k),n=this.k.ka,r=Sc(this.k);if(!ed()||z&&!A("420+")){if(4>e)break t}else if(3>e||3==e&&!Aa&&!Tc(this.k))break t;this.$||4!=e||7==n||(8==n||0>=r?this.b.H(kd):this.b.H(ld)),md(this);var i=Sc(this.k);this.g=i;var o=Tc(this.k);o||this.a.debug("No response text for uri "+this.w+" status "+i),this.F=200==i,this.a.info("XMLHTTP RESP ("+this.B+") [ attempt "+this.Ea+"]: "+this.ta+"\n"+this.w+"\n"+e+" "+i),this.F?(4==e&&V(this),this.Cb?(nd(this,e,o),Aa&&this.F&&3==e&&(this.ob.Ra(this.Ta,Ac,this.Ac),this.Ta.start())):(Ub(this.a,this.B,o,null),od(this,o)),this.F&&!this.$&&(4==e?this.b.la(this):(this.F=!1,id(this)))):(400==i&&0<o.indexOf("Unknown SID")?(this.q=3,W(),this.a.Z("XMLHTTP Unknown SID ("+this.B+")")):(this.q=0,W(),this.a.Z("XMLHTTP Bad status "+i+" ("+this.B+")")),V(this),pd(this))}else this.a.Z("Called back with an unexpected xmlhttp")}catch(t){this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.k&&Tc(this.k)?Wb(this.a,t,"ResponseText: "+Tc(this.k)):Wb(this.a,t,"No response text")}},f.Ac=function(){var t=T(this.k),e=Tc(this.k);this.Ha<e.length&&(md(this),nd(this,t,e),this.F&&4!=t&&id(this))},f.yc=function(t){Y(p(this.xc,this,t),0)},f.xc=function(t){if(!this.$){var e=this.a;e.info("TRIDENT TEXT ("+this.B+"): "+Vb(e,t)),md(this),od(this,t),id(this)}},f.Ub=function(t){Y(p(this.wc,this,t),0)},f.wc=function(t){this.$||(this.a.info("TRIDENT TEXT ("+this.B+"): "+t?"success":"failure"),V(this),this.F=t,this.b.la(this),this.b.H(sd))},f.nc=function(){md(this),this.b.la(this)},f.cancel=function(){this.$=!0,V(this)},f.zc=function(){this.ua=null;var t=q();0<=t-this.xb?(this.F&&this.a.J("Received watchdog timeout even though request loaded successfully"),this.a.info("TIMEOUT: "+this.w),2!=this.sa&&this.b.H(kd),V(this),this.q=2,W(),pd(this)):(this.a.Z("WatchDog timer called too early"),td(this,this.xb-t))},f.Ib=function(){return this.q},f=wd.prototype,f.v=null,f.A=null,f.Wa=!1,f.cc=null,f.La=null,f.rb=null,f.I=null,f.c=null,f.g=-1,f.L=null,f.va=null,f.S=function(t){this.v=t},f.ac=function(t){this.P=t},f.kb=function(t){this.I=t,t=xd(this.b,this.I),W(),this.cc=q();var e=this.b.Gb;null!=e?(this.L=this.b.correctHostPrefix(e[0]),(this.va=e[1])?(this.c=1,yd(this)):(this.c=2,zd(this))):(rb(t,"MODE","init"),this.A=new U(this,this.a,void 0,void 0,void 0),this.A.S(this.v),hd(this.A,t,!1,null,!0),this.c=0)},f.kc=function(t){if(t)this.c=2,zd(this);else{W();var e=this.b;e.a.debug("Test Connection Blocked"),e.g=e.V.g,Z(e,9)}t&&this.H(ld)},f.lb=function(t){return this.b.lb(t)},f.abort=function(){this.A&&(this.A.cancel(),this.A=null),this.g=-1},f.Lb=function(){return!1},f.Rb=function(t,e){if(this.g=t.g,0==this.c)if(this.a.debug("TestConnection: Got data for stage 1"),e){try{var n=this.P.parse(e)}catch(t){return Wb(this.a,t),void Dd(this.b,this)}this.L=this.b.correctHostPrefix(n[0]),this.va=n[1]}else this.a.debug("TestConnection: Null responseText"),Dd(this.b,this);else 2==this.c&&(this.Wa?(W(),this.rb=q()):"11111"==e?(W(),this.Wa=!0,this.La=q(),n=this.La-this.cc,(ed()||500>n)&&(this.g=200,this.A.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),W(),Bd(this.b,this,!0))):(W(),this.La=this.rb=q(),this.Wa=!1))},f.la=function(){if(this.g=this.A.g,this.A.F){if(0==this.c)this.a.debug("TestConnection: request complete for initial check"),this.va?(this.c=1,yd(this)):(this.c=2,zd(this));else if(2==this.c){this.a.debug("TestConnection: request complete for stage 2");(ed()?this.Wa:!(200>this.rb-this.La))?(this.a.debug("Test connection succeeded; using streaming connection"),W(),Bd(this.b,this,!0)):(this.a.debug("Test connection failed; not using streaming"),W(),Bd(this.b,this,!1))}}else this.a.debug("TestConnection: request failed, in state "+this.c),0==this.c?W():2==this.c&&W(),Dd(this.b,this)},f.$a=function(){return this.b.$a()},f.isActive=function(){return this.b.isActive()},f.H=function(t){this.b.H(t)},f=Ed.prototype,f.v=null,f.xa=null,f.p=null,f.i=null,f.I=null,f.Ma=null,f.zb=null,f.L=null,f.hc=!0,f.Ba=0,f.sc=0,f.Ka=!1,f.e=null,f.G=null,f.M=null,f.aa=null,f.V=null,f.wb=null,f.gc=!0,f.za=-1,f.Nb=-1,f.g=-1,f.ba=0,f.ha=0,f.ic=5e3,f.Cc=1e4,f.pb=2,f.Hb=2e4,f.ma=0,f.ab=!1,f.ia=8;var Fd=1,Hd=new R;function Id(t){Q.call(this,"statevent",t)}function Jd(t,e){Q.call(this,"timingevent",t),this.size=e}s(Id,Q),s(Jd,Q);var jd=1,ld=2,kd=3,sd=4;function Kd(t){Q.call(this,"serverreachability",t)}s(Kd,Q);var Xb="y2f%",$,Yd;function Md(t){t.V&&(t.V.abort(),t.V=null),t.i&&(t.i.cancel(),t.i=null),t.M&&(l.clearTimeout(t.M),t.M=null),Pd(t),t.p&&(t.p.cancel(),t.p=null),t.G&&(l.clearTimeout(t.G),t.G=null)}function Qd(t){t.p||t.G||(t.G=Y(p(t.Tb,t),0),t.ba=0)}function Sd(t,e){var n,r;e?6<t.ia?(t.t=t.Q.concat(t.t),t.Q.length=0,n=t.Ba-1,r=Rd(t)):(n=e.B,r=e.X):(n=t.Ba++,r=Rd(t));var i=t.Ma.n();G(i,"SID",t.Y),G(i,"RID",n),G(i,"AID",t.za),Nd(t,i),(n=new U(t,t.a,t.Y,n,t.ba+1)).S(t.v),n.setTimeout(Math.round(.5*t.Hb)+Math.round(.5*t.Hb*Math.random())),t.p=n,fd(n,i,r)}function Nd(t,e){if(t.e){var n=t.e.getAdditionalParams(t);n&&D(n,function(t,n){G(e,n,t)})}}function Rd(t){var e,n=Math.min(t.t.length,1e3),r=["count="+n];6<t.ia&&0<n?(e=t.t[0].Ob,r.push("ofs="+e)):e=0;for(var i=0;i<n;i++){var o=t.t[i].Ob,s=t.t[i].map;o=6>=t.ia?i:o-e;try{D(s,function(t,e){r.push("req"+o+"_"+e+"="+encodeURIComponent(t))})}catch(e){r.push("req"+o+"_type="+encodeURIComponent("_badmap")),t.e&&t.e.badMapError(t,s)}}return t.Q=t.Q.concat(t.t.splice(0,n)),r.join("&")}function Td(t){t.i||t.M||(t.yb=1,t.M=Y(p(t.Sb,t),0),t.ha=0)}function Ud(t){return t.i||t.M?(t.a.J("Request already in progress"),!1):!(3<=t.ha)&&(t.a.debug("Going to retry GET"),t.yb++,t.M=Y(p(t.Sb,t),Vd(t,t.ha)),t.ha++,!0)}function Ld(t){if(t.e){var e=t.e.okToMakeRequest(t);if(0!=e)return t.a.debug("Handler returned error code from okToMakeRequest"),Z(t,e),!1}return!0}function Bd(t,e,n){t.a.debug("Test Connection Finished"),t.wb=t.gc&&n,t.g=e.g,t.a.debug("connectChannel_()"),t.lc(Fd,0),t.Ma=xd(t,t.I),Qd(t)}function Dd(t,e){t.a.debug("Test Connection Failed"),t.g=e.g,Z(t,2)}function Pd(t){null!=t.aa&&(l.clearTimeout(t.aa),t.aa=null)}function Vd(t,e){var n=t.ic+Math.floor(Math.random()*t.Cc);return t.isActive()||(t.a.debug("Inactive channel"),n*=2),n*e}function Z(t,e){if(t.a.info("Error code "+e),2==e||9==e){var n=null;t.e&&(n=t.e.getNetworkTestImageUri(t));var r=p(t.Fc,t);n||H(n=new E("//www.google.com/images/cleardot.gif")),vd(n.toString(),1e4,r)}else W();Wd(t,e)}function Wd(t,e){t.a.debug("HttpChannel: error - "+e),t.c=0,t.e&&t.e.channelError(t,e),Od(t),Md(t)}function Od(t){if(t.c=0,t.g=-1,t.e)if(0==t.Q.length&&0==t.t.length)t.e.channelClosed(t);else{t.a.debug("Number of undelivered maps, pending: "+t.Q.length+", outgoing: "+t.t.length);var e=bb(t.Q),n=bb(t.t);t.Q.length=0,t.t.length=0,t.e.channelClosed(t,e,n)}}function xd(t,e){var n=Ad(t,null,e);return t.a.debug("GetForwardChannelUri: "+n),n}function Cd(t,e,n){return e=Ad(t,t.$a()?e:null,n),t.a.debug("GetBackChannelUri: "+e),e}function Ad(t,e,n){if(""!=(i=tb(n)).ja)e&&gb(i,e+"."+i.ja),hb(i,i.Ca);else var r=window.location,i=ub(r.protocol,e?e+"."+r.hostname:r.hostname,r.port,n);return t.xa&&D(t.xa,function(t,e){G(i,e,t)}),G(i,"VER",t.ia),Nd(t,i),i}function Y(t,e){if(!fa(t))throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){t()},e)}function W(){Hd.dispatchEvent(new Id(Hd))}function Xd(){}f=Ed.prototype,f.kb=function(t,e,n,r,i){this.a.debug("connect()"),W(),this.I=e,this.xa=n||{},r&&void 0!==i&&(this.xa.OSID=r,this.xa.OAID=i),this.a.debug("connectTest_()"),Ld(this)&&(this.V=new wd(this,this.a),this.V.S(this.v),this.V.ac(this.P),this.V.kb(t))},f.disconnect=function(){if(this.a.debug("disconnect()"),Md(this),3==this.c){var t=this.Ba++,e=this.Ma.n();G(e,"SID",this.Y),G(e,"RID",t),G(e,"TYPE","terminate"),Nd(this,e),(t=new U(this,this.a,this.Y,t,void 0)).sa=2,t.U=H(e.n()),(e=new Image).src=t.U,e.onload=e.onerror=p(t.nc,t),t.Da=q(),id(t)}Od(this)},f.S=function(t){this.v=t},f.bc=function(t){this.ma=t},f.Lb=function(){return 0==this.c},f.ac=function(t){this.P=t},f.Tb=function(t){if(this.G=null,this.a.debug("startForwardChannel_"),Ld(this))if(this.c==Fd)if(t)this.a.J("Not supposed to retry the open");else{this.a.debug("open_()"),this.Ba=Math.floor(1e5*Math.random()),t=this.Ba++;var e=new U(this,this.a,"",t,void 0);e.S(this.v);var n=Rd(this),r=this.Ma.n();G(r,"RID",t),this.Bb&&G(r,"CVER",this.Bb),Nd(this,r),fd(e,r,n),this.p=e,this.c=2}else 3==this.c&&(t?Sd(this,t):0==this.t.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.p?this.a.J("startForwardChannel_ returned: connection already in progress"):(Sd(this),this.a.debug("startForwardChannel_ finished, sent request")))},f.Sb=function(){if(this.M=null,Ld(this)){this.a.debug("Creating new HttpRequest"),this.i=new U(this,this.a,this.Y,"rpc",this.yb),this.i.S(this.v),this.i.bc(this.ma);var t=this.zb.n();if(G(t,"RID","rpc"),G(t,"SID",this.Y),G(t,"CI",this.wb?"0":"1"),G(t,"AID",this.za),Nd(this,t),ed())G(t,"TYPE","xmlhttp"),hd(this.i,t,!0,this.L,!1);else{G(t,"TYPE","html");var e=this.i,n=Boolean(this.L);e.sa=3,e.U=H(t.n()),rd(e,n)}this.a.debug("New Request created")}},f.Rb=function(t,e){if(0!=this.c&&(this.i==t||this.p==t))if(this.g=t.g,this.p==t&&3==this.c)if(7<this.ia){var n;try{n=this.P.parse(e)}catch(t){n=null}if(m(n)&&3==n.length)if(0==(r=n)[0])t:if(this.a.debug("Server claims our backchannel is missing."),this.M)this.a.debug("But we are currently starting the request.");else{if(this.i){if(!(this.i.Da+3e3<this.p.Da))break t;Pd(this),this.i.cancel(),this.i=null}else this.a.Z("We do not have a BackChannel established");Ud(this),W()}else this.Nb=r[1],0<(n=this.Nb-this.za)&&(r=r[2],this.a.debug(r+" bytes (in "+n+" arrays) are outstanding on the BackChannel"),37500>r&&this.wb&&0==this.ha&&!this.aa&&(this.aa=Y(p(this.tc,this),6e3)));else this.a.debug("Bad POST response data returned"),Z(this,11)}else e!=Xb&&(this.a.debug("Bad data returned - missing/invald magic cookie"),Z(this,11));else if(this.i==t&&Pd(this),!/^[\s\xa0]*$/.test(e)){n=this.P.parse(e);for(var r=this.e&&this.e.channelHandleMultipleArrays?[]:null,i=0;i<n.length;i++){var o=n[i];this.za=o[0],o=o[1],2==this.c?"c"==o[0]?(this.Y=o[1],this.L=this.correctHostPrefix(o[2]),o=o[3],this.ia=null!=o?o:6,this.c=3,this.e&&this.e.channelOpened(this),this.zb=Cd(this,this.L,this.I),Td(this)):"stop"==o[0]&&Z(this,7):3==this.c&&("stop"==o[0]?(r&&0!=r.length&&(this.e.channelHandleMultipleArrays(this,r),r.length=0),Z(this,7)):"noop"!=o[0]&&(r?r.push(o):this.e&&this.e.channelHandleArray(this,o)),this.ha=0)}r&&0!=r.length&&this.e.channelHandleMultipleArrays(this,r)}},f.correctHostPrefix=function(t){return this.hc?this.e?this.e.correctHostPrefix(t):t:null},f.tc=function(){null!=this.aa&&(this.aa=null,this.i.cancel(),this.i=null,Ud(this),W())},f.la=function(t){var e;if(this.a.debug("Request complete"),this.i==t)Pd(this),this.i=null,e=2;else{if(this.p!=t)return;this.p=null,e=1}if(this.g=t.g,0!=this.c)if(t.F)1==e?(q(),Hd.dispatchEvent(new Jd(Hd,t.X?t.X.length:0)),Qd(this),this.Q.length=0):Td(this);else{var n=t.Ib();if(3==n||7==n||0==n&&0<this.g)this.a.debug("Not retrying due to error type");else{var r;if(this.a.debug("Maybe retrying, last error: "+ad(n,this.g)),(r=1==e)&&(this.p||this.G?(this.a.J("Request already in progress"),r=!1):this.c==Fd||this.ba>=(this.Ka?0:this.pb)?r=!1:(this.a.debug("Going to retry POST"),this.G=Y(p(this.Tb,this,t),Vd(this,this.ba)),this.ba++,r=!0)),r||2==e&&Ud(this))return;this.a.debug("Exceeded max number of retries")}switch(this.a.debug("Error: HTTP request failed"),n){case 1:Z(this,5);break;case 4:Z(this,10);break;case 3:Z(this,6);break;case 7:Z(this,12);break;default:Z(this,2)}}},f.lc=function(t){if(!(0<=Xa(arguments,this.c)))throw Error("Unexpected channel state: "+this.c)},f.Fc=function(t){t?(this.a.info("Successfully pinged google.com"),W()):(this.a.info("Failed to ping google.com"),W(),Wd(this,8))},f.lb=function(t){if(t&&!this.ab)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ic).dc=this.ab,t},f.isActive=function(){return!!this.e&&this.e.isActive(this)},f.H=function(){Hd.dispatchEvent(new Kd(Hd))},f.$a=function(){return this.ab||!ed()},f=Xd.prototype,f.channelHandleMultipleArrays=null,f.okToMakeRequest=function(){return 0},f.channelOpened=function(){},f.channelHandleArray=function(){},f.channelError=function(){},f.channelClosed=function(){},f.getAdditionalParams=function(){return{}},f.getNetworkTestImageUri=function(){return null},f.isActive=function(){return!0},f.badMapError=function(){},f.correctHostPrefix=function(t){return t},Yd={0:"Ok",4:"User is logging out",6:"Unknown session ID",7:"Stopped by server",8:"General network error",2:"Request failed",9:"Blocked by a network administrator",5:"No data from server",10:"Got bad data from the server",11:"Got a bad response from the server"},$=function(t,e){var n,r,i,o,s,a,c,u,p,h,f,d,_,y;if(!(this instanceof $))return new $(t,e);h=this,t||(t="channel"),t.match(/:\/\//)&&t.replace(/^ws/,"http"),e||(e={}),m(e||"string"==typeof e)&&(e={}),u=e.reconnectTime||3e3,n=e.extraHeaders||null,r=e.extraParams||null,null!==e.affinity&&(r||(r={}),e.affinityParam||(e.affinityParam="a"),this.affinity=e.affinity||sa(),r[e.affinityParam]=this.affinity),(_=function(t){h.readyState=h.readyState=t})(this.CLOSED),d=null,a=null!=(y=e.prev)?y.Ec:void 0,i=function(t,e,n,r,i){try{return"function"==typeof h[t]?h[t](n,r,i):void 0}catch(t){throw"undefined"!=typeof console&&null!==console&&console.error(t.stack),t}},(o=new Xd).channelOpened=function(){return a=d,_($.OPEN),i("onopen")},s=null,o.channelError=function(t,e){var n;return n=Yd[e],s=e,h.readyState!==$.CLOSED&&_($.hb),i("onerror",0,n,e)},p=null,o.channelClosed=function(t,n,r){var o;if(h.readyState!==$.CLOSED)return d=null,t=s?Yd[s]:"Closed",_($.CLOSED),e.reconnect&&7!==s&&0!==s&&(o=6===s?0:u,clearTimeout(p),p=setTimeout(c,o)),i("onclose",0,t,n,r),s=null},o.channelHandleArray=function(t,e){return i("onmessage",0,{type:"message",data:e})},c=function(){if(d)throw Error("Reconnect() called from invalid state");if(_($.CONNECTING),i("onconnecting"),clearTimeout(p),h.Ec=d=new Ed(e.appVersion,null!=a?a.Gb:void 0),e.crossDomainXhr&&(d.ab=!0),d.e=o,n&&d.S(n),s=null,e.failFast){var c=d;c.Ka=!0,c.a.info("setFailFast: true"),(c.p||c.G)&&c.ba>(c.Ka?0:c.pb)&&(c.a.info("Retry count "+c.ba+" > new maxRetries "+(c.Ka?0:c.pb)+". Fail immediately!"),c.p?(c.p.cancel(),c.la(c.p)):(l.clearTimeout(c.G),c.G=null,Z(c,2)))}return d.kb(t+"/test",t+"/bind",r,null!=a?a.Y:void 0,null!=a?a.za:void 0)},this.open=function(){if(h.readyState!==h.CLOSED)throw Error("Already open");return c()},this.close=function(){if(clearTimeout(p),s=0,h.readyState!==$.CLOSED)return _($.hb),d.disconnect()},this.sendMap=f=function(t){var e;if((e=h.readyState)!==$.hb&&e!==$.CLOSED){if(0==(e=d).c)throw Error("Invalid operation: sending map when state is closed");1e3==e.t.length&&e.a.J("Already have 1000 queued maps upon queueing "+yb(t)),e.t.push(new Gd(e.sc++,t)),2!=e.c&&3!=e.c||Qd(e)}},this.send=function(t){return f("string"==typeof t?{_S:t}:{JSON:yb(t)})},c()},$.prototype.canSendWhileConnecting=$.canSendWhileConnecting=!0,$.prototype.canSendJSON=$.canSendJSON=!0,$.prototype.CONNECTING=$.CONNECTING=$.CONNECTING=0,$.prototype.OPEN=$.OPEN=$.OPEN=1,$.prototype.CLOSING=$.CLOSING=$.hb=2,$.prototype.CLOSED=$.CLOSED=$.CLOSED=3,(null!=_$bcsocketUncompressed_127?_$bcsocketUncompressed_127:window).BCSocket=$}();var _$Socket_166=Socket,BCSocket=_$bcsocketUncompressed_127.BCSocket;function Socket(t){this._options=t,this._messageQueue=[],this._connectedOnce=!1,this._attemptNum=0,this._url=getWebSocketURL(t),supportWebSockets()&&!t.browserChannelOnly?this._createWebSocket():this._createBrowserChannel()}function getRandom(t,e){return Math.random()*(e-t)+t}function supportWebSockets(){return"WebSocket"in window&&2===window.WebSocket.CLOSING}function getWebSocketURL(t){var e;window.location&&window.location.port&&(e=":"+window.location.port);var n=t.srvPort,r=t.srvSecurePort,i=t.srvHost||window.location.hostname,o="https:"===(t.srvProtocol||window.location.protocol)?"wss:":"ws:";return"ws:"===o&&n?e=":"+n:"wss:"===o&&r&&(e=":"+r),o+"//"+i+(e||"")+t.base}Socket.prototype._createWebSocket=function(){this._type="websocket",this._socket=new WebSocket(this._url),this.open=this._createWebSocket.bind(this),this._syncState(),this._socket.onmessage=this._ws_onmessage.bind(this),this._socket.onopen=this._ws_onopen.bind(this),this._socket.onclose=this._ws_onclose.bind(this)},Socket.prototype._createBrowserChannel=function(){this._type="browserchannel",this._socket=BCSocket(this._options.base,this._options),this.open=this._createBrowserChannel.bind(this),this._syncState(),this._socket.onmessage=this._bc_onmessage.bind(this),this._socket.onopen=this._bc_onopen.bind(this),this._socket.onclose=this._bc_onclose.bind(this)},Socket.prototype._ws_onmessage=function(t){this._syncState(),t.data=JSON.parse(t.data),this.onmessage&&this.onmessage(t)},Socket.prototype._ws_onopen=function(t){this._attemptNum=0,this._connectedOnce=!0,this._syncState(),this._flushQueue(),this.onopen&&this.onopen(t)},Socket.prototype._ws_onclose=function(t){if(this._syncState(),console.log("WebSocket: connection is broken",t),this.onclose&&this.onclose(t),!this._connectedOnce)return this._createBrowserChannel();var e=this;this._options.reconnect&&!t.wasClean&&setTimeout(function(){e.readyState===e.CLOSED&&e._createWebSocket()},this._getTimeout()),this._attemptNum++},Socket.prototype._getTimeout=function(){var t=this._options.timeout+this._options.timeoutIncrement*this._attemptNum;return getRandom(t/3,t)},Socket.prototype._bc_onmessage=function(t){this._syncState(),this.onmessage&&this.onmessage(t)},Socket.prototype._bc_onopen=function(t){this._syncState(),this.onopen&&this.onopen(t)},Socket.prototype._bc_onclose=function(t){this._syncState(),this.onclose&&this.onclose(t)},Socket.prototype._flushQueue=function(){for(;0!==this._messageQueue.length;){var t=this._messageQueue.shift();this._send(t)}},Socket.prototype._send=function(t){"websocket"===this._type&&"string"!=typeof t&&(t=JSON.stringify(t)),this._socket.send(t)},Socket.prototype.send=function(t){"websocket"===this._type?this._socket.readyState===WebSocket.OPEN&&0===this._messageQueue.length?this._send(t):this._messageQueue.push(t):this._send(t)},Socket.prototype.close=function(){this._socket.close()},Socket.prototype._syncState=function(){this.readyState=this._socket.readyState},Socket.prototype.reconnect=function(){"websocket"===this._type&&this.readyState===this.CLOSED&&this._createWebSocket()},Socket.prototype.canSendWhileConnecting=!0,Socket.prototype.canSendJSON=!0,Socket.prototype.CONNECTING=0,Socket.prototype.OPEN=1,Socket.prototype.CLOSING=2,Socket.prototype.CLOSED=3;var _$browser_165={},CLIENT_OPTIONS=JSON.parse('{"base":"/channel","reconnect":true,"browserChannelOnly":false,"timeout":10000,"timeoutIncrement":10000}');_$lib_racer.Model.prototype._createSocket=function(t){return new _$Socket_166(CLIENT_OPTIONS)};var _$pathBrowserify_154={};(function(t){_$pathBrowserify_154.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n};"ab".substr(-1)}).call(this,_$browser_155);var _$utils_210={},toString={}.toString;function paramsEqual(t,e){return!Object.keys(t).some(function(n){return t[n]!=e[n]})}function acceptParams(t,e){for(var n=t.split(/ *; */),r={value:n[0],quality:1,params:{},originalIndex:e},i=1;i<n.length;++i){var o=n[i].split(/ *= */);"q"==o[0]?r.quality=parseFloat(o[1]):r.params[o[0]]=o[1]}return r}_$utils_210.pathRegexp=function(t,e,n,r){return"[object RegExp]"==toString.call(t)?t:(Array.isArray(t)&&(t="("+t.join("|")+")"),t=t.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g,function(t,n,r,i,o,s,a){return e.push({name:i,optional:!!s}),n=n||"",(s?"":n)+"(?:"+(s?n:"")+(r||"")+(o||(r?"([^/.]+?)":"([^/]+?)"))+")"+(s||"")+(a?"(/*)?":"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$",n?"":"i"))};var _$Route_209=Route;function Route(t,e,n,r){r=r||{},this.path=e,this.method=t,this.callbacks=n,this.regexp=_$utils_210.pathRegexp(e,this.keys=[],r.sensitive,r.strict)}Route.prototype.match=function(t){var e=this.keys,n=this.params=[],r=this.regexp.exec(t);if(!r)return!1;for(var i=1,o=r.length;i<o;++i){var s=e[i-1],a="string"==typeof r[i]?decodeURIComponent(r[i]):r[i];s?n[s.name]=a:n.push(a)}return!0};var has=Object.prototype.hasOwnProperty,__isArray_161=Array.isArray,hexTable=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),compactQueue=function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(__isArray_161(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);e.obj[e.prop]=r}}},arrayToObject=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n},merge=function t(e,n,r){if(!n)return e;if("object"!=typeof n){if(__isArray_161(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(r&&(r.plainObjects||r.allowPrototypes)||!has.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var i=e;return __isArray_161(e)&&!__isArray_161(n)&&(i=arrayToObject(e,r)),__isArray_161(e)&&__isArray_161(n)?(n.forEach(function(n,i){if(has.call(e,i)){var o=e[i];o&&"object"==typeof o&&n&&"object"==typeof n?e[i]=t(o,n,r):e.push(n)}else e[i]=n}),e):Object.keys(n).reduce(function(e,i){var o=n[i];return has.call(e,i)?e[i]=t(e[i],o,r):e[i]=o,e},i)},assign=function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},decode=function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode=function(t,e,n){if(0===t.length)return t;var r=t;if("symbol"==typeof t?r=Symbol.prototype.toString.call(t):"string"!=typeof t&&(r=String(t)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var i="",o=0;o<r.length;++o){var s=r.charCodeAt(o);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=r.charAt(o):s<128?i+=hexTable[s]:s<2048?i+=hexTable[192|s>>6]+hexTable[128|63&s]:s<55296||s>=57344?i+=hexTable[224|s>>12]+hexTable[128|s>>6&63]+hexTable[128|63&s]:(o+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(o)),i+=hexTable[240|s>>18]+hexTable[128|s>>12&63]+hexTable[128|s>>6&63]+hexTable[128|63&s])}return i},compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],s=Object.keys(o),a=0;a<s.length;++a){var c=s[a],l=o[c];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(e.push({obj:o,prop:c}),n.push(l))}return compactQueue(e),t},isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},isBuffer=function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},combine=function(t,e){return[].concat(t,e)},_$utils_161={assign:assign,combine:combine,compact:compact,decode:decode,encode:encode,isBuffer:isBuffer,isRegExp:isRegExp,merge:merge},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},_$formats_157=_$utils_161.assign({default:Format.RFC3986,formatters:{RFC1738:function(t){return replace.call(t,percentTwenties,"+")},RFC3986:function(t){return String(t)}}},Format),__has_160=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},__isArray_160=Array.isArray,push=Array.prototype.push,pushToArray=function(t,e){push.apply(t,__isArray_160(e)?e:[e])},toISO=Date.prototype.toISOString,defaultFormat=_$formats_157.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:_$utils_161.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:_$formats_157.formatters[defaultFormat],indices:!1,serializeDate:function(t){return toISO.call(t)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t},stringify=function t(e,n,r,i,o,s,a,c,l,u,p,h,f){var d=e;if("function"==typeof a?d=a(n,d):d instanceof Date?d=u(d):"comma"===r&&__isArray_160(d)&&(d=d.join(",")),null===d){if(i)return s&&!h?s(n,defaults.encoder,f,"key"):n;d=""}if(isNonNullishPrimitive(d)||_$utils_161.isBuffer(d))return s?[p(h?n:s(n,defaults.encoder,f,"key"))+"="+p(s(d,defaults.encoder,f,"value"))]:[p(n)+"="+p(String(d))];var _,m=[];if(void 0===d)return m;if(__isArray_160(a))_=a;else{var y=Object.keys(d);_=c?y.sort(c):y}for(var g=0;g<_.length;++g){var v=_[g];o&&null===d[v]||(__isArray_160(d)?pushToArray(m,t(d[v],"function"==typeof r?r(n,v):n,r,i,o,s,a,c,l,u,p,h,f)):pushToArray(m,t(d[v],n+(l?"."+v:"["+v+"]"),r,i,o,s,a,c,l,u,p,h,f)))}return m},normalizeStringifyOptions=function(t){if(!t)return defaults;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||defaults.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=_$formats_157.default;if(void 0!==t.format){if(!__has_160.call(_$formats_157.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=_$formats_157.formatters[n],i=defaults.filter;return("function"==typeof t.filter||__isArray_160(t.filter))&&(i=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===t.allowDots?defaults.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===t.delimiter?defaults.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:defaults.encode,encoder:"function"==typeof t.encoder?t.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:defaults.encodeValuesOnly,filter:i,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:defaults.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:defaults.strictNullHandling}},_$stringify_160=function(t,e){var n,r=t,i=normalizeStringifyOptions(e);"function"==typeof i.filter?r=(0,i.filter)("",r):__isArray_160(i.filter)&&(n=i.filter);var o,s=[];if("object"!=typeof r||null===r)return"";o=e&&e.arrayFormat in arrayPrefixGenerators?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var a=arrayPrefixGenerators[o];n||(n=Object.keys(r)),i.sort&&n.sort(i.sort);for(var c=0;c<n.length;++c){var l=n[c];i.skipNulls&&null===r[l]||pushToArray(s,stringify(r[l],l,a,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var u=s.join(i.delimiter),p=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),u.length>0?p+u:""},__has_159=Object.prototype.hasOwnProperty,__isArray_159=Array.isArray,__defaults_159={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:_$utils_161.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(t,e){var n,r={},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,s=i.split(e.delimiter,o),a=-1,c=e.charset;if(e.charsetSentinel)for(n=0;n<s.length;++n)0===s[n].indexOf("utf8=")&&(s[n]===charsetSentinel?c="utf-8":s[n]===isoSentinel&&(c="iso-8859-1"),a=n,n=s.length);for(n=0;n<s.length;++n)if(n!==a){var l,u,p=s[n],h=p.indexOf("]="),f=-1===h?p.indexOf("="):h+1;-1===f?(l=e.decoder(p,__defaults_159.decoder,c,"key"),u=e.strictNullHandling?null:""):(l=e.decoder(p.slice(0,f),__defaults_159.decoder,c,"key"),u=e.decoder(p.slice(f+1),__defaults_159.decoder,c,"value")),u&&e.interpretNumericEntities&&"iso-8859-1"===c&&(u=interpretNumericEntities(u)),u&&"string"==typeof u&&e.comma&&u.indexOf(",")>-1&&(u=u.split(",")),p.indexOf("[]=")>-1&&(u=__isArray_159(u)?[u]:u),__has_159.call(r,l)?r[l]=_$utils_161.combine(r[l],u):r[l]=u}return r},parseObject=function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,s=t[i];if("[]"===s&&n.parseArrays)o=[].concat(r);else{o=n.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(a,10);n.parseArrays||""!==a?!isNaN(c)&&s!==a&&String(c)===a&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[])[c]=r:o[a]=r:o={0:r}}r=o}return r},parseKeys=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,o=n.depth>0&&/(\[[^[\]]*])/.exec(r),s=o?r.slice(0,o.index):r,a=[];if(s){if(!n.plainObjects&&__has_159.call(Object.prototype,s)&&!n.allowPrototypes)return;a.push(s)}for(var c=0;n.depth>0&&null!==(o=i.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&__has_159.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;a.push(o[1])}return o&&a.push("["+r.slice(o.index)+"]"),parseObject(a,e,n)}},normalizeParseOptions=function(t){if(!t)return __defaults_159;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?__defaults_159.charset:t.charset;return{allowDots:void 0===t.allowDots?__defaults_159.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:__defaults_159.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:__defaults_159.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:__defaults_159.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:__defaults_159.comma,decoder:"function"==typeof t.decoder?t.decoder:__defaults_159.decoder,delimiter:"string"==typeof t.delimiter||_$utils_161.isRegExp(t.delimiter)?t.delimiter:__defaults_159.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:__defaults_159.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:__defaults_159.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:__defaults_159.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:__defaults_159.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:__defaults_159.strictNullHandling}},_$parse_159=function(t,e){var n=normalizeParseOptions(e);if(""===t||null==t)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof t?parseValues(t,n):t,i=n.plainObjects?Object.create(null):{},o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],c=parseKeys(a,r[a],n);i=_$utils_161.merge(i,c,n)}return _$utils_161.compact(i)},_$lib_158={parse:_$parse_159},_$punycode_156={exports:{}};(function(t){!function(e){var n="object"==typeof _$punycode_156.exports&&_$punycode_156.exports&&!_$punycode_156.exports.nodeType&&_$punycode_156.exports,r=_$punycode_156&&!_$punycode_156.nodeType&&_$punycode_156,i="object"==typeof t&&t;i.global!==i&&i.window!==i&&i.self!==i||(e=i);var o,s,a=2147483647,c=36,l=1,u=26,p=38,h=700,f=72,d=128,_="-",m=/^xn--/,y=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=c-l,E=Math.floor,S=String.fromCharCode;function x(t){throw new RangeError(v[t])}function w(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function $(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+w((t=t.replace(g,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function C(t){return w(t,function(t){var e="";return t>65535&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=S(t)}).join("")}function O(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function D(t,e,n){var r=0;for(t=n?E(t/h):t>>1,t+=E(t/e);t>b*u>>1;r+=c)t=E(t/b);return E(r+(b+1)*t/(t+p))}function R(t){var e,n,r,i,o,s,p,h,m,y,g,v=[],b=t.length,S=0,w=d,$=f;for((n=t.lastIndexOf(_))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&x("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=S,s=1,p=c;i>=b&&x("invalid-input"),((h=(g=t.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:c)>=c||h>E((a-S)/s))&&x("overflow"),S+=h*s,!(h<(m=p<=$?l:p>=$+u?u:p-$));p+=c)s>E(a/(y=c-m))&&x("overflow"),s*=y;$=D(S-o,e=v.length+1,0==o),E(S/e)>a-w&&x("overflow"),w+=E(S/e),S%=e,v.splice(S++,0,w)}return C(v)}function P(t){var e,n,r,i,o,s,p,h,m,y,g,v,b,w,$,C=[];for(v=(t=T(t)).length,e=d,n=0,o=f,s=0;s<v;++s)(g=t[s])<128&&C.push(S(g));for(r=i=C.length,i&&C.push(_);r<v;){for(p=a,s=0;s<v;++s)(g=t[s])>=e&&g<p&&(p=g);for(p-e>E((a-n)/(b=r+1))&&x("overflow"),n+=(p-e)*b,e=p,s=0;s<v;++s)if((g=t[s])<e&&++n>a&&x("overflow"),g==e){for(h=n,m=c;!(h<(y=m<=o?l:m>=o+u?u:m-o));m+=c)$=h-y,w=c-y,C.push(S(O(y+$%w,0))),h=E($/w);C.push(S(O(h,0))),o=D(n,b,r==i),n=0,++r}++n,++e}return C.join("")}if(o={version:"1.4.1",ucs2:{decode:T,encode:C},decode:R,encode:P,toASCII:function(t){return $(t,function(t){return y.test(t)?"xn--"+P(t):t})},toUnicode:function(t){return $(t,function(t){return m.test(t)?R(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(n&&r)if(_$punycode_156.exports==n)r.exports=o;else for(s in o)o.hasOwnProperty(s)&&(n[s]=o[s]);else e.punycode=o}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$punycode_156=_$punycode_156.exports;var _$util_212={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var _$decode_162=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var l,u,p,h,f=t[c].replace(o,"%20"),d=f.indexOf(n);d>=0?(l=f.substr(0,d),u=f.substr(d+1)):(l=f,u=""),p=decodeURIComponent(l),h=decodeURIComponent(u),hasOwnProperty(i,p)?__isArray_162(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i},__isArray_162=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},stringifyPrimitive=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},_$encode_163=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?map(__objectKeys_163(t),function(r){var i=encodeURIComponent(stringifyPrimitive(r))+n;return __isArray_163(t[r])?map(t[r],function(t){return i+encodeURIComponent(stringifyPrimitive(t))}).join(e):i+encodeURIComponent(stringifyPrimitive(t[r]))}).join(e):r?encodeURIComponent(stringifyPrimitive(r))+n+encodeURIComponent(stringifyPrimitive(t)):""},__isArray_163=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function map(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var __objectKeys_163=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},_$querystringEs3_164={};_$querystringEs3_164.parse=_$decode_162,_$querystringEs3_164.stringify=_$encode_163;var _$url_211={};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}_$url_211.parse=urlParse,_$url_211.resolve=urlResolve;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(t,e,n){if(t&&_$util_212.isObject(t)&&t instanceof Url)return t;var r=new Url;return r.parse(t,e,n),r}function urlFormat(t){return _$util_212.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,e){return urlParse(t,!1,!0).resolve(e)}function urlResolveObject(t,e){return t?urlParse(t,!1,!0).resolveObject(e):e}Url.prototype.parse=function(t,e,n){if(!_$util_212.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(i);if(s=s.trim(),!n&&1===t.split("#").length){var a=simplePathPattern.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?_$querystringEs3_164.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=protocolPattern.exec(s);if(c){var l=(c=c[0]).toLowerCase();this.protocol=l,s=s.substr(c.length)}if(n||c||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===s.substr(0,2);!u||c&&hostlessProtocol[c]||(s=s.substr(2),this.slashes=!0)}if(!hostlessProtocol[c]&&(u||c&&!slashedProtocol[c])){for(var p,h,f=-1,d=0;d<hostEndingChars.length;d++){-1!==(_=s.indexOf(hostEndingChars[d]))&&(-1===f||_<f)&&(f=_)}-1!==(h=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(p=s.slice(0,h),s=s.slice(h+1),this.auth=decodeURIComponent(p)),f=-1;for(d=0;d<nonHostChars.length;d++){var _;-1!==(_=s.indexOf(nonHostChars[d]))&&(-1===f||_<f)&&(f=_)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),g=(d=0,y.length);d<g;d++){var v=y[d];if(v&&!v.match(hostnamePartPattern)){for(var b="",E=0,S=v.length;E<S;E++)v.charCodeAt(E)>127?b+="x":b+=v[E];if(!b.match(hostnamePartPattern)){var x=y.slice(0,d),w=y.slice(d+1),$=v.match(hostnamePartStart);$&&(x.push($[1]),w.unshift($[2])),w.length&&(s="/"+w.join(".")+s),this.hostname=x.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=_$punycode_156.toASCII(this.hostname));var T=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+T,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!unsafeProtocol[l])for(d=0,g=autoEscape.length;d<g;d++){var O=autoEscape[d];if(-1!==s.indexOf(O)){var D=encodeURIComponent(O);D===O&&(D=escape(O)),s=s.split(O).join(D)}}var R=s.indexOf("#");-1!==R&&(this.hash=s.substr(R),s=s.slice(0,R));var P=s.indexOf("?");if(-1!==P?(this.search=s.substr(P),this.query=s.substr(P+1),e&&(this.query=_$querystringEs3_164.parse(this.query)),s=s.slice(0,P)):e&&(this.search="",this.query={}),s&&(this.pathname=s),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var A=this.search||"";this.path=T+A}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&_$util_212.isObject(this.query)&&Object.keys(this.query).length&&(o=_$querystringEs3_164.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||slashedProtocol[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(_$util_212.isString(t)){var e=new Url;e.parse(t,!1,!0),t=e}for(var n=new Url,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];"protocol"!==c&&(n[c]=t[c])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])n.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",d=n.search||"";n.path=f+d}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=m||_||n.host&&t.pathname,g=y,v=n.pathname&&n.pathname.split("/")||[],b=(h=t.pathname&&t.pathname.split("/")||[],n.protocol&&!slashedProtocol[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===v[0]?v[0]=n.host:v.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),y=y&&(""===h[0]||""===v[0])),m)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,v=h;else if(h.length)v||(v=[]),v.pop(),v=v.concat(h),n.search=t.search,n.query=t.query;else if(!_$util_212.isNullOrUndefined(t.search)){if(b)n.hostname=n.host=v.shift(),($=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=$.shift(),n.host=n.hostname=$.shift());return n.search=t.search,n.query=t.query,_$util_212.isNull(n.pathname)&&_$util_212.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!v.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=v.slice(-1)[0],S=(n.host||t.host||v.length>1)&&("."===E||".."===E)||""===E,x=0,w=v.length;w>=0;w--)"."===(E=v[w])?v.splice(w,1):".."===E?(v.splice(w,1),x++):x&&(v.splice(w,1),x--);if(!y&&!g)for(;x--;x)v.unshift("..");!y||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),S&&"/"!==v.join("/").substr(-1)&&v.push("");var $,T=""===v[0]||v[0]&&"/"===v[0].charAt(0);b&&(n.hostname=n.host=T?"":v.length?v.shift():"",($=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=$.shift(),n.host=n.hostname=$.shift()));return(y=y||n.host&&v.length)&&!T&&v.unshift(""),v.length?n.pathname=v.join("/"):(n.pathname=null,n.path=null),_$util_212.isNull(n.pathname)&&_$util_212.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},Url.prototype.parseHost=function(){var t=this.host,e=portPattern.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var _$router_208={render:render,isTransitional:isTransitional,mapRoute:mapRoute};function isTransitional(t){return t.hasOwnProperty("from")&&t.hasOwnProperty("to")}function mapRoute(t,e){var n=~(r=e.url.indexOf("?"))?e.url.slice(r):"",r=0;return t.replace(/\/(?:(?:\:([^?\/:*(]+)(?:\([^)]+\))?)|\*)(\?)?/g,function(t,n,i){var o=n?e[n]:e[r++];return i&&null==o?"":"/"+encodeURIComponent(o)})+n}function render(t,e,n){var r=new RenderReq(t.app.page,t.routes,e,n);r.routeTransitional(0,function(){r.page=t.page(),r.routeQueue(0,function(){r.cancel()})})}function RenderReq(t,e,n,r){this.page=t,this.options=n,this.e=r,this.setUrl(n.url.replace(/#.*/,""));var i=_$url_211.parse(this.url).query;this.query=i?_$lib_158.parse(i):{},this.method=n.method,this.body=n.body||{},this.setPrevious(n.previous),this.transitional=e.transitional[this.method],this.queue=e.queue[this.method],this.app=e.app}RenderReq.prototype.cancel=function(){var t=this.options;this.e||t.noNavigate||(t.form?(t.form.setAttribute("data-router-ignore",""),t.form.submit()):window.location.assign(t.url))},RenderReq.prototype.setUrl=function(t){this.url=t,this.path=t.replace(/\?.*/,"")},RenderReq.prototype.setPrevious=function(t){this.previous=t,this.previousPath=t&&t.replace(/\?.*/,"")},RenderReq.prototype.routeTransitional=function(t,e){var n;for(t||(t=0);n=this.transitional[t++];){if(n.to.match(this.path)&&n.from.match(this.previousPath)){var r=this,i=this.routeParams(n.to);return void this.onMatch(n.to,i,function(n){if(n)return r.cancel();r.routeTransitional(t,e)},o)}function o(){}}e()},RenderReq.prototype.routeQueue=function(t,e){var n;for(t||(t=0);n=this.queue[t++];)if(n.match(this.path)){var r=this,i=this.routeParams(n);return void this.onMatch(n,i,function(n){if(n)return r.cancel();r.routeQueue(t,e)})}e()},RenderReq.prototype.onMatch=function(t,e,n,r){if(!this.page)return n();this.e&&(this.e.preventDefault(),this.e=null),this.page.params=e,t.isTransitional?this.app.onRoute(t.callbacks,this.page,n,r):this.app.onRoute(t.callbacks,this.page,n)},RenderReq.prototype.routeParams=function(t){var e=t.params,n=e.slice();for(var r in e)n[r]=e[r];return n.previous=this.previous,n.url=this.url,n.body=this.body,n.query=this.query,n.method=this.method,n};var parseUrl=_$url_211.parse,resolveUrl=_$url_211.resolve,currentPath=window.location.pathname+window.location.search;window.history.replaceState&&window.history.replaceState({$render:!0,$method:"get"},null,window.location.href);var _$History_206=History;function History(t,e){this.app=t,this.routes=e,window.history.pushState?addListeners(this):(this.push=function(t){window.location.assign(t)},this.replace=function(t){window.location.replace(t)})}function routePath(t){var e=parseUrl(t);return e&&e.protocol===window.location.protocol&&e.host===window.location.host&&e.pathname+(e.search||"")}function renderOptions(t,e){if(t&&"submit"===t.type){for(var n,r=t.target,i=r.elements,o=[],s=0,a=i.length;s<a;s++){var c=(n=i[s]).name;if(c){var l=n.value;if(o.push(encodeURIComponent(c)+"="+encodeURIComponent(l)),"_method"===c){var u=l.toLowerCase();"delete"===u&&(u="del")}}}if(o=o.join("&"),"post"===r.method.toLowerCase())var p=u||"post",h=_$lib_158.parse(o);else p="get",e+="?"+o}else p="get";return{method:p,url:e,previous:window.location.pathname+window.location.search,body:h,form:r,link:t&&t._tracksLink}}function addListeners(t){document.addEventListener("click",function(e){var n=e.target;if(!e.metaKey&&1===e.which&&!e.defaultPrevented)for(;n;){var r=n.href;if(r){if(n.hasAttribute&&n.hasAttribute("data-router-ignore"))return;if(n.target&&"_self"!==n.target)return;var i=r.indexOf("#");if(~i&&r.slice(0,i)===window.location.href.replace(/#.*/,""))return;return e._tracksLink=n,void t.push(r,!0,null,e)}n=n.parentNode}},!0),document.addEventListener("submit",function(e){var n=e.target;if(!e.defaultPrevented&&"form"===n.tagName.toLowerCase()&&!("multipart/form-data"===n.enctype||n.hasAttribute&&n.hasAttribute("data-router-ignore"))){var r=n.action||window.location.href;t.push(r,!0,null,e)}},!1),window.addEventListener("popstate",function(e){if(t.app.page){var n=currentPath,r=e.state,i={previous:n,url:currentPath=window.location.pathname+window.location.search};if(r){if(!r.$render)return;return i.method=r.$method,_$router_208.render(t,i)}var o,s,a=window.location.href,c=a.indexOf("#");~c&&currentPath!==n&&(i.method="get",_$router_208.render(t,i),s=a.slice(c+1),(o=document.getElementById(s)||document.getElementsByName(s)[0])&&o.scrollIntoView())}},!0)}History.prototype.push=function(t,e,n,r){this._update("pushState",t,e,n,r)},History.prototype.replace=function(t,e,n,r){this._update("replaceState",t,e,n,r)},History.prototype.refresh=function(){var t=routePath(window.location.href);_$router_208.render(this,{url:t,method:"get"})},History.prototype.back=function(){window.history.back()},History.prototype.forward=function(){window.history.forward()},History.prototype.go=function(t){window.history.go(t)},History.prototype._update=function(t,e,n,r,i){var o=routePath(resolveUrl(window.location.href,e));if(o){null==n&&(n=!0),null==r&&(r={});var s=renderOptions(i,o);r.$render=!0,r.$method=s.method,window.history[t](r,null,s.url),currentPath=window.location.pathname+window.location.search,n&&_$router_208.render(this,s,i)}},History.prototype.page=function(){var t=this.app.createPage(),e=this;return t.redirect=function(t){if("back"===t)return e.back();"home"===t&&(t="\\"),e.replace(t,!0)},t};var _$browser_207={},__router_207=_$browser_207=_$router_208;function setup(t){var e={queue:{},transitional:{},app:t};t.history=new _$History_206(t,e),["get","post","put","del","enter","exit"].forEach(function(n){var r=e.queue[n]=[],i=e.transitional[n]=[];t[n]=function(e,o){if(Array.isArray(e))return e.forEach(function(e){t[n](e,o)}),t;if(__router_207.isTransitional(e)){var s=e.from,a=e.to,c=e.forward||o&&o.forward||o,l=e.back||o&&o.back,u=new _$Route_209(n,s,l),p=new _$Route_209(n,a,c);return u.isTransitional=!0,p.isTransitional=!0,i.push({from:u,to:p}),l&&i.push({from:p,to:u}),t}return r.push(new _$Route_209(n,e,o)),t}})}__router_207.setup=setup;var _$contexts_132={};function __noop_132(){}function ContextMeta(){this.addBinding=__noop_132,this.removeBinding=__noop_132,this.removeNode=__noop_132,this.addItemContext=__noop_132,this.removeItemContext=__noop_132,this.views=null,this.idNamespace="",this.idCount=0,this.pending=[],this.pauseCount=0}function __Context_132(t,e,n,r,i){this.meta=t,this.controller=e,this.parent=n,this.unbound=r,this.expression=i,this.alias=i&&i.meta&&i.meta.as,this.keyAlias=i&&i.meta&&i.meta.keyAs,this.item=null,this.view=null,this.attributes=null,this.hooks=null,this.initHooks=null,this.closure=null,this._id=null}_$contexts_132.ContextMeta=ContextMeta,_$contexts_132.Context=__Context_132,__Context_132.prototype.id=function(){var t=++this.meta.idCount;return this.meta.idNamespace+"_"+t.toString(36)},__Context_132.prototype.addBinding=function(t){if(!t.itemFor){var e=t.template.expression;(e?e.isUnbound(this):this.unbound)||e&&e.meta&&"with"===e.meta.blockType||this.meta.addBinding(t)}},__Context_132.prototype.removeBinding=function(t){this.meta.removeBinding(t)},__Context_132.prototype.removeNode=function(t){this.meta.removeNode(t)},__Context_132.prototype.child=function(t){var e=t.meta&&t.meta.blockType,n="unbound"===e||"bound"!==e&&this.unbound;return new __Context_132(this.meta,this.controller,this,n,t)},__Context_132.prototype.componentChild=function(t){return new __Context_132(this.meta,t,this,this.unbound)},__Context_132.prototype.eachChild=function(t,e){var n=new __Context_132(this.meta,this.controller,this,this.unbound,t);return n.item=e,this.meta.addItemContext(n),n},__Context_132.prototype.viewChild=function(t,e,n,r){var i=new __Context_132(this.meta,this.controller,this,this.unbound);return i.view=t,i.attributes=e,i.hooks=n,i.initHooks=r,i},__Context_132.prototype.closureChild=function(t){var e=new __Context_132(this.meta,this.controller,this,this.unbound);return e.closure=t,e},__Context_132.prototype.forRelative=function(t){for(var e=this;e&&e.expression===t||e.view;)e=e.parent;return e},__Context_132.prototype.forAlias=function(t){for(var e=this;e;){if(e.alias===t||e.keyAlias===t)return e;e=e.parent}},__Context_132.prototype.forAttribute=function(t){for(var e=this;e;){if(e.view){var n=e.attributes;if(!n)return;if(n.hasOwnProperty(t))return e;if(!n.inherit&&!n.extend)return}e=e.parent}},__Context_132.prototype.forViewParent=function(){for(var t=this;t;){if(t.closure)return t.closure.parent;if(t.view)return t.parent;t=t.parent}},__Context_132.prototype.getView=function(){for(var t=this;t;){if(t.view)return t.view;t=t.parent}},__Context_132.prototype.get=function(){var t=this.expression?this.expression.get(this):this.controller.model.data;return null!=this.item?t&&t[this.item]:t},__Context_132.prototype.pause=function(){this.meta.pauseCount++},__Context_132.prototype.unpause=function(){--this.meta.pauseCount||this.flush()},__Context_132.prototype.flush=function(){var t=this.meta.pending,e=t.length;if(e){this.meta.pending=[];for(var n=0;n<e;n++)t[n]()}},__Context_132.prototype.queue=function(t){this.meta.pending.push(t)};var _$operatorFns_134={get:{"!U":function(t){return!t},"-U":function(t){return-t},"+U":function(t){return+t},"~U":function(t){return~t},typeofU:function(t){return typeof t},"||":function(t,e){return t||e},"&&":function(t,e){return t&&e},"|":function(t,e){return t|e},"^":function(t,e){return t^e},"&":function(t,e){return t&e},"==":function(t,e){return t==e},"!=":function(t,e){return t!=e},"===":function(t,e){return t===e},"!==":function(t,e){return t!==e},"<":function(t,e){return t<e},">":function(t,e){return t>e},"<=":function(t,e){return t<=e},">=":function(t,e){return t>=e},instanceof:function(t,e){return t instanceof e},in:function(t,e){return t in e},"<<":function(t,e){return t<<e},">>":function(t,e){return t>>e},">>>":function(t,e){return t>>>e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"?":function(t,e,n){return t?e:n},",":function(){return arguments[arguments.length-1]}},set:{"!U":function(t){return[!t]},"-U":function(t){return[-t]},"==":function(t,e,n){if(t)return[n]},"===":function(t,e,n){if(t)return[n]},in:function(t,e,n){return n[e]=!0,{1:n}},"+":function(t,e,n){return[t-n]},"-":function(t,e,n){return[t+n]},"*":function(t,e,n){return[t/n]},"/":function(t,e,n){return[t*n]}}},_$saddle_190={},serializeObject=_$serializeObject_191({}),BOOLEAN_PROPERTIES={checked:"checked",disabled:"disabled",readonly:"readOnly",selected:"selected"},INTEGER_PROPERTIES={colspan:"colSpan",maxlength:"maxLength",rowspan:"rowSpan",tabindex:"tabIndex"},STRING_PROPERTIES={cellpadding:"cellPadding",cellspacing:"cellSpacing",class:"className",contenteditable:"contentEditable",enctype:"encoding",for:"htmlFor",frameborder:"frameBorder",id:"id",title:"title",type:"type",usemap:"useMap",value:"value"},UPDATE_PROPERTIES={};mergeInto(BOOLEAN_PROPERTIES,UPDATE_PROPERTIES),mergeInto(INTEGER_PROPERTIES,UPDATE_PROPERTIES),mergeInto(STRING_PROPERTIES,UPDATE_PROPERTIES);var CREATE_PROPERTIES={};mergeInto(UPDATE_PROPERTIES,CREATE_PROPERTIES),CREATE_PROPERTIES.checked="defaultChecked",CREATE_PROPERTIES.value="defaultValue";var VOID_ELEMENTS={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},NAMESPACE_URIS={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"};function Template(t,e){this.content=t,this.source=e}function Doctype(t,e,n){this.name=t,this.publicId=e,this.systemId=n}function Text(t){this.data=t,this.escaped=escapeHtml(t)}function DynamicText(t){this.expression=t,this.unbound=!1}function attachText(t,e,n,r,i){if(!e){var o=document.createTextNode(n);return t.appendChild(o),void addNodeBinding(r,i,o)}if(3===e.nodeType){if(e.data===n)return addNodeBinding(r,i,e),e.nextSibling;var s=splitData(e,(n=normalizeLineBreaks(n)).length);if(e.data!==n)throw attachError(t,e);return addNodeBinding(r,i,e),s}if(""===n){o=document.createTextNode("");return t.insertBefore(o,e||null),addNodeBinding(r,i,o),e}throw attachError(t,e)}function Comment(t,e){this.data=t,this.hooks=e}function DynamicComment(t,e){this.expression=t,this.hooks=e}function attachComment(t,e,n,r,i){if(!e||8!==e.nodeType){var o=document.createComment(n);return t.insertBefore(o,e||null),addNodeBinding(r,i,o),e}if(e.data===n)return addNodeBinding(r,i,e),e.nextSibling;throw attachError(t,e)}function addNodeBinding(t,e,n){t.expression&&!t.unbound&&e.addBinding(new NodeBinding(t,e,n)),emitHooks(t.hooks,e,n)}function Html(t){this.data=t}function DynamicHtml(t){this.expression=t,this.ending="/"+t}function createHtmlFragment(t,e){if(t&&1===t.nodeType)return(r=document.createRange()).selectNodeContents(t),r.createContextualFragment(e);var n=document.createElement("div"),r=document.createRange();return n.innerHTML=e,r.selectNodeContents(n),r.extractContents()}function attachHtml(t,e,n){for(var r=0,i=createHtmlFragment(t,n).childNodes.length;r<i;r++){if(!e)throw attachError(t,e);e=e.nextSibling}return e}function Attribute(t,e){this.data=t,this.ns=e}function DynamicAttribute(t,e){this.expression=t,this.ns=e,this.elementNs=null}function getUnescapedValue(t,e){for(var n=t.get(e,!0);n instanceof Template;)n=n.get(e,!0);return n}function Element(t,e,n,r,i,o,s){this.tagName=t,this.attributes=e,this.content=n,this.hooks=r,this.selfClosing=i,this.notClosed=o,this.ns=s,this.endTag=getEndTag(t,i,o),this.startClose=getStartClose(i);var a=t&&t.toLowerCase();this.unescapedContent="script"===a||"style"===a,this.bindContentToValue="textarea"===a}function DynamicElement(t,e,n,r,i,o,s){this.tagName=t,this.attributes=e,this.content=n,this.hooks=r,this.selfClosing=i,this.notClosed=o,this.ns=s,this.startClose=getStartClose(i),this.unescapedContent=!1}function getStartClose(t){return t?" />":">"}function getEndTag(t,e,n){var r=t&&t.toLowerCase();return VOID_ELEMENTS[r]||e||n?"":"</"+t+">"}function getAttributeValue(t,e){var n=UPDATE_PROPERTIES[e];return n?t[n]:t.getAttribute(e)}function emitHooks(t,e,n){t&&e.queue(function(){for(var r=0,i=t.length;r<i;r++)t[r].emit(e,n)})}function Block(t,e){this.expression=t,this.ending="/"+t,this.content=e}function ConditionalBlock(t,e){this.expressions=t,this.beginning=t.join("; "),this.ending="/"+this.beginning,this.contents=e}function EachBlock(t,e,n){this.expression=t,this.ending="/"+t,this.content=e,this.elseContent=n}function indexStartNode(t,e){for(var n=t.start,r=0;n=n.nextSibling;){if(n===t.end)return n;if(n.$bindItemStart&&n.$bindItemStart.itemFor===t.start){if(e===r)return n;r++}}}function updateRange(t,e,n,r,i,o,s){e?(e.start=r,e.end=i,e.condition=s,setNodeBounds(e,r,o)):t.addBinding(new RangeBinding(n,t,r,i,o,s))}function setNodeBounds(t,e,n){setNodeProperty(e,n?"$bindItemStart":"$bindStart",t)}function appendContent(t,e,n){for(var r=0,i=e.length;r<i;r++)e[r].appendTo(t,n)}function attachContent(t,e,n,r){for(var i=0,o=n.length;i<o;i++){for(;e&&e.hasAttribute&&e.hasAttribute("data-no-attach");)e=e.nextSibling;e=n[i].attachTo(t,e,r)}return e}function contentHtml(t,e,n){for(var r="",i=0,o=t.length;i<o;i++)r+=t[i].get(e,n);return r}function replaceRange(t,e,n,r,i,o){var s=e.parentNode;if(e.$bindItemStart&&r.firstChild&&(setNodeProperty(r.firstChild,"$bindItemStart",e.$bindItemStart),e.$bindItemStart.start=r.firstChild),e===n)return s.replaceChild(r,e),void emitRemoved(t,e,i);for(var a,c=o?e.nextSibling:e;c;){if(a=c.nextSibling,emitRemoved(t,c,i),o&&c===n){a=n;break}if(s.removeChild(c),c===n)break;c=a}s.insertBefore(r,a||null)}function emitRemoved(t,e,n){t.removeNode(e),emitRemovedBinding(t,n,e,"$bindNode"),emitRemovedBinding(t,n,e,"$bindStart"),emitRemovedBinding(t,n,e,"$bindItemStart");var r=e.$bindAttributes;if(r)for(var i in e.$bindAttributes=null,r)t.removeBinding(r[i]);for(e=e.firstChild;e;e=e.nextSibling)emitRemoved(t,e,n)}function emitRemovedBinding(t,e,n,r){var i=n[r];i&&(n[r]=null,i!==e&&t.removeBinding(i))}function attachError(t,e){return"undefined"!=typeof console&&console.error("Attach failed for",e,"within",t),new Error("Attaching bindings failed, because HTML structure does not match client rendering.")}function Binding(){this.meta=null}function NodeBinding(t,e,n){this.template=t,this.context=e,this.node=n,this.meta=null,setNodeProperty(n,"$bindNode",this)}function AttributeBindingsMap(){}function AttributeBinding(t,e,n,r){this.template=t,this.context=e,this.element=n,this.name=r,this.meta=null,(n.$bindAttributes||(n.$bindAttributes=new AttributeBindingsMap))[r]=this}function RangeBinding(t,e,n,r,i,o){this.template=t,this.context=e,this.start=n,this.end=r,this.itemFor=i,this.condition=o,this.meta=null,setNodeBounds(this,n,i)}function __noop_190(){}function mergeInto(t,e){for(var n in t)e[n]=t[n]}function escapeHtml(t){return(t+="").replace(/[&<]/g,function(t){return"&"===t?"&amp;":"&lt;"})}function escapeAttribute(t){return(t+="").replace(/[&"]/g,function(t){return"&"===t?"&amp;":"&quot;"})}function equalConditions(t,e){return t===e||t instanceof Template&&t.equals(e)}function splitData(t,e){var n=t.cloneNode(!1);return n.deleteData(0,e),t.deleteData(e,t.length-e),t.parentNode.insertBefore(n,t.nextSibling||null),n}function setNodeProperty(t,e,n){return t[e]=n}function normalizeLineBreaks(t){return t}_$saddle_190.CREATE_PROPERTIES=CREATE_PROPERTIES,_$saddle_190.BOOLEAN_PROPERTIES=BOOLEAN_PROPERTIES,_$saddle_190.INTEGER_PROPERTIES=INTEGER_PROPERTIES,_$saddle_190.STRING_PROPERTIES=STRING_PROPERTIES,_$saddle_190.UPDATE_PROPERTIES=UPDATE_PROPERTIES,_$saddle_190.VOID_ELEMENTS=VOID_ELEMENTS,_$saddle_190.NAMESPACE_URIS=NAMESPACE_URIS,_$saddle_190.Template=Template,_$saddle_190.Doctype=Doctype,_$saddle_190.Text=Text,_$saddle_190.DynamicText=DynamicText,_$saddle_190.Comment=Comment,_$saddle_190.DynamicComment=DynamicComment,_$saddle_190.Html=Html,_$saddle_190.DynamicHtml=DynamicHtml,_$saddle_190.Element=Element,_$saddle_190.DynamicElement=DynamicElement,_$saddle_190.Block=Block,_$saddle_190.ConditionalBlock=ConditionalBlock,_$saddle_190.EachBlock=EachBlock,_$saddle_190.Attribute=Attribute,_$saddle_190.DynamicAttribute=DynamicAttribute,_$saddle_190.Binding=Binding,_$saddle_190.NodeBinding=NodeBinding,_$saddle_190.AttributeBinding=AttributeBinding,_$saddle_190.RangeBinding=RangeBinding,Template.prototype.toString=function(){return this.source},Template.prototype.get=function(t,e){return contentHtml(this.content,t,e)},Template.prototype.getFragment=function(t,e){var n=document.createDocumentFragment();return this.appendTo(n,t,e),n},Template.prototype.appendTo=function(t,e){e.pause(),appendContent(t,this.content,e),e.unpause()},Template.prototype.attachTo=function(t,e,n){n.pause();e=attachContent(t,e,this.content,n);return n.unpause(),e},Template.prototype.update=function(){},Template.prototype.stringify=function(t){return null==t?"":t+""},Template.prototype.equals=function(t){return this===t},Template.prototype.module="templates",Template.prototype.type="Template",Template.prototype.serialize=function(){return serializeObject.instance(this,this.content,this.source)},Doctype.prototype=Object.create(Template.prototype),Doctype.prototype.constructor=Doctype,Doctype.prototype.get=function(){var t=this.publicId?' PUBLIC "'+this.publicId+'"':"",e=this.systemId?this.publicId?' "'+this.systemId+'"':' SYSTEM "'+this.systemId+'"':"";return"<!DOCTYPE "+this.name+t+e+">"},Doctype.prototype.appendTo=function(){},Doctype.prototype.attachTo=function(t,e){if(!e||10!==e.nodeType)throw attachError(t,e);return e.nextSibling},Doctype.prototype.type="Doctype",Doctype.prototype.serialize=function(){return serializeObject.instance(this,this.name,this.publicId,this.systemId)},Text.prototype=Object.create(Template.prototype),Text.prototype.constructor=Text,Text.prototype.get=function(t,e){return e?this.data:this.escaped},Text.prototype.appendTo=function(t){var e=document.createTextNode(this.data);t.appendChild(e)},Text.prototype.attachTo=function(t,e){return attachText(t,e,this.data,this)},Text.prototype.type="Text",Text.prototype.serialize=function(){return serializeObject.instance(this,this.data)},DynamicText.prototype=Object.create(Template.prototype),DynamicText.prototype.constructor=DynamicText,DynamicText.prototype.get=function(t,e){var n=this.expression.get(t);if(n instanceof Template){do{n=n.get(t,e)}while(n instanceof Template);return n}var r=this.stringify(n);return e?r:escapeHtml(r)},DynamicText.prototype.appendTo=function(t,e,n){var r=this.expression.get(e);if(r instanceof Template){var i=document.createComment(this.expression),o=document.createComment("/"+this.expression),s=this.getCondition(e);return t.appendChild(i),r.appendTo(t,e),t.appendChild(o),void updateRange(e,n,this,i,o,null,s)}var a=this.stringify(r),c=document.createTextNode(a);t.appendChild(c),addNodeBinding(this,e,c)},DynamicText.prototype.attachTo=function(t,e,n){var r=this.expression.get(n);if(r instanceof Template){var i=document.createComment(this.expression),o=document.createComment("/"+this.expression),s=this.getCondition(n);return t.insertBefore(i,e||null),e=r.attachTo(t,e,n),t.insertBefore(o,e||null),updateRange(n,null,this,i,o,null,s),e}return attachText(t,e,this.stringify(r),this,n)},DynamicText.prototype.update=function(t,e){if(e instanceof RangeBinding)this._blockUpdate(t,e);else{var n=this.expression.get(t);if(n instanceof Template){var r=e.node;if(!r.parentNode)return;replaceRange(t,r,r,this.getFragment(t),e)}else e.node.data=this.stringify(n)}},DynamicText.prototype.getCondition=function(t){return this.expression.get(t)},DynamicText.prototype.type="DynamicText",DynamicText.prototype.serialize=function(){return serializeObject.instance(this,this.expression)},Comment.prototype=Object.create(Template.prototype),Comment.prototype.constructor=Comment,Comment.prototype.get=function(){return"\x3c!--"+this.data+"--\x3e"},Comment.prototype.appendTo=function(t,e){var n=document.createComment(this.data);t.appendChild(n),emitHooks(this.hooks,e,n)},Comment.prototype.attachTo=function(t,e,n){return attachComment(t,e,this.data,this,n)},Comment.prototype.type="Comment",Comment.prototype.serialize=function(){return serializeObject.instance(this,this.data,this.hooks)},DynamicComment.prototype=Object.create(Template.prototype),DynamicComment.prototype.constructor=DynamicComment,DynamicComment.prototype.get=function(t){var e=getUnescapedValue(this.expression,t);return"\x3c!--"+this.stringify(e)+"--\x3e"},DynamicComment.prototype.appendTo=function(t,e){var n=getUnescapedValue(this.expression,e),r=this.stringify(n),i=document.createComment(r);t.appendChild(i),addNodeBinding(this,e,i)},DynamicComment.prototype.attachTo=function(t,e,n){var r=getUnescapedValue(this.expression,n);return attachComment(t,e,this.stringify(r),this,n)},DynamicComment.prototype.update=function(t,e){var n=getUnescapedValue(this.expression,t);e.node.data=this.stringify(n)},DynamicComment.prototype.type="DynamicComment",DynamicComment.prototype.serialize=function(){return serializeObject.instance(this,this.expression,this.hooks)},Html.prototype=Object.create(Template.prototype),Html.prototype.constructor=Html,Html.prototype.get=function(){return this.data},Html.prototype.appendTo=function(t){var e=createHtmlFragment(t,this.data);t.appendChild(e)},Html.prototype.attachTo=function(t,e){return attachHtml(t,e,this.data)},Html.prototype.type="Html",Html.prototype.serialize=function(){return serializeObject.instance(this,this.data)},DynamicHtml.prototype=Object.create(Template.prototype),DynamicHtml.prototype.constructor=DynamicHtml,DynamicHtml.prototype.get=function(t){var e=getUnescapedValue(this.expression,t);return this.stringify(e)},DynamicHtml.prototype.appendTo=function(t,e,n){var r=document.createComment(this.expression),i=document.createComment(this.ending),o=getUnescapedValue(this.expression,e),s=createHtmlFragment(t,this.stringify(o));t.appendChild(r),t.appendChild(s),t.appendChild(i),updateRange(e,n,this,r,i)},DynamicHtml.prototype.attachTo=function(t,e,n){var r=document.createComment(this.expression),i=document.createComment(this.ending),o=getUnescapedValue(this.expression,n),s=this.stringify(o);return t.insertBefore(r,e||null),e=attachHtml(t,e,s),t.insertBefore(i,e||null),updateRange(n,null,this,r,i),e},DynamicHtml.prototype.update=function(t,e){var n=e.start.parentNode;if(n){var r=e.start,i=e.end,o=getUnescapedValue(this.expression,t);replaceRange(t,r,i,createHtmlFragment(n,this.stringify(o)),e,!0)}},DynamicHtml.prototype.type="DynamicHtml",DynamicHtml.prototype.serialize=function(){return serializeObject.instance(this,this.expression)},Attribute.prototype=Object.create(Template.prototype),Attribute.prototype.constructor=Attribute,Attribute.prototype.get=Attribute.prototype.getBound=function(t){return this.data},Attribute.prototype.type="Attribute",Attribute.prototype.serialize=function(){return serializeObject.instance(this,this.data,this.ns)},DynamicAttribute.prototype=Object.create(Attribute.prototype),DynamicAttribute.prototype.constructor=DynamicAttribute,DynamicAttribute.prototype.get=function(t){return getUnescapedValue(this.expression,t)},DynamicAttribute.prototype.getBound=function(t,e,n,r){return this.elementNs=r,t.addBinding(new AttributeBinding(this,t,e,n)),getUnescapedValue(this.expression,t)},DynamicAttribute.prototype.update=function(t,e){var n=getUnescapedValue(this.expression,t),r=e.element,i=!this.elementNs&&UPDATE_PROPERTIES[e.name];if(i){var o=STRING_PROPERTIES[e.name]?this.stringify(n):n;if(r[i]===o)return;r[i]=o}else!1!==n&&null!=n?(!0===n&&(n=e.name),this.ns?r.setAttributeNS(this.ns,e.name,n):r.setAttribute(e.name,n)):this.ns?r.removeAttributeNS(this.ns,e.name):r.removeAttribute(e.name)},DynamicAttribute.prototype.type="DynamicAttribute",DynamicAttribute.prototype.serialize=function(){return serializeObject.instance(this,this.expression,this.ns)},Element.prototype=Object.create(Template.prototype),Element.prototype.constructor=Element,Element.prototype.getTagName=function(){return this.tagName},Element.prototype.getEndTag=function(){return this.endTag},Element.prototype.get=function(t){var e=this.getTagName(t),n=this.getEndTag(e),r=[e];for(var i in this.attributes){var o=this.attributes[i].get(t);!0===o?r.push(i):!1!==o&&null!=o&&r.push(i+'="'+escapeAttribute(o)+'"')}var s="<"+r.join(" ")+this.startClose;return this.content?s+contentHtml(this.content,t,this.unescapedContent)+n:s+n},Element.prototype.appendTo=function(t,e){var n=this.getTagName(e),r=this.ns?document.createElementNS(this.ns,n):document.createElement(n);for(var i in this.attributes){var o=this.attributes[i],s=o.getBound(e,r,i,this.ns);if(!1!==s&&null!=s){var a=!this.ns&&CREATE_PROPERTIES[i];a?r[a]=s:(!0===s&&(s=i),o.ns?r.setAttributeNS(o.ns,i,s):r.setAttribute(i,s))}}this.content&&(this._bindContent(e,r),appendContent(r,this.content,e)),t.appendChild(r),emitHooks(this.hooks,e,r)},Element.prototype.attachTo=function(t,e,n){var r=this.getTagName(n);if(!e||1!==e.nodeType||e.tagName.toLowerCase()!==r.toLowerCase())throw attachError(t,e);for(var i in this.attributes)this.attributes[i].getBound(n,e,i,this.ns);return this.content&&(this._bindContent(n,e),attachContent(e,e.firstChild,this.content,n)),emitHooks(this.hooks,n,e),e.nextSibling},Element.prototype._bindContent=function(t,e){var n=this.bindContentToValue&&1===this.content.length&&this.content[0];if(n instanceof DynamicText){n.unbound=!0;var r=new DynamicAttribute(n.expression);t.addBinding(new AttributeBinding(r,t,e,"value"))}},Element.prototype.type="Element",Element.prototype.serialize=function(){return serializeObject.instance(this,this.tagName,this.attributes,this.content,this.hooks,this.selfClosing,this.notClosed,this.ns)},DynamicElement.prototype=Object.create(Element.prototype),DynamicElement.prototype.constructor=DynamicElement,DynamicElement.prototype.getTagName=function(t){return getUnescapedValue(this.tagName,t)},DynamicElement.prototype.getEndTag=function(t){return getEndTag(t,this.selfClosing,this.notClosed)},DynamicElement.prototype.type="DynamicElement",Block.prototype=Object.create(Template.prototype),Block.prototype.constructor=Block,Block.prototype.get=function(t,e){var n=t.child(this.expression);return contentHtml(this.content,n,e)},Block.prototype.appendTo=function(t,e,n){var r=e.child(this.expression),i=document.createComment(this.expression),o=document.createComment(this.ending),s=this.getCondition(e);t.appendChild(i),appendContent(t,this.content,r),t.appendChild(o),updateRange(e,n,this,i,o,null,s)},Block.prototype.attachTo=function(t,e,n){var r=n.child(this.expression),i=document.createComment(this.expression),o=document.createComment(this.ending),s=this.getCondition(n);return t.insertBefore(i,e||null),e=attachContent(t,e,this.content,r),t.insertBefore(o,e||null),updateRange(n,null,this,i,o,null,s),e},Block.prototype.type="Block",Block.prototype.serialize=function(){return serializeObject.instance(this,this.expression,this.content)},Block.prototype.update=function(t,e){if(e.start.parentNode){var n=this.getCondition(t);if(!equalConditions(n,e.condition))e.condition=n,replaceRange(t,e.start,e.end,this.getFragment(t,e),e)}},Block.prototype.getCondition=function(t){var e=this.expression.get(t);return"object"==typeof e?NaN:e},DynamicText.prototype._blockUpdate=Block.prototype.update,ConditionalBlock.prototype=Object.create(Block.prototype),ConditionalBlock.prototype.constructor=ConditionalBlock,ConditionalBlock.prototype.get=function(t,e){var n=this.getCondition(t);if(null==n)return"";var r=this.expressions[n],i=t.child(r);return contentHtml(this.contents[n],i,e)},ConditionalBlock.prototype.appendTo=function(t,e,n){var r=document.createComment(this.beginning),i=document.createComment(this.ending);t.appendChild(r);var o=this.getCondition(e);if(null!=o){var s=this.expressions[o],a=e.child(s);appendContent(t,this.contents[o],a)}t.appendChild(i),updateRange(e,n,this,r,i,null,o)},ConditionalBlock.prototype.attachTo=function(t,e,n){var r=document.createComment(this.beginning),i=document.createComment(this.ending);t.insertBefore(r,e||null);var o=this.getCondition(n);if(null!=o){var s=this.expressions[o],a=n.child(s);e=attachContent(t,e,this.contents[o],a)}return t.insertBefore(i,e||null),updateRange(n,null,this,r,i,null,o),e},ConditionalBlock.prototype.type="ConditionalBlock",ConditionalBlock.prototype.serialize=function(){return serializeObject.instance(this,this.expressions,this.contents)},ConditionalBlock.prototype.update=function(t,e){if(e.start.parentNode){var n=this.getCondition(t);if(!equalConditions(n,e.condition))e.condition=n,replaceRange(t,e.start,e.end,this.getFragment(t,e),e)}},ConditionalBlock.prototype.getCondition=function(t){for(var e=0,n=this.expressions.length;e<n;e++)if(this.expressions[e].truthy(t))return e},EachBlock.prototype=Object.create(Block.prototype),EachBlock.prototype.constructor=EachBlock,EachBlock.prototype.get=function(t,e){var n=this.expression.get(t);if(n&&n.length){for(var r="",i=0,o=n.length;i<o;i++){var s=t.eachChild(this.expression,i);r+=contentHtml(this.content,s,e)}return r}return this.elseContent?contentHtml(this.elseContent,t,e):""},EachBlock.prototype.appendTo=function(t,e,n){var r=this.expression.get(e),i=document.createComment(this.expression),o=document.createComment(this.ending);if(t.appendChild(i),r&&r.length)for(var s=0,a=r.length;s<a;s++){var c=e.eachChild(this.expression,s);this.appendItemTo(t,c,i)}else this.elseContent&&appendContent(t,this.elseContent,e);t.appendChild(o),updateRange(e,n,this,i,o)},EachBlock.prototype.appendItemTo=function(t,e,n,r){var i,o,s=t.lastChild;appendContent(t,this.content,e),s===t.lastChild?(i=o=document.createComment("empty"),t.appendChild(i)):(i=s&&s.nextSibling||t.firstChild,o=t.lastChild),updateRange(e,r,this,i,o,n)},EachBlock.prototype.attachTo=function(t,e,n){var r=this.expression.get(n),i=document.createComment(this.expression),o=document.createComment(this.ending);if(t.insertBefore(i,e||null),r&&r.length)for(var s=0,a=r.length;s<a;s++){var c=n.eachChild(this.expression,s);e=this.attachItemTo(t,e,c,i)}else this.elseContent&&(e=attachContent(t,e,this.elseContent,n));return t.insertBefore(o,e||null),updateRange(n,null,this,i,o),e},EachBlock.prototype.attachItemTo=function(t,e,n,r){var i,o,s=e&&e.previousSibling,a=attachContent(t,e,this.content,n);return a===e?(i=o=document.createComment("empty"),t.insertBefore(i,e||null)):(i=s&&s.nextSibling||t.firstChild,o=a&&a.previousSibling||t.lastChild),updateRange(n,null,this,i,o,r),a},EachBlock.prototype.update=function(t,e){if(e.start.parentNode){var n=e.start,r=e.end;if(e.itemFor){var i=document.createDocumentFragment();this.appendItemTo(i,t,e.itemFor,e)}else i=this.getFragment(t,e);replaceRange(t,n,r,i,e)}},EachBlock.prototype.insert=function(t,e,n,r){var i=e.start.parentNode;if(i){if(0===n&&this.expression.get(t).length===r)return this.update(t,e);for(var o=indexStartNode(e,n),s=document.createDocumentFragment(),a=n,c=n+r;a<c;a++){var l=t.eachChild(this.expression,a);this.appendItemTo(s,l,e.start)}i.insertBefore(s,o||null)}},EachBlock.prototype.remove=function(t,e,n,r){var i=e.start.parentNode;if(i){if(0===n&&0===this.expression.get(t).length)return this.update(t,e);for(var o=indexStartNode(e,n),s=0;o;){if(o===e.end)return;if(o.$bindItemStart&&o.$bindItemStart.itemFor===e.start&&r===s++)return;var a=o.nextSibling;i.removeChild(o),emitRemoved(t,o,e),o=a}}},EachBlock.prototype.move=function(t,e,n,r,i){var o=e.start.parentNode;if(o){for(var s=indexStartNode(e,n),a=document.createDocumentFragment(),c=0;s&&s!==e.end&&(!s.$bindItemStart||s.$bindItemStart.itemFor!==e.start||i!==c++);){var l=s.nextSibling;a.appendChild(s),s=l}s=indexStartNode(e,r),o.insertBefore(a,s||null)}},EachBlock.prototype.type="EachBlock",EachBlock.prototype.serialize=function(){return serializeObject.instance(this,this.expression,this.content,this.elseContent)},Binding.prototype.type="Binding",Binding.prototype.update=function(){this.context.pause(),this.template.update(this.context,this),this.context.unpause()},Binding.prototype.insert=function(){this.update()},Binding.prototype.remove=function(){this.update()},Binding.prototype.move=function(){this.update()},NodeBinding.prototype=Object.create(Binding.prototype),NodeBinding.prototype.constructor=NodeBinding,NodeBinding.prototype.type="NodeBinding",AttributeBinding.prototype=Object.create(Binding.prototype),AttributeBinding.prototype.constructor=AttributeBinding,AttributeBinding.prototype.type="AttributeBinding",RangeBinding.prototype=Object.create(Binding.prototype),RangeBinding.prototype.constructor=RangeBinding,RangeBinding.prototype.type="RangeBinding",RangeBinding.prototype.insert=function(t,e){this.context.pause(),this.template.insert?this.template.insert(this.context,this,t,e):this.template.update(this.context,this),this.context.unpause()},RangeBinding.prototype.remove=function(t,e){this.context.pause(),this.template.remove?this.template.remove(this.context,this,t,e):this.template.update(this.context,this),this.context.unpause()},RangeBinding.prototype.move=function(t,e,n){this.context.pause(),this.template.move?this.template.move(this.context,this,t,e,n):this.template.update(this.context,this),this.context.unpause()},Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),function(){if("undefined"!=typeof document){var t=document.createElement("div");t.innerHTML="\r\n<br>\n";var e=t.firstChild.data.length,n=t.lastChild.data.length;1===e&&1===n?normalizeLineBreaks=function(t){return t.replace(/\r\n/g,"\n")}:2===e&&2===n&&(normalizeLineBreaks=function(t){return t.replace(/(^|[^\r])(\n+)/g,function(t,e,n){for(var r=n.length;r--;)e+="\r\n";return e})});var r=document.createElement("input");r.defaultValue="x","x"!==r.value&&(CREATE_PROPERTIES.value="value");try{document.createTextNode("").$try=0}catch(t){setNodeProperty=function(t,e,n){if(3===t.nodeType){var r=t.previousSibling;return r&&r.$bindProxy===t||((r=document.createComment("proxy")).$bindProxy=t,t.parentNode.insertBefore(r,t||null)),r[e]=n}return t[e]=n}}}}();var _$util_137={concat:function(t,e){return t?e?t.concat(e):t:e},hasKeys:function(t){if(!t)return!1;for(var e in t)return!0;return!1},traverseAndCreate:function(t,e){var n=e.length;if(!n)return t;for(var r=0;r<n;r++){var i=e[r];t=t[i]||(t[i]={})}return t}},_$expressions_133={};(function(t){var e=_$serializeObject_191({}),n=_$templates_136({}),r=n.Template,i=_$util_137.concat;function o(t,e){if(!t)return e;for(var n=0,r=t.length;n<r;n++){if(null==e)return e;e=e[t[n]]}return e}function s(t){return Array.isArray(t)?t.length>0:!!t}function a(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e[n]="object"==typeof r?r.item:r}return e}function c(t,e){return"object"!=typeof t?t:t instanceof r?l(t,e):Array.isArray(t)?function(t,e){for(var n=0;n<t.length;n++)if(u(t[n]))return p(t,e);return t}(t,e):function(t,e){return u(t)?function(t,e){var n={};for(var r in t)n[r]=c(t[r],e);return n}(t,e):t}(t,e)}function l(t,e){for(var n=1e3;t instanceof r;){if(--n<0)throw new Error("Maximum template render passes exceeded");t=t.get(e,!0)}return t}function u(t){if(!t)return!1;if(t.constructor!==Object)return!1;for(var e in t)if(t[e]instanceof r)return!0;return!1}function p(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=c(t[r],e);return n}function h(t,e,n,r,i,o,s,a){this.source=t,this.blockType=e,this.isEnd=n,this.as=r,this.keyAs=i,this.unescaped=o,this.bindType=s,this.valueType=a}function f(t){this.meta=t}function d(t,e){this.value=t,this.meta=e}function _(t,e){this.segments=t,this.meta=e}function m(t,e){this.segments=t,this.meta=e}function y(t,e,n){this.alias=t,this.segments=e,this.meta=n}function g(t,e,n){this.attribute=t,this.segments=e,this.meta=n}function v(t,e,n,r){this.before=t,this.inside=e,this.afterSegments=n,this.meta=r}function b(t,e){if(!(t instanceof r))throw new Error("DeferRenderExpression requires a Template argument");this.template=t,this.meta=e}function E(t,e,n){this.items=t,this.afterSegments=e,this.meta=n}function S(t,e,n){this.properties=t,this.afterSegments=e,this.meta=n}function x(t,e,n,r){this.segments=t,this.args=e,this.afterSegments=n,this.meta=r;var i=t&&t.slice();this.lastSegment=i&&i.pop(),this.parentSegments=i&&i.length?i:null}function w(t,e,n,r){x.call(this,t,e,n,r)}function $(t,e,n,r){this.name=t,this.args=e,this.afterSegments=n,this.meta=r,this.getFn=_$operatorFns_134.get[t],this.setFn=_$operatorFns_134.set[t]}function T(t,e,n){this.args=t,this.afterSegments=e,this.meta=n}function C(t,e){this.expression=t,this.meta=e}function O(t,e){this.expression=t,this.meta=e}function D(t,e,n){if(t instanceof f||t instanceof r)return t.dependencies(e,n)}function R(t,e,n){var r=e.resolve(n);return r?t?(t.push(r),t):[r]:t}function P(t,e,n){if(!e.segments.length)return t;var r=e.resolve(n);return r?t?(t.pop(),t.push(r),t):[r]:t}_$expressions_133.lookup=o,_$expressions_133.templateTruthy=s,_$expressions_133.pathSegments=a,_$expressions_133.renderValue=c,_$expressions_133.renderTemplate=l,_$expressions_133.ExpressionMeta=h,_$expressions_133.Expression=f,_$expressions_133.LiteralExpression=d,_$expressions_133.PathExpression=_,_$expressions_133.RelativePathExpression=m,_$expressions_133.AliasPathExpression=y,_$expressions_133.AttributePathExpression=g,_$expressions_133.BracketsExpression=v,_$expressions_133.DeferRenderExpression=b,_$expressions_133.ArrayExpression=E,_$expressions_133.ObjectExpression=S,_$expressions_133.FnExpression=x,_$expressions_133.OperatorExpression=$,_$expressions_133.NewExpression=w,_$expressions_133.SequenceExpression=T,_$expressions_133.ViewParentExpression=C,_$expressions_133.ScopedModelExpression=O,h.prototype.module="expressions",h.prototype.type="ExpressionMeta",h.prototype.serialize=function(){return e.instance(this,this.source,this.blockType,this.isEnd,this.as,this.keyAs,this.unescaped,this.bindType,this.valueType)},f.prototype.module="expressions",f.prototype.type="Expression",f.prototype.serialize=function(){return e.instance(this,this.meta)},f.prototype.toString=function(){return this.meta&&this.meta.source},f.prototype.truthy=function(t){var e=this.meta.blockType;if("else"===e)return!0;var n=s(this.get(t,!0));return"unless"===e?!n:n},f.prototype.get=function(){},f.prototype.resolve=function(){},f.prototype.dependencies=function(){},f.prototype.pathSegments=function(t){var e=this.resolve(t);return e&&a(e)},f.prototype.set=function(t,e){var n=this.pathSegments(t);if(!n)throw new Error("Expression does not support setting");t.controller.model._set(n,e)},f.prototype._resolvePatch=function(t,e){return t&&t.expression===this&&null!=t.item?e.concat(t):e},f.prototype.isUnbound=function(t){var e=this.meta&&this.meta.bindType;return"unbound"===e||"bound"!==e&&t.unbound},f.prototype._lookupAndContextifyValue=function(t,e){return this.segments&&this.segments.length&&(t=l(t,e),t=o(this.segments,t)),t instanceof r&&!(t instanceof n.ContextClosure)&&(t=new n.ContextClosure(t,e)),t},d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.type="LiteralExpression",d.prototype.serialize=function(){return e.instance(this,this.value,this.meta)},d.prototype.get=function(){return this.value},_.prototype=Object.create(f.prototype),_.prototype.constructor=_,_.prototype.type="PathExpression",_.prototype.serialize=function(){return e.instance(this,this.segments,this.meta)},_.prototype.get=function(t){if(t.controller)return o(this.segments,t.controller.model.data)},_.prototype.resolve=function(t){if(t.controller){var e=i(t.controller._scope,this.segments);return this._resolvePatch(t,e)}},_.prototype.dependencies=function(t,e){if(t.controller)return R(D(o(this.segments,t.controller.model.data),t,e),this,t)},m.prototype=Object.create(f.prototype),m.prototype.constructor=m,m.prototype.type="RelativePathExpression",m.prototype.serialize=function(){return e.instance(this,this.segments,this.meta)},m.prototype.get=function(t){var e=t.forRelative(this),n=e.get();return this._lookupAndContextifyValue(n,e)},m.prototype.resolve=function(t){var e=t.forRelative(this),n=e.expression?e.expression.resolve(e):[];if(n){var r=n.concat(this.segments);return this._resolvePatch(t,r)}},m.prototype.dependencies=function(t,e){var n=t.forRelative(this);return P(n.expression&&n.expression.dependencies(n,e),this,t)},y.prototype=Object.create(f.prototype),y.prototype.constructor=y,y.prototype.type="AliasPathExpression",y.prototype.serialize=function(){return e.instance(this,this.alias,this.segments,this.meta)},y.prototype.get=function(t){var e=t.forAlias(this.alias);if(e){if(e.keyAlias===this.alias)return e.item;var n=e.get();return this._lookupAndContextifyValue(n,e)}},y.prototype.resolve=function(t){var e=t.forAlias(this.alias);if(e&&e.keyAlias!==this.alias){var n=e.expression.resolve(e);if(n){var r=n.concat(this.segments);return this._resolvePatch(t,r)}}},y.prototype.dependencies=function(t,e){var n=t.forAlias(this.alias);if(n){if(n.keyAlias===this.alias){var r=n.expression.resolve(n.parent);if(!r)return;return[r]}return P(n.expression.dependencies(n,e),this,t)}},g.prototype=Object.create(f.prototype),g.prototype.constructor=g,g.prototype.type="AttributePathExpression",g.prototype.serialize=function(){return e.instance(this,this.attribute,this.segments,this.meta)},g.prototype.get=function(t){var e=t.forAttribute(this.attribute);if(e){var n=e.attributes[this.attribute];return n instanceof f&&(n=n.get(e)),this._lookupAndContextifyValue(n,e)}},g.prototype.resolve=function(t){var e=t.forAttribute(this.attribute);if(e){var n,i=e.attributes[this.attribute];if((i instanceof f||i instanceof r)&&(n=i.resolve(e)),n){var o=n.concat(this.segments);return this._resolvePatch(t,o)}}},g.prototype.dependencies=function(t,e){var n=t.forAttribute(this.attribute);if(n)return P(D(n.attributes[this.attribute],n,e),this,t)},v.prototype=Object.create(f.prototype),v.prototype.constructor=v,v.prototype.type="BracketsExpression",v.prototype.serialize=function(){return e.instance(this,this.before,this.inside,this.afterSegments,this.meta)},v.prototype.get=function(t){var e=this.inside.get(t);if(null!=e){var n=this.before.get(t);if(n){var r=n[e];return this.afterSegments?o(this.afterSegments,r):r}}},v.prototype.resolve=function(t){var e=this.inside.get(t);if(null!=e){var n=this.before.resolve(t);if(n){var r=this.afterSegments?n.concat(e,this.afterSegments):n.concat(e);return this._resolvePatch(t,r)}}},v.prototype.dependencies=function(t,e){var n=this.before.dependencies(t,e);n&&n.pop();var r=this.inside.dependencies(t,e);return R(i(n,r),this,t)},b.prototype=Object.create(f.prototype),b.prototype.constructor=b,b.prototype.type="DeferRenderExpression",b.prototype.serialize=function(){return e.instance(this,this.template,this.meta)},b.prototype.get=function(t){return new n.ContextClosure(this.template,t)},E.prototype=Object.create(f.prototype),E.prototype.constructor=E,E.prototype.type="ArrayExpression",E.prototype.serialize=function(){return e.instance(this,this.items,this.afterSegments,this.meta)},E.prototype.get=function(t){for(var e=new Array(this.items.length),n=0;n<this.items.length;n++){var r=this.items[n].get(t);e[n]=r}return this.afterSegments?o(this.afterSegments,e):e},E.prototype.dependencies=function(t,e){if(this.items){for(var n,r=0;r<this.items.length;r++){var o=this.items[r].dependencies(t,e);n=i(n,o)}return n}},S.prototype=Object.create(f.prototype),S.prototype.constructor=S,S.prototype.type="ObjectExpression",S.prototype.serialize=function(){return e.instance(this,this.properties,this.afterSegments,this.meta)},S.prototype.get=function(t){var e={};for(var n in this.properties){var r=this.properties[n].get(t);e[n]=r}return this.afterSegments?o(this.afterSegments,e):e},S.prototype.dependencies=function(t,e){if(this.properties){var n;for(var r in this.properties){var o=this.properties[r].dependencies(t,e);n=i(n,o)}return n}},x.prototype=Object.create(f.prototype),x.prototype.constructor=x,x.prototype.type="FnExpression",x.prototype.serialize=function(){return e.instance(this,this.segments,this.args,this.afterSegments,this.meta)},x.prototype.get=function(t){var e=this.apply(t);return this.afterSegments?o(this.afterSegments,e):e},x.prototype.apply=function(t,e){if(t.controller){var n=this._lookupParent(t),r=n[this.lastSegment],i=r.get||r;return this._applyFn(i,t,e,n)}},x.prototype._lookupParent=function(e){var n=e.controller,r=this.parentSegments,i=r?o(r,n):n;if(i&&i[this.lastSegment])return i;var s=n.page;if(n!==s&&(i=r?o(r,s):s)&&i[this.lastSegment])return i;if((i=r?o(r,t):t)&&i[this.lastSegment])return i;throw new Error("Function not found for: "+this.segments.join("."))},x.prototype._getInputs=function(t){for(var e=[],n=0,r=this.args.length;n<r;n++){var i=this.args[n].get(t);e.push(c(i,t))}return e},x.prototype._applyFn=function(t,e,n,r){if(!this.args)return n?t.apply(r,n):t.call(r);var i=this._getInputs(e);if(n)for(var o=0,s=n.length;o<s;o++)i.push(n[o]);return t.apply(r,i)},x.prototype.dependencies=function(t,e){var n=[];if(!this.args)return n;for(var r=0,i=this.args.length;r<i;r++){var o=this.args[r].dependencies(t,e);if(o&&!(o.length<1)){for(var s=o.length-1,a=0;a<s;a++)n.push(o[a]);var c=o[s];"*"!==c[c.length-1]&&(c=c.concat("*")),n.push(c)}}return n},x.prototype.set=function(t,e){for(var n,r,i=t.controller;i&&!(n=(r=this.parentSegments?o(this.parentSegments,i):i)&&r[this.lastSegment]);)i=i.parent;var s=n&&n.set;if(!s)throw new Error("No setter function for: "+this.segments.join("."));var a=this._getInputs(t);a.unshift(e);var c=s.apply(r,a);for(var l in c)this.args[l].set(t,c[l])},w.prototype=Object.create(x.prototype),w.prototype.constructor=w,w.prototype.type="NewExpression",w.prototype._applyFn=function(t,e){if(!this.args)return new t;var n=this._getInputs(e);return n.unshift(null),new(t.bind.apply(t,n))},$.prototype=Object.create(x.prototype),$.prototype.constructor=$,$.prototype.type="OperatorExpression",$.prototype.serialize=function(){return e.instance(this,this.name,this.args,this.afterSegments,this.meta)},$.prototype.apply=function(t){var e=this._getInputs(t);return this.getFn.apply(null,e)},$.prototype.set=function(t,e){var n=this._getInputs(t);n.unshift(e);var r=this.setFn.apply(null,n);for(var i in r)this.args[i].set(t,r[i])},T.prototype=Object.create($.prototype),T.prototype.constructor=T,T.prototype.type="SequenceExpression",T.prototype.serialize=function(){return e.instance(this,this.args,this.afterSegments,this.meta)},T.prototype.name=",",T.prototype.getFn=_$operatorFns_134.get[","],T.prototype.resolve=function(t){return this.args[this.args.length-1].resolve(t)},T.prototype.dependencies=function(t,e){for(var n=[],r=0,i=this.args.length;r<i;r++)for(var o=this.args[r].dependencies(t,e),s=0,a=o.length;s<a;s++)n.push(o[s]);return n},C.prototype=Object.create(f.prototype),C.prototype.constructor=C,C.prototype.type="ViewParentExpression",C.prototype.serialize=function(){return e.instance(this,this.expression,this.meta)},C.prototype.get=function(t){var e=t.forViewParent();return this.expression.get(e)},C.prototype.resolve=function(t){var e=t.forViewParent();return this.expression.resolve(e)},C.prototype.dependencies=function(t,e){var n=t.forViewParent();return this.expression.dependencies(n,e)},C.prototype.pathSegments=function(t){var e=t.forViewParent();return this.expression.pathSegments(e)},C.prototype.set=function(t,e){var n=t.forViewParent();return this.expression.set(n,e)},O.prototype=Object.create(f.prototype),O.prototype.constructor=O,O.prototype.type="ScopedModelExpression",O.prototype.serialize=function(){return e.instance(this,this.expression,this.meta)},O.prototype.get=function(t){var e=this.pathSegments(t);if(e)return t.controller.model.scope(e.join("."))},O.prototype.resolve=function(t){return this.expression.resolve(t)},O.prototype.dependencies=function(t,e){return this.expression.dependencies(t,e)},O.prototype.pathSegments=function(t){return this.expression.pathSegments(t)},O.prototype.set=function(t,e){return this.expression.set(t,e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$derbyTemplates_131={};_$derbyTemplates_131.contexts=_$contexts_132,_$derbyTemplates_131.expressions=_$expressions_133,_$derbyTemplates_131.operatorFns=_$operatorFns_134,_$derbyTemplates_131.options=_$options_135({}),_$derbyTemplates_131.templates=_$templates_136({});var _$Dom_141=Dom;function Dom(t){this.controller=t,this._listeners=null}function DomListener(t,e,n,r){this.type=t,this.target=e,this.listener=n,this.useCapture=!!r}function DestroyListener(t,e){DomListener.call(this,"destroy",t,e)}Dom.prototype._initListeners=function(){var t=this;return this.controller.on("destroy",function(){var e=t._listeners;if(e){for(var n=e.length;n--;)e[n].remove();t._listeners=null}}),this._listeners=[]},Dom.prototype._listenerIndex=function(t){var e=this._listeners;if(!e)return-1;for(var n=e.length;n--;)if(e[n].equals(t))return n;return-1},Dom.prototype.addListener=function(t,e,n,r){"function"==typeof e&&(r=n,n=e,e=document);var i="destroy"===t?new DestroyListener(e,n):new DomListener(t,e,n,r);-1===this._listenerIndex(i)&&(this._listeners||this._initListeners()).push(i);i.add()},Dom.prototype.on=Dom.prototype.addListener,Dom.prototype.once=function(t,e,n,r){"function"==typeof e&&(r=n,n=e,e=document),this.addListener(t,e,function o(){i.removeListener(t,e,o,r);return n.apply(this,arguments)},r);var i=this},Dom.prototype.removeListener=function(t,e,n,r){"function"==typeof e&&(r=n,n=e,e=document);var i=new DomListener(t,e,n,r);i.remove();var o=this._listenerIndex(i);o>-1&&this._listeners.splice(o,1)},DomListener.prototype.equals=function(t){return this.listener===t.listener&&this.target===t.target&&this.type===t.type&&this.useCapture===t.useCapture},DomListener.prototype.add=function(){this.target.addEventListener(this.type,this.listener,this.useCapture)},DomListener.prototype.remove=function(){this.target.removeEventListener(this.type,this.listener,this.useCapture)},DestroyListener.prototype=new DomListener,DestroyListener.prototype.add=function(){var t=this.target.$destroyListeners||(this.target.$destroyListeners=[]);-1===t.indexOf(this.listener)&&t.push(this.listener)},DestroyListener.prototype.remove=function(){var t=this.target.$destroyListeners;if(t){var e=t.indexOf(this.listener);-1!==e&&t.splice(e,1)}};var __EventEmitter_139=_$EventEmitter_148.EventEmitter,_$Controller_139=Controller;function Controller(t,e,n){__EventEmitter_139.call(this),this.dom=new _$Dom_141(this),this.app=t,this.page=e,this.model=n,n.data.$controller=this}_$util_189.mergeInto(Controller.prototype,__EventEmitter_139.prototype),Controller.prototype.emitCancellable=function(){var t=!1;var e=Array.prototype.slice.call(arguments);return e.push(function(){t=!0}),this.emit.apply(this,e),t},Controller.prototype.emitDelayable=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),n=!1;return t.push(function(){return n=!0,e}),this.emit.apply(this,t),n||e(),n};var _$components_144={},__templates_144=_$derbyTemplates_131.templates,expressions=_$derbyTemplates_131.expressions,slice=[].slice;function Component(t,e){var n=t.controller,r=t.id(),i=["$components",r],o=n.model.root.eventContext(r);o._at=i.join("."),e.id=r,o._set(i,e),o.data=e,_$Controller_139.call(this,n.app,n.page,o),this.parent=n,this.context=t.componentChild(this),this.id=r,this._scope=i,this.page._components[r]=this,this.isDestroyed=!1}function ComponentAttribute(t,e,n){this.expression=t,this.model=e,this.key=n}function ComponentAttributeBinding(t,e,n,r){this.template=new ComponentAttribute(t,e,n),this.context=r,this.condition=t.get(r)}function setModelAttributes(t,e){var n=t.parent.attributes;if(n)for(var r in n){setModelAttribute(t,e,r,n[r])}}function setModelAttribute(t,e,n,r){if(r instanceof expressions.Expression){var i=r.pathSegments(t);if(i)e.root.ref(e._at+"."+n,i.join("."),{updateIndices:!0});else{var o=new ComponentAttributeBinding(r,e,n,t);t.addBinding(o),e.set(n,o.condition)}}else if(r instanceof __templates_144.Template){var s=new __templates_144.ContextClosure(r,t);e.set(n,s)}else e.set(n,r)}function createFactory(t){return t.singleton||t.prototype.singleton?new SingletonComponentFactory(t):new ComponentFactory(t)}function emitInitHooks(t,e){if(t.initHooks)for(var n=0,r=t.initHooks.length;n<r;n++)t.initHooks[n].emit(t,e)}function ComponentModelData(){this.id=null,this.$controller=null}function ComponentFactory(t){this.constructor=t}function __noop_144(){}function SingletonComponentFactory(t){this.constructor=t,this.component=null,t.prototype.destroy=__noop_144}function isBasePrototype(t){return t===Object.prototype||t===Function.prototype||null===t}function getRootPrototype(t){for(;;){var e=Object.getPrototypeOf(t);if(isBasePrototype(e))return t;t=e}}_$components_144.Component=Component,_$components_144.ComponentAttributeBinding=ComponentAttributeBinding,_$components_144.createFactory=createFactory,_$components_144.extendComponent=extendComponent,_$util_189.mergeInto(Component.prototype,_$Controller_139.prototype),Component.prototype.destroy=function(){this.emit("destroy"),this.model.removeContextListeners(),this.model.destroy(),delete this.page._components[this.id];var t=this.page._eventModel.object.$components;t&&delete t.object[this.id],this.isDestroyed=!0},Component.prototype.bind=function(t){var e=this;return this.on("destroy",function(){e=null,t=null}),function(){if(t)return t.apply(e,arguments)}},Component.prototype.throttle=function(t,e){var n=this;if(this.on("destroy",function(){n=null,t=null}),null==e||"number"==typeof e){var r,i=e||0,o=function(){var e=s;s=null,r=+new Date,t&&e&&t.apply(n,e)};return function(){var t=!s;if(s=slice.call(arguments),t){var e=+new Date,n=Math.max(r+i-e,0);setTimeout(o,n)}}}if("function"==typeof e){var s;o=function(){var e=s;s=null,t&&e&&t.apply(n,e)};return function(){var t=!s;s=slice.call(arguments),t&&e(o)}}throw new Error("Second argument must be a delay function or number")},Component.prototype.debounce=function(t,e){if("number"!=typeof(e=e||0))throw new Error("Second argument must be a number");var n,r,i=this;this.on("destroy",function(){i=null,t=null});var o=function(){var e=n;n=null,r=null,t&&e&&t.apply(i,e)};return function(){n=slice.call(arguments),r&&clearTimeout(r),r=setTimeout(o,e)}},Component.prototype.debounceAsync=function(t,e){var n=1!==t.length;if("number"!=typeof(e=e||0))throw new Error("Second argument must be a number");var r=this;this.on("destroy",function(){r=null,t=null});var i,o,s=!1;function a(){var e=i;i=null,o=null,t&&e?(s=!0,e.push(a),t.apply(r,e)):s=!1}return function(){i=n?slice.call(arguments):[],o&&clearTimeout(o),s||(o=setTimeout(a,e))}},Component.prototype.get=function(t,e){return this.getView(t).get(this.context,e)},Component.prototype.getFragment=function(t){return this.getView(t).getFragment(this.context)},Component.prototype.getView=function(t){var e=this.context.getView();return t?this.app.views.find(t,e.namespace):e},Component.prototype.getAttribute=function(t){var e=this.context.forAttribute(t);if(e){var n=e.attributes[t];return n instanceof expressions.Expression&&(n=n.get(e)),expressions.renderValue(n,this.context)}},Component.prototype.setAttribute=function(t,e){this.context.parent.attributes[t]=e},Component.prototype.setNullAttribute=function(t,e){var n=this.context.parent.attributes;null==n[t]&&(n[t]=e)},ComponentAttribute.prototype.update=function(t,e){var n=this.expression.get(t);e.condition=n,this.model.setDiff(this.key,n)},ComponentAttributeBinding.prototype=Object.create(__templates_144.Binding.prototype),ComponentAttributeBinding.prototype.constructor=ComponentAttributeBinding,ComponentFactory.prototype.init=function(t){var e=new(this.constructor.DataConstructor||ComponentModelData),n=new this.constructor(t,e);return n.context||Component.call(n,t,e),setModelAttributes(n.context,n.model),emitInitHooks(t,n),n.emit("init",n),n.init&&n.init(n.model),n.context},ComponentFactory.prototype.create=function(t){var e=t.controller;e.emit("create",e),e.create&&e.create(e.model,e.dom)},SingletonComponentFactory.prototype.isSingleton=!0,SingletonComponentFactory.prototype.init=function(t){return this.component||(this.component=new this.constructor),t.componentChild(this.component)},SingletonComponentFactory.prototype.create=__noop_144;var _extendComponent=Object.setPrototypeOf&&Object.getPrototypeOf?function(t){var e=getRootPrototype(t.prototype);e!==Component.prototype&&Object.setPrototypeOf(e,Component.prototype)}:function(t){var e=t.prototype;t.prototype=Object.create(Component.prototype),t.prototype.constructor=t,_$util_189.mergeInto(t.prototype,e)};function extendComponent(t){t.prototype instanceof Component||_extendComponent(t)}var __expressions_146=_$derbyTemplates_131.expressions,_$EventModel_146=EventModel,nextId=1;function ModelRef(t,e,n,r){this.id=nextId++,this.model=t,this.segments=n,this.item=e,this.outside=r,this.result=r.child(e).refChild(this)}function RefOutMap(){}function RefChildrenMap(){}function BindingsMap(){}function ItemContextsMap(){}function EventModelsMap(){}function EventModel(){this.id=nextId++,this.object=null,this.array=null,this.arrayByReference=null,this.refOut=null,this.refChildren=null,this.bindings=null,this.itemContexts=null}function __hasKeys_146(t){for(var e in t)return!0;return!1}function childSetWildcard(t){t._set()}ModelRef.prototype.update=function(){var t=__expressions_146.pathSegments(this.segments),e=__expressions_146.lookup(t,this.model.data);if(this.item!==e){delete this.outside.child(this.item).refChildren[this.id],this.item=e;var n=this.outside.child(this.item);n.refChildren||(n.refChildren=new RefChildrenMap),n.refChildren[this.id]=this.result,this.result.update()}},EventModel.prototype.refChild=function(t){this.refChildren||(this.refChildren=new RefChildrenMap);var e=t.id;return this.refChildren[e]||(this.refChildren[e]=new EventModel),this.refChildren[e]},EventModel.prototype.arrayLookup=function(t,e,n){var r=__expressions_146.pathSegments(n),i=__expressions_146.lookup(r,t.data),o=this.at(n),s=this.at(e);o.refOut||(o.refOut=new RefOutMap);var a=o.refOut[s.id];return null==a&&(a=new ModelRef(t,i,n,s),o.refOut[s.id]=a),a},EventModel.prototype.child=function(t){var e;if("string"==typeof t)this.object||(this.object={}),e=this.object;else if("number"==typeof t)this.array||(this.array=[]),e=this.array;else{if(t instanceof ModelRef)return t.result;this.arrayByReference||(this.arrayByReference=[]),e=this.arrayByReference,t=t.item}return e[t]||(e[t]=new EventModel)},EventModel.prototype.at=function(t){if(null==t)return this;for(var e=this,n=0;n<t.length;n++)e=e.child(t[n]);return e},EventModel.prototype.isEmpty=function(){if(__hasKeys_146(this.dependancies))return!1;if(__hasKeys_146(this.itemContexts))return!1;if(this.object){if(__hasKeys_146(this.object))return!1;this.object=null}if(this.arrayByReference){for(var t=0;t<this.arrayByReference.length;t++)if(null!=this.arrayByReference[t])return!1;this.arrayByReference=null}if(this.array){for(t=0;t<this.array.length;t++)if(null!=this.array[t])return!1;this.array=null}return!0},EventModel.prototype._addItemContext=function(t){t._id||(t._id=nextId++),this.itemContexts||(this.itemContexts=new ItemContextsMap),this.itemContexts[t._id]=t},EventModel.prototype._removeItemContext=function(t){this.itemContexts&&delete this.itemContexts[t._id]},EventModel.prototype._addBinding=function(t){var e=this.bindings||(this.bindings=new BindingsMap);t.eventModels||(t.eventModels=new EventModelsMap),e[t.id]=t,t.eventModels[this.id]=this},EventModel.prototype.addBinding=function(t,e){this.at(t)._addBinding(e)},EventModel.prototype.addItemContext=function(t,e){this.at(t)._addItemContext(e)},EventModel.prototype.removeBinding=function(t){if(t.eventModels){for(var e in t.eventModels){var n=t.eventModels[e];n.bindings&&delete n.bindings[t.id]}t.eventModels=null}},EventModel.prototype._each=function(t,e,n){if(this.refChildren)for(var r in this.refChildren){var i=this.refChildren[r];i&&i._each(t,e,n)}if(t.length!==e){var o,s=t[e];"string"==typeof s?(o=this.object&&this.object[s])&&o._each(t,e+1,n):((o=this.array&&this.array[s])&&o._each(t,e+1,n),(o=this.arrayByReference&&this.arrayByReference[s])&&o._each(t,e+1,n))}else n(this)},EventModel.prototype.localUpdate=function(t,e){if(this.bindings)for(var n in this.bindings){var r=this.bindings[n];r&&r.update(t,e)}if(this.refOut)for(var n in this.refOut){var i=this.refOut[n];i&&i.update()}},EventModel.prototype.update=function(t,e){if(this.localUpdate(t,e),this.object)for(var n in this.object){(i=this.object[n])&&i.update()}if(this.array)for(var r=0;r<this.array.length;r++){(i=this.array[r])&&i.update()}if(this.arrayByReference)for(r=0;r<this.arrayByReference.length;r++){var i;(i=this.arrayByReference[r])&&i.update()}},EventModel.prototype._updateChildItemContexts=function(t,e){if(this.arrayByReference){null==t&&(t=0),null==e&&(e=this.arrayByReference.length);for(var n=t;n<e;n++){var r=this.arrayByReference[n]&&this.arrayByReference[n].itemContexts;if(r)for(var i in r)r[i].item=n}}},EventModel.prototype._updateArray=function(t,e){if(this.array){null==t&&(t=0),null==e&&(e=this.array.length);for(var n=t;n<e;n++){var r=this.array[n];r&&r.update()}}},EventModel.prototype._updateObject=function(){if(this.object)for(var t in this.object){var e=this.object[t];e&&e.update()}},EventModel.prototype._set=function(t,e){this.update(t,e)},EventModel.prototype._insert=function(t,e){if(this._updateArray(t),this.arrayByReference&&this.arrayByReference.length>t){for(var n=0;n<e;n++)this.arrayByReference.splice(t,0,null);this._updateChildItemContexts(t+e)}if(this.bindings)for(var r in this.bindings){var i=this.bindings[r];i&&i.insert(t,e)}this._updateObject()},EventModel.prototype._remove=function(t,e){if(this._updateArray(t),this.arrayByReference&&(this.arrayByReference.splice(t,e),this._updateChildItemContexts(t)),this.bindings)for(var n in this.bindings){var r=this.bindings[n];r&&r.remove(t,e)}this._updateObject()},EventModel.prototype._move=function(t,e,n){var r,i;t<e?(r=t,i=e+n):(r=e,i=t+n),this._updateArray(r,i);var o=this.arrayByReference;if(o&&o.length>r){var s=o.splice(t,n);o.splice.apply(o,[e,0].concat(s)),this._updateChildItemContexts(r,i)}if(this.bindings)for(var a in this.bindings){var c=this.bindings[a];c&&c.move(t,e,n)}this._updateObject()},EventModel.prototype.mutate=function(t,e){this._each(t,0,e);for(var n=0,r=t.length;n++<r;){var i=t.slice(0,n);i.push("*"),this._each(i,0,childSetWildcard)}},EventModel.prototype.set=function(t,e,n){this.mutate(t,function(t){t._set(e,n)})},EventModel.prototype.insert=function(t,e,n){this.mutate(t,function(t){t._insert(e,n)})},EventModel.prototype.remove=function(t,e,n){this.mutate(t,function(t){t._remove(e,n)})},EventModel.prototype.move=function(t,e,n,r){this.mutate(t,function(t){t._move(e,n,r)})};var _$textDiff_147={};function onStringInsert(t,e,n,r){e||(e=""),replaceText(t,e.slice(0,n)+r+e.slice(n),function(t){return n<t?t+r.length:t})}function onStringRemove(t,e,n,r){e||(e=""),replaceText(t,e.slice(0,n)+e.slice(n+r),function(t){return n<t?t-Math.min(r,t-n):t})}function replaceText(t,e,n){var r=n(t.selectionStart),i=n(t.selectionEnd),o=t.scrollTop;t.value=e,t.scrollTop!==o&&(t.scrollTop=o),document.activeElement===t&&(t.selectionStart=r,t.selectionEnd=i)}function onTextInput(t,e,n){var r=t._get(e)||"";if(r!==n){for(var i=0;r.charAt(i)===n.charAt(i);)i++;for(var o=0;r.charAt(r.length-1-o)===n.charAt(n.length-1-o)&&o+i<r.length&&o+i<n.length;)o++;if(r.length!==i+o){var s=r.length-i-o;t._stringRemove(e,i,s)}if(n.length!==i+o){var a=n.slice(i,n.length-o);t._stringInsert(e,i,a)}}}_$textDiff_147.onStringInsert=onStringInsert,_$textDiff_147.onStringRemove=onStringRemove,_$textDiff_147.onTextInput=onTextInput;var contexts=_$derbyTemplates_131.contexts,__expressions_142=_$derbyTemplates_131.expressions,__templates_142=_$derbyTemplates_131.templates,__DependencyOptions_142=_$derbyTemplates_131.options.DependencyOptions,documentListeners=_$documentListeners_145({}),_$Page_142=Page;function Page(t,e){_$Controller_139.call(this,t,this,e),this.params=null,this.init&&this.init(e),this.context=this._createContext(),this._eventModel=null,this._removeModelListeners=null,this._components={},this._addListeners()}function useLegacyListeners(t){var e=!0,n=t.on("changeImmediate",function(r,i){t.removeListener("changeImmediate",n),e=Array.isArray(i)});return t.set("$derby.testEvent",!0),e}function addDependencies(t,e,n){new BindingWrapper(t,e,n).updateDependencies()}_$util_189.mergeInto(Page.prototype,_$Controller_139.prototype),Page.prototype.$bodyClass=function(t){if(t){for(var e=[],n=t.split(":"),r=0,i=n.length;r<i;r++){var o=n.slice(0,r+1).join("-");e.push(o)}return e.join(" ")}},Page.prototype.$preventDefault=function(t){t.preventDefault()},Page.prototype.$stopPropagation=function(t){t.stopPropagation()},Page.prototype._setRenderParams=function(t){this.model.set("$render.ns",t),this.model.set("$render.params",this.params),this.model.set("$render.url",this.params&&this.params.url),this.model.set("$render.query",this.params&&this.params.query)},Page.prototype._setRenderPrefix=function(t){var e=t?t+":":"";this.model.set("$render.prefix",e)},Page.prototype.get=function(t,e,n){return this._setRenderPrefix(e),this.getView(t,e).get(this.context,n)},Page.prototype.getFragment=function(t,e){return this._setRenderPrefix(e),this.getView(t,e).getFragment(this.context)},Page.prototype.getView=function(t,e){return this.app.views.find(t,e)},Page.prototype.render=function(t){this.app.emit("render",this),this.context.pause(),this._setRenderParams(t);var e=this.getFragment("TitleElement",t),n=this.getFragment("BodyElement",t),r=document.getElementsByTagName("title")[0];r.parentNode.replaceChild(e,r),document.body.parentNode.replaceChild(n,document.body),this.context.unpause(),this.create&&this.create(this.model,this.dom),this.app.emit("routeDone",this,"render")},Page.prototype.attach=function(){this.context.pause();var t=this.model.get("$render.ns"),e=this.getView("TitleElement",t),n=this.getView("BodyElement",t),r=document.getElementsByTagName("title")[0];e.attachTo(r.parentNode,r,this.context),n.attachTo(document.body.parentNode,document.body,this.context),this.context.unpause(),this.create&&this.create(this.model,this.dom)},Page.prototype._createContext=function(){var t=new contexts.ContextMeta;t.views=this.app&&this.app.views;var e=new contexts.Context(t,this);return e.expression=new __expressions_142.PathExpression([]),e.alias="#root",e},Page.prototype._addListeners=function(){var t=this._eventModel=new _$EventModel_146;this._addModelListeners(t),this._addContextListeners(t)},Page.prototype.destroy=function(){for(var t in this.emit("destroy"),this._removeModelListeners(),this._components){this._components[t].destroy()}var e=this.model.silent();e.destroy("_page"),e.destroy("$components"),e.unloadAll&&e.unloadAll()},Page.prototype._addModelListeners=function(t){var e=this.model;if(e){if(useLegacyListeners(e))return this._addModelListenersLegacy(t);var n=e.on("changeImmediate",function(e,n){e=_$util_189.castSegments(e.slice()),t.set(e,n.previous,n.pass)}),r=e.on("loadImmediate",function(e){e=_$util_189.castSegments(e.slice()),t.set(e)}),i=e.on("unloadImmediate",function(e,n){e=_$util_189.castSegments(e.slice()),t.set(e,n.previous)}),o=e.on("insertImmediate",function(e,n){e=_$util_189.castSegments(e.slice()),t.insert(e,n.index,n.values.length)}),s=e.on("removeImmediate",function(e,n){e=_$util_189.castSegments(e.slice()),t.remove(e,n.index,n.values.length)}),a=e.on("moveImmediate",function(e,n){e=_$util_189.castSegments(e.slice()),t.move(e,n.from,n.to,n.howMany)});this._removeModelListeners=function(){e.removeListener("changeImmediate",n),e.removeListener("loadImmediate",r),e.removeListener("unloadImmediate",i),e.removeListener("insertImmediate",o),e.removeListener("removeImmediate",s),e.removeListener("moveImmediate",a)}}},Page.prototype._addModelListenersLegacy=function(t){var e=this.model;if(e){var n=e.on("changeImmediate",function(e,n){var r=n[1],i=n[2];e=_$util_189.castSegments(e.slice()),t.set(e,r,i)}),r=e.on("loadImmediate",function(e){e=_$util_189.castSegments(e.slice()),t.set(e)}),i=e.on("unloadImmediate",function(e){e=_$util_189.castSegments(e.slice()),t.set(e)}),o=e.on("insertImmediate",function(e,n){var r=n[0],i=n[1];e=_$util_189.castSegments(e.slice()),t.insert(e,r,i.length)}),s=e.on("removeImmediate",function(e,n){var r=n[0],i=n[1];e=_$util_189.castSegments(e.slice()),t.remove(e,r,i.length)}),a=e.on("moveImmediate",function(e,n){var r=n[0],i=n[1],o=n[2];e=_$util_189.castSegments(e.slice()),t.move(e,r,i,o)});this._removeModelListeners=function(){e.removeListener("changeImmediate",n),e.removeListener("loadImmediate",r),e.removeListener("unloadImmediate",i),e.removeListener("insertImmediate",o),e.removeListener("removeImmediate",s),e.removeListener("moveImmediate",a)}}},Page.prototype._addContextListeners=function(t){this.context.meta.addBinding=function(e){patchTextBinding(e);var n=e.template.expressions;if(n)for(var r=0,i=n.length;r<i;r++)addDependencies(t,n[r],e);else{var o=e.template.expression;addDependencies(t,o,e)}},this.context.meta.removeBinding=function(e){var n=e.meta;if(!n)return;for(var r=n.length;r--;)t.removeBinding(n[r])},this.context.meta.removeNode=function(t){var e=t.$component;e&&e.destroy();var n=t.$destroyListeners;if(n)for(var r=0;r<n.length;r++)n[r]()},this.context.meta.addItemContext=function(e){var n=e.expression.resolve(e);t.addItemContext(n,e)},this.context.meta.removeItemContext=function(t){}};var __nextId_142=1;function BindingWrapper(t,e,n){this.eventModel=t,this.expression=e,this.binding=n,this.id=__nextId_142++,this.eventModels=null,this.dependencies=null,this.ignoreTemplateDependency=n instanceof _$components_144.ComponentAttributeBinding||n.template instanceof __templates_142.DynamicText&&n instanceof __templates_142.RangeBinding,n.meta?n.meta.push(this):n.meta=[this]}function equalDependencies(t,e){var n=t?t.length:-1;if(n!==(e?e.length:-1))return!1;for(var r=0;r<n;r++){var i=t[r],o=e[r],s=i?i.length:-1,a=o?o.length:-1;if(s!==a)return!1;for(var c=0;c<a;c++)if(i[c]!==o[c])return!1}return!0}function patchTextBinding(t){t instanceof __templates_142.AttributeBinding&&"value"===t.name&&("INPUT"===t.element.tagName||"TEXTAREA"===t.element.tagName)&&documentListeners.inputSupportsSelection(t.element)&&t.template.expression.resolve(t.context)&&(t.update=textInputUpdate)}function textInputUpdate(t,e){textUpdate(this,this.element,t,e)}function textUpdate(t,e,n,r){if(r){if(r.$event&&r.$event.target===e)return;if(r.$stringInsert)return _$textDiff_147.onStringInsert(e,n,r.$stringInsert.index,r.$stringInsert.text);if(r.$stringRemove)return _$textDiff_147.onStringRemove(e,n,r.$stringRemove.index,r.$stringRemove.howMany)}t.template.update(t.context,t)}BindingWrapper.prototype.updateDependencies=function(){var t;this.ignoreTemplateDependency&&this.binding.condition instanceof __templates_142.Template&&(t=new __DependencyOptions_142).setIgnoreTemplate(this.binding.condition);var e=this.expression.dependencies(this.binding.context,t);if(this.dependencies){if(equalDependencies(this.dependencies,e))return;this.eventModel.removeBinding(this)}if(e){this.dependencies=e;for(var n=0,r=e.length;n<r;n++){var i=e[n];i&&this.eventModel.addBinding(i,this)}}},BindingWrapper.prototype.update=function(t,e){this.binding.update(t,e),this.updateDependencies()},BindingWrapper.prototype.insert=function(t,e){this.binding.insert(t,e),this.updateDependencies()},BindingWrapper.prototype.remove=function(t,e){this.binding.remove(t,e),this.updateDependencies()},BindingWrapper.prototype.move=function(t,e,n){this.binding.move(t,e,n),this.updateDependencies()};var _$_views_143=function(t,e){var n=t.expressions,r=t.templates;e.deserialize([[function(){return this.template=new r.Template([new r.Element("title",void 0,[new r.Block(new r.Template([new r.DynamicText(new n.PathExpression(["$render","prefix"],new n.ExpressionMeta("$render.prefix"))),new r.Text("Title")],"{{$render.prefix}}Title"),[new r.DynamicViewInstance(new r.Template([new r.DynamicText(new n.PathExpression(["$render","prefix"],new n.ExpressionMeta("$render.prefix"))),new r.Text("Title")],"{{$render.prefix}}Title"),{})])],void 0,!1)])},"TitleElement"],[function(){return this.template=new r.Template([new r.Element("body",{class:new r.DynamicAttribute(new n.FnExpression(["$bodyClass"],[new n.PathExpression(["$render","ns"])],void 0,new n.ExpressionMeta("$bodyClass($render.ns)")))},[new r.Block(new r.Template([new r.DynamicText(new n.PathExpression(["$render","prefix"],new n.ExpressionMeta("$render.prefix"))),new r.Text("Body")],"{{$render.prefix}}Body"),[new r.DynamicViewInstance(new r.Template([new r.DynamicText(new n.PathExpression(["$render","prefix"],new n.ExpressionMeta("$render.prefix"))),new r.Text("Body")],"{{$render.prefix}}Body"),{})])],void 0,!1,!0)])},"BodyElement"],[function(){return this.template=new r.Template([new r.Text("Todos")])},"Title"],[function(){return this.template=new r.Template([new r.ViewInstance("d-connection-alert",{}),new r.ViewInstance("d-before-unload",{}),new r.ViewInstance("todo-list",{groupName:new n.ViewParentExpression(new n.PathExpression(["$render","params","groupName"],new n.ExpressionMeta("$render.params.groupName")))})])},"Body"],[function(){return this.template=new r.Template([])},"Tail"],[function(){return this.template=new r.Template([new r.Marker("todo-list"),new r.Element("form",{id:new r.Attribute("head")},[new r.Element("h1",void 0,[new r.Text("Todos "),new r.Element("span",void 0,[new r.DynamicText(new n.PathExpression(["remainingTodos"],new n.ExpressionMeta("remainingTodos"))),new r.Text(" remaining")],void 0,!1)],void 0,!1),new r.Element("div",{id:new r.Attribute("add")},[new r.Element("div",{id:new r.Attribute("add-input")},[new r.Element("input",{id:new r.Attribute("new-todo"),value:new r.DynamicAttribute(new n.PathExpression(["newTodo"],new n.ExpressionMeta("newTodo")))},null,void 0,!1)],void 0,!1),new r.Element("input",{id:new r.Attribute("add-button"),type:new r.Attribute("submit"),value:new r.Attribute("Add")},null,void 0,!1)],void 0,!1)],[new r.ElementOn("submit",new n.FnExpression(["add"],[])),new r.ElementOn("submit",new n.FnExpression(["$preventDefault"],[new n.PathExpression(["$event"])]))],!1),new r.Element("div",{id:new r.Attribute("dragbox")},[],void 0,!1),new r.Element("div",{id:new r.Attribute("todos")},[new r.EachBlock(new n.PathExpression(["todoIds"],new n.ExpressionMeta("each todoIds as #todoId, #index","each",void 0,"#todoId","#index")),[new r.ViewInstance("todo",{todo:new n.ViewParentExpression(new n.BracketsExpression(new n.AliasPathExpression("#root",["todos"]),new n.AliasPathExpression("#todoId",[]),void 0,new n.ExpressionMeta("#root.todos[#todoId]")))})])],[new r.AsProperty(["todosContainer"])],!1)])},"todo-list"],[function(){return this.template=new r.Template([new r.Element("table",{class:new r.DynamicAttribute(new r.ConditionalBlock([new n.AttributePathExpression("todo",["completed"],new n.ExpressionMeta("if @todo.completed","if"))],[[new r.Text("completed")]]))},[new r.Element("tbody",void 0,[new r.Element("tr",void 0,[new r.Element("td",{class:new r.Attribute("handle"),width:new r.Attribute("0")},[],void 0,!1),new r.Element("td",{width:new r.Attribute("100%")},[new r.Element("div",{class:new r.Attribute("todo")},[new r.Element("label",void 0,[new r.Element("input",{type:new r.Attribute("checkbox"),checked:new r.DynamicAttribute(new n.AttributePathExpression("todo",["completed"],new n.ExpressionMeta("@todo.completed")))},null,void 0,!1),new r.Element("i",void 0,[],void 0,!1)],void 0,!1),new r.Element("input",{class:new r.Attribute("text"),value:new r.DynamicAttribute(new n.AttributePathExpression("todo",["text"],new n.ExpressionMeta("@todo.text")))},null,void 0,!1),new r.Element("i",void 0,[],void 0,!1)],void 0,!1)],void 0,!1),new r.Element("td",{width:new r.Attribute("0")},[new r.Element("button",{class:new r.Attribute("delete")},[new r.Text("Delete")],[new r.ElementOn("click",new n.FnExpression(["remove"],[new n.AliasPathExpression("#index",[])]))],!1)],void 0,!1)],void 0,!1)],void 0,!1)],void 0,!1)])},"todo"],[function(){return this.template=new r.Template([new r.Marker("d-connection-alert:index"),new r.ConditionalBlock([new n.OperatorExpression("!==",[new n.AliasPathExpression("#root",["$connection","state"]),new n.LiteralExpression("connected")],void 0,new n.ExpressionMeta("if #root.$connection.state !== 'connected'","if"))],[[new r.Element("div",{class:new r.Attribute("connection")},[new r.Element("p",{class:new r.Attribute("alert alert-warning")},[new r.ConditionalBlock([new n.OperatorExpression("===",[new n.AliasPathExpression("#root",["$connection","state"]),new n.LiteralExpression("stopped")],void 0,new n.ExpressionMeta("if #root.$connection.state === 'stopped'","if")),new n.Expression(new n.ExpressionMeta("else","else"))],[[new r.Text("Unable to reconnect â "),new r.Element("a",{href:new r.Attribute("#")},[new r.Text("Reload")],[new r.ElementOn("click",new n.FnExpression(["reload"],[])),new r.ElementOn("click",new n.FnExpression(["$preventDefault"],[new n.PathExpression(["$event"])]))],!1)],[new r.DynamicText(new n.FnExpression(["sentenceCase"],[new n.AliasPathExpression("#root",["$connection","state"])],void 0,new n.ExpressionMeta("sentenceCase(#root.$connection.state)"))),new r.ConditionalBlock([new n.PathExpression(["hideReconnect"],new n.ExpressionMeta("unless hideReconnect","unless"))],[[new r.Text(" â "),new r.Element("a",{href:new r.Attribute("#")},[new r.Text("Reconnect")],[new r.ElementOn("click",new n.FnExpression(["reconnect"],[])),new r.ElementOn("click",new n.FnExpression(["$preventDefault"],[new n.PathExpression(["$event"])]))],!1)]])]])],void 0,!1)],void 0,!1)]])])},"d-connection-alert:index"],[function(){return this.template=new r.Template([new r.Marker("d-before-unload")])},"d-before-unload"]])},__EventEmitter_138=_$EventEmitter_148.EventEmitter,__templates_138=_$derbyTemplates_131.templates,_$App_138=App;function App(t,e,n,r){__EventEmitter_138.call(this),this.derby=t,this.name=e,this.filename=n,this.scriptHash="d829e76f535e7020440421d50196284a",this.bundledAt=1580856669105,this.Page=createAppPage(t),this.proto=this.Page.prototype,this.views=new __templates_138.Views,this.tracksRoutes=_$browser_207.setup(this),this.model=null,this.page=null,this._pendingComponentMap={},this._init(r)}function createAppPage(t){var e=t&&t.Page||_$Page_142;function n(){e.apply(this,arguments)}return n.prototype=Object.create(e.prototype),n}_$util_189.mergeInto(App.prototype,__EventEmitter_138.prototype),App.prototype._init=function(){this._waitForAttach=!0,this._cancelAttach=!1,this.model=new this.derby.Model,_$_views_143(_$derbyTemplates_131,this.views),this._contentReady()},App.prototype._finishInit=function(){var t=this._getScript(),e=JSON.parse(t.nextSibling.innerHTML);this.model.createConnection(e),this.emit("model",this.model),_$util_189.isProduction="production"===e.nodeEnv,_$util_189.isProduction||this._autoRefresh(),this.model.unbundle(e);var n=this.createPage();if(n.params=this.model.get("$render.params"),this.emit("ready",n),this._waitForAttach=!1,this._cancelAttach)this.history.refresh();else{if(_$util_189.isProduction)try{n.attach()}catch(t){this.history.refresh(),console.warn("attachment error",t.stack)}else n.attach();this.emit("load",n)}},App.prototype._contentReady=function(){var t=!1,e=this;function n(){document.addEventListener?document.removeEventListener("DOMContentLoaded",n,!1):document.detachEvent("onreadystatechange",n),r()}function r(){if(!t){if(!document.body)return setTimeout(r,0);t=!0,setTimeout(function(){e._finishInit()},0)}}if("loading"!==document.readyState)return r();if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(document.attachEvent){var i;document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n);try{i=null==window.frameElement}catch(t){}document.documentElement.doScroll&&i&&function e(){if(!t){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}r()}}()}},App.prototype._getScript=function(){return document.querySelector("script[data-derby-app]")},App.prototype.use=_$util_189.use,App.prototype.serverUse=_$util_189.serverUse,App.prototype.loadViews=function(){},App.prototype.loadStyles=function(){},App.prototype.addViews=function(){throw new Error("Parsing not available. Registering a view from source should not be used in application code. Instead, specify a filename with view.file.")},App.prototype.component=function(t,e,n){if("function"==typeof t&&(e=t,t=null),"function"!=typeof e)throw new Error("Missing component constructor argument");var r,i,o,s,a=e.view;a&&"object"==typeof a?(r=a.is,i=a.file,o=a.source,s=a.dependencies):(r=e.is||e.prototype.name,i=e.view||e.prototype.view);var c=t||r||i&&_$pathBrowserify_154.basename(i,".html");if(!c)throw new Error("No view specified for component");if(i&&o)throw new Error("Component may not specify both a view file and source");var l=c.replace(/:index$/,""),u=this.views.nameMap[l];if((u&&u.componentFactory?u.componentFactory.constructor:this._pendingComponentMap[l])!==e){if(n&&u&&!u.fromSerialized)throw new Error('Dependencies cannot override existing views. Already registered "'+c+'"');if(this._pendingComponentMap[l]=e,s)for(var p=0;p<s.length;p++){var h=s[p];Array.isArray(h)?this.component(h[0],h[1],!0):this.component(null,h,!0)}var f;if(i?(this.loadViews(i,c),f=this.views.find(c)):o?(this.addViews(o,c),f=this.views.find(c)):f=t?this.views.find(c):this.views.register(c,""),!f){var d=this.views.findErrorMessage(c);throw new Error(d)}return _$components_144.extendComponent(e),f.componentFactory=_$components_144.createFactory(e),delete this._pendingComponentMap[l],this}},App.prototype.createPage=function(){this.page&&(this.emit("destroyPage",this.page),this.page.destroy());var t=new this.Page(this,this.model);return this.page=t,t},App.prototype.onRoute=function(t,e,n,r){if(this._waitForAttach)this._cancelAttach=!0;else if(this.emit("route",e),e.model.set("$render.params",e.params),e.model.set("$render.url",e.params.url),e.model.set("$render.query",e.params.query),r){var i=this;t.call(e,e,e.model,e.params,n,function(){i.emit("routeDone",e,"transition"),r()})}else t.call(e,e,e.model,e.params,n)},App.prototype._autoRefresh=function(){var t=this,e=this.model.connection;e.on("connected",function(){e.send({derby:"app",name:t.name,hash:t.scriptHash})}),e.on("receive",function(e){if(e.data.derby){var n=e.data;e.data=null,t._handleMessage(n.derby,n)}})},App.prototype._handleMessage=function(t,e){if("refreshViews"===t){new Function("return "+e.views)()(_$derbyTemplates_131,this.views);var n=this.model.get("$render.ns");this.page.render(n)}else if("refreshStyles"===t){var r=document.querySelector('style[data-filename="'+e.filename+'"]');r&&(r.innerHTML=e.css)}else"reload"===t&&this.model.whenNothingPending(function(){window.location=window.location})};var _$Derby_140=Derby;function Derby(){}Derby.prototype=Object.create(_$lib_racer),Derby.prototype.constructor=Derby,Derby.prototype.App=_$App_138,Derby.prototype.Page=_$Page_142,Derby.prototype.Component=_$components_144.Component,Derby.prototype.createApp=function(t,e,n){return new this.App(this,t,e,n)},_$lib_racer.util.isServer||_$documentListeners_145({}).add(document);var _$derby_derby={exports:{}},serverRequire=_$lib_racer.util.serverRequire,__Derby_derby=serverRequire(_$derby_derby,"./lib/DerbyForServer")||_$Derby_140;_$derby_derby.exports=new __Derby_derby,_$derby_derby=_$derby_derby.exports;var _$derbyDebug_130=function(t){t.on("ready",function(e){window.MODEL=e.model,window.APP=t,t.findComponent=findComponent,t.componentCommand=componentCommand,t.derby.Model.prototype.logEvents=logEvents})};function findComponent(t,e){null==e&&(e=0);for(var n,r=document.createTreeWalker(document,128,null,!1);n=r.nextNode();)if(n.data===t){if(0===e)return n.$component;e--}}function componentCommand(t){for(var e,n=0,r=document.createTreeWalker(document,128,null,!1);e=r.nextNode();){if(e===t)return"(component = APP.findComponent('"+e.data+"',"+n+"))";e.data===t.data&&n++}}function logEvents(t){null==t&&(t=""),this.on("all",t+"**",console.log.bind(console))}var _$ConnectionAlert_129={};(function(t){function e(){}_$ConnectionAlert_129=e,e.prototype.view=t,e.prototype.reconnect=function(){var t=this.model;t.set("hideReconnect",!0),setTimeout(function(){t.set("hideReconnect",!1)},1e3),t.reconnect()},e.prototype.reload=function(){window.location.reload()},e.prototype.sentenceCase=function(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}}).call(this,"/node_modules/d-connection-alert");var _$BeforeUnload_128=BeforeUnload;function BeforeUnload(){}function listenerFn(t){return function(e){if(t.hasWritePending()){var n=t.get("message")||"You have unsaved changes. Do you want to leave this page and discard your changes?";return e.returnValue=n,n}}}BeforeUnload.prototype.name="d-before-unload",BeforeUnload.prototype.create=function(t,e){e.on("beforeunload",window,listenerFn(t))};var _$global_32={};(function(t){var e=function(t){return t&&t.Math==Math&&t};_$global_32=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||Function("return this")()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$fails_26=function(t){try{return!!t()}catch(t){return!0}},_$descriptors_21=!_$fails_26(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_$objectPropertyIsEnumerable_59={},nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);_$objectPropertyIsEnumerable_59.f=NASHORN_BUG?function(t){var e=getOwnPropertyDescriptor(this,t);return!!e&&e.enumerable}:nativePropertyIsEnumerable;var _$createPropertyDescriptor_17=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},__toString_11={}.toString,_$classofRaw_11=function(t){return __toString_11.call(t).slice(8,-1)},split="".split,_$indexedObject_37=_$fails_26(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==_$classofRaw_11(t)?split.call(t,""):Object(t)}:Object,_$requireObjectCoercible_70=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},_$toIndexedObject_82=function(t){return _$indexedObject_37(_$requireObjectCoercible_70(t))},_$isObject_42=function(t){return"object"==typeof t?null!==t:"function"==typeof t},_$toPrimitive_86=function(t,e){if(!_$isObject_42(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!_$isObject_42(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!_$isObject_42(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!_$isObject_42(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},__hasOwnProperty_33={}.hasOwnProperty,_$has_33=function(t,e){return __hasOwnProperty_33.call(t,e)},__document_22=_$global_32.document,EXISTS=_$isObject_42(__document_22)&&_$isObject_42(__document_22.createElement),_$documentCreateElement_22=function(t){return EXISTS?__document_22.createElement(t):{}},_$ie8DomDefine_36=!_$descriptors_21&&!_$fails_26(function(){return 7!=Object.defineProperty(_$documentCreateElement_22("div"),"a",{get:function(){return 7}}).a}),_$objectGetOwnPropertyDescriptor_52={},nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;_$objectGetOwnPropertyDescriptor_52.f=_$descriptors_21?nativeGetOwnPropertyDescriptor:function(t,e){if(t=_$toIndexedObject_82(t),e=_$toPrimitive_86(e,!0),_$ie8DomDefine_36)try{return nativeGetOwnPropertyDescriptor(t,e)}catch(t){}if(_$has_33(t,e))return _$createPropertyDescriptor_17(!_$objectPropertyIsEnumerable_59.f.call(t,e),t[e])};var _$anObject_5=function(t){if(!_$isObject_42(t))throw TypeError(String(t)+" is not an object");return t},_$objectDefineProperty_51={},nativeDefineProperty=Object.defineProperty;_$objectDefineProperty_51.f=_$descriptors_21?nativeDefineProperty:function(t,e,n){if(_$anObject_5(t),e=_$toPrimitive_86(e,!0),_$anObject_5(n),_$ie8DomDefine_36)try{return nativeDefineProperty(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var _$createNonEnumerableProperty_16=_$descriptors_21?function(t,e,n){return _$objectDefineProperty_51.f(t,e,_$createPropertyDescriptor_17(1,n))}:function(t,e,n){return t[e]=n,t},_$isPure_43=!1,_$setGlobal_71=function(t,e){try{_$createNonEnumerableProperty_16(_$global_32,t,e)}catch(n){_$global_32[t]=e}return e},SHARED="__core-js_shared__",store=_$global_32[SHARED]||_$setGlobal_71(SHARED,{}),_$store_75=store,_$shared_76={};(_$shared_76=function(t,e){return _$store_75[t]||(_$store_75[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.1",mode:_$isPure_43?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"});var _$functionToString_30=_$shared_76("native-function-to-string",Function.toString),WeakMap=_$global_32.WeakMap,_$nativeWeakMap_48="function"==typeof WeakMap&&/native code/.test(_$functionToString_30.call(WeakMap)),id=0,postfix=Math.random(),_$uid_87=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++id+postfix).toString(36)},keys=_$shared_76("keys"),_$sharedKey_74=function(t){return keys[t]||(keys[t]=_$uid_87(t))},_$hiddenKeys_34={},__WeakMap_39=_$global_32.WeakMap,set,get,__has_39,enforce=function(t){return __has_39(t)?get(t):set(t,{})},getterFor=function(t){return function(e){var n;if(!_$isObject_42(e)||(n=get(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(_$nativeWeakMap_48){var __store_39=new __WeakMap_39,wmget=__store_39.get,wmhas=__store_39.has,wmset=__store_39.set;set=function(t,e){return wmset.call(__store_39,t,e),e},get=function(t){return wmget.call(__store_39,t)||{}},__has_39=function(t){return wmhas.call(__store_39,t)}}else{var STATE=_$sharedKey_74("state");_$hiddenKeys_34[STATE]=!0,set=function(t,e){return _$createNonEnumerableProperty_16(t,STATE,e),e},get=function(t){return _$has_33(t,STATE)?t[STATE]:{}},__has_39=function(t){return _$has_33(t,STATE)}}var _$internalState_39={set:set,get:get,enforce:enforce,getterFor:getterFor},_$redefine_66={},getInternalState=_$internalState_39.get,enforceInternalState=_$internalState_39.enforce,TEMPLATE=String(_$functionToString_30).split("toString");_$shared_76("inspectSource",function(t){return _$functionToString_30.call(t)}),(_$redefine_66=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||_$has_33(n,"name")||_$createNonEnumerableProperty_16(n,"name",e),enforceInternalState(n).source=TEMPLATE.join("string"==typeof e?e:"")),t!==_$global_32?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:_$createNonEnumerableProperty_16(t,e,n)):o?t[e]=n:_$setGlobal_71(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&getInternalState(this).source||_$functionToString_30.call(this)});var _$path_65=_$global_32,aFunction=function(t){return"function"==typeof t?t:void 0},_$getBuiltIn_31=function(t,e){return arguments.length<2?aFunction(_$path_65[t])||aFunction(_$global_32[t]):_$path_65[t]&&_$path_65[t][e]||_$global_32[t]&&_$global_32[t][e]},ceil=Math.ceil,floor=Math.floor,_$toInteger_83=function(t){return isNaN(t=+t)?0:(t>0?floor:ceil)(t)},min=Math.min,_$toLength_84=function(t){return t>0?min(_$toInteger_83(t),9007199254740991):0},max=Math.max,__min_81=Math.min,_$toAbsoluteIndex_81=function(t,e){var n=_$toInteger_83(t);return n<0?max(n+e,0):__min_81(n,e)},createMethod=function(t){return function(e,n,r){var i,o=_$toIndexedObject_82(e),s=_$toLength_84(o.length),a=_$toAbsoluteIndex_81(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},_$arrayIncludes_6={indexOf:createMethod(!1)},indexOf=_$arrayIncludes_6.indexOf,_$objectKeysInternal_57=function(t,e){var n,r=_$toIndexedObject_82(t),i=0,o=[];for(n in r)!_$has_33(_$hiddenKeys_34,n)&&_$has_33(r,n)&&o.push(n);for(;e.length>i;)_$has_33(r,n=e[i++])&&(~indexOf(o,n)||o.push(n));return o},_$enumBugKeys_24=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_$objectGetOwnPropertyNames_54={},__hiddenKeys_54=_$enumBugKeys_24.concat("length","prototype");_$objectGetOwnPropertyNames_54.f=Object.getOwnPropertyNames||function(t){return _$objectKeysInternal_57(t,__hiddenKeys_54)};var _$objectGetOwnPropertySymbols_55={};_$objectGetOwnPropertySymbols_55.f=Object.getOwnPropertySymbols;var _$ownKeys_62=_$getBuiltIn_31("Reflect","ownKeys")||function(t){var e=_$objectGetOwnPropertyNames_54.f(_$anObject_5(t)),n=_$objectGetOwnPropertySymbols_55.f;return n?e.concat(n(t)):e},_$copyConstructorProperties_13=function(t,e){for(var n=_$ownKeys_62(e),r=_$objectDefineProperty_51.f,i=_$objectGetOwnPropertyDescriptor_52.f,o=0;o<n.length;o++){var s=n[o];_$has_33(t,s)||r(t,s,i(e,s))}},replacement=/#|\.prototype\./,isForced=function(t,e){var n=data[normalize(t)];return n==POLYFILL||n!=NATIVE&&("function"==typeof e?_$fails_26(e):!!e)},normalize=isForced.normalize=function(t){return String(t).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",_$isForced_41=isForced,__getOwnPropertyDescriptor_25=_$objectGetOwnPropertyDescriptor_52.f,_$export_25=function(t,e){var n,r,i,o,s,a=t.target,c=t.global,l=t.stat;if(n=c?_$global_32:l?_$global_32[a]||_$setGlobal_71(a,{}):(_$global_32[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=__getOwnPropertyDescriptor_25(n,r))&&s.value:n[r],!_$isForced_41(c?r:a+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;_$copyConstructorProperties_13(o,i)}(t.sham||i&&i.sham)&&_$createNonEnumerableProperty_16(o,"sham",!0),_$redefine_66(n,r,o,t)}},_$nativeSymbol_47=!!Object.getOwnPropertySymbols&&!_$fails_26(function(){return!String(Symbol())}),_$isArray_40=Array.isArray||function(t){return"Array"==_$classofRaw_11(t)},_$toObject_85=function(t){return Object(_$requireObjectCoercible_70(t))},_$objectKeys_58=Object.keys||function(t){return _$objectKeysInternal_57(t,_$enumBugKeys_24)},_$objectDefineProperties_50=_$descriptors_21?Object.defineProperties:function(t,e){_$anObject_5(t);for(var n,r=_$objectKeys_58(e),i=r.length,o=0;i>o;)_$objectDefineProperty_51.f(t,n=r[o++],e[n]);return t},_$html_35=_$getBuiltIn_31("document","documentElement"),IE_PROTO=_$sharedKey_74("IE_PROTO"),PROTOTYPE="prototype",Empty=function(){},createDict=function(){var t,e=_$documentCreateElement_22("iframe"),n=_$enumBugKeys_24.length;for(e.style.display="none",_$html_35.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),createDict=t.F;n--;)delete createDict[PROTOTYPE][_$enumBugKeys_24[n]];return createDict()},_$objectCreate_49=Object.create||function(t,e){var n;return null!==t?(Empty[PROTOTYPE]=_$anObject_5(t),n=new Empty,Empty[PROTOTYPE]=null,n[IE_PROTO]=t):n=createDict(),void 0===e?n:_$objectDefineProperties_50(n,e)};_$hiddenKeys_34[IE_PROTO]=!0;var _$objectGetOwnPropertyNamesExternal_53={},nativeGetOwnPropertyNames=_$objectGetOwnPropertyNames_54.f,__toString_53={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(t){try{return nativeGetOwnPropertyNames(t)}catch(t){return windowNames.slice()}};_$objectGetOwnPropertyNamesExternal_53.f=function(t){return windowNames&&"[object Window]"==__toString_53.call(t)?getWindowNames(t):nativeGetOwnPropertyNames(_$toIndexedObject_82(t))};var __Symbol_90=_$global_32.Symbol,__store_90=_$shared_76("wks"),_$wellKnownSymbol_90=function(t){return __store_90[t]||(__store_90[t]=_$nativeSymbol_47&&__Symbol_90[t]||(_$nativeSymbol_47?__Symbol_90:_$uid_87)("Symbol."+t))},_$wrappedWellKnownSymbol_92={};_$wrappedWellKnownSymbol_92.f=_$wellKnownSymbol_90;var defineProperty=_$objectDefineProperty_51.f,_$defineWellKnownSymbol_20=function(t){var e=_$path_65.Symbol||(_$path_65.Symbol={});_$has_33(e,t)||defineProperty(e,t,{value:_$wrappedWellKnownSymbol_92.f(t)})},__defineProperty_73=_$objectDefineProperty_51.f,TO_STRING_TAG=_$wellKnownSymbol_90("toStringTag"),_$setToStringTag_73=function(t,e,n){t&&!_$has_33(t=n?t:t.prototype,TO_STRING_TAG)&&__defineProperty_73(t,TO_STRING_TAG,{configurable:!0,value:e})},_$aFunction_1=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},_$bindContext_10=function(t,e,n){if(_$aFunction_1(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},SPECIES=_$wellKnownSymbol_90("species"),_$arraySpeciesCreate_9=function(t,e){var n;return _$isArray_40(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!_$isArray_40(n.prototype)?_$isObject_42(n)&&null===(n=n[SPECIES])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},__push_7=[].push,__createMethod_7=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,s=5==t||o;return function(a,c,l,u){for(var p,h,f=_$toObject_85(a),d=_$indexedObject_37(f),_=_$bindContext_10(c,l,3),m=_$toLength_84(d.length),y=0,g=u||_$arraySpeciesCreate_9,v=e?g(a,m):n?g(a,0):void 0;m>y;y++)if((s||y in d)&&(h=_(p=d[y],y,f),t))if(e)v[y]=h;else if(h)switch(t){case 3:return!0;case 5:return p;case 6:return y;case 2:__push_7.call(v,p)}else if(i)return!1;return o?-1:r||i?i:v}},_$arrayIteration_7={forEach:__createMethod_7(0),map:__createMethod_7(1),filter:__createMethod_7(2),find:__createMethod_7(5)},_$esSymbol_122={},$forEach=_$arrayIteration_7.forEach,HIDDEN=_$sharedKey_74("hidden"),SYMBOL="Symbol",__PROTOTYPE_122="prototype",TO_PRIMITIVE=_$wellKnownSymbol_90("toPrimitive"),setInternalState=_$internalState_39.set,__getInternalState_122=_$internalState_39.getterFor(SYMBOL),ObjectPrototype=Object[__PROTOTYPE_122],$Symbol=_$global_32.Symbol,$stringify=_$getBuiltIn_31("JSON","stringify"),__nativeGetOwnPropertyDescriptor_122=_$objectGetOwnPropertyDescriptor_52.f,__nativeDefineProperty_122=_$objectDefineProperty_51.f,__nativeGetOwnPropertyNames_122=_$objectGetOwnPropertyNamesExternal_53.f,__nativePropertyIsEnumerable_122=_$objectPropertyIsEnumerable_59.f,AllSymbols=_$shared_76("symbols"),ObjectPrototypeSymbols=_$shared_76("op-symbols"),StringToSymbolRegistry=_$shared_76("string-to-symbol-registry"),SymbolToStringRegistry=_$shared_76("symbol-to-string-registry"),WellKnownSymbolsStore=_$shared_76("wks"),QObject=_$global_32.QObject,USE_SETTER=!QObject||!QObject[__PROTOTYPE_122]||!QObject[__PROTOTYPE_122].findChild,setSymbolDescriptor=_$descriptors_21&&_$fails_26(function(){return 7!=_$objectCreate_49(__nativeDefineProperty_122({},"a",{get:function(){return __nativeDefineProperty_122(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=__nativeGetOwnPropertyDescriptor_122(ObjectPrototype,e);r&&delete ObjectPrototype[e],__nativeDefineProperty_122(t,e,n),r&&t!==ObjectPrototype&&__nativeDefineProperty_122(ObjectPrototype,e,r)}:__nativeDefineProperty_122,wrap=function(t,e){var n=AllSymbols[t]=_$objectCreate_49($Symbol[__PROTOTYPE_122]);return setInternalState(n,{type:SYMBOL,tag:t,description:e}),_$descriptors_21||(n.description=e),n},isSymbol=_$nativeSymbol_47&&"symbol"==typeof $Symbol.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof $Symbol},$defineProperty=function(t,e,n){t===ObjectPrototype&&$defineProperty(ObjectPrototypeSymbols,e,n),_$anObject_5(t);var r=_$toPrimitive_86(e,!0);return _$anObject_5(n),_$has_33(AllSymbols,r)?(n.enumerable?(_$has_33(t,HIDDEN)&&t[HIDDEN][r]&&(t[HIDDEN][r]=!1),n=_$objectCreate_49(n,{enumerable:_$createPropertyDescriptor_17(0,!1)})):(_$has_33(t,HIDDEN)||__nativeDefineProperty_122(t,HIDDEN,_$createPropertyDescriptor_17(1,{})),t[HIDDEN][r]=!0),setSymbolDescriptor(t,r,n)):__nativeDefineProperty_122(t,r,n)},$defineProperties=function(t,e){_$anObject_5(t);var n=_$toIndexedObject_82(e),r=_$objectKeys_58(n).concat($getOwnPropertySymbols(n));return $forEach(r,function(e){_$descriptors_21&&!$propertyIsEnumerable.call(n,e)||$defineProperty(t,e,n[e])}),t},$create=function(t,e){return void 0===e?_$objectCreate_49(t):$defineProperties(_$objectCreate_49(t),e)},$propertyIsEnumerable=function(t){var e=_$toPrimitive_86(t,!0),n=__nativePropertyIsEnumerable_122.call(this,e);return!(this===ObjectPrototype&&_$has_33(AllSymbols,e)&&!_$has_33(ObjectPrototypeSymbols,e))&&(!(n||!_$has_33(this,e)||!_$has_33(AllSymbols,e)||_$has_33(this,HIDDEN)&&this[HIDDEN][e])||n)},$getOwnPropertyDescriptor=function(t,e){var n=_$toIndexedObject_82(t),r=_$toPrimitive_86(e,!0);if(n!==ObjectPrototype||!_$has_33(AllSymbols,r)||_$has_33(ObjectPrototypeSymbols,r)){var i=__nativeGetOwnPropertyDescriptor_122(n,r);return!i||!_$has_33(AllSymbols,r)||_$has_33(n,HIDDEN)&&n[HIDDEN][r]||(i.enumerable=!0),i}},$getOwnPropertyNames=function(t){var e=__nativeGetOwnPropertyNames_122(_$toIndexedObject_82(t)),n=[];return $forEach(e,function(t){_$has_33(AllSymbols,t)||_$has_33(_$hiddenKeys_34,t)||n.push(t)}),n},$getOwnPropertySymbols=function(t){var e=t===ObjectPrototype,n=__nativeGetOwnPropertyNames_122(e?ObjectPrototypeSymbols:_$toIndexedObject_82(t)),r=[];return $forEach(n,function(t){!_$has_33(AllSymbols,t)||e&&!_$has_33(ObjectPrototype,t)||r.push(AllSymbols[t])}),r};if(_$nativeSymbol_47||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=_$uid_87(t),n=function(t){this===ObjectPrototype&&n.call(ObjectPrototypeSymbols,t),_$has_33(this,HIDDEN)&&_$has_33(this[HIDDEN],e)&&(this[HIDDEN][e]=!1),setSymbolDescriptor(this,e,_$createPropertyDescriptor_17(1,t))};return _$descriptors_21&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype,e,{configurable:!0,set:n}),wrap(e,t)},_$redefine_66($Symbol[__PROTOTYPE_122],"toString",function(){return __getInternalState_122(this).tag}),_$objectPropertyIsEnumerable_59.f=$propertyIsEnumerable,_$objectDefineProperty_51.f=$defineProperty,_$objectGetOwnPropertyDescriptor_52.f=$getOwnPropertyDescriptor,_$objectGetOwnPropertyNames_54.f=_$objectGetOwnPropertyNamesExternal_53.f=$getOwnPropertyNames,_$objectGetOwnPropertySymbols_55.f=$getOwnPropertySymbols,_$descriptors_21&&(__nativeDefineProperty_122($Symbol[__PROTOTYPE_122],"description",{configurable:!0,get:function(){return __getInternalState_122(this).description}}),_$isPure_43||_$redefine_66(ObjectPrototype,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0})),_$wrappedWellKnownSymbol_92.f=function(t){return wrap(_$wellKnownSymbol_90(t),t)}),_$export_25({global:!0,wrap:!0,forced:!_$nativeSymbol_47,sham:!_$nativeSymbol_47},{Symbol:$Symbol}),$forEach(_$objectKeys_58(WellKnownSymbolsStore),function(t){_$defineWellKnownSymbol_20(t)}),_$export_25({target:SYMBOL,stat:!0,forced:!_$nativeSymbol_47},{for:function(t){var e=String(t);if(_$has_33(StringToSymbolRegistry,e))return StringToSymbolRegistry[e];var n=$Symbol(e);return StringToSymbolRegistry[e]=n,SymbolToStringRegistry[n]=e,n},keyFor:function(t){if(!isSymbol(t))throw TypeError(t+" is not a symbol");if(_$has_33(SymbolToStringRegistry,t))return SymbolToStringRegistry[t]},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),_$export_25({target:"Object",stat:!0,forced:!_$nativeSymbol_47,sham:!_$descriptors_21},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),_$export_25({target:"Object",stat:!0,forced:!_$nativeSymbol_47},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),_$export_25({target:"Object",stat:!0,forced:_$fails_26(function(){_$objectGetOwnPropertySymbols_55.f(1)})},{getOwnPropertySymbols:function(t){return _$objectGetOwnPropertySymbols_55.f(_$toObject_85(t))}}),$stringify){var FORCED_JSON_STRINGIFY=!_$nativeSymbol_47||_$fails_26(function(){var t=$Symbol();return"[null]"!=$stringify([t])||"{}"!=$stringify({a:t})||"{}"!=$stringify(Object(t))});_$export_25({target:"JSON",stat:!0,forced:FORCED_JSON_STRINGIFY},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(_$isObject_42(e)||void 0!==t)&&!isSymbol(t))return _$isArray_40(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!isSymbol(e))return e}),i[1]=e,$stringify.apply(null,i)}})}$Symbol[__PROTOTYPE_122][TO_PRIMITIVE]||_$createNonEnumerableProperty_16($Symbol[__PROTOTYPE_122],TO_PRIMITIVE,$Symbol[__PROTOTYPE_122].valueOf),_$setToStringTag_73($Symbol,SYMBOL),_$hiddenKeys_34[HIDDEN]=!0;var _$esSymbolDescription_120={},__defineProperty_120=_$objectDefineProperty_51.f,NativeSymbol=_$global_32.Symbol;if(_$descriptors_21&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof SymbolWrapper?new NativeSymbol(t):void 0===t?NativeSymbol():NativeSymbol(t);return""===t&&(EmptyStringDescriptionStore[e]=!0),e};_$copyConstructorProperties_13(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;__defineProperty_120(symbolPrototype,"description",{configurable:!0,get:function(){var t=_$isObject_42(this)?this.valueOf():this,e=symbolToString.call(t);if(_$has_33(EmptyStringDescriptionStore,t))return"";var n=native?e.slice(7,-1):e.replace(regexp,"$1");return""===n?void 0:n}}),_$export_25({global:!0,forced:!0},{Symbol:SymbolWrapper})}var _$esSymbolIterator_121={};_$defineWellKnownSymbol_20("iterator");var _$createProperty_18=function(t,e,n){var r=_$toPrimitive_86(e);r in t?_$objectDefineProperty_51.f(t,r,_$createPropertyDescriptor_17(0,n)):t[r]=n},_$userAgent_88=_$getBuiltIn_31("navigator","userAgent")||"",__process_89=_$global_32.process,versions=__process_89&&__process_89.versions,v8=versions&&versions.v8,match,version;v8?(match=v8.split("."),version=match[0]+match[1]):_$userAgent_88&&(match=_$userAgent_88.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=_$userAgent_88.match(/Chrome\/(\d+)/),match&&(version=match[1])));var _$v8Version_89=version&&+version,__SPECIES_8=_$wellKnownSymbol_90("species"),_$arrayMethodHasSpeciesSupport_8=function(t){return _$v8Version_89>=51||!_$fails_26(function(){var e=[];return(e.constructor={})[__SPECIES_8]=function(){return{foo:1}},1!==e[t](Boolean).foo})},_$esArrayConcat_93={},IS_CONCAT_SPREADABLE=_$wellKnownSymbol_90("isConcatSpreadable"),MAX_SAFE_INTEGER=9007199254740991,MAXIMUM_ALLOWED_INDEX_EXCEEDED="Maximum allowed index exceeded",IS_CONCAT_SPREADABLE_SUPPORT=_$v8Version_89>=51||!_$fails_26(function(){var t=[];return t[IS_CONCAT_SPREADABLE]=!1,t.concat()[0]!==t}),SPECIES_SUPPORT=_$arrayMethodHasSpeciesSupport_8("concat"),isConcatSpreadable=function(t){if(!_$isObject_42(t))return!1;var e=t[IS_CONCAT_SPREADABLE];return void 0!==e?!!e:_$isArray_40(t)},FORCED=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;_$export_25({target:"Array",proto:!0,forced:FORCED},{concat:function(t){var e,n,r,i,o,s=_$toObject_85(this),a=_$arraySpeciesCreate_9(s,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?s:arguments[e],isConcatSpreadable(o)){if(c+(i=_$toLength_84(o.length))>MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(n=0;n<i;n++,c++)n in o&&_$createProperty_18(a,c,o[n])}else{if(c>=MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);_$createProperty_18(a,c++,o)}return a.length=c,a}});var _$esArrayFilter_94={},$filter=_$arrayIteration_7.filter;_$export_25({target:"Array",proto:!0,forced:!_$arrayMethodHasSpeciesSupport_8("filter")},{filter:function(t){return $filter(this,t,arguments.length>1?arguments[1]:void 0)}});var UNSCOPABLES=_$wellKnownSymbol_90("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&_$createNonEnumerableProperty_16(ArrayPrototype,UNSCOPABLES,_$objectCreate_49(null));var _$addToUnscopables_3=function(t){ArrayPrototype[UNSCOPABLES][t]=!0},_$esArrayFind_95={},$find=_$arrayIteration_7.find,FIND="find",SKIPS_HOLES=!0;FIND in[]&&Array(1)[FIND](function(){SKIPS_HOLES=!1}),_$export_25({target:"Array",proto:!0,forced:SKIPS_HOLES},{find:function(t){return $find(this,t,arguments.length>1?arguments[1]:void 0)}}),_$addToUnscopables_3(FIND);var _$sloppyArrayMethod_77=function(t,e){var n=[][t];return!n||!_$fails_26(function(){n.call(null,e||function(){throw 1},1)})},_$esArrayIndexOf_96={},$indexOf=_$arrayIncludes_6.indexOf,nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,SLOPPY_METHOD=_$sloppyArrayMethod_77("indexOf");_$export_25({target:"Array",proto:!0,forced:NEGATIVE_ZERO||SLOPPY_METHOD},{indexOf:function(t){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,t,arguments.length>1?arguments[1]:void 0)}});var _$esArrayIsArray_97={};_$export_25({target:"Array",stat:!0},{isArray:_$isArray_40});var _$iterators_46={},_$correctPrototypeGetter_14=!_$fails_26(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),__IE_PROTO_56=_$sharedKey_74("IE_PROTO"),__ObjectPrototype_56=Object.prototype,_$objectGetPrototypeOf_56=_$correctPrototypeGetter_14?Object.getPrototypeOf:function(t){return t=_$toObject_85(t),_$has_33(t,__IE_PROTO_56)?t[__IE_PROTO_56]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?__ObjectPrototype_56:null},ITERATOR=_$wellKnownSymbol_90("iterator"),BUGGY_SAFARI_ITERATORS=!1,returnThis=function(){return this},IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=_$objectGetPrototypeOf_56(_$objectGetPrototypeOf_56(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),_$isPure_43||_$has_33(IteratorPrototype,ITERATOR)||_$createNonEnumerableProperty_16(IteratorPrototype,ITERATOR,returnThis);var _$iteratorsCore_45={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS},__IteratorPrototype_15=_$iteratorsCore_45.IteratorPrototype,__returnThis_15=function(){return this},_$createIteratorConstructor_15=function(t,e,n){var r=e+" Iterator";return t.prototype=_$objectCreate_49(__IteratorPrototype_15,{next:_$createPropertyDescriptor_17(1,n)}),_$setToStringTag_73(t,r,!1,!0),_$iterators_46[r]=__returnThis_15,t},_$aPossiblePrototype_2=function(t){if(!_$isObject_42(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},_$objectSetPrototypeOf_60=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return _$anObject_5(n),_$aPossiblePrototype_2(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),__IteratorPrototype_19=_$iteratorsCore_45.IteratorPrototype,__BUGGY_SAFARI_ITERATORS_19=_$iteratorsCore_45.BUGGY_SAFARI_ITERATORS,__ITERATOR_19=_$wellKnownSymbol_90("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",__returnThis_19=function(){return this},_$defineIterator_19=function(t,e,n,r,i,o,s){_$createIteratorConstructor_15(n,e,r);var a,c,l,u=function(t){if(t===i&&_)return _;if(!__BUGGY_SAFARI_ITERATORS_19&&t in f)return f[t];switch(t){case KEYS:case VALUES:case ENTRIES:return function(){return new n(this,t)}}return function(){return new n(this)}},p=e+" Iterator",h=!1,f=t.prototype,d=f[__ITERATOR_19]||f["@@iterator"]||i&&f[i],_=!__BUGGY_SAFARI_ITERATORS_19&&d||u(i),m="Array"==e&&f.entries||d;if(m&&(a=_$objectGetPrototypeOf_56(m.call(new t)),__IteratorPrototype_19!==Object.prototype&&a.next&&(_$isPure_43||_$objectGetPrototypeOf_56(a)===__IteratorPrototype_19||(_$objectSetPrototypeOf_60?_$objectSetPrototypeOf_60(a,__IteratorPrototype_19):"function"!=typeof a[__ITERATOR_19]&&_$createNonEnumerableProperty_16(a,__ITERATOR_19,__returnThis_19)),_$setToStringTag_73(a,p,!0,!0),_$isPure_43&&(_$iterators_46[p]=__returnThis_19))),i==VALUES&&d&&d.name!==VALUES&&(h=!0,_=function(){return d.call(this)}),_$isPure_43&&!s||f[__ITERATOR_19]===_||_$createNonEnumerableProperty_16(f,__ITERATOR_19,_),_$iterators_46[e]=_,i)if(c={values:u(VALUES),keys:o?_:u(KEYS),entries:u(ENTRIES)},s)for(l in c)!__BUGGY_SAFARI_ITERATORS_19&&!h&&l in f||_$redefine_66(f,l,c[l]);else _$export_25({target:e,proto:!0,forced:__BUGGY_SAFARI_ITERATORS_19||h},c);return c},ARRAY_ITERATOR="Array Iterator",__setInternalState_98=_$internalState_39.set,__getInternalState_98=_$internalState_39.getterFor(ARRAY_ITERATOR),_$esArrayIterator_98=_$defineIterator_19(Array,"Array",function(t,e){__setInternalState_98(this,{type:ARRAY_ITERATOR,target:_$toIndexedObject_82(t),index:0,kind:e})},function(){var t=__getInternalState_98(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");_$iterators_46.Arguments=_$iterators_46.Array,_$addToUnscopables_3("keys"),_$addToUnscopables_3("values"),_$addToUnscopables_3("entries");var _$esArrayJoin_99={},nativeJoin=[].join,ES3_STRINGS=_$indexedObject_37!=Object,__SLOPPY_METHOD_99=_$sloppyArrayMethod_77("join",",");_$export_25({target:"Array",proto:!0,forced:ES3_STRINGS||__SLOPPY_METHOD_99},{join:function(t){return nativeJoin.call(_$toIndexedObject_82(this),void 0===t?",":t)}});var _$esArrayMap_100={},$map=_$arrayIteration_7.map;_$export_25({target:"Array",proto:!0,forced:!_$arrayMethodHasSpeciesSupport_8("map")},{map:function(t){return $map(this,t,arguments.length>1?arguments[1]:void 0)}});var _$esArrayReverse_101={},nativeReverse=[].reverse,test=[1,2];_$export_25({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function(){return _$isArray_40(this)&&(this.length=this.length),nativeReverse.call(this)}});var _$esArraySlice_102={},__SPECIES_102=_$wellKnownSymbol_90("species"),nativeSlice=[].slice,__max_102=Math.max;_$export_25({target:"Array",proto:!0,forced:!_$arrayMethodHasSpeciesSupport_8("slice")},{slice:function(t,e){var n,r,i,o=_$toIndexedObject_82(this),s=_$toLength_84(o.length),a=_$toAbsoluteIndex_81(t,s),c=_$toAbsoluteIndex_81(void 0===e?s:e,s);if(_$isArray_40(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!_$isArray_40(n.prototype)?_$isObject_42(n)&&null===(n=n[__SPECIES_102])&&(n=void 0):n=void 0,n===Array||void 0===n))return nativeSlice.call(o,a,c);for(r=new(void 0===n?Array:n)(__max_102(c-a,0)),i=0;a<c;a++,i++)a in o&&_$createProperty_18(r,i,o[a]);return r.length=i,r}});var _$esArraySort_103={},__test_103=[],nativeSort=__test_103.sort,FAILS_ON_UNDEFINED=_$fails_26(function(){__test_103.sort(void 0)}),FAILS_ON_NULL=_$fails_26(function(){__test_103.sort(null)}),__SLOPPY_METHOD_103=_$sloppyArrayMethod_77("sort"),__FORCED_103=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||__SLOPPY_METHOD_103;_$export_25({target:"Array",proto:!0,forced:__FORCED_103},{sort:function(t){return void 0===t?nativeSort.call(_$toObject_85(this)):nativeSort.call(_$toObject_85(this),_$aFunction_1(t))}});var _$esArraySplice_104={},__max_104=Math.max,__min_104=Math.min,__MAX_SAFE_INTEGER_104=9007199254740991,MAXIMUM_ALLOWED_LENGTH_EXCEEDED="Maximum allowed length exceeded";_$export_25({target:"Array",proto:!0,forced:!_$arrayMethodHasSpeciesSupport_8("splice")},{splice:function(t,e){var n,r,i,o,s,a,c=_$toObject_85(this),l=_$toLength_84(c.length),u=_$toAbsoluteIndex_81(t,l),p=arguments.length;if(0===p?n=r=0:1===p?(n=0,r=l-u):(n=p-2,r=__min_104(__max_104(_$toInteger_83(e),0),l-u)),l+n-r>__MAX_SAFE_INTEGER_104)throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);for(i=_$arraySpeciesCreate_9(c,r),o=0;o<r;o++)(s=u+o)in c&&_$createProperty_18(i,o,c[s]);if(i.length=r,n<r){for(o=u;o<l-r;o++)a=o+n,(s=o+r)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-r+n;o--)delete c[o-1]}else if(n>r)for(o=l-r;o>u;o--)a=o+n-1,(s=o+r-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-r+n,i}});var _$esDateToJson_105={},__FORCED_105=_$fails_26(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})});_$export_25({target:"Date",proto:!0,forced:__FORCED_105},{toJSON:function(t){var e=_$toObject_85(this),n=_$toPrimitive_86(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var _$esDateToString_106={},DatePrototype=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING="toString",nativeDateToString=DatePrototype[TO_STRING],getTime=DatePrototype.getTime;new Date(NaN)+""!=INVALID_DATE&&_$redefine_66(DatePrototype,TO_STRING,function(){var t=getTime.call(this);return t==t?nativeDateToString.call(this):INVALID_DATE});var _$esFunctionName_108={},__defineProperty_108=_$objectDefineProperty_51.f,FunctionPrototype=Function.prototype,FunctionPrototypeToString=FunctionPrototype.toString,nameRE=/^\s*function ([^ (]*)/,NAME="name";!_$descriptors_21||NAME in FunctionPrototype||__defineProperty_108(FunctionPrototype,NAME,{configurable:!0,get:function(){try{return FunctionPrototypeToString.call(this).match(nameRE)[1]}catch(t){return""}}});var __TO_STRING_TAG_12=_$wellKnownSymbol_90("toStringTag"),CORRECT_ARGUMENTS="Arguments"==_$classofRaw_11(function(){return arguments}()),tryGet=function(t,e){try{return t[e]}catch(t){}},_$classof_12=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=tryGet(e=Object(t),__TO_STRING_TAG_12))?n:CORRECT_ARGUMENTS?_$classofRaw_11(e):"Object"==(r=_$classofRaw_11(e))&&"function"==typeof e.callee?"Arguments":r},__TO_STRING_TAG_61=_$wellKnownSymbol_90("toStringTag"),__test_61={};__test_61[__TO_STRING_TAG_61]="z";var _$objectToString_61="[object z]"!==String(__test_61)?function(){return"[object "+_$classof_12(this)+"]"}:__test_61.toString,_$esObjectToString_109={},__ObjectPrototype_109=Object.prototype;_$objectToString_61!==__ObjectPrototype_109.toString&&_$redefine_66(__ObjectPrototype_109,"toString",_$objectToString_61,{unsafe:!0});var _$whitespaces_91="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",whitespace="["+_$whitespaces_91+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),__createMethod_80=function(t){return function(e){var n=String(_$requireObjectCoercible_70(e));return 1&t&&(n=n.replace(ltrim,"")),2&t&&(n=n.replace(rtrim,"")),n}},_$stringTrim_80={trim:__createMethod_80(3)},trim=_$stringTrim_80.trim,nativeParseFloat=_$global_32.parseFloat,__FORCED_63=1/nativeParseFloat(_$whitespaces_91+"-0")!=-1/0,_$parseFloat_63=__FORCED_63?function(t){var e=trim(String(t)),n=nativeParseFloat(e);return 0===n&&"-"==e.charAt(0)?-0:n}:nativeParseFloat,_$esParseFloat_110={};_$export_25({global:!0,forced:parseFloat!=_$parseFloat_63},{parseFloat:_$parseFloat_63});var __trim_64=_$stringTrim_80.trim,nativeParseInt=_$global_32.parseInt,hex=/^[+-]?0[Xx]/,__FORCED_64=8!==nativeParseInt(_$whitespaces_91+"08")||22!==nativeParseInt(_$whitespaces_91+"0x16"),_$parseInt_64=__FORCED_64?function(t,e){var n=__trim_64(String(t));return nativeParseInt(n,e>>>0||(hex.test(n)?16:10))}:nativeParseInt,_$esParseInt_111={};_$export_25({global:!0,forced:parseInt!=_$parseInt_64},{parseInt:_$parseInt_64});var _$inheritIfRequired_38=function(t,e,n){var r,i;return _$objectSetPrototypeOf_60&&"function"==typeof(r=e.constructor)&&r!==n&&_$isObject_42(i=r.prototype)&&i!==n.prototype&&_$objectSetPrototypeOf_60(t,i),t},MATCH=_$wellKnownSymbol_90("match"),_$isRegexp_44=function(t){var e;return _$isObject_42(t)&&(void 0!==(e=t[MATCH])?!!e:"RegExp"==_$classofRaw_11(t))},_$regexpFlags_69=function(){var t=_$anObject_5(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},__SPECIES_72=_$wellKnownSymbol_90("species"),_$setSpecies_72=function(t){var e=_$getBuiltIn_31(t),n=_$objectDefineProperty_51.f;_$descriptors_21&&e&&!e[__SPECIES_72]&&n(e,__SPECIES_72,{configurable:!0,get:function(){return this}})},_$esRegexpConstructor_112={},__defineProperty_112=_$objectDefineProperty_51.f,getOwnPropertyNames=_$objectGetOwnPropertyNames_54.f,__MATCH_112=_$wellKnownSymbol_90("match"),NativeRegExp=_$global_32.RegExp,RegExpPrototype=NativeRegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1,__FORCED_112=_$descriptors_21&&_$isForced_41("RegExp",!CORRECT_NEW||_$fails_26(function(){return re2[__MATCH_112]=!1,NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||"/a/i"!=NativeRegExp(re1,"i")}));if(__FORCED_112){for(var RegExpWrapper=function(t,e){var n=this instanceof RegExpWrapper,r=_$isRegexp_44(t),i=void 0===e;return!n&&r&&t.constructor===RegExpWrapper&&i?t:_$inheritIfRequired_38(CORRECT_NEW?new NativeRegExp(r&&!i?t.source:t,e):NativeRegExp((r=t instanceof RegExpWrapper)?t.source:t,r&&i?_$regexpFlags_69.call(t):e),n?this:RegExpPrototype,RegExpWrapper)},proxy=function(t){t in RegExpWrapper||__defineProperty_112(RegExpWrapper,t,{configurable:!0,get:function(){return NativeRegExp[t]},set:function(e){NativeRegExp[t]=e}})},__keys_112=getOwnPropertyNames(NativeRegExp),index=0;__keys_112.length>index;)proxy(__keys_112[index++]);RegExpPrototype.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype,_$redefine_66(_$global_32,"RegExp",RegExpWrapper)}_$setSpecies_72("RegExp");var nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=function(){var t=/a/,e=/b*/g;return nativeExec.call(t,"a"),nativeExec.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED;PATCH&&(patchedExec=function(t){var e,n,r,i,o=this;return NPCG_INCLUDED&&(n=new RegExp("^"+o.source+"$(?!\\s)",_$regexpFlags_69.call(o))),UPDATES_LAST_INDEX_WRONG&&(e=o.lastIndex),r=nativeExec.call(o,t),UPDATES_LAST_INDEX_WRONG&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),NPCG_INCLUDED&&r&&r.length>1&&nativeReplace.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var _$patchedExec_68=patchedExec,_$esRegexpExec_113={};_$export_25({target:"RegExp",proto:!0,forced:/./.exec!==_$patchedExec_68},{exec:_$patchedExec_68});var _$esRegexpToString_114={},__TO_STRING_114="toString",__RegExpPrototype_114=RegExp.prototype,nativeToString=__RegExpPrototype_114[__TO_STRING_114],NOT_GENERIC=_$fails_26(function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})}),INCORRECT_NAME=nativeToString.name!=__TO_STRING_114;(NOT_GENERIC||INCORRECT_NAME)&&_$redefine_66(RegExp.prototype,__TO_STRING_114,function(){var t=_$anObject_5(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in __RegExpPrototype_114)?_$regexpFlags_69.call(t):n)},{unsafe:!0});var __createMethod_79=function(t){return function(e,n){var r,i,o=String(_$requireObjectCoercible_70(e)),s=_$toInteger_83(n),a=o.length;return s<0||s>=a?t?"":void 0:(r=o.charCodeAt(s))<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}},_$stringMultibyte_79={charAt:__createMethod_79(!0)},_$esStringIterator_115={},charAt=_$stringMultibyte_79.charAt,STRING_ITERATOR="String Iterator",__setInternalState_115=_$internalState_39.set,__getInternalState_115=_$internalState_39.getterFor(STRING_ITERATOR);_$defineIterator_19(String,"String",function(t){__setInternalState_115(this,{type:STRING_ITERATOR,string:String(t),index:0})},function(){var t,e=__getInternalState_115(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=charAt(n,r),e.index+=t.length,{value:t,done:!1})});var __SPECIES_27=_$wellKnownSymbol_90("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!_$fails_26(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!_$fails_26(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),_$fixRegexpWellKnownSymbolLogic_27=function(t,e,n,r){var i=_$wellKnownSymbol_90(t),o=!_$fails_26(function(){var e={};return e[i]=function(){return 7},7!=""[t](e)}),s=o&&!_$fails_26(function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[__SPECIES_27]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e});if(!o||!s||"replace"===t&&!REPLACE_SUPPORTS_NAMED_GROUPS||"split"===t&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var a=/./[i],c=n(i,""[t],function(t,e,n,r,i){return e.exec===_$patchedExec_68?o&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),l=c[0],u=c[1];_$redefine_66(String.prototype,t,l),_$redefine_66(RegExp.prototype,i,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)}),r&&_$createNonEnumerableProperty_16(RegExp.prototype[i],"sham",!0)}},__charAt_4=_$stringMultibyte_79.charAt,_$advanceStringIndex_4=function(t,e,n){return e+(n?__charAt_4(t,e).length:1)},_$regexpExecAbstract_67=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==_$classofRaw_11(t))throw TypeError("RegExp#exec called on incompatible receiver");return _$patchedExec_68.call(t,e)},_$esStringMatch_116={};_$fixRegexpWellKnownSymbolLogic_27("match",1,function(t,e,n){return[function(e){var n=_$requireObjectCoercible_70(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=_$anObject_5(t),o=String(this);if(!i.global)return _$regexpExecAbstract_67(i,o);var s=i.unicode;i.lastIndex=0;for(var a,c=[],l=0;null!==(a=_$regexpExecAbstract_67(i,o));){var u=String(a[0]);c[l]=u,""===u&&(i.lastIndex=_$advanceStringIndex_4(o,_$toLength_84(i.lastIndex),s)),l++}return 0===l?null:c}]});var _$esStringReplace_117={},__max_117=Math.max,__min_117=Math.min,__floor_117=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d\d?)/g,maybeToString=function(t){return void 0===t?t:String(t)};_$fixRegexpWellKnownSymbolLogic_27("replace",2,function(t,e,n){return[function(n,r){var i=_$requireObjectCoercible_70(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,i){var o=n(e,t,this,i);if(o.done)return o.value;var s=_$anObject_5(t),a=String(this),c="function"==typeof i;c||(i=String(i));var l=s.global;if(l){var u=s.unicode;s.lastIndex=0}for(var p=[];;){var h=_$regexpExecAbstract_67(s,a);if(null===h)break;if(p.push(h),!l)break;""===String(h[0])&&(s.lastIndex=_$advanceStringIndex_4(a,_$toLength_84(s.lastIndex),u))}for(var f="",d=0,_=0;_<p.length;_++){h=p[_];for(var m=String(h[0]),y=__max_117(__min_117(_$toInteger_83(h.index),a.length),0),g=[],v=1;v<h.length;v++)g.push(maybeToString(h[v]));var b=h.groups;if(c){var E=[m].concat(g,y,a);void 0!==b&&E.push(b);var S=String(i.apply(void 0,E))}else S=r(m,a,y,g,b,i);y>=d&&(f+=a.slice(d,y)+S,d=y+m.length)}return f+a.slice(d)}];function r(t,n,r,i,o,s){var a=r+t.length,c=i.length,l=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==o&&(o=_$toObject_85(o),l=SUBSTITUTION_SYMBOLS),e.call(s,l,function(e,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":l=o[s.slice(1,-1)];break;default:var u=+s;if(0===u)return e;if(u>c){var p=__floor_117(u/10);return 0===p?e:p<=c?void 0===i[p-1]?s.charAt(1):i[p-1]+s.charAt(1):e}l=i[u-1]}return void 0===l?"":l})}});var __SPECIES_78=_$wellKnownSymbol_90("species"),_$speciesConstructor_78=function(t,e){var n,r=_$anObject_5(t).constructor;return void 0===r||null==(n=_$anObject_5(r)[__SPECIES_78])?e:_$aFunction_1(n)},_$esStringSplit_118={},arrayPush=[].push,__min_118=Math.min,MAX_UINT32=4294967295,SUPPORTS_Y=!_$fails_26(function(){return!RegExp(MAX_UINT32,"y")});_$fixRegexpWellKnownSymbolLogic_27("split",2,function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(_$requireObjectCoercible_70(this)),i=void 0===n?MAX_UINT32:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!_$isRegexp_44(t))return e.call(r,t,i);for(var o,s,a,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,p=new RegExp(t.source,l+"g");(o=_$patchedExec_68.call(p,r))&&!((s=p.lastIndex)>u&&(c.push(r.slice(u,o.index)),o.length>1&&o.index<r.length&&arrayPush.apply(c,o.slice(1)),a=o[0].length,u=s,c.length>=i));)p.lastIndex===o.index&&p.lastIndex++;return u===r.length?!a&&p.test("")||c.push(""):c.push(r.slice(u)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=_$requireObjectCoercible_70(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var s=_$anObject_5(t),a=String(this),c=_$speciesConstructor_78(s,RegExp),l=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),p=new c(SUPPORTS_Y?s:"^(?:"+s.source+")",u),h=void 0===i?MAX_UINT32:i>>>0;if(0===h)return[];if(0===a.length)return null===_$regexpExecAbstract_67(p,a)?[a]:[];for(var f=0,d=0,_=[];d<a.length;){p.lastIndex=SUPPORTS_Y?d:0;var m,y=_$regexpExecAbstract_67(p,SUPPORTS_Y?a:a.slice(d));if(null===y||(m=__min_118(_$toLength_84(p.lastIndex+(SUPPORTS_Y?0:d)),a.length))===f)d=_$advanceStringIndex_4(a,d,l);else{if(_.push(a.slice(f,d)),_.length===h)return _;for(var g=1;g<=y.length-1;g++)if(_.push(y[g]),_.length===h)return _;d=f=m}}return _.push(a.slice(f)),_}]},!SUPPORTS_Y);var non="âÂá ",_$forcedStringTrimMethod_28=function(t){return _$fails_26(function(){return!!_$whitespaces_91[t]()||non[t]()!=non||_$whitespaces_91[t].name!==t})},_$esStringTrim_119={},$trim=_$stringTrim_80.trim;_$export_25({target:"String",proto:!0,forced:_$forcedStringTrimMethod_28("trim")},{trim:function(){return $trim(this)}});var _$domIterables_23={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_$webDomCollectionsIterator_123={},__ITERATOR_123=_$wellKnownSymbol_90("iterator"),__TO_STRING_TAG_123=_$wellKnownSymbol_90("toStringTag"),ArrayValues=_$esArrayIterator_98.values;for(var COLLECTION_NAME in _$domIterables_23){var __Collection_123=_$global_32[COLLECTION_NAME],CollectionPrototype=__Collection_123&&__Collection_123.prototype;if(CollectionPrototype){if(CollectionPrototype[__ITERATOR_123]!==ArrayValues)try{_$createNonEnumerableProperty_16(CollectionPrototype,__ITERATOR_123,ArrayValues)}catch(t){CollectionPrototype[__ITERATOR_123]=ArrayValues}if(CollectionPrototype[__TO_STRING_TAG_123]||_$createNonEnumerableProperty_16(CollectionPrototype,__TO_STRING_TAG_123,COLLECTION_NAME),_$domIterables_23[COLLECTION_NAME])for(var METHOD_NAME in _$esArrayIterator_98)if(CollectionPrototype[METHOD_NAME]!==_$esArrayIterator_98[METHOD_NAME])try{_$createNonEnumerableProperty_16(CollectionPrototype,METHOD_NAME,_$esArrayIterator_98[METHOD_NAME])}catch(t){CollectionPrototype[METHOD_NAME]=_$esArrayIterator_98[METHOD_NAME]}}}var _$webTimers_124={},__slice_124=[].slice,MSIE=/MSIE .\./.test(_$userAgent_88),__wrap_124=function(t){return function(e,n){var r=arguments.length>2,i=r?__slice_124.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};_$export_25({global:!0,bind:!0,forced:MSIE},{setTimeout:__wrap_124(_$global_32.setTimeout),setInterval:__wrap_124(_$global_32.setInterval)});var _$webUrlToJson_125={};_$export_25({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var __slice_29=[].slice,factories={},construct=function(t,e,n){if(!(e in factories)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";factories[e]=Function("C,a","return new C("+r.join(",")+")")}return factories[e](t,n)},_$functionBind_29=Function.bind||function(t){var e=_$aFunction_1(this),n=__slice_29.call(arguments,1),r=function(){var i=n.concat(__slice_29.call(arguments));return this instanceof r?construct(e,i.length,i):e.apply(t,i)};return _$isObject_42(e.prototype)&&(r.prototype=e.prototype),r},_$esFunctionBind_107={};_$export_25({target:"Function",proto:!0},{bind:_$functionBind_29});var _$index_215={exports:{}};return function(t,e){var n;(n=_$index_215.exports=_$derby_derby.createApp("todos",t)).use(_$derbyDebug_130),n.serverUse(_$index_215,"derby-stylus"),n.loadViews(e),n.loadStyles(e),n.component(_$ConnectionAlert_129),n.component(_$BeforeUnload_128),n.get("/",function(t){return t.redirect("/home")}),n.get("/:groupName",function(t,e,n,r){var i,o,s;return o=n.groupName,/^[a-zA-Z0-9_-]+$/.test(o)?(i=e.at("groups."+o),s=e.query("todos",{group:o}),e.subscribe(i,s,function(n){var s,a,c;return n?r(n):(null==i.get()&&(s=e.add("todos",{group:o,completed:!0,text:"Done already"}),a=e.add("todos",{group:o,completed:!1,text:"Example todo"}),c=e.add("todos",{group:o,completed:!1,text:"Another example"}),i.create({todoIds:[a,c,s]})),t.render())})):r()}),n.component("todo-list",function(){function t(){}return t.prototype.init=function(){return this.groupName=this.getAttribute("groupName"),this.newTodo=this.model.at("newTodo"),this.todoIds=this.model.scope("groups."+this.groupName+".todoIds"),this.todos=this.model.scope("todos"),this.model.ref("todoIds",this.todoIds),this.model.start("remainingTodos",this.todoIds,this.todos,function(t,e){var n,r,i,o;if(i=0,!t||!e)return i;for(n=0,r=t.length;n<r;n++)(o=e[t[n]])&&!o.completed&&i++;return i})},t.prototype.create=function(){var t,e;return _$jquery191Min_216({}),_$jqueryUi1103CustomMin_217({}),(t=$(this.todosContainer)).sortable({handle:".handle",axis:"y",containment:"#dragbox",update:(e=this,function(n,r){var i,o,s;return s=t.children().index(r.item),t.sortable("cancel"),8===(o=e.todosContainer.childNodes[1]).nodeType&&o.parentNode.insertBefore(o,e.todosContainer.firstChild),i=t.children().index(r.item),e.todoIds.move(i,s)})}),this.todos.on("change","*.completed",function(t){return function(e,n,r,i){var o,s;if(n&&i&&(o=null!=(s=t.todoIds.get())?s.indexOf(e):void 0)>=0)return t.todoIds.move(o,-1)}}(this))},t.prototype.add=function(){var t,e,n,r,i,o,s;if(s=this.newTodo.del()){for(t=this.todos.add({group:this.groupName,completed:!1,text:s}),e=r=0,i=(o=this.todoIds.get()).length;r<i&&(n=o[e],!this.todos.at(n+".completed").get());e=++r);return this.todoIds.insert(e,t)}},t.prototype.remove=function(t){var e;return e=this.todoIds.remove(t)[0],this.todos.del(e)},t}())}.call(this,"/todos/index.coffee","/todos"),_$index_215=_$index_215.exports,exposedRequire.m.racer=_$lib_racer,exposedRequire.m.derby=_$derby_derby,exposedRequire}("function"==typeof require?require:void 0);
//# sourceMappingURL=/derby/todos-d829e76f535e7020440421d50196284a.map.json