"use strict";

require("core-js/modules/es.date.to-string");

require("core-js/modules/es.function.name");

require("core-js/modules/es.object.to-string");

require("core-js/modules/es.regexp.to-string");

var test = require('tape');

var parse = require('acorn').parse;

var transformAst = require('../');

test('transform parsed ast', function (t) {
  var src = "\n    function a (b) {\n      return b + b\n    }\n    a(10)\n  ";
  var ast = parse(src);
  var result = transformAst(src, {
    ast: ast,
    parser: {
      parse: t.fail
    }
  }, function (node) {
    if (node.type === 'Identifier') {
      node.edit.update(node.name.toUpperCase());
    }
  }).toString();
  t.equal(result, "\n    function A (B) {\n      return B + B\n    }\n    A(10)\n  ");
  t.end();
});