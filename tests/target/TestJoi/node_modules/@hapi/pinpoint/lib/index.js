'use strict';

var internals = {};

exports.location = function () {
  var depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  var orig = Error.prepareStackTrace;

  Error.prepareStackTrace = function (ignore, stack) {
    return stack;
  };

  var capture = {};
  Error.captureStackTrace(capture, this);
  var line = capture.stack[depth + 1];
  Error.prepareStackTrace = orig;
  return {
    filename: line.getFileName(),
    line: line.getLineNumber()
  };
};