import { ModPipe } from '../pipe';


export default class ExtPipe extends ModPipe {
    constructor() {
        super(...arguments);
    }

    static schema() {
        return {
            description: 'Move files to other directory.',
            properties: {
                dir: {
                    description: 'Target directory',
                    type: 'string'
                }
            },
            required: ['dir']
        };
    }

    rename(name) {
        const pathname = name.split('/');
        const segments = this.config.dir.split('/');

        while (segments.length && segments.slice(-1)[0] === '..') {
            pathname.shift();
            segments.pop();
        }

        return segments.concat(pathname).join('/');
    }
}
